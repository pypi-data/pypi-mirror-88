(this["webpackJsonpfast-dataset-cleaner"]=this["webpackJsonpfast-dataset-cleaner"]||[]).push([[0],{103:function(e,t){},138:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(66),c=a.n(i),s=(a(75),a(3)),l=a(28),u=a.n(l),g=a(67),d=a.n(g),f=function(e){return{isNightMode:e,unit:8,color:{FAST_DATASET_CLEANER:"#00155A",FAST_DATASET_CLEANER_LIGHT:"#2457ff",page:e?"#333":"#fff",reversePage:e?"#fff":"#333",pageNight:"#333",pageDay:"#fff",VALID:"#3caf40",NOTVALID:"#e45247",banner:"#000e3e",bannerText:"#fff",bannerSeparator:"#ddd",overlay:"#000"},speed:{fast:.3,veryFast:.15,ultraFast:0},fontSize:{small:10,medium:14,large:16,xlarge:20},fontFamily:"Ubuntu",opacity:{light:.2,medium:.5,dark:.8},breakpoints:{small:"@media (max-width: 639px)",medium:"@media (min-width: 640px) and (max-width: 1047px)",large:"@media (min-width: 1048px) and (max-width: 1450px)",xlarge:"@media (min-width: 1451px)"}}},m=(a(138),a(1)),p=a(2),h=a(14),b=a(15),v=["ArrowLeft"],x=["ArrowRight"],E=["Enter"],O=[" ","m"],S=["g","i"],w=function(e){return Object(r.useEffect)((function(){return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[e])},y=function(e,t,a,n){var r=e.key;v.includes(r)?t():x.includes(r)?a():E.includes(r)&&n()},j=function(e){return localStorage.getItem(e)},k=function(e,t){return localStorage.setItem(e,t.trim())},C=function(){return j("annotator")},A=["2","4","6","8"],I=function(){return parseInt(j("imagesPerPage")||"8")},_=function(e){return k("imagesPerPage",e)},P=function(){return j("sha_pass")},N=function(e){return k("sha_pass",e)},M=function(){return j("datasetPath")},H=function(e){return k("datasetPath",e)},L=function(){return j("imagesFolder")},F=function(e){return k("imagesFolder",e)},D=function(){return j("masksFolder")},T=function(e){return k("masksFolder",e)},R=["true","false"],B=function(){return j("useMasks")},z=function(e){return k("useMasks",e)},V=function(){return j("idColumnName")},G=function(e){return k("idColumnName",e)},U=function(){return j("imagesExtension")},X=function(e){return k("imagesExtension",e)},W=function(){return j("masksExtension")},K=function(e){return k("masksExtension",e)},J=function(){return"true"===j("annotationUltraFast")},Y=a(68),$=a.n(Y);!function(e){e.PASSWORD="sha",e.IMAGES_PER_PAGE="imgPerPage",e.CSV_PATH="csv",e.IMAGES_FOLDER="imagesFolder",e.MASKS_FOLDER="masksFolder",e.USE_MASKS="useMasks",e.ID_COLUMN="idColumn",e.IMAGES_EXTENSION="imgExt",e.MASKS_EXTENSION="maskExt"}(n||(n={}));var q=function(){var e=new URL(window.location.href).origin,t=function(){var e=[],t=P(),a=M(),r=I(),o=L(),i=D(),c=B(),s=V(),l=U(),u=W();return a&&e.push("".concat(n.CSV_PATH,"=").concat(a)),r&&e.push("".concat(n.IMAGES_PER_PAGE,"=").concat(r)),s&&e.push("".concat(n.ID_COLUMN,"=").concat(s)),o&&e.push("".concat(n.IMAGES_FOLDER,"=").concat(o)),c&&e.push("".concat(n.USE_MASKS,"=").concat(c)),"true"===(null===c||void 0===c?void 0:c.toLowerCase())&&i&&e.push("".concat(n.MASKS_FOLDER,"=").concat(i)),l&&e.push("".concat(n.IMAGES_EXTENSION,"=").concat(l)),u&&e.push("".concat(n.MASKS_EXTENSION,"=").concat(u)),t&&e.push("".concat(n.PASSWORD,"=").concat(t)),e===[]?"":"?"+e.join("&")}();return"".concat(e).concat(t)};function Q(){window.history.pushState(null,"Fast Dataset Cleaner",q())}var Z=function(e,t,a){var n=e.searchParams.get(t);n&&a(n)};var ee=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.fontFamily,r=e.color,o=e.speed,i=e.isNightMode;return{button:{width:"100%",fontFamily:n,fontSize:a.large,fontWeight:"bold",padding:"".concat(t,"px ").concat(1.5*t,"px"),borderRadius:2*t,background:i?r.pageNight:r.pageDay,color:i?r.pageDay:r.pageNight,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxHeight:a.large+.25*t+3*t,cursor:"pointer",transition:"background ".concat(o.fast,"s ease-in-out, color ").concat(o.fast,"s ease-in-out")},bannerElement:{transition:"transform ".concat(o.fast," ease-in-out, opacity ").concat(o.fast," ease-in-out")},bannerHidden:{transform:"scale(0.9)",opacity:0}}}))((function(e){var t=e.title,a=e.isHidden,n=e.handleClick,r=e.css,i=e.styles;return o.a.createElement("div",r(i.bannerElement,a&&i.bannerHidden),o.a.createElement("button",Object.assign({type:"button"},r(i.button),{onClick:n}),t))}));var te=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.color,r=e.breakpoints;return{displayedText:Object(m.a)({color:n.bannerText,textAlign:"left",fontSize:a.medium,marginBlockEnd:1.5*t,textOverflow:"ellipsis",overflow:"hidden","line-break":"anywhere"},r.large,{marginBlockEnd:t})}}))((function(e){var t=e.text,a=e.css,n=e.styles;return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement("h3",a(n.displayedText),t))}));var ae=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.fontFamily,r=e.color,o=e.speed,i=e.breakpoints;return{titleInput:Object(m.a)({color:r.bannerText,textAlign:"left",fontSize:a.large,marginBlockEnd:1.5*t,textOverflow:"ellipsis",overflow:"hidden",maxHeight:a.large+.25*t},i.large,{fontSize:a.medium,marginBlockEnd:t,maxHeight:a.medium+.25*t}),inputArea:Object(m.a)({width:"calc(100% - ".concat(4*t,"px)"),fontSize:a.large,padding:"".concat(.5*t,"px ").concat(1.5*t,"px"),borderRadius:1.5*t,background:r.page,color:r.reversePage,fontFamily:n,transition:"background ".concat(o.fast,"s ease-in-out,\n                    color ").concat(o.fast,"s ease-in-out,\n                    box-shadow ").concat(o.fast,"s ease-in-out"),":focus":{boxShadow:"0 0 ".concat(t,"px 0 ").concat(r.bannerText)}},i.large,{fontSize:a.medium,width:"calc(100% - ".concat(3*t,"px)"),padding:"".concat(.5*t,"px ").concat(1*t,"px")}),bannerElement:{margin:"".concat(t,"px 0"),transition:"transform ".concat(o.fast," ease-in-out, opacity ").concat(o.fast," ease-in-out")},bannerHidden:{transform:"scale(0.9)",opacity:0}}}))((function(e){var t=e.title,a=e.isHidden,n=e.value,i=e.displayInputValue,c=e.onChange,l=e.onBlur,u=e.css,g=e.styles,d=Object(r.useState)(null===n?"":n),f=Object(s.a)(d,2),m=f[0],p=f[1];return o.a.createElement("div",u(g.bannerElement,a&&g.bannerHidden),o.a.createElement("label",null,t&&o.a.createElement("h3",u(g.titleInput),t),i&&o.a.createElement(te,{text:m}),o.a.createElement("input",Object.assign({type:"text",value:n||"",onChange:function(e){var t=e.target.value;p(t),c&&c(e)},onBlur:l},u(g.inputArea)))))})),ne={large:"".concat(16,"px 0"),xlarge:"".concat(24,"px 0")},re={large:"".concat(20,"px 0 ").concat(16,"px 0"),xlarge:"".concat(12,"px 0 ").concat(16,"px 0")},oe=Object(p.withStyles)((function(e){var t=e.unit,a=e.color,n=e.breakpoints;return{separator:Object(m.a)({width:"100%",margin:ne.xlarge,borderRadius:3*t,height:.25*t,background:a.bannerSeparator},n.large,{margin:ne.large}),thinSeparator:Object(m.a)({height:.125*t,margin:re.xlarge},n.large,{margin:re.large})}}))((function(e){var t=e.thin,a=e.css,n=e.styles;return o.a.createElement("div",a(n.separator,t&&n.thinSeparator))}));var ie=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.color,r=e.speed;return{titleSection:{color:n.bannerText,textAlign:"center",fontSize:a.xlarge,marginBlockEnd:1.5*t,marginBlockStart:.5*t,textOverflow:"ellipsis",overflow:"hidden"},bannerElement:{margin:"0 0 ".concat(t,"px 0"),transition:"transform ".concat(r.fast," ease-in-out, opacity ").concat(r.fast," ease-in-out")},bannerHidden:{transform:"scale(0.9)",opacity:0}}}))((function(e){var t=e.title,a=e.isHidden,n=e.children,r=e.css,i=e.styles;return o.a.createElement("div",r(i.bannerElement,a&&i.bannerHidden),t&&o.a.createElement("h2",r(i.titleSection),t),n,o.a.createElement(oe,{thin:!0}))}));var ce=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.fontFamily,r=e.color,o=e.speed,i=e.breakpoints;return{titleInput:Object(m.a)({color:r.bannerText,textAlign:"left",fontSize:a.large,marginBlockEnd:1.5*t,textOverflow:"ellipsis",overflow:"hidden",maxHeight:a.large+.25*t},i.large,{fontSize:a.medium,marginBlockEnd:t,maxHeight:a.medium+.25*t}),select:Object(m.a)({width:"100%",fontSize:a.large,height:a.large+2*t,padding:"".concat(.5*t,"px ").concat(1.5*t,"px"),borderRadius:1.5*t,background:r.page,color:r.reversePage,fontFamily:n,transition:"background ".concat(o.fast,"s ease-in-out,\n                    color ").concat(o.fast,"s ease-in-out,\n                    box-shadow ").concat(o.fast,"s ease-in-out"),":focus":{boxShadow:"0 0 ".concat(t,"px 0 ").concat(r.bannerText)}},i.large,{fontSize:a.medium,height:a.medium+2*t,padding:"".concat(.5*t,"px ").concat(1*t,"px")}),bannerElement:{margin:"".concat(t,"px 0"),transition:"transform ".concat(o.fast," ease-in-out, opacity ").concat(o.fast," ease-in-out")},bannerHidden:{transform:"scale(0.9)",opacity:0}}}))((function(e){var t=e.title,a=e.name,n=e.isHidden,r=e.value,i=e.options,c=e.onChange,s=e.css,l=e.styles;return o.a.createElement("div",s(l.bannerElement,n&&l.bannerHidden),o.a.createElement("label",null,o.a.createElement("h3",s(l.titleInput),t),o.a.createElement("select",Object.assign({name:a,value:r||"",onChange:c},s(l.select)),i.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))))})),se={large:40,xlarge:56},le={large:24,xlarge:32},ue={large:2,xlarge:4},ge={large:le.large-2*ue.large,xlarge:le.xlarge-2*ue.xlarge},de={large:"translateX(".concat(se.large-ge.large-2*ue.large,"px)"),xlarge:"translateX(".concat(se.xlarge-ge.xlarge-2*ue.xlarge,"px)")},fe=Object(p.withStyles)((function(e){var t=e.fontSize,a=e.color,n=e.speed,r=e.breakpoints;return{switch:Object(m.a)({position:"relative",display:"inline-block",width:se.xlarge,height:le.xlarge,backgroundColor:a.bannerSeparator,borderRadius:le.xlarge,margin:"".concat(4,"px ").concat(12,"px"),transition:"background-color ".concat(n.fast,"s ease-in-out")},r.large,{width:se.large,height:le.large}),switchChecked:{backgroundColor:a.FAST_DATASET_CLEANER_LIGHT},switchInput:{opacity:0,width:0,height:0},roundSlider:Object(m.a)({position:"absolute",top:ue.xlarge,right:0,transition:"transform ".concat(n.fast,"s ease-in-out"),borderRadius:le.xlarge,content:"",height:ge.xlarge,width:ge.xlarge,left:ue.xlarge,bottom:ue.xlarge,backgroundColor:"white"},r.large,{left:ue.large,bottom:ue.large,top:ue.large,height:ge.large,width:ge.large}),roundSliderChecked:Object(m.a)({transform:de.xlarge},r.large,{transform:de.large}),switchArea:{cursor:"pointer"},switchLegend:Object(m.a)({position:"relative",display:"inline-block",fontSize:t.medium,top:6,margin:0,color:a.pageDay},r.large,{top:2}),bannerHidden:{transform:"scale(0.9)",opacity:0}}}))((function(e){var t=e.value,a=e.stateFalse,n=e.stateTrue,i=e.isHidden,c=e.handleClick,l=e.css,u=e.styles,g=Object(r.useState)(t),d=Object(s.a)(g,2),f=d[0],m=d[1];return o.a.createElement("label",l(u.switchArea,i&&u.bannerHidden),o.a.createElement("h4",l(u.switchLegend),a),o.a.createElement("div",l(u.switch,f&&u.switchChecked),o.a.createElement("input",Object.assign({type:"checkbox",onClick:function(){var e=!f;m(e),c(e)}},l(u.switchInput))),o.a.createElement("span",l(u.roundSlider,f&&u.roundSliderChecked))),o.a.createElement("h4",l(u.switchLegend),n))})),me=function(){return window.location.reload(!1)};var pe={large:16,xlarge:24},he={large:112,xlarge:152},be="86vh",ve="85vh",xe=Object(p.withStyles)((function(e){var t=e.speed,a=e.breakpoints;return{bannerContent:Object(m.a)({width:0,margin:pe.xlarge,marginTop:he.xlarge,zIndex:2,overflowY:"auto",maxHeight:ve,transition:"width ".concat(t.fast,"s ease-in-out")},a.large,{margin:pe.large,marginTop:he.large,maxHeight:be}),bannerOpen:Object(m.a)({width:"calc(100% - 2 * ".concat(pe.xlarge,"px)")},a.large,{width:"calc(100% - 2 * ".concat(pe.large,"px)")}),postSpace:{height:8}}}))((function(e){var t=e.isClicked,a=e.css,i=e.styles,c=new URL(window.location.href).searchParams,l=c.get(n.CSV_PATH),u=c.get(n.IMAGES_PER_PAGE),g=c.get(n.PASSWORD),d=c.get(n.IMAGES_FOLDER),f=c.get(n.MASKS_FOLDER),m=c.get(n.USE_MASKS),p=c.get(n.ID_COLUMN),h=c.get(n.IMAGES_EXTENSION),b=c.get(n.MASKS_EXTENSION),v=Object(r.useState)(C()||""),x=Object(s.a)(v,2),E=x[0],O=x[1],S=Object(r.useState)(l||M()||""),w=Object(s.a)(S,2),y=w[0],j=w[1],Y=Object(r.useState)(u||I()||8),$=Object(s.a)(Y,2),q=$[0],Z=$[1],ne=Object(r.useState)(g||P()||""),re=Object(s.a)(ne,2),se=re[0],le=re[1],ue=Object(r.useState)(d||L()||""),ge=Object(s.a)(ue,2),de=ge[0],pe=ge[1],he=Object(r.useState)(f||D()||""),be=Object(s.a)(he,2),ve=be[0],xe=be[1],Ee=Object(r.useState)(m||B()||"false"),Oe=Object(s.a)(Ee,2),Se=Oe[0],we=Oe[1],ye=Object(r.useState)(p||V()||"id"),je=Object(s.a)(ye,2),ke=je[0],Ce=je[1],Ae=Object(r.useState)(h||U()||""),Ie=Object(s.a)(Ae,2),_e=Ie[0],Pe=Ie[1],Ne=Object(r.useState)(b||W()||""),Me=Object(s.a)(Ne,2),He=Me[0],Le=Me[1],Fe=Object(r.useState)(J()||!1),De=Object(s.a)(Fe,2),Te=De[0],Re=De[1];Object(r.useEffect)((function(){V()||G("id")}),[]);var Be=Object(r.useCallback)((function(e){return o.a.createElement(ae,Object.assign({isHidden:!t},e))}),[t]),ze=Object(r.useCallback)((function(e){return o.a.createElement(ce,Object.assign({isHidden:!t},e))}),[t]),Ve=Object(r.useCallback)((function(e){return o.a.createElement(fe,Object.assign({isHidden:!t},e))}),[t]),Ge=Object(r.useCallback)((function(e){return o.a.createElement(ie,Object.assign({isHidden:!t},e))}),[t]),Ue=Object(r.useCallback)((function(e){return o.a.createElement(ee,Object.assign({isHidden:!t},e))}),[t]);return o.a.createElement("div",a(i.bannerContent,t&&i.bannerOpen),t&&o.a.createElement(oe,null),o.a.createElement(Ge,{title:"Password"},o.a.createElement(Be,{value:se,onChange:function(e){var t=e.target.value;le(t),N(t),Q()}})),o.a.createElement(Ge,{title:"About the CSV"},o.a.createElement(Be,{displayInputValue:!0,title:"CSV path",value:y,onChange:function(e){var t=e.target.value;H(t),j(t),Q()}}),o.a.createElement(Be,{title:"Name of the id column",value:ke,onChange:function(e){var t=e.target.value;Ce(t),G(t),Q()}})),o.a.createElement(Ge,{title:"Images"},o.a.createElement(te,{text:"".concat(de||"/path/to/folder/","{id}").concat(_e)}),o.a.createElement(Be,{title:"Images folder",value:de,onChange:function(e){var t=e.target.value;F(t),pe(t),Q()}}),o.a.createElement(Be,{title:"Images extension",value:_e,onChange:function(e){var t=e.target.value;Pe(t),X(t),Q()}})),o.a.createElement(Ge,{title:"Masks"},o.a.createElement(ze,{title:"Use masks",name:"use_masks",value:Se,options:R,onChange:function(e){var t=e.target.value;we(t),z(t),Q()}}),"true"===Se&&o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{text:"".concat(ve||"/path/to/folder/","{id}").concat(He)}),o.a.createElement(Be,{title:"Masks folder",value:ve,onChange:function(e){var t=e.target.value;T(t),xe(t),Q()}}),o.a.createElement(Be,{title:"Masks extension",value:He,onChange:function(e){var t=e.target.value;Le(t),K(t),Q()}}))),o.a.createElement(Ge,{title:"Annotation"},o.a.createElement(Be,{title:"Annotator",value:E,onChange:function(e){var t=e.target.value;!function(e){k("annotator",e)}(t),O(t)}}),o.a.createElement(ze,{title:"Images per page",name:"img_per_page",value:q.toString(),options:A,onChange:function(e){var t=e.target.value;_(t),Z(t),Q()}}),o.a.createElement(Ve,{value:Te,stateFalse:"Fast mode",stateTrue:"Ludicrous mode",handleClick:function(e){Re(e),function(e){k("annotationUltraFast","".concat(e))}(e)}})),o.a.createElement(Ue,{title:"Get images",handleClick:me}),o.a.createElement("div",a(i.postSpace)))}));var Ee=Object(p.withStyles)((function(e){var t=e.opacity,a=e.color,n=e.speed;return{overlay:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,background:a.overlay,opacity:t.dark,transition:"opacity ".concat(n.fast,"s ease-in-out"),":hover":{cursor:"pointer"}},overlayHidden:{opacity:0}}}))((function(e){var t=e.zIndex,a=e.isVisible,n=e.handleClick,r=e.css,i=e.styles;return o.a.createElement("div",Object.assign({onClick:n,style:{zIndex:t||1}},r(a?i.overlay:i.overlayHidden)))})),Oe=function(){},Se=["input","select","button","textarea"];var we={large:64,xlarge:64},ye={large:80,xlarge:96},je={large:304,xlarge:336},ke=Object(p.withStyles)((function(e){var t=e.unit,a=e.color,n=e.speed,r=e.breakpoints;return{banner:{width:88,height:"100vh",background:a.banner,boxShadow:"0px 0px 20px 0px #000",position:"fixed",top:0,left:0,zIndex:2,cursor:"pointer",transition:"width ".concat(n.fast,"s ease-in-out")},bannerOpen:Object(m.a)({width:je.xlarge,cursor:"default"},r.large,{width:je.large}),logoClicked:Object(m.a)({transform:"rotate(720deg)",height:ye.xlarge,left:3*t,top:3*t},r.large,{height:ye.large,left:2*t,top:2*t}),logoNotClicked:{transform:"rotate(0deg)"},logo:Object(m.a)({position:"fixed",top:2*t,left:t,height:we.xlarge,cursor:"pointer",transition:"transform ".concat(n.fast,"s ease-in-out, height ").concat(n.fast,"s ease-in-out, left ").concat(n.fast,"s ease-in-out, top ").concat(n.fast,"s ease-in-out")},r.large,{height:we.large}),nightButton:Object(m.a)({position:"fixed",left:6*t+ye.xlarge,top:ye.xlarge-t,width:"calc(".concat(je.xlarge-ye.xlarge-6*t-5*t,"px)"),padding:"0 ".concat(t,"px"),opacity:1,transition:"opacity ".concat(.5*n.fast,"s ease-in-out, width ").concat(n.fast-.05,"s ease-in-out 0.05s, left ").concat(n.fast,"s ease-in-out")},r.large,{left:4*t+ye.large,top:ye.large-2*t,width:"calc(".concat(je.large-ye.large-4*t-3*t,"px)")}),nightButtonHidden:Object(m.a)({left:4*t+we.xlarge,width:"calc(".concat(88-we.xlarge-4*t-5*t,"px * 0.75)"),opacity:0},r.large,{left:4*t+we.large,width:"calc(".concat(88-we.large-4*t-5*t,"px * 0.75)")})}}))((function(e){var t=e.isBannerOpen,a=e.handleBanner,n=e.nightMode,i=e.changeNightMode,c=e.css,s=e.styles;Object(r.useEffect)((function(){var e=function(e){var n=e.key,r=document.activeElement&&-1===Se.indexOf(document.activeElement.tagName.toLowerCase());r&&O.includes(n)?a(!t):r&&t&&S.includes(n)&&me()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[t,a]);var l=function(){a(!t)},u=n?"Night mode":"Day mode";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",Object.assign({onClick:t?Oe:l},c(s.banner,t&&s.bannerOpen)),o.a.createElement("img",Object.assign({src:$.a,alt:"Logo",onClick:l},c(s.logo,t?s.logoClicked:s.logoNotClicked))),o.a.createElement("div",c(s.nightButton,!t&&s.nightButtonHidden),o.a.createElement(ee,{title:u,isHidden:!t,handleClick:i})),o.a.createElement(xe,{isClicked:t})),o.a.createElement(Ee,{isVisible:t,handleClick:function(){a(!1)}}))}));var Ce={large:"calc(100vh / ".concat(I()/2," - ").concat(8,"px)"),xlarge:"calc(100vh / ".concat(I()/2," - ").concat(16,"px)")},Ae=Object(p.withStyles)((function(e){var t=e.unit,a=e.color,n=e.speed,r=e.fontSize,o=e.breakpoints;return{card:Object(m.a)({maxHeight:"calc(100vh / ".concat(I()/2,")"),border:"1px solid #ccc",borderRadius:3*t,margin:"".concat(.5*t,"px ").concat(1*t,"px"),height:"calc(100% - 2 * ".concat(.75*t,"px)"),minHeight:"calc((100vh - ".concat(4*t+2*t,"px) / ").concat(I()/2," - ").concat(1*t,"px)"),transition:"background ".concat(n.fast,"s ease,\n            box-shadow ").concat(n.fast,"s ease,\n            transform ").concat(n.fast,"s ease,\n            opacity ").concat(n.fast,"s ease"),overflow:"hidden",cursor:"pointer",":hover":{boxShadow:"0 0 ".concat(2.5*t,"px 0 #000")}},o.large,{maxHeight:"calc(100vh / ".concat(I()/2," - 2 * ").concat(.5*t,"px)"),height:"calc(100% - 2 * ".concat(.5*t,"px)"),margin:"".concat(.25*t,"px ").concat(.5*t,"px")}),cardUltraFast:{transition:"background ".concat(n.ultraFast,"s ease,\n            box-shadow ").concat(n.ultraFast,"s ease,\n            transform ").concat(n.ultraFast,"s ease,\n            opacity ").concat(n.ultraFast,"s ease")},cardValid:{background:a.VALID},cardNotValid:{background:a.NOTVALID},cardNotValidUltraFast:{opacity:.05},annotated:{marginTop:t,fontSize:r.large},cardAnnotated:{opacity:.5},idCard:Object(m.a)({fontWeight:"bold",position:"absolute",width:5*t,borderRight:"1px solid #ccc",height:"100%",maxHeight:Ce.xlarge},o.large,{maxHeight:Ce.large}),id:{marginTop:1.5*t},image:Object(m.a)({height:"100%",marginLeft:5*t,maxHeight:Ce.xlarge,maxWidth:"calc(100% - ".concat(5*t+2*t,"px)")},o.large,{maxHeight:Ce.large})}}))((function(e){var t=e.isBannerOpen,a=e.sample,n=e.navigationDirection,i=e.fetchService,c=e.handleChangeValue,l=e.css,u=e.styles,g=a.id,d=a.value,f=a.sampleNumber,m=a.annotated,p=a.changing,v=a.name,x=Object(r.useState)(d),E=Object(s.a)(x,2),O=E[0],S=E[1],y=J();Object(r.useEffect)((function(){return S(d)}),[d]);var j=Object(r.useState)(!1),k=Object(s.a)(j,2),C=k[0],A=k[1];Object(r.useEffect)((function(){return A(!0),function(){return A(!1)}}),[]);var I=Object(r.useCallback)((function(){c(!O,f),S(!O)}),[O,f,c]),_=Object(r.useCallback)((function(e){var a=e.key;parseInt(a)!==g||t||I()}),[g,t,I]);w(_);var P={maxWidth:"45vw",width:"calc((100vw - ".concat(88,"px) / 2 - ").concat(80,"px)"),display:"inline-block"},N="translateX(".concat("left"===n?"-":"","100vw)"),M={from:Object(h.a)({opacity:0,transform:N},P),enter:Object(h.a)({opacity:1,transform:"translateX(0)"},P),leave:Object(h.a)({opacity:0,transform:N},P)},H=Object(b.b)(C,null,M);return o.a.createElement(o.a.Fragment,null,H.map((function(e){var t=e.item,a=e.key,n=e.props;return t&&o.a.createElement(b.a.div,{key:a,style:n},o.a.createElement("div",Object.assign({onClick:I,onKeyDown:_},l(u.card,y&&u.cardUltraFast,O?u.cardValid:u.cardNotValid,m&&!p&&u.cardAnnotated,y&&!O&&u.cardNotValidUltraFast)),o.a.createElement("div",l(u.idCard),o.a.createElement("div",l(u.id),g),m&&o.a.createElement("div",l(u.annotated),O?"\u2714":"\u2718")),o.a.createElement("img",Object.assign({src:i.getImage(v),alt:"source"},l(u.image)))))})))}));var Ie,_e={large:"calc(100vh - 2 * ".concat(4,"px)"),xlarge:"calc(100vh - 2 * ".concat(8,"px)")},Pe=Object(p.withStyles)((function(e){var t=e.color,a=e.unit,n=e.speed,r=e.breakpoints;return{mainColumn:Object(m.a)({background:t.page,marginLeft:88+2*a,marginRight:0,paddingTop:a,paddingBottom:a,display:"flex",flexWrap:"wrap",height:_e.xlarge,transition:"background ".concat(n.fast,"s ease-in-out")},r.large,{paddingTop:.5*a,paddingBottom:.5*a,marginLeft:88+4*a,height:_e.large})}}))((function(e){var t=e.isBannerOpen,a=e.images,n=e.fetchService,r=e.navigationDirection,i=e.handleChangeValue,c=e.css,s=e.styles;return o.a.createElement("div",c(s.mainColumn),a.map((function(e){return o.a.createElement(Ae,{sample:e,isBannerOpen:t,handleChangeValue:i,navigationDirection:r,fetchService:n,key:e.name})})))})),Ne=a(9),Me=a.n(Ne),He=a(19),Le=a(5),Fe=a(8),De="get-annotations",Te="get-image",Re="annotate",Be={accept:"application/json","content-type":"application/json","Access-Control-Allow-Origin":"*"},ze=function(e){return{method:"POST",headers:Be,body:JSON.stringify(Object(h.a)({sha:P()},e))}};!function(e){e.ID="id",e.PASSWORD="sha"}(Ie||(Ie={}));var Ve=function(e){return e.map((function(e){return function(e){return{id:e.index%I()+1,sampleNumber:e.index,value:"string"==typeof e.value||e.value,name:e.id,annotated:"None"!==e.value,changing:!1}}(e)}))},Ge=function(){function e(t){var a=this;Object(Le.a)(this,e),this.api_address=void 0,this.page=void 0,this.images=void 0,this.totalImages=void 0,this.processedImages=void 0,this.samples=void 0,this.firstLoading=!0,this.getSample=function(){return a.samples||[]},this.getProgress=function(){return{currentPage:a.page,numberImagesPerPage:I(),totalImages:a.totalImages}},this.changePage=function(e,t){return e?(a.page=t,a.getAnnotations()):new Promise((function(){}))},this.incrPage=function(){var e=a.page*I()<=a.totalImages;return a.changePage(e,a.page+1)},this.decrPage=function(){var e=a.page>0;return a.changePage(e,a.page-1)},this.nextPage=function(){a.annotate();var e=a.page*I()<=a.totalImages;return a.changePage(e,a.page+1)},this.setValue=function(e,t){a.samples=a.samples&&a.samples.map((function(a){if(a.sampleNumber===t){var n=a;return a.value=e,a.changing=!a.changing,n}return a}))},this.get=function(){var e=Object(He.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(a.api_address).concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.post=function(){var e=Object(He.a)(Me.a.mark((function e(t,n){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(a.api_address).concat(t),ze(n)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getAnnotations=Object(He.a)(Me.a.mark((function e(){var t,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.firstLoading?-1:a.page*I(),n={first:t,offset:I(),sha:P(),csv_path:M(),images_folder:L(),masks_folder:D(),with_masks:"true"===B(),id_column_name:V(),image_ext:U(),mask_ext:W()},e.abrupt("return",a.post("".concat(De),n).then((function(e){e.error?alert(e.error):(a.firstLoading&&(a.firstLoading=!1),a.treatNewData(e))})));case 3:case"end":return e.stop()}}),e)}))),this.getImage=function(e){return"".concat(a.api_address).concat(Te,"?").concat(Ie.ID,"=").concat(e,"&").concat(Ie.PASSWORD,"=").concat(P())},this.annotate=Object(He.a)(Me.a.mark((function e(){var t,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},null===(t=a.samples)||void 0===t||t.map((function(e){return n[e.name]=e.value})),r={annotator:C(),annotations:n,sha:P()},a.post(Re,r).then((function(e){}));case 4:case"end":return e.stop()}}),e)}))),this.api_address=t.api_address,this.page=t.page||0,this.images=t.images||[],this.totalImages=t.totalImages||0,this.processedImages=t.processedImages||0,this.samples=t.images&&Ve(t.images)||[]}return Object(Fe.a)(e,[{key:"treatNewData",value:function(e){var t=e.images,a=e.total,n=e.processed;if(t&&a&&void 0!==n){if(this.images=t,this.totalImages=a,this.processedImages=n,n<a)this.page=0!==t.length?t[0].index/I():this.page;else{var r=Math.ceil((a-1)/I());this.page=0!==t.length?this.page:r}this.samples=Ve(t)}}}]),e}(),Ue=a(69),Xe=function(e,t,a){var n=e.deltaX,r=e.deltaY;!(1!==window.visualViewport.scale)&&Math.abs(n)>10&&Math.abs(r)<=5&&(n>0?a():t())},We=function(){return window.location.reload(!1)},Ke=function(e){var t=e.css,a=e.styles;return o.a.createElement("div",t(a.card),o.a.createElement("p",t(a.paragraph),"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2554\u2557\u2500\u2500\u2500\u2554\u2557\u2500\u2500\u2500\u2554\u2557\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2554\u2557\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2554\u255d\u255a\u2557\u2500\u2500\u2551\u2551\u2500\u2500\u2554\u255d\u255a\u2557\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2551\u2551\n\u2554\u2550\u2550\u2566\u2550\u2550\u2566\u2550\u2557\u2554\u2550\u2550\u2566\u2550\u2566\u2550\u2569\u2557\u2554\u256c\u2557\u2554\u2563\u2551\u2554\u2550\u2569\u2557\u2554\u256c\u2566\u2550\u2550\u2566\u2550\u2557\u2554\u2550\u2550\u2563\u2551\n\u2551\u2554\u2550\u2563\u2554\u2557\u2551\u2554\u2557\u2563\u2554\u2557\u2551\u2554\u2563\u2554\u2557\u2551\u2551\u2551\u2551\u2551\u2551\u2551\u2551\u2554\u2557\u2551\u2551\u2560\u2563\u2554\u2557\u2551\u2554\u2557\u2563\u2550\u2550\u256c\u255d\n\u2551\u255a\u2550\u2563\u255a\u255d\u2551\u2551\u2551\u2551\u255a\u255d\u2551\u2551\u2551\u2554\u2557\u2551\u255a\u2563\u255a\u255d\u2551\u255a\u2563\u2554\u2557\u2551\u255a\u2563\u2551\u255a\u255d\u2551\u2551\u2551\u2560\u2550\u2550\u2560\u2557\n\u255a\u2550\u2550\u2569\u2550\u2550\u2569\u255d\u255a\u2569\u2550\u2557\u2560\u255d\u255a\u255d\u255a\u2569\u2550\u2569\u2550\u2550\u2569\u2550\u2569\u255d\u255a\u2569\u2550\u2569\u2569\u2550\u2550\u2569\u255d\u255a\u2569\u2550\u2550\u2569\u255d\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2554\u2550\u255d\u2551\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u255a\u2550\u2550\u255d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"),o.a.createElement("p",null,"\ud83c\udf8a\ud83c\udf89\ud83d\udc4f Congratulations! \ud83d\udc4f\ud83c\udf89\ud83c\udf8a \n\nYou reached the end of your dataset!\n\nRefresh the page to be sure that you annotated all the images.\n\n If after a refresh you get here, you're good to go on ! \ud83c\udfcb\ud83d\udcbb"),o.a.createElement("div",t(a.reloadButton),o.a.createElement(ee,{title:"Reload the page",isHidden:!1,handleClick:We})))};var Je=Object(p.withStyles)((function(e){var t=e.unit,a=e.color,n=e.fontSize;return{card:{display:"block",position:"fixed",top:0,left:0,color:a.reversePage,fontSize:n.xlarge,whiteSpace:"pre-line",margin:"auto",marginTop:"20vh",width:"100vw"},paragraph:{margin:"".concat(4*t,"px 0")},reloadButton:{width:"20%",margin:"auto"}}}))((function(e){var t=e.navigationDirection,a=Object(r.useState)(!1),n=Object(s.a)(a,2),i=n[0],c=n[1];Object(r.useEffect)((function(){return c(!0),function(){return c(!1)}}),[]);var l="translateX(".concat("left"===t?"-":"","100vw)"),u={from:{opacity:0,transform:l},enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:l}},g=Object(b.b)(i,null,u);return o.a.createElement(o.a.Fragment,null,g.map((function(t){var a=t.item,n=t.key,r=t.props;return a&&o.a.createElement(b.a.div,{key:n,style:r},o.a.createElement(Ke,e))})))}));var Ye=Object(p.withStyles)((function(e){var t=e.unit,a=e.fontSize,n=e.color,r=e.speed,o=e.isNightMode,i=e.breakpoints;return{title:{marginBlockStart:t,marginBlockEnd:t,textAlign:"right"},progress:{position:"absolute",right:0,top:0,fontSize:a.medium,paddingRight:2*t,fontWeight:"bold",borderRadius:2*t,background:o?n.pageNight:n.pageDay,color:o?n.pageDay:n.pageNight,transition:"background ".concat(r.fast,"s ease-in-out, color ").concat(r.fast,"s ease-in-out")},bannerElement:{transition:"transform ".concat(r.fast," ease-in-out, opacity ").concat(r.fast," ease-in-out")},bannerHidden:{transform:"scale(0.9)",opacity:0},arrow:Object(m.a)({display:"inline-block",margin:"".concat(2*t,"px ").concat(.25*t,"px"),cursor:"pointer"},i.large,{margin:"".concat(1.5*t,"px ").concat(.125*t,"px")}),navigationArrows:{position:"absolute",display:"inline-block",top:4.5*t}}}))((function(e){var t=e.progress,a=e.handlePressLeft,n=e.handlePressRight,r=e.css,i=e.styles,c=t.currentPage,s=t.numberImagesPerPage,l=t.totalImages,u=l>0?c*s+1:0,g=Math.min((c+1)*s,l),d=(c*s*100/l).toPrecision(4);return o.a.createElement("div",r(i.progress),o.a.createElement("h3",r(i.title),u,"-",g," / ",l),o.a.createElement("h3",r(i.title),"(",d,"%)"),o.a.createElement("h3",r(i.navigationArrows),c>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",Object.assign({onClick:a},r(i.arrow)),"\u2b05"),o.a.createElement("div",r(i.arrow),"|")),o.a.createElement("div",Object.assign({onClick:n},r(i.arrow)),"\u2b95")))})),$e=new Ge({api_address:"".concat(window.location.origin,"/api/")}),qe=function(){};var Qe=function(e){var t=e.nightMode,a=e.changeNightMode,i=Object(r.useState)(!C()||!M()||!V()||!P()),c=Object(s.a)(i,2),l=c[0],u=c[1],g=Object(r.useState)([]),d=Object(s.a)(g,2),f=d[0],m=d[1],p=Object(r.useState)("none"),h=Object(s.a)(p,2),b=h[0],v=h[1],x=function(e){v(e),m($e.getSample())};Object(r.useEffect)((function(){!function(){var e=new URL(window.location.href);Z(e,n.PASSWORD,N),Z(e,n.CSV_PATH,H),Z(e,n.IMAGES_PER_PAGE,_),Z(e,n.IMAGES_FOLDER,F),Z(e,n.MASKS_FOLDER,T),Z(e,n.USE_MASKS,z),Z(e,n.ID_COLUMN,G),Z(e,n.IMAGES_EXTENSION,X),Z(e,n.MASKS_EXTENSION,K)}(),$e.getAnnotations().finally((function(){return x("none")}))}),[]);var E,O=function(){return $e.decrPage().then((function(){return x("left")}))},S=function(){return $e.incrPage().then((function(){return x("right")}))},j=function(){return $e.nextPage().then((function(){return x("right")}))};return w((function(e){return l?qe:y(e,O,S,j)})),E=function(e){return l?qe:Xe(e,O,S)},Object(r.useEffect)((function(){var e=Object(Ue.throttle)(E,320);return window.addEventListener("wheel",e),function(){return window.removeEventListener("wheel",e)}}),[E]),o.a.createElement("div",{className:"App"},o.a.createElement(ke,{handleBanner:u,isBannerOpen:l,nightMode:t,changeNightMode:a}),0!==f.length?o.a.createElement(Pe,{images:f,isBannerOpen:l,handleChangeValue:function(e,t){return $e.setValue(e,t)},navigationDirection:b,fetchService:$e}):o.a.createElement(Je,{navigationDirection:b}),0!==f.length&&o.a.createElement(Ye,{progress:$e.getProgress(),handlePressLeft:O,handlePressRight:S}))},Ze=(new Date).getHours(),et=Ze<=8||Ze>=20;var tt=function(){var e=Object(r.useState)(et),t=Object(s.a)(e,2),a=t[0],n=t[1];return document.body.style=function(e){return"transition: background ".concat(f(e).speed.fast,"s ease; background: ").concat(f(e).color.page)}(a),o.a.createElement(u.a.Provider,{value:{stylesInterface:d.a,stylesTheme:f(a)}},o.a.createElement(Qe,{nightMode:a,changeNightMode:function(){return n(!a)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,a){e.exports=a.p+"static/media/menu_logo.3c82aef9.png"},70:function(e,t,a){e.exports=a(150)},75:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.842bbfb2.chunk.js.map