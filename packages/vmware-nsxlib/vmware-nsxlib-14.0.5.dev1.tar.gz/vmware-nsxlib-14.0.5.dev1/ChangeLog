CHANGES
=======

14.0.5.1
--------

* Fix segment port attach & detach
* Add new StaleRevision error
* Add another error\_code for StaleRevision error
* Use PUT instead of PATCH for segment port detach
* Fix firewall section add rule/s retry
* Add support for policy DHCP v6
* Set empty values in segment subnet when not set
* Retry all delete calles on StaleRevision exception
* Fix segment PATCH data
* Remove misplaced admin\_state check
* Refactor version dependant attributes in policy
* Retry on internal server error 98
* Support policy segment & port admin state
* Add policy DHCP related resources support
* Cherry pick NSX 3 related patches to Stein
* Fix test pep8 issue

14.0.5
------

* Remove recursive call in \_proxy
* Add search index out of sync exception
* Add rule Tag parameter to build\_entry api
* NSXP: add rule tag support
* Fix policy LB member deletion
* Fix policy tier1 get\_realized\_id bug
* Add caching for mdproxy & edge clusters for TZ validations
* Initial support for Policy IPSEC VPN resources
* NSXP: complete port attach/detach methods
* Use realization ID if not found by search api
* Fix few policy transactions issues
* Add exception for vlan conflicts
* Add retry upon LB virtual server update conflicts
* Add support for policy Metadata proxy resource
* Do not wait in \_get\_realized\_id\_using\_search upon ERROR
* Do not use None values on patch partial update calls
* Support PATCH partial updates
* Use search-by-tags to get segment/tier1 realization Id
* Add ability to control policy realization interval
* Use policy realization retry parameters when necessary
* Fix realization retry parameters
* Update NSX ver 3.0 features
* Retry on segment deletion if VMs not deleted yet
* updates for stable branch
* Retry on create-with-parent in NsxPendingDelete event
* Handle overlap ips errors
* Add host switch profiles api
* Fix get\_tag\_limits to be more careful
* Add feature flag for ENS with QOS since 2.5
* Add generic session persistence api
* Allow updating logical port tags
* Support updating Policy tier1 route adv together with tier0 connectivity
* Pass NDRA profile id only when specified
* Fix removal of tier0\_path of a tier1
* Suppress InsecureRequestWarning warnings
* NSX|V3+P: Change max allowed host routes
* Add more information to realization errors logging
* Use empty string instead of None for removing edge-cluster
* Fix policy remove\_edge\_cluster
* Retry policy create by PATCH in case of NsxPendingDelete error
* Add exception for deleting an object in use
* update zuul config
* Remove unused pool\_data parameter from policy LB pool actions
* NSXP LB: use \_update instead of update()
* NSXP LB: Fix SSL profile handling
* Define and use realization exceptions
* Fix Policy LB pool monitor actions
* Adding the option to configure disabled mac profile
* Add category to policy update entries
* Fix policy LB statistics & status getters
* Generic solution for partial updates
* Adding LB rule as last if the possition is too big
* Add get\_path methods for policy LB resources
* Fix updating Policy LB pool with no members
* NSXP: Additional pool member attributes
* Fix T1 partial update
* Fix ndra profile in partial T1 update
* Add "tags" to \_update\_helper
* OpenDev Migration Patch
* Enhance updating a group and security policy
* NSXP: Support router advertisement rules
* Ensure service when creating T1 service interface

14.0.1
------

* NSXP: Pool member delete API
* NSXP LB: Protect members from overwrite
* NSXLib create cert should return a list
* Set random security policy rule id if not set in build\_entry
* Fix update\_entry in SecurityPolicyApi
* Fixes for Policy LB resources
* Add ipv6 ndra profile to Tier1Interface

14.0.0
------

* NSX|P: Remove passthrough API from enable\_standby\_relocation
* Update Policy exclude list api
* Fix update\_entries in security policy
* NSXP LB: add max concurrent connections to VS object
* Update Stein gitreview branch
* Wait until realized in silent
* Include icmp\_type and icmp\_code in the payload even they are 0
* Remove oslosphinx from constraints
* Add IPPool static subnet policy support
* Add the ability to create union expressions for Group
* Add more group member types for Condition
* Add create API to inventory client
* Add support for policy exclude list
* Improve wait-for-realization
* Add Policy support for WAF profiles
* Fix NDRA profile value
* Add Service class that allows multiple/mixed entries
* Add search error code & retry
* Allow updating a single rule entry in a Security Policy
* Add Ipv6 NDRA profiles for policy
* NSXP LB: Monitor attributes handling
* NSXP LB: Change HM name attribute for consistency
* Add ability to enable/disable ipv6 forwarding
* NSXP LB: Protect pool algorithm from overwrite
* Add tags to LB service update
* Revert "Fix removal of tier0\_path of a  tier1"
* Support inventory APIs
* Allow empty attachment type in policy port
* NSXP: Avoid overwrite object properties on update
* Fix removal of tier0\_path of a  tier1
* Support searching resources by attributes
* Support for Bridge Endpoint Profiles
* NSXP: LB rules unit tests
* NSXP: LB member update method
* NSXP: LB rule APIs should have tenant parameter
* NSXP: add update method for LB rules
* NSX|T: Backend parameter for max subnet static routes
* Fix attribute name in Tier1 router object
* Add enabled and sequence number for NAT rule
* Add sequence number to the creation of SecurityPolicy
* NSX|T: Add NSX limit of IP address association to port
* Use a new node health api for MP status
* Fix a pep8 module import error
* Add function to get security policy rule
* Support ip version in policy security rules
* NSXP: Allow setting of LB L7 rule order
* NSXP LB: Work around backend patch bug for VS
* Add wait\_until\_realized func to policyGroup API
* Add policy group get\_path api
* Add policy Tier1 interface for vlan backed segments
* NSXP: loadbalancer monitor API
* Fix service creation under transaction
* Add wait\_until\_realized method to Tier1SegmentPort
* Add policy gayeway-policy support
* Support policy transaction in comm map create
* Fix nsgroup update to access the logging field safely
* Verify validate\_tier0 gets tier0 to produce the right error
* Change to \_create\_or\_store for lb resources to enable transaction
* NSXP LB: Remove monitor only if pool has it
* Add connectivity\_path parameter in Lb\_Service def
* Remove certificate decoding if not needed
* Policy api to get tier0/tier1/edge cluster path
* Add category to policy communication map update calls
* Add disable\_firewall attribute to tier0/1 & fix set\_standby\_relocation
* Add the ability to build Subnet object for Segments
* Improve policy resources unit tests

13.1.0
------

* Added retries if API call fails due to MP cluster reconfig
* Enhance support for policy transaction
* Add API to retrieve realized info for IpBlockSubnet
* NSXP: expose path\_to\_id method
* Retry http requests on timeouts
* Fix check\_manager\_status to support older NSX versions
* Fix get methods for some policy resources
* Add return value to add\_router\_link\_port method
* Fix missing traffic tag in SegmentPort create method
* Return related error code with ManagerError
* Support DHCP config path for policy Tier1 router
* Remove retry from tier1 creation
* Improve Cluster validation checks
* Add API to retrieve realized info for IpAllocations
* Add advanced config to Tier1Segment resource
* Fix attribute name for IpBlockSubnet resource
* Use original tier1/segment name in update if not given
* Fix policy transaction
* Add apis to get tier0 uplink cidrs and not just ips
* Add Tier0Natrule APIs to core\_resources
* Update policy segment & port admin state using passthrough api
* Support response status codes for LB HM
* Update home-page
* Add decorator to requirements.txt
* Move get\_dhcp\_opt\_code to utils
* Add Certificate to policy API
* Enable router standby relocation for policy tier1
* Add policy Edge Cluster resource
* Add new policy tier0 actions
* Policy DHCP relay support
* Policy DHCP relay support using passthrough api
* Add decorator for verifing passthrough is allowed
* NSX|T: Support T1 LR HA relocation
* Re-Add policy unit tests
* Move policy code to dedicated folder
* Add manager status validation to validate connection
* Full support for policy QoS profile
* Add specific realization getter for segment
* Add configuration for policy realization retries
* Add retry on policy tier1 creation
* Disallow update of sec policy category
* Add retries parameters to wait\_until\_realized
* Add optional project id to build\_v3\_api\_version\_project\_tag
* Use template for lower-constraints
* Add support for removing subnets from a policy segment
* Add protection against empty realization results
* Add policy attachment types constants
* Add caching for Policy get commands
* Add segment ports profiles binding support
* Add loadbalancer policy API into vmware-nsxlib
* Add static routes support
* Policy pass-through api support
* Improve policy realization state apis
* Update policy NAT firewall actions
* Fix policy router advertisment api
* Allow getting transport zone ID from T1 DR
* Change openstack-dev to openstack-discuss
* Add policy segemnt profiles api
* Add Tier1 NAT rules support
* Handle get\_default\_headers errors
* Add silent argument in policy get APIs
* Add Policy IpPool resource APIs
* Add NSX policy IpBlock resource
* Add NSX policy tier1 segment port resource
* Enhance Policy routers apis
* Router: check if service router exists on backend
* Change policy update APIs to allow unset
* Deprecate openstack-based code in DHCP
* Remove the precedence attribute from the policy communication maps
* Initial support for policy transactions
* Policy: use new realization API
* Support update tier0 in policy tier1 router
* Readonly support for Policy transport zones
* NSX|T: Add handling of disable/enable firewall
* Fix Policy resources list apis
* Add utility to generate tags with api version & project name
* Add tags to policy api service resources
* Enhanced support for updating router advertisement rules
* Make a common RouterDef parent for T0 and T1
* Rename communication policy APIs
* Change return values for policy resource APIs
* Refactor policy update and add missing tests

13.0.2
------

* Update the max NS groups criteria tags number dynamically
* Make resource\_type property of policy def
* Fix multi-cluster connectivity
* Correct validate\_dhcp\_params -> validate\_icmp\_params
* Support silent GET for policy resources
* WIP: Policy: Add Tier0 resource
* Add policy port resource
* Add get\_usage API to loadbalancer service
* Rename deployment-zones
* Adjust policy Networks to platform changes
* Fix policy realization state issues
* Update the logged fields of all entries in a map
* Add a constant of the default domain
* Refactor policy resources
* Fix cluster connectivity
* Amend allowed ICMP types and codes in strict mode
* Fix policy communication maps categories
* Add IP address expression as policy group condition
* Add 'logged' field on policy communication map entries
* Fix the revision needed for security rules version
* Policy: support Segment and NetworkSegment
* Enhanced support for policy services
* Enhance the groups support
* Enhance communication maps support
* Allow Policy Resources to add and update tags
* Add 'direction' field to CommunicationMapEntry
* Add feature for policy networking support
* Add support to get overaly\_tz id from Tier0 router
* Add nsx policy network and segment resources

13.0.1
------

* Update Allocation Profile feature constant
* New API for deleting IP pool forcefully
* Update UPPER\_CONSTRAINTS\_FILE for stable/rocky
* Expose allocation pool to router creation
* NSX|V3: Support new icmp codes and types list
* New api for getting VPN session status
* New api for getting the LB virtual servers status

13.0.0
------

* New resource for getting the managers IPs of the cluster
* Fix get\_connected\_t0\_transit\_net ot return the IP we need
* New api for getting router port transit cidr
* Add router lib unittests
* Add None default for an unused parameter in rotuer API
* Validate ICMP type & code for section rules
* Support MP cluster unavailable managers
* Add version 2.4 and initial features list
* Fix service ports for egress firewall rule
* Remove unused context arguments from nsgroup/section apis
* Fix section rules protocols handling

12.1.1
------

* Add retry to firewall section delete
* Fix an issue: TypeError: \_\_str\_\_ returned non-string (type NoneType)
* Switch to stestr
* Remove the redundant space and colon from the log
* make python 3 the default for tox.ini
* Escape illegal chars in LS name
* Fix nsxlib UT mocks to return the right output format
* Retry on 503 Service Unavailable
* Remove sha224 from supported client cert hash algs
* add stestr to test requirements
* Add logging when initializing a default FW section
* Enabled naming nat rules
* Add transport\_node\_uuid in VifAttachmentContext
* Retry is IOError is received
* Add method to check NSX export type
* Add server-ip-address to the suppoprted dhcp options
* Handle cluster connection closed by server
* Add router ports apis
* Add revision\_id when creating FW rule
* uncap eventlet
* Fix pep8 new warnings
* Add lower-constraints job
* Replace uuid.uuid4() with uuidutils.generate\_uuid()
* Remove unsupported VPN algorithms
* tox: Remove unnecessary configuration
* Updated from global requirements
* Add exception for policy deleted objects
* Updated from global requirements
* Really remove tox\_install.sh
* Adding vpn + dhcp unit tests
* Policy: support multiple services in a communication map
* Support NO\_SNAT & NO\_DNAT rules in NSX 2.2
* Policy make edge cluster & transport zones optional
* Add more update options to VPN objects
* Retry search calls on error
* Updated from global requirements
* Avoid tools/tox\_install.sh

12.1.0
------

* Updated from global requirements
* NsxLibMetadataProxy: get md proxy status function
* Updated from global requirements
* Separate native DHCP apis to allow external usage
* Remove some old TODOs from the code
* Enabled adding tags to nat rules
* Add router transport zone
* Add Transport Nodes api support & router TZ support
* migrate to stestr
* Policy: Add connection information to enforcement points
* Refactor policy code to match the new NSX
* fix typo in tox\_install.sh
* change http with https
* Add support for http PATCH method
* VPN DPD timeout changes
* VPN policy rules update
* Fix rate-limit attribute name
* fix error url
* Enable router interface to have 'centralized' type
* VLAN ID and trunk spec are exclusive - can only set one
* Enable search\_by\_tags to use only scope or tag
* Ensure that max\_attempts is set
* Remove obsolete tempest-lib
* Updated from global requirements
* Fix VPN local endpoint structure
* Fix VPN api as the NSX api changed
* Updated from global requirements
* Support get & update for rate limit
* NSXv3: Enhance NSGroup create and update functions
* Refactor security modules and retry
* Raise StaleResource when a 409 is returned by NSX
* NSX rate limit support
* Add router advertisement rules support
* initial vpn ipsec resources
* Updated from global requirements
* Updated from global requirements
* Allow creating firewall section with empty rule
* Ensure delete retry for ip set resources
* Ensure update retry for load balancing resources
* Add in a retry decoractor to loadbalancer updates
* Mock the update tags limits code in unittests
* Logical switch trunk vlan support
* Support NSX tag limitations
* NSXv3: Return body if resource\_type is None
* Add find cert by pem data method
* Updated from global requirements
* Remove neutron-lib from the dependencies

11.1.4
------

* Updated from global requirements
* Updated from global requirements
* Allow add\_rule(s) method to accept 'operation' as an arg
* Re-apply skipped cluster test
* Add in feature for 'on behalf of'
* Add IPSEC VPN feature flag and update version number
* use new payload objects for \*\_INIT callbacks
* Fix typos in comments
* Updated from global requirements

11.1.3
------

* Provide a callback to inject headers to the NSX
* Add support to retrieve VIFs and VirtualMachines
* NSXv3: Update stats api
* Fix failing unit test
* Add ssl profile binding methods for LB virtual server
* Add router to nsxlib class
* Add private\_key and passphrase to cert creation

11.1.2
------

* Cache Get results for some nsxlib resources

11.1.1
------

* Updated from global requirements
* Add supported feature for VLAN router interfaces
* Update ip\_protocol during loadbalancer app profile updates
* Support ENS transport zone
* Updated from global requirements
* Update update\_advertisement depending on NSX version
* Add LB related flags for update\_route\_advertisement
* Move LBaaS to 2.1 supported feature
* Support DHCP Relay profile
* Add feature to update NSGroup and FirewallSection tags
* Refactor resources tests
* Updated from global requirements
* Fix client cert authentication
* Fix transport zones mock for testcase
* Fix request with retry code
* New api: update metadata proxy server
* Add log messages to retry attempts
* Write and delete client cert for each request
* Add FW\_INSERT\_AFTER constants to nsx\_constants
* Add the nsxlib to all NsxLibApiBase resources
* Handle bad or expired XSRF token
* Add allow-overwrite default header by config
* Create session for XSRF token
* New api: list logical routers by type
* Ensure retry on stale rule update or deletion
* Updated from global requirements
* Get transport zone type api
* Updated from global requirements
* Remove unused code
* Allow setting the description of switches and ports
* Policy: Delete service entries
* Policy: Delete communication profile entries
* Ensure retry on stale resources for exclude list updates
* Use domain in policy deployment maps api
* LBaaS: Some API changes on LB class
* Revert "Write and delete client cert for each request"
* Remove test requirement WebTest
* Write and delete client cert for each request
* LBaaS: Fix a typo in add\_to\_list method
* LBaaS: Add common add\_to\_list and remove\_from\_list
* Nsx Policy: support ICMP service
* Nsx policy: adjust to latest backend changes
* DHCP: add method to get static routes
* Updated from global requirements
* NSX Policy: Adjust to changes in backend API
* Updated from global requirements
* VMware-NSXLib:Remove Invalid Link
* Add Load Balancer Application Rule
* Updated from global requirements
* Api for getting a resource id by the type & tag
* Add DHPC relay service to router port
* Add resource type to resource definitions
* Add policy apis to check realized state

10.1.2
------

* Support getting all results from search API
* Use flake8-import-order plugin
* Support different options for deleting NAT rules
* Updated from global requirements
* Adding optional source network to GW SNAT rule creation
* Add constants for PAREMT and CHILD vif types
* Extend QosSwitchingProfile actions
* Add TODO for load balancer feature support
* list & update methods for router NAT rules
* LB: Add methods to add/remove monitor from pool
* Add NSXv3 2.1.0 version constant
* Updated from global requirements
* Catch another error type for missing certificate
* Support bypass-firewall param for router NAT rules
* Add LB methods for neutron LBaaS
* New api: Get the default rule in a firewall section
* Extend client silent mode
* Updated from global requirements
* Adjust to cosmetic changes in policy API
* Remove support for py34
* Avoid version API call for policy lib
* Updated from global requirements
* Updated from global requirements
* Update policy resources apis
* Add ellapsed time to REST response logs
* Add location header to response mocks
* Change log level of cert-realated SSL errors
* Mask passwords while logging REST requests
* Change resource type for LB resources
* Adding API for checking features availabilty
* Updated from global requirements
* LBaaS: Add status and stats APIs
* Remove \n from log messages
* New API to get the firewall section of a router
* Support tftp-server dhcp option
* Updated from global requirements
* nsxv3: Add API wrapper for Load Balancer
* Updated from global requirements
* Updated from global requirements
* Add informative error message for 404 responses
* New api to get logical port by attachment
* Refactor nsxlib resources
* Updated from global requirements
* Correct param nsx\_api\_managers description error

10.1.1
------

* Add IPAM error code
* Add method get\_excludelist to the class NsxLibFirewallSection
* NSX Policy cosmetic changes
* NSX Policy resources
* Updated from global requirements
* NSXv3: Fix init of default firewall section
* Updated from global requirements
* Add support to force delete routers
* NSX Policy preparations
* Drop log translations

10.1.0.a1
---------

* Updated from global requirements
* Fix for hacking N536
* Add list method to the qos profile
* Name and ID validation may be paginated
* Fix FIP DNAT rule match\_ports bug
* [IPSet]: Allow updating IPSet with empty list
* Add util method to retrieve complex expressions for NSGroup
* Support multiple client certificate per identity
* Adding Optional default dns values for native dhcp
* Deprecate unused dhcp\_profile\_uuid from config
* Pass node ID and user permissions when creating NSX identity
* Updated from global requirements
* Updated from global requirements
* Fix FW rule dictionary
* Replace client cert file with cert provider
* Add get\_code to LogicalDhcpServer
* Fix parameter args
* IpPools: pass tags on create/update operations
* Update interface about NSX IPAM and CIF API change
* Updated from global requirements

0.7.1
-----

* Get list of IP block and IP block subnet
* Add validation for client certificate subject
* Mute log for endpoint connection validation
* Prevent downtime when client cert is regenerated

0.7.0
-----

* Support client certificate import
* [NSX Search]: Append resource\_type while limiting scope for a resource
* Add support for IPSet CRUD operations
* Updated from global requirements
* Add in tox -s cover support

0.7.3
-----

* Add methods for firewall section and rule
* Updated from global requirements
* Use project-id instead of tenant -id in nsxlib
* Add 'applied\_tos' arg while creating FirewallRule

0.7.2
-----

* Add support to update tags for FirewallSections
* Allow passing args of type list for NSGroup and firewall rule methods
* Add support to search resources based on tags or resource type
* Fix logical switch name update
* Add method to security module
* Fix address bindings in logical port update
* Allow setting QoS shaper values to 0
* Updated from global requirements
* Fix bugs in certificate management exceptions
* Disable uRPF check on lrp on container LS
* Add match\_ports argument while adding NAT rule
* Add support to create/delete ip block subnet on backend
* Add IP POOL ID during port create/update

0.6.0
-----

* Basic support for client cert authentication
* NSXv3: Add support for dns-integration extension
* Client certificate management for NSXV3 authentication
* Support ip-pool update
* Support router description
* Expand PEP8 tests on nsxlib
* Add Constraints support
* Unit tests: Allow multiple responses in mocked client

0.5.0
-----

* IpPools support
* Add gateway\_ip arg for static bindings
* NSXv3: Search for the default section from the end
* NSXv3: Do not allow empty tag values on resources

0.4.0
-----

* NSXv3: Require target\_type when adding to firewall exclude list

0.3.0
-----

* NSXv3: Add support for firewall exclude list API
* NSXv3 Client: Add paginated response
* Ensure that correct exception is raised
* Using assertIsNone() instead of assertEqual(None)
* NSXv3: Remove duplicate method definition
* Remove retry from nsgroup member update call
* Fix exception handling
* NSXv3: Fix string format in logging message
* NSXv3: Fix a router port name update issue
* Updated from global requirements
* Remove vmware-nsxlib bug link
* Support both egress and ingress directions on QoS profile
* Add NSGroup manager tests

0.2.0
-----

* Updated from global requirements
* Updated from global requirements
* NSXv3: Fix allowed address pairs switching profile
* Replace retrying with tenacity
* NSX|V3 fix nsxlib raised error with managers
* NSX|v3 replace dhcp profile and metadata proxy uuids with names
* Fix nsxlib tox init to not fail on upper constraints

0.1.0
-----

* Enable release notes translation
* Move all nsxlib code and tests to vmware\_nsxlib
* Updated from global requirements
* Cleanup tox.ini: Remove obsolete constraints
* Add initial framework using cookiecutter
* Added .gitreview
