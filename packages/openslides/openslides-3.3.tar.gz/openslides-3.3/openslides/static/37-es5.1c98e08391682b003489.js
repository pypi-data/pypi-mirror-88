!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return i(this,n)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"76GY":function(e,r,i){"use strict";i.d(r,"a",(function(){return F}));var c=i("w7eE"),s=i("OwvW"),l=i("qnZ9"),u=i("ykax"),f=i("8Y7J"),b=i("cUpR"),p=i("TSSN"),h=i("SVse"),d=i("iCsr"),g=i("vYAO"),v=i("j7f2"),y=i("6ako"),C=i("QUb3");function k(t,e){if(1&t&&(f.Xb(0,"os-icon-container",10),f.Sc(1),f.kc(2,"translate"),f.kc(3,"pollKeyVerbose"),f.Wb()),2&t){var n=f.jc().$implicit,a=f.jc(3);f.rc("icon",n.value[0].icon)("size",a.iconSize),f.Fb(1),f.Uc(" ",f.lc(2,3,f.lc(3,5,n.votingOption))," ")}}function m(t,e){if(1&t&&(f.Xb(0,"span"),f.Sc(1),f.kc(2,"translate"),f.kc(3,"pollKeyVerbose"),f.Wb()),2&t){var n=f.jc().$implicit;f.Fb(1),f.Uc(" ",f.lc(2,1,f.lc(3,3,n.votingOption))," ")}}function O(t,e){if(1&t&&(f.Xb(0,"span"),f.Sc(1),f.kc(2,"pollPercentBase"),f.Wb()),2&t){var n=f.jc().$implicit,a=f.jc(3);f.Fb(1),f.Uc(" ",f.nc(2,1,n.value[0].amount,a.poll,"motion")," ")}}function P(t,e){if(1&t&&(f.Xb(0,"tr"),f.Xb(1,"td"),f.Qc(2,k,4,7,"os-icon-container",8),f.Qc(3,m,4,5,"span",2),f.Wb(),f.Xb(4,"td",9),f.Qc(5,O,3,5,"span",2),f.Wb(),f.Xb(6,"td",9),f.Sc(7),f.kc(8,"parsePollNumber"),f.Wb(),f.Wb()),2&t){var n=e.$implicit;f.Hb(n.votingOption),f.Fb(2),f.rc("ngIf",n.value[0].icon),f.Fb(1),f.rc("ngIf",!n.value[0].icon),f.Fb(2),f.rc("ngIf",n.value[0].showPercent),f.Fb(2),f.Uc(" ",f.lc(8,6,n.value[0].amount)," ")}}function S(t,e){if(1&t&&(f.Vb(0),f.Xb(1,"table",3),f.Xb(2,"tbody"),f.Xb(3,"tr"),f.Sb(4,"th"),f.Xb(5,"th",4),f.Sc(6),f.kc(7,"translate"),f.Wb(),f.Wb(),f.Qc(8,P,9,8,"tr",5),f.Wb(),f.Wb(),f.Xb(9,"div",6),f.Sb(10,"os-charts",7),f.Wb(),f.Ub()),2&t){var n=f.jc(2);f.Fb(6),f.Tc(f.lc(7,4,"Votes")),f.Fb(2),f.rc("ngForOf",n.tableData)("ngForTrackBy",n.trackByIndex),f.Fb(2),f.rc("data",n.chartData)}}function w(t,e){1&t&&(f.Xb(0,"div"),f.Xb(1,"i"),f.Sc(2),f.kc(3,"translate"),f.Wb(),f.Wb()),2&t&&(f.Fb(2),f.Uc(" ",f.lc(3,1,"No results yet.")," "))}function _(t,e){1&t&&(f.Xb(0,"div"),f.Xb(1,"i"),f.Sc(2),f.kc(3,"translate"),f.Wb(),f.Wb()),2&t&&(f.Fb(2),f.Uc(" ",f.lc(3,1,"Counting of votes is in progress ...")," "))}function D(t,e){if(1&t&&(f.Xb(0,"div",1),f.Qc(1,S,11,6,"ng-container",2),f.Qc(2,w,4,3,"div",2),f.Qc(3,_,4,3,"div",2),f.Wb()),2&t){var n=f.jc();f.Fb(1),f.rc("ngIf",n.hasResults&&n.canSeeResults),f.Fb(1),f.rc("ngIf",!n.hasResults),f.Fb(1),f.rc("ngIf",n.hasResults&&!n.canSeeResults)}}var F=function(){var e=function(e){a(i,e);var r=o(i);function i(e,n,a,o,c){var s;return t(this,i),(s=r.call(this,e,n)).pollService=a,s.cd=o,s.operator=c,s.iconSize="large",s}return n(i,[{key:"setTableData",value:function(){this.tableData=this.pollService.generateTableData(this.poll)}},{key:"setChartData",value:function(){this.chartData=this.pollService.generateChartData(this.poll)}},{key:"poll",set:function(t){this._poll=t,this.setTableData(),this.setChartData(),this.cd.markForCheck()},get:function(){return this._poll}},{key:"state",get:function(){return this.poll.state}},{key:"hasResults",get:function(){return this.isFinished||this.isPublished}},{key:"isFinished",get:function(){return this.state===l.e.Finished}},{key:"isPublished",get:function(){return this.state===l.e.Published}},{key:"canSeeResults",get:function(){return this.operator.hasPerms(this.permission.motionsCanManagePolls)||this.isPublished}}]),i}(c.a);return e.\u0275fac=function(t){return new(t||e)(f.Rb(b.c),f.Rb(p.k),f.Rb(u.a),f.Rb(f.h),f.Rb(s.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",iconSize:"iconSize"},features:[f.Cb],decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[4,"ngIf"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf","ngForTrackBy"],[1,"doughnut-chart"],["type","doughnut",3,"data"],[3,"icon","size",4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"]],template:function(t,e){1&t&&f.Qc(0,D,4,3,"div",0),2&t&&f.rc("ngIf",e.poll)},directives:[h.t,h.s,d.a,g.a],pipes:[p.j,v.a,y.a,C.a],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),e}()},"9st3":function(e,n,a){"use strict";a.d(n,"a",(function(){return o})),a("Ri39");var r=a("8Y7J"),o=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,inputs:{data:"data",projector:"projector"}}),e}()},SQVg:function(e,r,i){"use strict";i.r(r),i.d(r,"MotionPollSlideModule",(function(){return O}));var c=i("SVse"),s=i("PCNd"),l=i("DGVe"),u=i("qKrL"),f=i("qnZ9"),b=i("ykax"),p=i("JTqh"),h=i("8Y7J"),d=i("76GY");function g(t,e){if(1&t&&(h.Xb(0,"span"),h.Sc(1),h.Wb()),2&t){var n=h.jc(2);h.Fb(1),h.Uc("",n.data.data.motion.identifier,":")}}function v(t,e){if(1&t&&(h.Xb(0,"div"),h.Sb(1,"os-motion-poll-detail-content",4),h.Wb()),2&t){var n=h.jc(2);h.Fb(1),h.rc("poll",n.pollData)}}function y(t,e){if(1&t&&(h.Vb(0),h.Xb(1,"div",1),h.Xb(2,"h1",2),h.Qc(3,g,2,1,"span",0),h.Sc(4),h.Wb(),h.Xb(5,"h2",3),h.Sc(6),h.Wb(),h.Wb(),h.Qc(7,v,2,1,"div",0),h.Ub()),2&t){var n=h.jc();h.Fb(3),h.rc("ngIf",n.data.data.motion.identifier),h.Fb(1),h.Uc(" ",n.data.data.motion.title," "),h.Fb(2),h.Tc(n.data.data.poll.title),h.Fb(1),h.rc("ngIf",n.data.data.poll.state===n.PollState.Published)}}var C,k,m=((k=function(e){a(i,e);var r=o(i);function i(e){var n;return t(this,i),(n=r.call(this,e)).PollState=f.e,n.chartDataSubject.subscribe((function(){if(n.data&&n.data.data){n.pollData=n.data.data.poll;var t=n.pollData.options[0];n.voteYes=t.yes,n.voteNo=t.no,n.voteAbstain=t.abstain}})),n}return n(i,[{key:"getDecimalFields",value:function(){return u.a.DECIMAL_FIELDS}},{key:"showChart",value:function(){return this.pollService.showChart(this.pollData)}},{key:"getTableData",value:function(){return this.pollService.generateTableData(this.pollData)}}]),i}(p.a)).\u0275fac=function(t){return new(t||k)(h.Rb(b.a))},k.\u0275cmp=h.Lb({type:k,selectors:[["os-motion-poll-slide"]],features:[h.Cb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slidetitle"],[1,"motion-title"],[1,"poll-title"],["iconSize","gigantic",3,"poll"]],template:function(t,e){1&t&&h.Qc(0,y,8,4,"ng-container",0),2&t&&h.rc("ngIf",e.data&&e.data.data)},directives:[c.t,d.a],styles:[".motion-title[_ngcontent-%COMP%]{margin:0 0 10px}"]}),k),O=((C=function e(){t(this,e)}).\u0275mod=h.Pb({type:C}),C.\u0275inj=h.Ob({factory:function(t){return new(t||C)},providers:[{provide:l.a.token,useValue:m}],imports:[[c.c,s.a]]}),C)},iCsr:function(e,r,i){"use strict";i.d(r,"a",(function(){return d}));var c=i("mV3u"),s=i("8Y7J"),l=i("cUpR"),u=i("TSSN"),f=i("zHaW"),b=i("SVse"),p=i("hrfs");function h(t,e){if(1&t&&s.Sb(0,"canvas",2),2&t){var n=s.jc();s.rc("datasets",n.isCircle?null:n.chartData)("data",n.isCircle?n.chartData:null)("colors",n.circleColors)("labels",n.labels)("options",n.chartOptions)("chartType",n.type)("legend",n.legend)}}var d=function(){var e=function(e){a(i,e);var r=o(i);function i(e,n,a){var o;return t(this,i),(o=r.call(this,e,n,a)).type="horizontalBar",o.legend=!1,o}return n(i,[{key:"calcBarChartHeight",value:function(){if(!this.isCircle)return 120+60*this.labels.length+"px"}},{key:"progressInputData",value:function(t){this.isCircle?(this.chartData=t.flatMap((function(t){return t.data})),this.circleColors=[{backgroundColor:t.map((function(t){return t.backgroundColor})).filter((function(t){return!!t})),hoverBackgroundColor:t.map((function(t){return t.hoverBackgroundColor})).filter((function(t){return!!t}))}]):this.chartData=t,this.labels||(this.labels=t.map((function(t){return t.label})))}},{key:"data",set:function(t){t&&this.progressInputData(t)}},{key:"chartOptions",get:function(){return this.isCircle?{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},legend:{position:"left"}}:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,stepSize:1},stacked:!0}],yAxes:[{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{mirror:!0,labelOffset:-20},stacked:!0}]}}}},{key:"isCircle",get:function(){return"pie"===this.type||"doughnut"===this.type}}]),i}(c.a);return e.\u0275fac=function(t){return new(t||e)(s.Rb(l.c),s.Rb(u.k),s.Rb(f.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["os-charts"]],inputs:{type:"type",labels:"labels",legend:"legend",data:"data"},features:[s.Cb],decls:2,vars:3,consts:[[1,"charts-wrapper"],["class","chart-js-canvas","baseChart","",3,"datasets","data","colors","labels","options","chartType","legend",4,"ngIf"],["baseChart","",1,"chart-js-canvas",3,"datasets","data","colors","labels","options","chartType","legend"]],template:function(t,e){1&t&&(s.Xb(0,"div",0),s.Qc(1,h,1,7,"canvas",1),s.Wb()),2&t&&(s.Nc("height",e.calcBarChartHeight()),s.Fb(1),s.rc("ngIf",e.chartData&&e.chartData.length))},directives:[b.t,p.a],styles:[".charts-wrapper[_ngcontent-%COMP%]{position:relative;display:block;height:100%;margin:auto}"],changeDetection:0}),e}()}}])}();