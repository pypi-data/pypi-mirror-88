(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"1NkQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("+KbT"),o=n("Iab2"),a=n("8Y7J");let c=(()=>{class t{constructor(){}saveFile(t,e,n){const i={};n&&(i.type=n);const a=new Blob([t],i);Object(o.saveAs)(a,e,{autoBOM:!0})}validateFileName(t){return new RegExp(/^[^\\\/\?%\*:\|\"\<\>]*[^\.]+$/i).test(t)}convertTo8859_15(t){const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=n("TSSN");function r(t){return void 0!==t.property}function l(t){return void 0!==t.map&&void 0!==t.label}let b=(()=>{class t{constructor(t,e,n){this.exporter=t,this.translate=e,this.config=n}export(t,e,n,{lineSeparator:i="\r\n",columnSeparator:o=this.config.instant("general_csv_separator"),encoding:a=this.config.instant("general_csv_encoding")}={}){let c=[];if(i===o)throw new Error("lineseparator and columnseparator must differ from each other");const s=e.map(t=>{let e;return r(t)?e=t.label?t.label:t.property:l(t)&&(e=t.label),e=this.capitalizeTranslate(e),e});c.push(s),c=c.concat(t.map(t=>e.map(e=>{let n;if(r(e)){const i=t[e.property];n="number"==typeof i?i.toString(10):i?!0===i?"1":!1===i?"0":i.toString():""}else l(e)&&(n=e.map(t));return this.checkCsvTextSafety(n)})));const b=c.map(t=>t.join(o)).join(i),u="text/csv;charset="+a;this.exporter.saveFile("iso-8859-15"===a?this.exporter.convertTo8859_15(b):b,n,u)}checkCsvTextSafety(t){return t?'"'+t.replace(/"/g,'""').replace(/(\r\n\t|\n|\r\t)/gm,"")+'"':""}capitalizeTranslate(t){const e=t.charAt(0).toUpperCase()+t.slice(1);return this.translate.instant(e)}dummyCSVExport(t,e,n){const i=this.config.instant("general_csv_separator"),o=[t.map(t=>this.translate.instant(t)).join(i)],a=e.map(t=>t.map(t=>{let e="";return t||(e=""),e="number"==typeof t?t.toString(10):"boolean"==typeof t?t?"1":"0":t,this.checkCsvTextSafety(e)}).join(i)),c=o.concat(a).join("\r\n"),s=this.config.instant("general_csv_encoding");this.exporter.saveFile("iso-8859-15"===s?this.exporter.convertTo8859_15(c):c,n,"text/csv")}}return t.\u0275fac=function(e){return new(e||t)(a.bc(c),a.bc(s.k),a.bc(i.a))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ePZ9:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("pSLD"),o=n("+B0n"),a=n("dOok"),c=n("+KbT"),s=n("1NkQ"),r=n("a9XT"),l=n("rHPv"),b=n("jDC6"),u=n("3Y4h"),d=n("8Y7J"),g=n("TSSN");let p=(()=>{class t{constructor(t,e,n,i,o,a,c){this.csvExport=t,this.translate=e,this.configService=n,this.linenumberingService=i,this.changeRecoRepo=o,this.motionRepo=a,this.commentRepo=c}createText(t,e){const n=this.configService.instant("motions_line_length"),i=Object.assign([],this.changeRecoRepo.getChangeRecoOfMotion(t.id)),o=this.motionRepo.getAmendmentsInstantly(t.id);if(o)for(const c of o){const t=this.changeRecoRepo.getChangeRecoOfMotion(c.id).filter(t=>t.showInFinalView()),e=this.motionRepo.getAmendmentAmendedParagraphs(c,n,t);for(const n of e)i.push(n)}i.sort((t,e)=>t.getLineFrom()-e.getLineFrom());const a=this.motionRepo.formatMotion(t.id,e,i,n);return this.linenumberingService.stripLineNumbers(a)}exportMotionList(t,e,n,i){i||(i=this.configService.instant("motions_recommendation_text_mode"));const o=Object(u.j)(["identifier","title"].concat(e)).map(t=>"recommendation"===t?{label:"recommendation",map:t=>this.motionRepo.getExtendedRecommendationLabel(t)}:"state"===t?{label:"state",map:t=>this.motionRepo.getExtendedStateLabel(t)}:"text"===t?{label:"Text",map:t=>this.createText(t,i)}:"motion_block"===t?{label:"Motion block",map:t=>t.motion_block?t.motion_block.getTitle():""}:{property:t});o.push(...n.map(t=>({label:this.commentRepo.getViewModel(t).getTitle(),map:e=>{const n=this.commentRepo.getViewModel(t),i=e.getCommentForSection(n);return i&&i.comment?Object(l.a)(Object(b.a)(i.comment)):""}}))),this.csvExport.export(t,o,this.translate.instant("Motions")+".csv")}exportCallList(t){this.csvExport.export(t,[{label:"Called",map:t=>t.sort_parent_id?"":t.identifierOrTitle},{label:"Called with",map:t=>t.sort_parent_id?t.identifierOrTitle:""},{label:"submitters",map:t=>t.submittersAsUsers.map(t=>t.short_name).join(",")},{property:"title"},{label:"recommendation",map:t=>t.recommendation?this.motionRepo.getExtendedRecommendationLabel(t):""},{property:"motion_block",label:"Motion block"}],this.translate.instant("Call list")+".csv")}exportDummyMotion(){this.csvExport.dummyCSVExport(["Identifier","Submitters","Title","Text","Reason","Category","Tags","Motion block","Origin"],[["A1","Submitter A","Title 1","Text 1","Reason 1","Category A","Tag 1, Tag 2","Block A","Last Year Conference A"],["B1","Submitter B","Title 2","Text 2","Reason 2","Category B",null,"Block A","Origin B"],["C2",null,"Title 3","Text 3",null,null,null,null,null]],this.translate.instant("motions-example")+".csv")}}return t.\u0275fac=function(e){return new(e||t)(d.bc(s.a),d.bc(g.k),d.bc(c.a),d.bc(r.a),d.bc(i.a),d.bc(a.a),d.bc(o.a))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mksl:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("8Y7J"),o=n("VR2Q"),a=n("7dBR"),c=n("gsQk"),s=n("KL36"),r=n("iInd"),l=n("l0rg"),b=n("SVse"),u=n("Dxy4"),d=n("Tj54"),g=n("ZFy/"),p=n("TSSN");function h(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",12),i.fc("click",(function(){return i.Gc(t),i.jc().clickHamburgerMenu()})),i.Xb(1,"mat-icon"),i.Sc(2,"menu"),i.Wb(),i.Wb()}}function m(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",12),i.fc("click",(function(){return i.Gc(t),i.jc().onBackButton()})),i.Xb(1,"mat-icon"),i.Sc(2,"arrow_back"),i.Wb(),i.Wb()}}function f(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",12),i.fc("click",(function(){i.Gc(t);const e=i.jc();return e.isCancelEditUsed?e.sendCancelEditEvent():e.sendMainEvent()})),i.Xb(1,"mat-icon"),i.Sc(2,"close"),i.Wb(),i.Wb()}}function v(t,e){1&t&&(i.Xb(0,"div",13),i.pc(1,1),i.Wb())}function F(t,e){1&t&&i.Sb(0,"div",6)}function S(t,e){1&t&&(i.Xb(0,"div",14),i.pc(1,2),i.Wb())}function C(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",12),i.fc("click",(function(){return i.Gc(t),i.jc().openSearch()})),i.Xb(1,"mat-icon"),i.Sc(2,"search"),i.Wb(),i.Wb()}}function x(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",15),i.fc("click",(function(){return i.Gc(t),i.jc().sendMainEvent()})),i.kc(1,"translate"),i.Xb(2,"mat-icon"),i.Sc(3),i.Wb(),i.Wb()}if(2&t){const t=i.jc();i.sc("matTooltip",i.lc(1,3,t.mainActionTooltip)),i.rc("disabled",!t.isMainButtonEnabled),i.Fb(3),i.Tc(t.mainButtonIcon)}}function M(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",16),i.fc("click",(function(){return i.Gc(t),i.jc().save()})),i.Xb(1,"strong",17),i.Sc(2),i.kc(3,"translate"),i.Wb(),i.Wb()}if(2&t){const t=i.jc();i.rc("disabled",!t.isSaveButtonEnabled),i.Fb(2),i.Tc(i.lc(3,2,t.saveText))}}function y(t,e){1&t&&i.pc(0,3,["*ngIf","!editMode"])}function k(t,e){1&t&&(i.Xb(0,"mat-icon"),i.Sc(1," add "),i.Wb())}function O(t,e){if(1&t&&(i.Xb(0,"mat-icon"),i.Sc(1),i.Wb()),2&t){const t=i.jc(2);i.Fb(1),i.Uc(" ",t.mainButtonIcon," ")}}function T(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",18),i.fc("click",(function(){return i.Gc(t),i.jc().sendMainEvent()})),i.kc(1,"translate"),i.Qc(2,k,2,0,"mat-icon",10),i.Qc(3,O,2,1,"mat-icon",10),i.Wb()}if(2&t){const t=i.jc();i.sc("matTooltip",i.lc(1,4,t.mainActionTooltip)),i.rc("disabled",!t.isMainButtonEnabled),i.Fb(2),i.rc("ngIf","add_circle"===t.mainButtonIcon),i.Fb(1),i.rc("ngIf","add_circle"!==t.mainButtonIcon)}}const W=[[["",8,"extra-controls-slot"]],[["",8,"title-slot"]],[["",8,"central-info-slot"]],[["",8,"menu-slot"]]],X=[".extra-controls-slot",".title-slot",".central-info-slot",".menu-slot"];let E=(()=>{class t{constructor(t,e,n,o,a,c){this.vp=t,this.menu=e,this.router=n,this.route=o,this.routingState=a,this.overlayService=c,this.nav=!0,this.mainButtonIcon="add_circle",this.saveText="Save",this.editMode=!1,this.isSearchEnabled=!0,this.isSaveButtonEnabled=!0,this.multiSelectMode=!1,this.hasMainButton=!1,this.isMainButtonEnabled=!0,this.goBack=!1,this.prevUrl="../",this.mainEvent=new i.p,this.cancelEditEvent=new i.p,this.isCancelEditUsed=!1,this.saveEvent=new i.p}get showBackButton(){return!this.nav&&!this.multiSelectMode&&(this.routingState.isSafePrevUrl||!this.goBack)}ngOnInit(){this.isCancelEditUsed=this.cancelEditEvent.observers.length>0}sendMainEvent(){this.mainEvent.next()}sendCancelEditEvent(){this.cancelEditEvent.next()}clickHamburgerMenu(){this.menu.toggleMenu()}save(){this.saveEvent.next(!0)}openSearch(){this.overlayService.showSearch()}onBackButton(){this.goBack?this.routingState.goBack():this.router.navigate(this.routingState.customOrigin&&this.routingState.customOrigin!==this.router.url?[this.routingState.customOrigin]:[this.prevUrl],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(s.a),i.Rb(o.a),i.Rb(r.f),i.Rb(r.a),i.Rb(c.a),i.Rb(a.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["os-head-bar"]],inputs:{nav:"nav",mainButtonIcon:"mainButtonIcon",saveText:"saveText",editMode:"editMode",isSearchEnabled:"isSearchEnabled",isSaveButtonEnabled:"isSaveButtonEnabled",multiSelectMode:"multiSelectMode",hasMainButton:"hasMainButton",isMainButtonEnabled:"isMainButtonEnabled",goBack:"goBack",prevUrl:"prevUrl",mainActionTooltip:"mainActionTooltip"},outputs:{mainEvent:"mainEvent",cancelEditEvent:"cancelEditEvent",saveEvent:"saveEvent"},ngContentSelectors:X,decls:16,vars:12,consts:[["color","primary",1,"sticky-toolbar",3,"ngClass"],[1,"toolbar-left"],["mat-icon-button","",3,"click",4,"ngIf"],["class","toolbar-left-text",4,"ngIf"],["class","spacer",4,"ngIf"],["class","toolbar-centered",4,"ngIf"],[1,"spacer"],[1,"toolbar-right"],["mat-icon-button","",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-fab","","class","head-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"toolbar-left-text"],[1,"toolbar-centered"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-button","",3,"disabled","click"],[1,"upper"],["mat-fab","",1,"head-button",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(i.qc(W),i.Xb(0,"mat-toolbar",0),i.Xb(1,"div",1),i.Qc(2,h,3,0,"button",2),i.Qc(3,m,3,0,"button",2),i.Qc(4,f,3,0,"button",2),i.Qc(5,v,2,0,"div",3),i.Wb(),i.Qc(6,F,1,0,"div",4),i.Qc(7,S,2,0,"div",5),i.Sb(8,"div",6),i.Qc(9,C,3,0,"button",2),i.Xb(10,"div",7),i.pc(11),i.Qc(12,x,4,5,"button",8),i.Qc(13,M,4,4,"button",9),i.Qc(14,y,1,0,"ng-content",10),i.Wb(),i.Wb(),i.Qc(15,T,4,6,"button",11)),2&t&&(i.rc("ngClass",e.multiSelectMode?"multi-select":""),i.Fb(2),i.rc("ngIf",e.vp.isMobile&&!e.showBackButton&&!e.editMode),i.Fb(1),i.rc("ngIf",e.showBackButton&&!e.editMode),i.Fb(1),i.rc("ngIf",e.editMode),i.Fb(1),i.rc("ngIf",!e.multiSelectMode),i.Fb(1),i.rc("ngIf",!e.multiSelectMode),i.Fb(1),i.rc("ngIf",e.multiSelectMode),i.Fb(2),i.rc("ngIf",!e.editMode&&e.isSearchEnabled),i.Fb(3),i.rc("ngIf",e.hasMainButton&&!e.editMode&&!e.vp.isMobile&&!e.multiSelectMode),i.Fb(1),i.rc("ngIf",e.editMode),i.Fb(1),i.rc("ngIf",!e.editMode),i.Fb(1),i.rc("ngIf",e.hasMainButton&&!e.editMode&&e.vp.isMobile&&!e.multiSelectMode))},directives:[l.a,b.q,b.t,u.b,d.a,g.c],pipes:[p.j],styles:[".head-button{position:fixed;z-index:10;right:20px;bottom:55px}.sticky-toolbar{top:0;z-index:5;position:-webkit-sticky;position:sticky;height:64px!important}.sticky-toolbar .toolbar-left{display:-ms-flexbox;display:flex;max-width:calc(100% - 100px)}.sticky-toolbar .toolbar-left button{margin:12px 0}.sticky-toolbar .toolbar-left .toolbar-left-text{margin-left:10px;width:100%;overflow:hidden}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot{margin:16px 0;display:block}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot h2{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sticky-toolbar .toolbar-centered{margin:auto;vertical-align:baseline}.sticky-toolbar .toolbar-right,.sticky-toolbar .toolbar-right .extra-controls-slot{display:-ms-flexbox;display:flex}mat-toolbar.multi-select{background-color:#757575!important}"],encapsulation:2}),t})()},rHPv:function(t,e,n){"use strict";function i(t){return t.replace(/&auml;|&#228;/g,"\xe4").replace(/&Auml;|&#196;/g,"\xc4").replace(/&ouml;|&#246;/g,"\xf6").replace(/&Ouml;|&#214;/g,"\xd6").replace(/&uuml;/g,"\xfc").replace(/&Uuml;/g,"\xdc").replace(/&aring;|&#229;/g,"\xe5").replace(/&Aring;|&#197;/g,"\xc5").replace(/&szlig;|&#223;/g,"\xdf")}n.d(e,"a",(function(){return i}))},ssNq:function(t,e,n){"use strict";n.r(e),n.d(e,"CallListModule",(function(){return A}));var i=n("SVse"),o=n("PCNd"),a=n("iInd"),c=n("+QJK"),s=n("mrSG"),r=n("2Vo4"),l=n("iTQr"),b=n("dOok"),u=n("lv9T"),d=n("F48D"),g=n("Qy/R"),p=n("ePZ9"),h=n("y50V"),m=n("8Y7J"),f=n("cUpR"),v=n("TSSN"),F=n("zHaW"),S=n("mksl"),C=n("Dxy4"),x=n("rJgo"),M=n("Tj54"),y=n("PDjf"),k=n("/tkw"),O=n("BSbQ"),T=n("8Qe2");function W(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div",17),m.Xb(1,"div"),m.Xb(2,"span"),m.Sc(3),m.kc(4,"translate"),m.Wb(),m.Sc(5,":\xa0 "),m.Wb(),m.Xb(6,"div"),m.Xb(7,"button",18),m.fc("click",(function(){return m.Gc(t),m.jc().resetFilters()})),m.Xb(8,"mat-icon",19),m.Sc(9,"cancel"),m.Wb(),m.Xb(10,"span"),m.Sc(11),m.kc(12,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb()}2&t&&(m.Fb(3),m.Tc(m.lc(4,2,"Active filters")),m.Fb(8),m.Tc(m.lc(12,4,"Clear all")))}function X(t,e){if(1&t&&(m.Xb(0,"div"),m.Xb(1,"button",20),m.Xb(2,"span",21),m.Sc(3),m.kc(4,"translate"),m.Wb(),m.Wb(),m.Wb()),2&t){const t=m.jc(),e=m.Cc(23);m.Fb(1),m.rc("matMenuTriggerFor",e),m.Fb(1),m.rc("matBadge",t.activeCatFilterCount>0?t.activeCatFilterCount:null)("matBadgeOverlap",!1),m.Fb(1),m.Uc(" ",m.lc(4,4,"Categories")," ")}}function E(t,e){if(1&t&&(m.Xb(0,"div"),m.Xb(1,"button",20),m.Xb(2,"span",21),m.Sc(3),m.kc(4,"translate"),m.Wb(),m.Wb(),m.Wb()),2&t){const t=m.jc(),e=m.Cc(26);m.Fb(1),m.rc("matMenuTriggerFor",e),m.Fb(1),m.rc("matBadge",t.activeTagFilterCount>0?t.activeTagFilterCount:null)("matBadgeOverlap",!1),m.Fb(1),m.Uc(" ",m.lc(4,4,"Tags")," ")}}function w(t,e){1&t&&(m.Xb(0,"mat-icon"),m.Sc(1,"checked"),m.Wb())}function _(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div"),m.Xb(1,"button",16),m.fc("click",(function(){m.Gc(t);const n=e.$implicit;return m.jc().onFilterChange("category",n.id)})),m.Qc(2,w,2,0,"mat-icon",8),m.Xb(3,"span"),m.Sc(4),m.Wb(),m.Wb(),m.Wb()}if(2&t){const t=e.$implicit;m.Fb(2),m.rc("ngIf",t.state),m.Fb(2),m.Tc(t.label)}}function B(t,e){1&t&&(m.Xb(0,"mat-icon"),m.Sc(1,"checked"),m.Wb())}function R(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div"),m.Xb(1,"button",16),m.fc("click",(function(){m.Gc(t);const n=e.$implicit;return m.jc().onFilterChange("tag",n.id)})),m.Qc(2,B,2,0,"mat-icon",8),m.Xb(3,"span"),m.Sc(4),m.Wb(),m.Wb(),m.Wb()}if(2&t){const t=e.$implicit;m.Fb(2),m.rc("ngIf",t.state),m.Fb(2),m.Tc(t.label)}}function I(t,e){if(1&t&&(m.Xb(0,"span"),m.Xb(1,"mat-icon",19),m.Sc(2,"local_offer"),m.Wb(),m.Sc(3),m.Wb()),2&t){const t=e.$implicit;m.Fb(3),m.Uc(" ",t.getTitle()," ")}}function P(t,e){if(1&t&&(m.Xb(0,"div",22),m.Xb(1,"div",23),m.Sc(2),m.Wb(),m.Xb(3,"div",24),m.Qc(4,I,4,1,"span",10),m.Wb(),m.Wb()),2&t){const t=e.item,n=m.jc();m.Fb(2),m.Uc(" ",t.getTitle()," "),m.Fb(2),m.rc("ngForOf",n.getTags(t))}}const j=[{path:"",component:(()=>{class t extends g.a{constructor(t,e,n,i,o,a,c,s,l){super(t,e,n,l),this.translate=e,this.motionRepo=i,this.motionCsvExport=o,this.motionPdfExport=a,this.tagRepo=c,this.categoryRepo=s,this.motions=[],this.hasChanged=!1,this.tagFilterOptions=[],this.activeTagFilterCount=0,this.categoryFilterOptions=[],this.activeCatFilterCount=0,this.activeTagFilters=new r.a([]),this.activeCatFilters=new r.a([]),this.motionsObservable=this.motionRepo.getViewModelListObservable(),this.motionsObservable.subscribe(t=>{this.motions=t.map(t=>t).sort((t,e)=>t.weight-e.weight)})}ngOnInit(){this.subscriptions.push(this.activeTagFilters.subscribe(t=>this.onSubscribedFilterChange("tag",t))),this.subscriptions.push(this.activeCatFilters.subscribe(t=>this.onSubscribedFilterChange("category",t))),this.subscriptions.push(this.tagRepo.getViewModelListBehaviorSubject().subscribe(t=>{t&&t.length?(this.tagFilterOptions=t.map(t=>({label:t.name,id:t.id,state:this.tagFilterOptions&&this.tagFilterOptions.some(e=>e.id===t.id&&!0===e.state)})),this.tagFilterOptions.push({label:this.translate.instant("No tags"),id:0,state:this.tagFilterOptions&&this.tagFilterOptions.some(t=>0===t.id&&!0===t.state)})):this.tagFilterOptions=[]})),this.subscriptions.push(this.categoryRepo.getViewModelListBehaviorSubject().subscribe(t=>{t&&t.length?(this.categoryFilterOptions=t.map(t=>({label:t.prefixedName,id:t.id,state:this.categoryFilterOptions&&this.categoryFilterOptions.some(e=>e.id===t.id&&!0===e.state)})),this.categoryFilterOptions.push({label:this.translate.instant("No category"),id:0,state:this.categoryFilterOptions&&this.categoryFilterOptions.some(t=>0===t.id&&!0===t.state)})):this.categoryFilterOptions=[]}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.motionRepo.sortMotions(this.osSortTree.getTreeData()).then(()=>this.osSortTree.setSubscription(),this.raiseError)}))}onCancel(){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.canDeactivate())&&this.osSortTree.setSubscription()}))}receiveChanges(t){this.hasChanged=t}csvExportCallList(){this.motionCsvExport.exportCallList(this.motions)}pdfExportCallList(){this.motionPdfExport.exportPdfCallList(this.motions)}getTags(t){const e=this.motionRepo.getViewModel(t.id);return e?e.tags:[]}onFilterChange(t,e){const n="tag"===t?this.activeTagFilters.value:this.activeCatFilters.value;n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),"tag"===t?this.activeTagFilters.next(n):this.activeCatFilters.next(n)}resetFilters(){this.activeTagFilters.next([]),this.activeCatFilters.next([])}sortMotionsByIdentifier(){return Object(s.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Do you really want to go ahead?"),e=this.translate.instant("This will reset all made changes and sort the call list.");(yield this.promptService.open(t,e))&&this.forceSort.emit("identifier")}))}onSubscribedFilterChange(t,e){"tag"===t?(this.activeTagFilterCount=e.length,this.tagFilterOptions.forEach(t=>{t.state=e&&e.some(e=>e===t.id)})):(this.activeCatFilterCount=e.length,this.categoryFilterOptions.forEach(t=>{t.state=e&&e.some(e=>e===t.id)})),this.hasActiveFilter=this.activeCatFilterCount>0||this.activeTagFilterCount>0;const n=this.tagFilterOptions.filter(t=>!0===t.state),i=this.categoryFilterOptions.filter(t=>!0===t.state);this.changeFilter.emit(t=>{if(n.length)if(t.tags&&t.tags.length){if(!t.tags.some(t=>n.some(e=>e.id===t.id)))return!0}else if(!n.some(t=>0===t.id))return!0;if(i.length){const e=t.category_id||0;return!i.some(t=>t.id===e)}return!1})}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(f.c),m.Rb(v.k),m.Rb(F.a),m.Rb(b.a),m.Rb(p.a),m.Rb(h.a),m.Rb(u.a),m.Rb(l.a),m.Rb(d.a))},t.\u0275cmp=m.Lb({type:t,selectors:[["os-call-list"]],features:[m.Cb],decls:54,vars:28,consts:[["prevUrl","../..",3,"nav","editMode","mainEvent","saveEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"custom-table-header","flex-spaced"],[1,"filter-count"],["class","current-filters",4,"ngIf"],[1,"flex-spaced","margin-right-5"],[4,"ngIf"],["catFilterMenu","matMenu"],[4,"ngFor","ngForOf"],["tagFilterMenu","matMenu"],["parentKey","sort_parent_id","weightKey","weight",3,"model","filterChange","sortingDefinition","visibleNodes","hasChanged"],["osSortedTree",""],["innerNode",""],["mainMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"current-filters"],["mat-button","",3,"click"],["inline",""],["mat-button","",3,"matMenuTriggerFor"],["matBadgeColor","accent",1,"upper",3,"matBadge","matBadgeOverlap"],[1,"line"],[1,"left"],[1,"right"]],template:function(t,e){if(1&t&&(m.Xb(0,"os-head-bar",0),m.fc("mainEvent",(function(){return e.onCancel()}))("saveEvent",(function(){return e.onSave()})),m.Xb(1,"div",1),m.Xb(2,"h2"),m.Sc(3),m.kc(4,"translate"),m.Wb(),m.Wb(),m.Xb(5,"div",2),m.Xb(6,"button",3),m.Xb(7,"mat-icon"),m.Sc(8,"more_vert"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(9,"div",4),m.Xb(10,"div",5),m.Xb(11,"span"),m.Sc(12),m.Wb(),m.Xb(13,"span"),m.Sc(14),m.kc(15,"translate"),m.Wb(),m.Xb(16,"span"),m.Sc(17),m.Wb(),m.Wb(),m.Qc(18,W,13,6,"div",6),m.Xb(19,"div",7),m.Qc(20,X,5,6,"div",8),m.Qc(21,E,5,6,"div",8),m.Wb(),m.Wb(),m.Xb(22,"mat-menu",null,9),m.Qc(24,_,5,2,"div",10),m.Wb(),m.Xb(25,"mat-menu",null,11),m.Qc(27,R,5,2,"div",10),m.Wb(),m.Xb(28,"mat-card"),m.Xb(29,"os-sorting-tree",12,13),m.fc("visibleNodes",(function(t){return e.onChangeAmountOfItems(t)}))("hasChanged",(function(t){return e.receiveChanges(t)})),m.Qc(31,P,5,2,"ng-template",null,14,m.Rc),m.Wb(),m.Wb(),m.Xb(33,"mat-menu",null,15),m.Xb(35,"button",16),m.fc("click",(function(){return e.sortMotionsByIdentifier()})),m.Xb(36,"mat-icon"),m.Sc(37,"sort"),m.Wb(),m.Xb(38,"span"),m.Sc(39),m.kc(40,"translate"),m.Wb(),m.Wb(),m.Sb(41,"mat-divider"),m.Xb(42,"button",16),m.fc("click",(function(){return e.pdfExportCallList()})),m.Xb(43,"mat-icon"),m.Sc(44,"picture_as_pdf"),m.Wb(),m.Xb(45,"span"),m.Sc(46),m.kc(47,"translate"),m.Wb(),m.Wb(),m.Xb(48,"button",16),m.fc("click",(function(){return e.csvExportCallList()})),m.Xb(49,"mat-icon"),m.Sc(50,"archive"),m.Wb(),m.Xb(51,"span"),m.Sc(52),m.kc(53,"translate"),m.Wb(),m.Wb(),m.Wb()),2&t){const t=m.Cc(34);m.rc("nav",!1)("editMode",e.hasChanged),m.Fb(3),m.Tc(m.lc(4,18,"Call list")),m.Fb(3),m.rc("matMenuTriggerFor",t),m.Fb(6),m.Uc(" ",e.seenNodes[0],"\xa0"),m.Fb(2),m.Tc(m.lc(15,20,"of")),m.Fb(3),m.Uc("\xa0",e.seenNodes[1],""),m.Fb(1),m.rc("ngIf",e.hasActiveFilter),m.Fb(2),m.rc("ngIf",e.categoryFilterOptions.length),m.Fb(1),m.rc("ngIf",e.tagFilterOptions.length),m.Fb(3),m.rc("ngForOf",e.categoryFilterOptions),m.Fb(3),m.rc("ngForOf",e.tagFilterOptions),m.Fb(2),m.rc("model",e.motionsObservable)("filterChange",e.changeFilter)("sortingDefinition",e.forceSort),m.Fb(10),m.Tc(m.lc(40,22,"Sort by identifier")),m.Fb(7),m.Tc(m.lc(47,24,"Export as PDF")),m.Fb(6),m.Tc(m.lc(53,26,"Export as CSV"))}},directives:[S.a,C.b,x.e,M.a,i.t,x.f,i.s,y.a,k.a,x.c,O.a,T.a],pipes:[v.j],styles:[".line[_ngcontent-%COMP%]{display:table;width:100%;font-size:14px;min-height:50px;margin-bottom:5px}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:100%}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-right:10px;width:auto;white-space:nowrap}.margin-right-5[_ngcontent-%COMP%]{margin-right:5px!important}",".filter-menu-head[_ngcontent-%COMP%]{padding-left:5px}.filter-menu-head[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{margin:0 auto}.filter-menu-head[_ngcontent-%COMP%]:hover{cursor:pointer}.action-buttons[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:500px){.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{display:none}}.active-filter[_ngcontent-%COMP%]{white-space:pre}span.right-with-margin[_ngcontent-%COMP%]{margin-right:25px}.filter-count[_ngcontent-%COMP%]{min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;font-style:italic;margin-left:24px;margin-right:1em}.current-filters[_ngcontent-%COMP%], .filter-count[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.current-filters[_ngcontent-%COMP%]{width:100%}.current-filters[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inherit}.current-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;margin:auto 5px;font-size:75%}.current-filters[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;height:12px;width:12px}"]}),t})(),pathMatch:"full",canDeactivate:[c.a]}];let Q=(()=>{class t{}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[a.j.forChild(j)],a.j]}),t})(),A=(()=>{class t{}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[i.c,Q,o.a]]}),t})()}}]);