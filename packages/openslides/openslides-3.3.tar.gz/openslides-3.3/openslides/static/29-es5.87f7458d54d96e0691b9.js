!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[29,42],{"+BBA":function(t,e,r){"use strict";r.r(e),r.d(e,"TopicsModule",(function(){return pt}));var a=r("SVse"),u=r("PCNd"),b=r("iInd"),p=r("OwvW"),f=r("mrSG"),d=r("s7LF"),m=r("InfO"),h=r("cffc"),v=r("F48D"),g=r("+az0"),y=r("KUsl"),k=r("mV3u"),S=r("W+e+"),F=r("Q/67"),T=r("8Y7J"),O=r("cUpR"),w=r("zHaW"),j=r("TSSN"),W=r("mksl"),X=r("3Xi6"),_=r("rJgo"),R=r("Tp2j"),I=r("40uZ"),C=r("Dxy4"),P=r("Tj54"),M=r("PDjf"),x=r("SqCe"),L=r("Q2Ze"),E=r("e6WT"),Q=r("IZUe"),B=r("crmZ"),A=r("JAMN"),D=r("ZTz/"),V=r("oqD5"),U=r("UhP/"),J=r("BSbQ"),N=r("7jBc");function H(t,e){1&t&&(T.Xb(0,"span"),T.Sc(1),T.kc(2,"translate"),T.Wb()),2&t&&(T.Fb(1),T.Tc(T.lc(2,1,"New topic")))}function G(t,e){1&t&&(T.Xb(0,"span"),T.Sc(1),T.kc(2,"translate"),T.Wb()),2&t&&(T.Fb(1),T.Tc(T.lc(2,1,"Edit topic")))}function Y(t,e){1&t&&(T.Xb(0,"span"),T.Sc(1),T.kc(2,"translate"),T.Wb()),2&t&&(T.Fb(1),T.Tc(T.lc(2,1,"Topic")))}function Z(t,e){if(1&t&&(T.Xb(0,"div",8),T.Xb(1,"button",9),T.Xb(2,"mat-icon"),T.Sc(3,"more_vert"),T.Wb(),T.Wb(),T.Wb()),2&t){T.jc();var n=T.Cc(9);T.Fb(1),T.rc("matMenuTriggerFor",n)}}function q(t,e){if(1&t&&(T.Xb(0,"div"),T.Xb(1,"h1"),T.Sc(2),T.Wb(),T.Wb()),2&t){var n=T.jc(2);T.Fb(2),T.Tc(n.topic.getListTitle())}}function z(t,e){if(1&t&&(T.Xb(0,"span"),T.Sb(1,"div",12),T.kc(2,"trust"),T.Wb()),2&t){var n=T.jc(2);T.Fb(1),T.rc("innerHTML",T.mc(2,1,n.topic.text,"html"),T.Hc)}}function K(t,e){if(1&t&&(T.Xb(0,"mat-list-item"),T.Xb(1,"a",15),T.Sc(2),T.Wb(),T.Wb()),2&t){var n=e.$implicit;T.Fb(1),T.rc("routerLink",n.url),T.Fb(1),T.Tc(n.getTitle())}}function $(t,e){if(1&t&&(T.Xb(0,"div"),T.Xb(1,"h3"),T.Xb(2,"span"),T.Sc(3),T.kc(4,"translate"),T.Wb(),T.Sc(5,": "),T.Xb(6,"mat-list",13),T.Qc(7,K,3,2,"mat-list-item",14),T.Wb(),T.Wb(),T.Wb()),2&t){var n=T.jc(2);T.Fb(3),T.Tc(T.lc(4,2,"Attachments")),T.Fb(4),T.rc("ngForOf",n.topic.attachments)}}function tt(t,e){1&t&&(T.Xb(0,"mat-error"),T.Sc(1),T.kc(2,"translate"),T.Wb()),2&t&&(T.Fb(1),T.Tc(T.lc(2,1,"A name is required")))}function et(t,e){if(1&t&&(T.Xb(0,"mat-option",24),T.Xb(1,"span"),T.Sc(2),T.kc(3,"translate"),T.Wb(),T.Wb()),2&t){var n=e.$implicit;T.rc("value",n.key),T.Fb(2),T.Tc(T.lc(3,2,n.name))}}function nt(t,e){if(1&t&&(T.Xb(0,"div"),T.Xb(1,"div"),T.Xb(2,"mat-form-field"),T.Xb(3,"mat-select",21),T.kc(4,"translate"),T.Qc(5,et,4,4,"mat-option",22),T.Wb(),T.Wb(),T.Wb(),T.Xb(6,"div"),T.Xb(7,"mat-form-field"),T.Sb(8,"os-search-value-selector",23),T.kc(9,"translate"),T.Wb(),T.Wb(),T.Wb()),2&t){var n=T.jc(3);T.Fb(3),T.sc("placeholder",T.lc(4,5,"Agenda visibility")),T.Fb(2),T.rc("ngForOf",n.itemVisibility),T.Fb(3),T.sc("placeholder",T.lc(9,7,"Parent agenda item")),T.rc("includeNone",!0)("inputListValues",n.itemObserver)}}function rt(t,e){if(1&t){var n=T.Yb();T.Xb(0,"form",16),T.fc("keydown",(function(t){return T.Gc(n),T.jc(2).onKeyDown(t)})),T.Xb(1,"div"),T.Xb(2,"mat-form-field"),T.Sb(3,"input",17),T.kc(4,"translate"),T.Qc(5,tt,3,3,"mat-error",2),T.Wb(),T.Wb(),T.Xb(6,"div",18),T.Xb(7,"h4"),T.Sc(8),T.kc(9,"translate"),T.Wb(),T.Sb(10,"editor",19),T.Wb(),T.Xb(11,"os-attachment-control",20),T.fc("errorHandler",(function(t){return T.Gc(n),T.jc(2).raiseError(t)})),T.Wb(),T.Qc(12,nt,10,9,"div",2),T.Wb()}if(2&t){var r=T.jc(2);T.rc("formGroup",r.topicForm),T.Fb(3),T.sc("placeholder",T.lc(4,6,"Title")),T.Fb(2),T.rc("ngIf",r.topicForm.invalid),T.Fb(3),T.Tc(T.lc(9,8,"Text")),T.Fb(2),T.rc("init",r.tinyMceSettings),T.Fb(2),T.rc("ngIf",r.newTopic)}}function it(t,e){if(1&t&&(T.Xb(0,"mat-card",10),T.Qc(1,q,3,1,"div",2),T.Xb(2,"div"),T.Qc(3,z,3,4,"span",2),T.Wb(),T.Qc(4,$,8,4,"div",2),T.Qc(5,rt,13,10,"form",11),T.Wb()),2&t){var n=T.jc();T.rc("ngClass",n.editTopic?"os-form-card":"os-card"),T.Fb(1),T.rc("ngIf",!n.editTopic),T.Fb(2),T.rc("ngIf",!n.editTopic),T.Fb(1),T.rc("ngIf",n.topic.hasAttachments()&&!n.editTopic),T.Fb(1),T.rc("ngIf",n.editTopic)}}function ot(t,e){if(1&t){var n=T.Yb();T.Xb(0,"div"),T.Sb(1,"mat-divider"),T.Xb(2,"button",25),T.fc("click",(function(){return T.Gc(n),T.jc().onDeleteButton()})),T.Xb(3,"mat-icon"),T.Sc(4,"delete"),T.Wb(),T.Xb(5,"span"),T.Sc(6),T.kc(7,"translate"),T.Wb(),T.Wb(),T.Wb()}2&t&&(T.Fb(6),T.Tc(T.lc(7,1,"Delete")))}var ct,at,st,ut=((ct=function(t){c(r,t);var e=s(r);function r(t,i,o,c,a,s,u,l,b,p){var f;return n(this,r),(f=e.call(this,t,o,i)).translate=o,f.route=c,f.router=a,f.formBuilder=s,f.repo=u,f.promptService=l,f.operator=b,f.itemRepo=p,f.itemVisibility=g.b,f.getTopicByUrl(),f.createForm(),f.itemObserver=f.itemRepo.getViewModelListBehaviorSubject(),f}return i(r,[{key:"setEditMode",value:function(t){this.editTopic=t,t&&this.patchForm(),!t&&this.newTopic&&this.router.navigate(["./agenda/"])}},{key:"saveTopic",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.topicForm.valid){t.next=17;break}if(t.prev=1,!this.newTopic){t.next=9;break}return this.topicForm.value.agenda_parent_id||delete this.topicForm.value.agenda_parent_id,t.next=6,this.repo.create(new S.a(this.topicForm.value));case 6:this.router.navigate(["/agenda/"]),t.next=12;break;case 9:return t.next=11,this.repo.update(this.topicForm.value,this.topic);case 11:this.setEditMode(!1);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),this.raiseError(t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,14]])})))}},{key:"createForm",value:function(){this.topicForm=this.formBuilder.group({agenda_type:[],agenda_parent_id:[],attachments_id:[[]],text:[""],title:["",d.H.required]}),this.topicForm.get("agenda_type").setValue(1)}},{key:"patchForm",value:function(){var t=this,e={};Object.keys(this.topicForm.controls).forEach((function(n){e[n]=t.topic[n]})),this.topicForm.patchValue(e)}},{key:"getTopicByUrl",value:function(){var t=this;this.route.snapshot.url[0]&&"new"===this.route.snapshot.url[0].path?(this.newTopic=!0,this.editTopic=!0,this.topic=new F.a(new y.a),o(l(r.prototype),"setTitle",this).call(this,"New topic")):this.route.params.subscribe((function(e){t.loadTopic(e.id)}))}},{key:"loadTopic",value:function(t){var e=this;this.repo.getViewModelObservable(t).subscribe((function(t){if(t&&!e.editTopic){var n=t.getTitle();o(l(r.prototype),"setTitle",e).call(e,n),e.topic=t,e.topicForm&&!e.editTopic&&e.patchForm()}}))}},{key:"onDeleteButton",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this entry?"),n=this.topic.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.delete(this.topic).catch(this.raiseError);case 7:this.router.navigate(["/agenda"]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"isAllowed",value:function(t){switch(t){case"see":return this.operator.hasPerms(p.b.agendaCanSee);case"edit":return this.operator.hasPerms(p.b.agendaCanManage);case"default":return!1}}},{key:"onKeyDown",value:function(t){"Enter"===t.key&&t.shiftKey&&this.saveTopic(),"Escape"===t.key&&this.setEditMode(!1)}}]),r}(k.a)).\u0275fac=function(t){return new(t||ct)(T.Rb(O.c),T.Rb(w.a),T.Rb(j.k),T.Rb(b.a),T.Rb(b.f),T.Rb(d.g),T.Rb(h.a),T.Rb(v.a),T.Rb(p.a),T.Rb(m.a))},ct.\u0275cmp=T.Lb({type:ct,selectors:[["os-topic-detail"]],features:[T.Cb],decls:13,vars:16,consts:[["mainButtonIcon","edit",3,"hasMainButton","nav","goBack","editMode","isSaveButtonEnabled","mainEvent","saveEvent"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms","osPermsOr"],["class","spacer-bottom-60",3,"ngClass",4,"ngIf"],["topicExtraMenu","matMenu"],[3,"object","menuItem"],[4,"osPerms"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"spacer-bottom-60",3,"ngClass"],[3,"formGroup","keydown",4,"ngIf"],[3,"innerHTML"],["dense",""],[4,"ngFor","ngForOf"],["target","_blank",3,"routerLink"],[3,"formGroup","keydown"],["type","text","matInput","","osAutofocus","","required","","formControlName","title",3,"placeholder"],[1,"spacer-bottom-20"],["formControlName","text",3,"init"],["formControlName","attachments_id",3,"errorHandler"],["formControlName","agenda_type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","agenda_parent_id",3,"includeNone","placeholder","inputListValues"],[3,"value"],["mat-menu-item","",1,"red-warning-text",3,"click"]],template:function(t,e){1&t&&(T.Xb(0,"os-head-bar",0),T.fc("mainEvent",(function(){return e.setEditMode(!e.editTopic)}))("saveEvent",(function(){return e.saveTopic()})),T.Xb(1,"div",1),T.Xb(2,"h2"),T.Qc(3,H,3,3,"span",2),T.Qc(4,G,3,3,"span",2),T.Qc(5,Y,3,3,"span",2),T.Wb(),T.Wb(),T.Qc(6,Z,4,1,"div",3),T.Wb(),T.Qc(7,it,6,5,"mat-card",4),T.Xb(8,"mat-menu",null,5),T.Sb(10,"os-projector-button",6),T.Sb(11,"os-speaker-button",6),T.Qc(12,ot,8,3,"div",7),T.Wb()),2&t&&(T.rc("hasMainButton",e.isAllowed("edit"))("nav",!1)("goBack",!0)("editMode",e.editTopic)("isSaveButtonEnabled",e.topicForm.valid),T.Fb(3),T.rc("ngIf",e.newTopic),T.Fb(1),T.rc("ngIf",e.editTopic&&!e.newTopic),T.Fb(1),T.rc("ngIf",!e.newTopic&&!e.editTopic),T.Fb(1),T.rc("osPerms","agenda.can_manage")("osPermsOr","agenda.can_see_list_of_speakers"),T.Fb(1),T.rc("ngIf",e.topic||e.editTopic),T.Fb(3),T.rc("object",e.topic)("menuItem",!0),T.Fb(1),T.rc("object",e.topic)("menuItem",!0),T.Fb(1),T.rc("osPerms","agenda.can_manage"))},directives:[W.a,a.t,X.a,_.f,R.a,I.a,C.b,_.e,P.a,M.a,a.q,x.a,a.s,x.d,b.i,d.J,d.u,d.l,L.c,E.b,d.d,Q.a,d.E,d.t,d.j,B.a,A.a,L.b,D.a,V.a,U.n,J.a,_.c],pipes:[j.j,N.a],styles:[".topic-text[_ngcontent-%COMP%]{margin:0 20px;padding:25px}.topic-text[_ngcontent-%COMP%]   .missing[_ngcontent-%COMP%]{color:#708090;font-style:italic}"]}),ct),lt=[{path:"new",component:ut,data:{basePerm:p.b.agendaCanManage}},{path:":id",component:ut,data:{basePerm:p.b.agendaCanSee}}],bt=((st=function t(){n(this,t)}).\u0275mod=T.Pb({type:st}),st.\u0275inj=T.Ob({factory:function(t){return new(t||st)},imports:[[b.j.forChild(lt)],b.j]}),st),pt=((at=function t(){n(this,t)}).\u0275mod=T.Pb({type:at}),at.\u0275inj=T.Ob({factory:function(t){return new(t||at)},imports:[[a.c,bt,u.a]]}),at)},"40uZ":function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var o=r("/uUt"),c=r("3Y/2"),a=r("J/o/"),s=r("8Y7J"),u=r("3Xi6"),l=r("SVse"),b=r("iInd"),p=r("Dxy4"),f=r("ZFy/"),d=r("Tj54"),m=r("8Qe2"),h=r("rJgo"),v=r("f44v"),g=r("TSSN");function y(t,e){if(1&t&&(s.Xb(0,"a",4),s.Xb(1,"button",5),s.kc(2,"translate"),s.Xb(3,"mat-icon",6),s.Sc(4),s.Wb(),s.Wb(),s.Wb()),2&t){var n=s.jc(3);s.rc("routerLink",n.listOfSpeakersUrl),s.Fb(1),s.rc("disabled",n.disabled)("matTooltip",s.lc(2,5,n.tooltip)),s.Fb(2),s.rc("matBadge",n.listOfSpeakers.waitingSpeakerAmount>0?n.listOfSpeakers.waitingSpeakerAmount:null),s.Fb(1),s.Uc(" ",n.icon," ")}}function k(t,e){if(1&t&&(s.Xb(0,"mat-basic-chip",9),s.Xb(1,"span"),s.Sc(2),s.Wb(),s.Wb()),2&t){var n=s.jc(4);s.Fb(2),s.Tc(n.listOfSpeakers.waitingSpeakerAmount)}}function S(t,e){if(1&t&&(s.Xb(0,"button",7),s.Xb(1,"mat-icon"),s.Sc(2),s.Wb(),s.Xb(3,"span"),s.Sc(4),s.kc(5,"translate"),s.Wb(),s.Xb(6,"span"),s.Sc(7,"\xa0"),s.Wb(),s.Qc(8,k,3,1,"mat-basic-chip",8),s.Wb()),2&t){var n=s.jc(3);s.rc("routerLink",n.listOfSpeakers.listOfSpeakersUrl),s.Fb(2),s.Tc(n.icon),s.Fb(2),s.Tc(s.lc(5,4,"List of speakers")),s.Fb(4),s.rc("ngIf",n.listOfSpeakers.waitingSpeakerAmount>0)}}function F(t,e){if(1&t&&(s.Vb(0),s.Qc(1,y,5,7,"a",2),s.Qc(2,S,9,6,"button",3),s.Ub()),2&t){var n=s.jc(2);s.Fb(1),s.rc("ngIf",!n.menuItem),s.Fb(1),s.rc("ngIf",n.menuItem)}}function T(t,e){if(1&t&&(s.Vb(0),s.Qc(1,F,3,2,"ng-container",1),s.Ub()),2&t){var n=s.jc();s.Fb(1),s.rc("ngIf",n.listOfSpeakers)}}var O,w=((O=function(){function t(e){n(this,t),this.listOfSpeakersRepo=e,this.menuItem=!1}return i(t,[{key:"ngOnDestroy",value:function(){this.cleanLosSub()}},{key:"cleanLosSub",value:function(){this.losSub&&(this.losSub.unsubscribe(),this.losSub=null)}},{key:"object",set:function(t){var e,n=this;e=Object(a.b)(t)?t.listOfSpeakers:function(t){return!!t&&void 0!==t.id&&void 0!==t.collection}(t)?this.listOfSpeakersRepo.findByContentObject(t):null,this.cleanLosSub(),e&&(this.losSub=this.listOfSpeakersRepo.getViewModelObservable(e.id).pipe(Object(o.a)()).subscribe((function(t){n.listOfSpeakers=t})))}},{key:"listOfSpeakersUrl",get:function(){if(!this.disabled)return this.listOfSpeakers.listOfSpeakersUrl}},{key:"icon",get:function(){return this.listOfSpeakers.closed?"voice_over_off":"record_voice_over"}},{key:"tooltip",get:function(){return this.listOfSpeakers.closed?"The list of speakers is closed.":"List of speakers"}}]),t}()).\u0275fac=function(t){return new(t||O)(s.Rb(c.a))},O.\u0275cmp=s.Lb({type:O,selectors:[["os-speaker-button"]],inputs:{object:"object",disabled:"disabled",menuItem:"menuItem"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],["class","anchor-button",3,"routerLink",4,"ngIf"],["type","button","mat-menu-item","",3,"routerLink",4,"ngIf"],[1,"anchor-button",3,"routerLink"],["type","button","mat-icon-button","",3,"disabled","matTooltip"],["matBadgeColor","accent",3,"matBadge"],["type","button","mat-menu-item","",3,"routerLink"],["disableRipple","","class","lightblue",4,"ngIf"],["disableRipple","",1,"lightblue"]],template:function(t,e){1&t&&s.Qc(0,T,2,1,"ng-container",0),2&t&&s.rc("osPerms","agenda.can_see_list_of_speakers")},directives:[u.a,l.t,b.i,p.b,f.c,d.a,m.a,h.c,b.g,v.a],pipes:[g.j],styles:[".mat-basic-chip .mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],encapsulation:2}),O)},F48D:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var o=r("mrSG"),c=r("LBBb"),a=r("8Y7J"),s=r("iELJ"),u=function(){var t=function(){function t(e){n(this,t),this.dialog=e}return i(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dialog.open(c.a,{width:"290px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.bc(s.b))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},JAMN:function(e,r,o){"use strict";o.d(r,"a",(function(){return W}));var a=o("8Y7J"),u=o("Q2Ze"),l=o("lJxs"),b=o("SSyl"),p=o("aAo1"),f=o("Izkr"),d=o("s7LF"),m=o("YEUz"),h=o("iELJ"),v=o("SVse"),g=o("oqD5"),y=o("3Xi6"),k=o("Dxy4"),S=o("Tj54"),F=o("GTZY"),T=o("TSSN");function O(t,e){if(1&t){var n=a.Yb();a.Xb(0,"button",5),a.fc("click",(function(){a.Gc(n);var t=a.jc(2),e=a.Cc(2);return t.openUploadDialog(e)})),a.Xb(1,"mat-icon"),a.Sc(2,"cloud_upload"),a.Wb(),a.Wb()}}function w(t,e){if(1&t&&(a.Xb(0,"div",2),a.Xb(1,"mat-form-field"),a.Sb(2,"os-search-value-selector",3),a.kc(3,"translate"),a.Wb(),a.Qc(4,O,3,0,"button",4),a.Wb()),2&t){var n=a.jc();a.Fb(2),a.sc("placeholder",a.lc(3,5,"Attachments")),a.rc("multiple",!0)("formControl",n.contentForm)("inputListValues",n.mediaFileList),a.Fb(2),a.rc("osPerms","mediafiles.can_manage")}}function j(t,e){if(1&t){var n=a.Yb();a.Xb(0,"h1",6),a.Xb(1,"span"),a.Sc(2),a.kc(3,"translate"),a.Wb(),a.Wb(),a.Xb(4,"os-media-upload-content",7),a.fc("uploadSuccessEvent",(function(t){return a.Gc(n),a.jc().uploadSuccess(t)}))("errorEvent",(function(t){return a.Gc(n),a.jc().uploadError(t)})),a.Wb()}2&t&&(a.Fb(2),a.Tc(a.lc(3,1,"Upload files")))}var W=function(){var e=function(e){c(o,e);var r=s(o);function o(t,e,i,c,s,u){var l;return n(this,o),(l=r.call(this,t,e,i,c)).ngControl=c,l.dialogService=s,l.mediaService=u,l.errorHandler=new a.p,l}return i(o,[{key:"ngOnInit",value:function(){this.mediaFileList=this.mediaService.getViewModelListObservable().pipe(Object(l.a)((function(t){return t.filter((function(t){return!t.is_directory}))})))}},{key:"openUploadDialog",value:function(t){this.dialogRef=this.dialogService.open(t,Object.assign(Object.assign({},f.c),{disableClose:!1}))}},{key:"uploadSuccess",value:function(e){var n=[].concat(t(this.contentForm.value),t(e));this.updateForm(n),this.dialogRef.close()}},{key:"uploadError",value:function(t){this.errorHandler.emit(t)}},{key:"onContainerClick",value:function(t){}},{key:"initializeForm",value:function(){this.contentForm=this.fb.control([])}},{key:"updateForm",value:function(t){this.contentForm.setValue(t||[])}},{key:"empty",get:function(){return!this.contentForm.value.length}},{key:"controlType",get:function(){return"attachment-control"}}]),o}(p.a);return e.\u0275fac=function(t){return new(t||e)(a.Rb(d.g),a.Rb(m.h),a.Rb(a.m),a.Rb(d.s,10),a.Rb(h.b),a.Rb(b.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["os-attachment-control"]],outputs:{errorHandler:"errorHandler"},features:[a.Eb([{provide:u.d,useExisting:e}]),a.Cb],decls:3,vars:1,consts:[["class","attachment-container",4,"ngIf"],["uploadDialog",""],[1,"attachment-container"],[1,"selector",3,"multiple","placeholder","formControl","inputListValues"],["type","button","mat-icon-button","",3,"click",4,"osPerms"],["type","button","mat-icon-button","",3,"click"],["mat-dialog-title",""],[3,"uploadSuccessEvent","errorEvent"]],template:function(t,e){1&t&&(a.Qc(0,w,5,7,"div",0),a.Qc(1,j,5,3,"ng-template",null,1,a.Rc)),2&t&&a.rc("ngIf",e.contentForm)},directives:[v.t,u.c,g.a,d.t,d.i,y.a,k.b,S.a,h.i,F.a],pipes:[T.j],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]{-ms-flex-pack:justify;justify-content:space-between;display:-ms-flexbox;display:flex}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{width:95%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{top:20px}"],changeDetection:0}),e}()},LBBb:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var i=r("iELJ"),o=r("8Y7J"),c=r("SVse"),a=r("Dxy4"),s=r("TSSN");function u(t,e){if(1&t&&(o.Xb(0,"div"),o.Xb(1,"h2",1),o.Sc(2),o.Wb(),o.Sb(3,"mat-dialog-content",2),o.Xb(4,"mat-dialog-actions"),o.Xb(5,"button",3),o.Sc(6),o.kc(7,"translate"),o.Wb(),o.Xb(8,"button",4),o.Sc(9),o.kc(10,"translate"),o.Wb(),o.Wb(),o.Wb()),2&t){var n=o.jc();o.Fb(2),o.Tc(n.data.title),o.Fb(1),o.rc("innerHTML",n.data.content,o.Hc),o.Fb(2),o.rc("mat-dialog-close",!0),o.Fb(1),o.Tc(o.lc(7,6,"OK")),o.Fb(2),o.rc("mat-dialog-close",!1),o.Fb(1),o.Tc(o.lc(10,8,"Cancel"))}}var l=function(){var t=function t(e,r){n(this,t),this.dialogRef=e,this.data=r};return t.\u0275fac=function(e){return new(e||t)(o.Rb(i.h),o.Rb(i.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&o.Qc(0,u,11,10,"div",0),2&t&&o.rc("ngIf",e.data)},directives:[c.t,i.i,i.f,i.c,a.b,i.d],pipes:[s.j],encapsulation:2}),t}()}}])}();