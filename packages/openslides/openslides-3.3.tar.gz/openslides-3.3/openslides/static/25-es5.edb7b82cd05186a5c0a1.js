!function(){function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=n(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return c=t.done,t},e:function(t){l=!0,a=t},f:function(){try{c||null==o.return||o.return()}finally{if(l)throw a}}}}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[25,42],{"6Ehv":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var o=n("InfO"),i=n("+KbT"),r=n("+az0"),a=n("8Y7J"),c=n("3Xi6"),l=n("SVse"),s=n("s7LF"),u=n("pMoy"),m=n("Q2Ze"),d=n("ZTz/"),p=n("UhP/"),h=n("oqD5"),g=n("TSSN");function v(t,e){if(1&t&&(a.Xb(0,"mat-option",7),a.Xb(1,"span"),a.Sc(2),a.kc(3,"translate"),a.Wb(),a.Wb()),2&t){var n=e.$implicit;a.rc("value",n.key),a.Fb(2),a.Tc(a.lc(3,2,n.name))}}function k(t,e){if(1&t&&(a.Xb(0,"div",2),a.Xb(1,"mat-form-field"),a.Sb(2,"os-search-value-selector",8),a.kc(3,"translate"),a.Wb(),a.Wb()),2&t){var n=a.jc(4);a.rc("formGroup",n.form),a.Fb(2),a.sc("placeholder",a.lc(3,5,"Parent agenda item")),a.rc("multiple",!1)("includeNone",!0)("inputListValues",n.itemObserver)}}function y(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"div"),a.Xb(2,"mat-form-field",2),a.Xb(3,"mat-select",4),a.kc(4,"translate"),a.Qc(5,v,4,4,"mat-option",5),a.Wb(),a.Wb(),a.Wb(),a.Qc(6,k,4,7,"div",6),a.Ub()),2&t){var n=a.jc(3);a.Fb(2),a.rc("formGroup",n.form),a.Fb(1),a.sc("placeholder",a.lc(4,4,"Agenda visibility")),a.Fb(2),a.rc("ngForOf",n.ItemVisibilityChoices),a.Fb(1),a.rc("ngIf",n.itemObserver.value.length>0)}}function F(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"div",2),a.Xb(2,"p"),a.Xb(3,"mat-checkbox",3),a.Xb(4,"span"),a.Sc(5),a.kc(6,"translate"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Qc(7,y,7,6,"ng-container",1),a.Ub()),2&t){var n=a.jc(2);a.Fb(1),a.rc("formGroup",n.form),a.Fb(4),a.Tc(a.lc(6,3,"Add to agenda")),a.Fb(2),a.rc("ngIf",!!n.checkbox.value)}}function w(t,e){if(1&t&&(a.Vb(0),a.Qc(1,F,8,5,"ng-container",1),a.Ub()),2&t){var n=a.jc();a.Fb(1),a.rc("ngIf",n.showForm)}}var S=function(){var t=function(){function t(e,n){b(this,t),this.configService=e,this.itemRepo=n,this.showForm=!1,this.ItemVisibilityChoices=r.b}return f(t,[{key:"ngOnInit",value:function(){var t=this;this.checkbox=this.form.controls.agenda_create,this.configService.get("agenda_item_creation").subscribe((function(e){if("always"===e)t.showForm=!0,t.checkbox.disable(),t.form.patchValue({agenda_create:!0});else if("never"===e)t.showForm=!1,t.checkbox.disable(),t.form.patchValue({agenda_create:!1});else{var n="default_yes"===e;t.showForm=!0,t.checkbox.enable(),t.form.patchValue({agenda_create:n})}})),this.configService.get("agenda_new_items_default_visibility").subscribe((function(e){t.form.get("agenda_type").setValue(+e)})),this.itemObserver=this.itemRepo.getViewModelListBehaviorSubject()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Rb(i.a),a.Rb(o.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["os-agenda-content-object-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],[3,"formGroup"],["formControlName","agenda_create"],["formControlName","agenda_type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[3,"value"],["formControlName","agenda_parent_id",3,"multiple","includeNone","placeholder","inputListValues"]],template:function(t,e){1&t&&a.Qc(0,w,2,1,"ng-container",0),2&t&&a.rc("osPerms","agenda.can_manage")},directives:[c.a,l.t,s.u,s.l,u.a,s.t,s.j,m.c,d.a,l.s,p.n,h.a],pipes:[g.j],styles:[""]}),t}()},F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("mrSG"),i=n("LBBb"),r=n("8Y7J"),a=n("iELJ"),c=function(){var t=function(){function t(e){b(this,t),this.dialog=e}return f(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dialog.open(i.a,{width:"290px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.bc(a.b))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},FWGL:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionBlockModule",(function(){return Ht}));var o,a=n("SVse"),l=n("PCNd"),u=n("iInd"),m=n("mrSG"),d=n("s7LF"),p=n("OwvW"),h=n("AqIO"),g=n("InfO"),v=n("D5Qf"),k=n("dOok"),y=n("+KbT"),F=n("F48D"),w=n("KL36"),S=n("Izkr"),W=n("wL0i"),X=n("D/ll"),M=n("iTQr"),O=n("+B0n"),_=n("s3dr"),I=n("lv9T"),R=n("Q5D0"),C=n("8Y7J"),j=n("TSSN"),T=((o=function(t){r(n,t);var e=c(n);function n(t,o,i,r,a,c,l,s,u,f){return b(this,n),e.call(this,t,o,i,r,a,c,l,s,u,f)}return f(n,[{key:"preFilter",value:function(t){var e=this;return t.filter((function(t){return t.motion_block_id===e._blockId}))}},{key:"blockId",set:function(t){this._blockId=t}}]),n}(R.a)).\u0275fac=function(t){return new(t||o)(C.bc(h.a),C.bc(X.a),C.bc(M.a),C.bc(v.a),C.bc(O.a),C.bc(I.a),C.bc(_.a),C.bc(j.k),C.bc(p.a),C.bc(y.a))},o.\u0275prov=C.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),P=n("cUpR"),x=n("zHaW"),B=n("iELJ"),D=n("mksl"),Q=n("Dxy4"),A=n("rJgo"),E=n("Tj54"),L=n("0Obk"),N=n("4LpT"),G=n("40uZ"),V=n("3Xi6"),z=n("vYAO"),U=n("f44v"),Y=n("ZFy/"),q=n("Tp2j"),K=n("BSbQ"),J=n("Q2Ze"),H=n("e6WT"),Z=n("IZUe"),$=n("pMoy"),tt=["blockEditForm"],et=["editDialog"];function nt(t,e){if(1&t&&(C.Xb(0,"os-icon-container",16),C.kc(1,"translate"),C.Xb(2,"os-icon-container",17),C.kc(3,"translate"),C.Xb(4,"h2"),C.Sc(5),C.Wb(),C.Wb(),C.Wb()),2&t){var n=C.jc();C.rc("noWrap",!0)("showIcon",n.block.isFinished)("iconTooltip",C.lc(1,7,"Finished")),C.Fb(2),C.rc("noWrap",!0)("showIcon",n.block.internal)("iconTooltip",C.lc(3,9,"Internal")),C.Fb(3),C.Tc(n.block.title)}}function ot(t,e){if(1&t){var n=C.Yb();C.Xb(0,"button",20),C.fc("click",(function(){return C.Gc(n),C.jc(2).onFollowRecButton()})),C.Xb(1,"os-icon-container",21),C.Xb(2,"span"),C.Sc(3),C.kc(4,"translate"),C.Wb(),C.Wb(),C.Wb()}if(2&t){var o=C.jc(2);C.rc("disabled",o.isFollowingProhibited()),C.Fb(3),C.Tc(C.lc(4,2,"Follow recommendations for all motions"))}}var it=function(){return["motions.can_manage","motions.can_manage_metadata"]};function rt(t,e){1&t&&(C.Xb(0,"div",18),C.Qc(1,ot,5,4,"button",19),C.Wb()),2&t&&(C.Fb(1),C.rc("osPerms",C.wc(1,it)))}var at=function(){return{back:"true"}};function ct(t,e){if(1&t&&C.Sb(0,"a",31),2&t){var n=C.jc().row;C.rc("routerLink",n.getDetailStateURL())("state",C.wc(2,at))}}function lt(t,e){1&t&&(C.Xb(0,"span",32),C.Xb(1,"mat-icon",33),C.Sc(2,"star"),C.Wb(),C.Wb())}function st(t,e){1&t&&(C.Xb(0,"span",34),C.Xb(1,"mat-icon"),C.Sc(2,"attach_file"),C.Wb(),C.Wb())}function bt(t,e){if(1&t&&(C.Xb(0,"span"),C.Sc(1),C.Xb(2,"span"),C.Sc(3,"\xb7"),C.Wb(),C.Wb()),2&t){var n=C.jc().row;C.Fb(1),C.Uc(" ",n.identifier," ")}}function ut(t,e){if(1&t&&(C.Xb(0,"span"),C.Xb(1,"span"),C.Sc(2),C.kc(3,"translate"),C.Wb(),C.Sc(4),C.Wb()),2&t){var n=C.jc().row;C.Fb(2),C.Tc(C.lc(3,2,"by")),C.Fb(2),C.Uc(" ",n.submitters," ")}}function ft(t,e){1&t&&(C.Xb(0,"span"),C.Sc(1," \xb7 "),C.Wb())}function mt(t,e){if(1&t&&(C.Xb(0,"span"),C.Qc(1,ft,2,0,"span",11),C.Xb(2,"span"),C.Sc(3),C.kc(4,"translate"),C.Wb(),C.Sc(5),C.Wb()),2&t){var n=C.jc().row;C.Fb(1),C.rc("ngIf",n.submitters.length),C.Fb(2),C.Tc(C.lc(4,3,"Sequential number")),C.Fb(2),C.Uc(" ",n.id," ")}}function dt(t,e){if(1&t&&(C.Xb(0,"mat-basic-chip",35),C.Sc(1),C.Wb()),2&t){var n=C.jc().row,o=C.jc();C.rc("ngClass",n.stateCssColor)("disabled",!0),C.Fb(1),C.Uc(" ",o.getStateLabel(n)," ")}}function pt(t,e){if(1&t&&(C.Xb(0,"div",22),C.Qc(1,ct,1,3,"a",23),C.Xb(2,"div",24),C.Xb(3,"div",25),C.Qc(4,lt,3,0,"span",26),C.Qc(5,st,3,0,"span",27),C.Xb(6,"span"),C.Qc(7,bt,4,1,"span",11),C.Sc(8),C.Wb(),C.Wb(),C.Xb(9,"div",28),C.Qc(10,ut,5,4,"span",11),C.Qc(11,mt,6,5,"span",11),C.Wb(),C.Xb(12,"div",29),C.Qc(13,dt,2,3,"mat-basic-chip",30),C.Wb(),C.Wb(),C.Wb()),2&t){var n=e.row,o=C.jc();C.Fb(1),C.rc("ngIf",!o.isMultiSelect),C.Fb(3),C.rc("ngIf",n.star),C.Fb(1),C.rc("ngIf",n.hasAttachments()),C.Fb(2),C.rc("ngIf",n.identifier),C.Fb(1),C.Uc(" ",n.title," "),C.Fb(2),C.rc("ngIf",n.submitters.length),C.Fb(1),C.rc("ngIf",o.showSequential),C.Fb(2),C.rc("ngIf",n.state)}}function ht(t,e){if(1&t&&(C.Xb(0,"mat-basic-chip",37),C.Sc(1),C.Wb()),2&t){var n=C.jc().row,o=C.jc();C.Fb(1),C.Uc(" ",o.getRecommendationLabel(n)," ")}}function gt(t,e){if(1&t&&(C.Xb(0,"div",22),C.Qc(1,ht,2,1,"mat-basic-chip",36),C.Wb()),2&t){var n=e.row;C.Fb(1),C.rc("ngIf",!!n.recommendation)}}function vt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"div",22),C.Xb(1,"button",38),C.fc("click",(function(){C.Gc(n);var t=e.row;return C.jc().onRemoveMotionButton(t)})),C.kc(2,"translate"),C.Xb(3,"mat-icon"),C.Sc(4,"close"),C.Wb(),C.Wb(),C.Wb()}2&t&&(C.Fb(1),C.sc("matTooltip",C.lc(2,1,"Remove from motion block")))}var kt=function(t){return{motion:t}};function yt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"div",22),C.Xb(1,"button",39),C.fc("click",(function(t){return C.Gc(n),t.stopPropagation()})),C.Xb(2,"mat-icon"),C.Sc(3,"more_vert"),C.Wb(),C.Wb(),C.Wb()}if(2&t){var o=e.row,i=C.jc(),r=C.Cc(14);C.Fb(1),C.rc("disabled",i.isMultiSelect)("matMenuTriggerFor",r)("matMenuTriggerData",C.xc(3,kt,o))}}function Ft(t,e){if(1&t){var n=C.Yb();C.Sb(0,"os-projector-button",40),C.Sb(1,"os-speaker-button",40),C.Xb(2,"button",41),C.fc("click",(function(){C.Gc(n);var t=e.motion;return C.jc().onRemoveMotionButton(t)})),C.Xb(3,"mat-icon"),C.Sc(4,"close"),C.Wb(),C.Xb(5,"span"),C.Sc(6),C.kc(7,"translate"),C.Wb(),C.Wb()}if(2&t){var o=e.motion;C.rc("object",o)("menuItem",!0),C.Fb(1),C.rc("object",o)("menuItem",!0),C.Fb(5),C.Tc(C.lc(7,5,"Remove from motion block"))}}function wt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"button",43),C.fc("click",(function(){return C.Gc(n),C.jc(2).onFollowRecButton()})),C.Xb(1,"mat-icon"),C.Sc(2,"done_all"),C.Wb(),C.Xb(3,"span"),C.Sc(4),C.kc(5,"translate"),C.Wb(),C.Wb()}if(2&t){var o=C.jc(2);C.rc("disabled",o.isFollowingProhibited()),C.Fb(4),C.Tc(C.lc(5,2,"Follow recommendations for all motions"))}}function St(t,e){1&t&&(C.Xb(0,"div"),C.Qc(1,wt,6,4,"button",42),C.Wb()),2&t&&(C.Fb(1),C.rc("osPerms",C.wc(1,it)))}function Wt(t,e){if(1&t&&C.Sb(0,"os-projector-button",40),2&t){var n=C.jc();C.rc("object",n.block)("menuItem",!0)}}function Xt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"button",45),C.fc("click",(function(){return C.Gc(n),C.jc(2).addToAgenda()})),C.Xb(1,"mat-icon"),C.Sc(2,"add"),C.Wb(),C.Xb(3,"span"),C.Sc(4),C.kc(5,"translate"),C.Wb(),C.Wb()}2&t&&(C.Fb(4),C.Tc(C.lc(5,1,"Add to agenda")))}function Mt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"button",45),C.fc("click",(function(){return C.Gc(n),C.jc(2).removeFromAgenda()})),C.Xb(1,"mat-icon"),C.Sc(2,"remove"),C.Wb(),C.Xb(3,"span"),C.Sc(4),C.kc(5,"translate"),C.Wb(),C.Wb()}2&t&&(C.Fb(4),C.Tc(C.lc(5,1,"Remove from agenda")))}function Ot(t,e){if(1&t&&(C.Xb(0,"div"),C.Qc(1,Xt,6,3,"button",44),C.Qc(2,Mt,6,3,"button",44),C.Wb()),2&t){var n=C.jc();C.Fb(1),C.rc("ngIf",n.block&&!n.block.item),C.Fb(1),C.rc("ngIf",n.block&&n.block.item)}}function _t(t,e){if(1&t){var n=C.Yb();C.Xb(0,"div"),C.Xb(1,"button",45),C.fc("click",(function(){return C.Gc(n),C.jc().toggleEditMode()})),C.Xb(2,"mat-icon"),C.Sc(3,"edit"),C.Wb(),C.Xb(4,"span"),C.Sc(5),C.kc(6,"translate"),C.Wb(),C.Wb(),C.Sb(7,"mat-divider"),C.Xb(8,"button",41),C.fc("click",(function(){return C.Gc(n),C.jc().onDeleteBlockButton()})),C.Xb(9,"mat-icon"),C.Sc(10,"delete"),C.Wb(),C.Xb(11,"span"),C.Sc(12),C.kc(13,"translate"),C.Wb(),C.Wb(),C.Wb()}2&t&&(C.Fb(5),C.Tc(C.lc(6,2,"Edit")),C.Fb(7),C.Tc(C.lc(13,4,"Delete")))}function It(t,e){if(1&t){var n=C.Yb();C.Xb(0,"h1",46),C.Xb(1,"span"),C.Sc(2),C.kc(3,"translate"),C.Wb(),C.Wb(),C.Xb(4,"div",47),C.Xb(5,"form",48),C.fc("ngSubmit",(function(){return C.Gc(n),C.jc().saveBlock()}))("keydown",(function(t){return C.Gc(n),C.jc().onKeyDown(t)})),C.Xb(6,"mat-form-field"),C.Sb(7,"input",49),C.kc(8,"translate"),C.Wb(),C.Xb(9,"mat-checkbox",50),C.Sc(10,"Internal"),C.Wb(),C.Wb(),C.Wb(),C.Xb(11,"div",51),C.Xb(12,"button",52),C.fc("click",(function(){return C.Gc(n),C.jc().saveBlock()})),C.Xb(13,"span"),C.Sc(14),C.kc(15,"translate"),C.Wb(),C.Wb(),C.Xb(16,"button",53),C.Xb(17,"span"),C.Sc(18),C.kc(19,"translate"),C.Wb(),C.Wb(),C.Wb()}if(2&t){var o=C.jc();C.Fb(2),C.Vc("",C.lc(3,8,"Edit details for")," ",o.block.title,""),C.Fb(3),C.rc("formGroup",o.blockEditForm),C.Fb(2),C.sc("placeholder",C.lc(8,10,"Title")),C.Fb(5),C.rc("disabled",!o.blockEditForm.valid),C.Fb(2),C.Tc(C.lc(15,12,"Save")),C.Fb(2),C.rc("mat-dialog-close",null),C.Fb(2),C.Tc(C.lc(19,14,"Cancel"))}}var Rt,Ct,jt=function(){return["remove"]},Tt=((Rt=function(t){r(n,t);var e=c(n);function n(t,o,i,r,a,c,l,s,u,f,m,d,h,g,v){var k;return b(this,n),(k=e.call(this,t,o,i,h)).translate=o,k.configService=r,k.route=a,k.router=c,k.repo=l,k.motionRepo=s,k.promptService=u,k.fb=f,k.dialog=m,k.itemRepo=d,k.filterService=g,k.vp=v,k.filterProps=["submitters","title","identifier"],k.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"recommendation",label:k.translate.instant("Recommendation"),width:"30%",minWidth:60},{prop:"remove",label:"",width:"40px"}],k.restrictedColumns=[{columnName:"remove",permission:p.b.motionsCanManage}],k.blockId=parseInt(k.route.snapshot.params.id,10),k.filterService.blockId=k.blockId,k}return f(n,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.repo.getViewModelObservable(this.blockId).subscribe((function(e){e&&(i(s(n.prototype),"setTitle",t).call(t,"".concat(t.translate.instant("Motion block")," - ").concat(e.getTitle())),t.block=e)}))),this.configService.get("motions_show_sequential_numbers").subscribe((function(e){return t.showSequential=e})),window.comp=this}},{key:"onFollowRecButton",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to override the state of all motions of this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.followRecommendation(this.block);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onDeleteBlockButton",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.delete(this.block);case 7:this.router.navigate(["../"],{relativeTo:this.route});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"onRemoveMotionButton",value:function(t){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.translate.instant("Are you sure you want to remove this motion from motion block?"),o=t.getTitle(),e.next=3,this.promptService.open(n,o);case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.repo.removeMotionFromBlock(t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onKeyDown",value:function(t){"Escape"===t.key&&this.dialogRef.close()}},{key:"isFollowingProhibited",value:function(){return!(!this.dataSource||!this.dataSource.source)&&this.dataSource.source.every((function(t){return t.isInFinalState()||!t.recommendation_id}))}},{key:"saveBlock",value:function(){var t=this;this.repo.update(this.blockEditForm.value,this.block).then((function(){return t.dialogRef.close()})).catch(this.raiseError)}},{key:"toggleEditMode",value:function(){var t=this;this.blockEditForm=this.fb.group({title:[this.block.title,d.H.required],internal:[this.block.internal]}),this.dialogRef=this.dialog.open(this.editDialog,S.a),this.dialogRef.keydownEvents().subscribe((function(e){"Enter"===e.key&&e.shiftKey&&t.saveBlock()}))}},{key:"getRecommendationLabel",value:function(t){return this.motionRepo.getExtendedRecommendationLabel(t)}},{key:"getStateLabel",value:function(t){return this.motionRepo.getExtendedStateLabel(t)}},{key:"addToAgenda",value:function(){this.itemRepo.addItemToAgenda(this.block).catch(this.raiseError)}},{key:"removeFromAgenda",value:function(){this.itemRepo.removeFromAgenda(this.block.item).catch(this.raiseError)}}]),n}(W.a)).\u0275fac=function(t){return new(t||Rt)(C.Rb(P.c),C.Rb(j.k),C.Rb(x.a),C.Rb(y.a),C.Rb(u.a),C.Rb(u.f),C.Rb(v.a),C.Rb(k.a),C.Rb(F.a),C.Rb(d.g),C.Rb(B.b),C.Rb(g.a),C.Rb(h.a),C.Rb(T),C.Rb(w.a))},Rt.\u0275cmp=C.Lb({type:Rt,selectors:[["os-motion-block-detail"]],viewQuery:function(t,e){var n;1&t&&(C.Mc(tt,!0),C.Mc(et,!0)),2&t&&(C.Bc(n=C.gc())&&(e.blockEditForm=n.first),C.Bc(n=C.gc())&&(e.editDialog=n.first))},features:[C.Cb],decls:25,vars:22,consts:[[3,"nav"],[1,"title-slot"],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["class","extra-controls-slot",4,"ngIf"],[3,"listObservableProvider","filterService","columns","restricted","filterProps","hiddenInMobile","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["motionBlockMenu","matMenu"],[4,"ngIf"],[3,"menuItem","object"],[3,"object","menuItem",4,"ngIf"],[4,"osPerms"],["editDialog",""],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"extra-controls-slot"],["mat-button","",3,"disabled","click",4,"osPerms"],["mat-button","",3,"disabled","click"],["icon","done_all"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink","state",4,"ngIf"],[1,"column-title","innerTable"],[1,"title-line","ellipsis-overflow"],["class","favorite-star",4,"ngIf"],["class","icon-prefix",4,"ngIf"],[1,"submitters-line","ellipsis-overflow"],[1,"ellipsis-overflow","white"],[3,"ngClass","disabled",4,"ngIf"],[1,"detail-link",3,"routerLink","state"],[1,"favorite-star"],["inline",""],[1,"icon-prefix"],[3,"ngClass","disabled"],["disableRipple","","class","bluegrey",4,"ngIf"],["disableRipple","",1,"bluegrey"],["type","button","mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-menu-item","",1,"red-warning-text",3,"click"],["mat-menu-item","",3,"disabled","click",4,"osPerms"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],[1,"edit-form",3,"formGroup","ngSubmit","keydown"],["matInput","","osAutofocus","","formControlName","title","required","",3,"placeholder"],["formControlName","internal"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","click"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(C.Xb(0,"os-head-bar",0),C.Xb(1,"div",1),C.Qc(2,nt,6,11,"os-icon-container",2),C.Wb(),C.Xb(3,"div",3),C.Xb(4,"button",4),C.Xb(5,"mat-icon"),C.Sc(6,"more_vert"),C.Wb(),C.Wb(),C.Wb(),C.Qc(7,rt,2,2,"div",5),C.Wb(),C.Xb(8,"os-list-view-table",6),C.fc("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),C.Qc(9,pt,14,8,"div",7),C.Qc(10,gt,2,1,"div",7),C.Qc(11,vt,5,3,"div",7),C.Qc(12,yt,4,5,"div",7),C.Wb(),C.Xb(13,"mat-menu",null,8),C.Qc(15,Ft,8,7,"ng-template",9),C.Wb(),C.Xb(16,"mat-menu",null,10),C.Qc(18,St,2,2,"div",11),C.Sb(19,"os-speaker-button",12),C.Qc(20,Wt,1,2,"os-projector-button",13),C.Qc(21,Ot,3,2,"div",14),C.Qc(22,_t,14,6,"div",14),C.Wb(),C.Qc(23,It,20,16,"ng-template",null,15,C.Rc)),2&t){var n=C.Cc(17);C.rc("nav",!1),C.Fb(2),C.rc("ngIf",e.block),C.Fb(2),C.rc("matMenuTriggerFor",n),C.Fb(3),C.rc("ngIf",!e.vp.isMobile),C.Fb(1),C.rc("listObservableProvider",e.motionRepo)("filterService",e.filterService)("columns",e.tableColumnDefinition)("restricted",e.restrictedColumns)("filterProps",e.filterProps)("hiddenInMobile",C.wc(20,jt)),C.Fb(1),C.rc("pblNgridCellDef","title"),C.Fb(1),C.rc("pblNgridCellDef","recommendation"),C.Fb(1),C.rc("pblNgridCellDef","remove"),C.Fb(1),C.rc("pblNgridCellDef","menu"),C.Fb(6),C.rc("ngIf",e.vp.isMobile),C.Fb(1),C.rc("menuItem",!0)("object",e.block),C.Fb(1),C.rc("ngIf",e.block),C.Fb(1),C.rc("osPerms","agenda.can_manage"),C.Fb(1),C.rc("osPerms",C.wc(21,it))}},directives:[D.a,a.t,Q.b,A.e,E.a,L.a,N.b,A.f,A.b,G.a,V.a,z.a,u.i,U.a,a.q,Y.c,q.a,A.c,K.a,B.i,B.f,d.J,d.u,d.l,J.c,H.b,d.d,Z.a,d.t,d.j,d.E,$.a,B.c,B.d],pipes:[j.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.submitters-line[_ngcontent-%COMP%]{font-size:90%}.edit-form[_ngcontent-%COMP%]{overflow:hidden}"]}),Rt),Pt=n("A6Ob"),xt=((Ct=function(t){r(n,t);var e=c(n);function n(t,o,i){var r;return b(this,n),(r=e.call(this,t,o,i)).storageKey="MotionBlockList",r.MotionBlockSortOptions=[{property:"title"},{property:"motions",label:"Amount of motions",sortFn:function(t,e,n){return n?t.motions.length-e.motions.length:e.motions.length-t.motions.length}}],r}return f(n,[{key:"getSortOptions",value:function(){return this.MotionBlockSortOptions}},{key:"getDefaultDefinition",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{sortProperty:"title",sortAscending:!0});case 1:case"end":return t.stop()}}),t)})))}}]),n}(Pt.a)).\u0275fac=function(t){return new(t||Ct)(C.bc(j.k),C.bc(h.a),C.bc(X.a))},Ct.\u0275prov=C.Nb({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct),Bt=n("6Ehv"),Dt=["newMotionBlockDialog"];function Qt(t,e){if(1&t&&C.Sb(0,"a",13),2&t){var n=C.jc().row;C.rc("routerLink",n.id)}}function At(t,e){if(1&t&&(C.Xb(0,"div",7),C.Qc(1,Qt,1,1,"a",8),C.Xb(2,"div",9),C.Xb(3,"os-icon-container",10),C.kc(4,"translate"),C.Xb(5,"os-icon-container",11),C.kc(6,"translate"),C.Xb(7,"div",12),C.Sc(8),C.Wb(),C.Wb(),C.Wb(),C.Wb(),C.Wb()),2&t){var n=e.value,o=e.row,i=C.jc();C.Fb(1),C.rc("ngIf",!i.isMultiSelect),C.Fb(2),C.rc("noWrap",!0)("icon",o.isFinished?"check":o.internal?"lock":null)("iconTooltip",o.isFinished?"Finished":o.internal?"Internal":C.lc(4,8,"")),C.Fb(2),C.rc("noWrap",!0)("showIcon",o.isFinished&&o.internal)("iconTooltip",C.lc(6,10,"Internal")),C.Fb(3),C.Uc(" ",n," ")}}function Et(t,e){if(1&t&&(C.Xb(0,"div",7),C.Xb(1,"span",14),C.kc(2,"translate"),C.Sc(3),C.Wb(),C.Wb()),2&t){var n=e.row;C.Fb(1),C.sc("matTooltip",C.lc(2,2,"Motions")),C.Fb(2),C.Tc(n.motions.length)}}var Lt=function(t){return{block:t}};function Nt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"div",7),C.Xb(1,"button",15),C.fc("click",(function(t){return C.Gc(n),t.stopPropagation()})),C.Xb(2,"mat-icon"),C.Sc(3,"more_vert"),C.Wb(),C.Wb(),C.Wb()}if(2&t){var o=e.row,i=C.jc(),r=C.Cc(10);C.Fb(1),C.rc("disabled",i.isMultiSelect)("matMenuTriggerFor",r)("matMenuTriggerData",C.xc(3,Lt,o))}}function Gt(t,e){if(1&t&&(C.Sb(0,"os-projector-button",16),C.Sb(1,"os-speaker-button",16)),2&t){var n=e.block;C.rc("object",n)("menuItem",!0),C.Fb(1),C.rc("object",n)("menuItem",!0)}}function Vt(t,e){1&t&&(C.Xb(0,"mat-error"),C.Sc(1),C.kc(2,"translate"),C.Wb()),2&t&&(C.Fb(1),C.Uc(" ",C.lc(2,1,"A title is required")," "))}function zt(t,e){if(1&t){var n=C.Yb();C.Xb(0,"h1",17),C.Xb(1,"span"),C.Sc(2),C.kc(3,"translate"),C.Wb(),C.Wb(),C.Xb(4,"form",18),C.fc("keydown",(function(t){return C.Gc(n),C.jc().onKeyDown(t)})),C.Xb(5,"div",19),C.Xb(6,"mat-form-field"),C.Sb(7,"input",20),C.kc(8,"translate"),C.Qc(9,Vt,3,3,"mat-error",21),C.Wb(),C.Xb(10,"p"),C.Xb(11,"mat-checkbox",22),C.Xb(12,"span"),C.Sc(13),C.kc(14,"translate"),C.Wb(),C.Wb(),C.Wb(),C.Sb(15,"os-agenda-content-object-form",23),C.Wb(),C.Wb(),C.Xb(16,"div",24),C.Xb(17,"button",25),C.Xb(18,"span"),C.Sc(19),C.kc(20,"translate"),C.Wb(),C.Wb(),C.Xb(21,"button",26),C.Xb(22,"span"),C.Sc(23),C.kc(24,"translate"),C.Wb(),C.Wb(),C.Wb()}if(2&t){var o=C.jc();C.Fb(2),C.Tc(C.lc(3,11,"New motion block")),C.Fb(2),C.rc("formGroup",o.createBlockForm),C.Fb(3),C.sc("placeholder",C.lc(8,13,"Title")),C.Fb(2),C.rc("ngIf",o.createBlockForm.get("title").hasError("required")),C.Fb(4),C.Tc(C.lc(14,15,"Internal")),C.Fb(2),C.rc("form",o.createBlockForm),C.Fb(2),C.rc("disabled",!o.createBlockForm.valid)("mat-dialog-close",!0),C.Fb(2),C.Tc(C.lc(20,17,"Save")),C.Fb(2),C.rc("mat-dialog-close",!1),C.Fb(2),C.Tc(C.lc(24,19,"Cancel"))}}var Ut,Yt,qt,Kt=[{path:"",component:(Ut=function(t){r(n,t);var e=c(n);function n(t,o,i,r,a,c,l,s,u,f){var m;return b(this,n),(m=e.call(this,t,o,i,r)).repo=a,m.formBuilder=c,m.itemRepo=l,m.operator=s,m.dialog=u,m.sortService=f,m.filterProps=["title"],m.tableColumnDefinition=[{prop:"title",label:m.translate.instant("Title"),width:"auto"},{prop:"amount",label:m.translate.instant("Motions"),width:"40px"}],m.createBlockForm=m.formBuilder.group({title:["",d.H.required],agenda_create:[""],agenda_parent_id:[],agenda_type:[""],internal:[!1]}),m}return f(n,[{key:"ngOnInit",value:function(){i(s(n.prototype),"setTitle",this).call(this,"Motion blocks"),this.items=this.itemRepo.getViewModelListBehaviorSubject()}},{key:"resetForm",value:function(){this.createBlockForm.reset(),this.createBlockForm.get("agenda_type").setValue(this.defaultVisibility)}},{key:"onPlusButton",value:function(){var t=this;this.resetForm(),this.dialogRef=this.dialog.open(this.newMotionBlockDialog,S.a),this.dialogRef.afterClosed().subscribe((function(e){e&&t.save()}))}},{key:"save",value:function(){if(this.createBlockForm.valid){var t=this.createBlockForm.value;t.agenda_parent_id||delete t.agenda_parent_id,this.repo.create(t).catch(this.raiseError),this.resetForm()}}},{key:"onKeyDown",value:function(t){"Enter"===t.key&&t.shiftKey&&(this.save(),this.dialogRef.close()),"Escape"===t.key&&(this.resetForm(),this.dialogRef.close())}},{key:"canEdit",get:function(){return this.operator.hasPerms(p.b.motionsCanManage,p.b.motionsCanManageMetadata)}}]),n}(W.a),Ut.\u0275fac=function(t){return new(t||Ut)(C.Rb(P.c),C.Rb(j.k),C.Rb(x.a),C.Rb(h.a),C.Rb(v.a),C.Rb(d.g),C.Rb(g.a),C.Rb(p.a),C.Rb(B.b),C.Rb(xt))},Ut.\u0275cmp=C.Lb({type:Ut,selectors:[["os-motion-block-list"]],viewQuery:function(t,e){var n;1&t&&C.Mc(Dt,!0),2&t&&C.Bc(n=C.gc())&&(e.newMotionBlockDialog=n.first)},features:[C.Cb],decls:14,vars:16,consts:[["prevUrl","../..",3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],["listStorageKey","motionBlock",3,"vScrollFixed","listObservableProvider","showFilterBar","columns","sortService","multiSelect","selectedRows","filterProps","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["newMotionBlockDialog",""],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"innerTable"],["size","large",3,"noWrap","icon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"ellipsis-overflow"],[1,"detail-link",3,"routerLink"],[1,"os-amount-chip",3,"matTooltip"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-dialog-title",""],[3,"formGroup","keydown"],["mat-dialog-content",""],["formControlName","title","matInput","","required","",3,"placeholder"],[4,"ngIf"],["formControlName","internal"],[3,"form"],["mat-dialog-actions",""],["mat-button","",3,"disabled","mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(C.Xb(0,"os-head-bar",0),C.fc("mainEvent",(function(){return e.onPlusButton()})),C.Xb(1,"div",1),C.Xb(2,"h2"),C.Sc(3),C.kc(4,"translate"),C.Wb(),C.Wb(),C.Wb(),C.Xb(5,"os-list-view-table",2),C.fc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),C.Qc(6,At,9,12,"div",3),C.Qc(7,Et,4,4,"div",3),C.Qc(8,Nt,4,5,"div",3),C.Wb(),C.Xb(9,"mat-menu",null,4),C.Qc(11,Gt,2,4,"ng-template",5),C.Wb(),C.Qc(12,zt,25,21,"ng-template",null,6,C.Rc)),2&t&&(C.rc("nav",!1)("hasMainButton",e.canEdit),C.Fb(3),C.Tc(C.lc(4,14,"Motion blocks")),C.Fb(2),C.rc("vScrollFixed",64)("listObservableProvider",e.repo)("showFilterBar",!0)("columns",e.tableColumnDefinition)("sortService",e.sortService)("multiSelect",e.isMultiSelect)("selectedRows",e.selectedRows)("filterProps",e.filterProps),C.Fb(1),C.rc("pblNgridCellDef","title"),C.Fb(1),C.rc("pblNgridCellDef","amount"),C.Fb(1),C.rc("pblNgridCellDef","menu"))},directives:[D.a,L.a,N.b,A.f,A.b,a.t,z.a,u.i,Y.c,Q.b,A.e,E.a,q.a,G.a,B.i,d.J,d.u,d.l,B.f,J.c,d.d,H.b,d.t,d.j,d.E,$.a,Bt.a,B.c,B.d,J.b],pipes:[j.j],styles:[".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.mat-dialog-container .mat-dialog-title{margin:0}.mat-dialog-container .mat-form-field{width:100%}"],encapsulation:2}),Ut),pathMatch:"full"},{path:":id",component:Tt}],Jt=((qt=function t(){b(this,t)}).\u0275mod=C.Pb({type:qt}),qt.\u0275inj=C.Ob({factory:function(t){return new(t||qt)},imports:[[u.j.forChild(Kt)],u.j]}),qt),Ht=((Yt=function t(){b(this,t)}).\u0275mod=C.Pb({type:Yt}),Yt.\u0275inj=C.Ob({factory:function(t){return new(t||Yt)},imports:[[a.c,Jt,l.a]]}),Yt)},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("iELJ"),i=n("8Y7J"),r=n("SVse"),a=n("Dxy4"),c=n("TSSN");function l(t,e){if(1&t&&(i.Xb(0,"div"),i.Xb(1,"h2",1),i.Sc(2),i.Wb(),i.Sb(3,"mat-dialog-content",2),i.Xb(4,"mat-dialog-actions"),i.Xb(5,"button",3),i.Sc(6),i.kc(7,"translate"),i.Wb(),i.Xb(8,"button",4),i.Sc(9),i.kc(10,"translate"),i.Wb(),i.Wb(),i.Wb()),2&t){var n=i.jc();i.Fb(2),i.Tc(n.data.title),i.Fb(1),i.rc("innerHTML",n.data.content,i.Hc),i.Fb(2),i.rc("mat-dialog-close",!0),i.Fb(1),i.Tc(i.lc(7,6,"OK")),i.Fb(2),i.rc("mat-dialog-close",!1),i.Fb(1),i.Tc(i.lc(10,8,"Cancel"))}}var s=function(){var t=function t(e,n){b(this,t),this.dialogRef=e,this.data=n};return t.\u0275fac=function(e){return new(e||t)(i.Rb(o.h),i.Rb(o.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&i.Qc(0,l,11,10,"div",0),2&t&&i.rc("ngIf",e.data)},directives:[r.t,o.i,o.f,o.c,a.b,o.d],pipes:[c.j],encapsulation:2}),t}()},Q5D0:function(n,o,i){"use strict";i.d(o,"a",(function(){return S}));var a=i("D/ll"),l=i("OwvW"),s=i("AqIO"),u=i("iTQr"),m=i("D5Qf"),d=i("+B0n"),p=i("s3dr"),h=i("lv9T"),g=i("+8Rz"),v=i("+KbT"),k=i("gtli"),y=i("3Y4h"),F=i("8Y7J"),w=i("TSSN"),S=function(){var n=function(n){r(i,n);var o=c(i);function i(t,e,n,r,a,c,l,s,u,f){var m;return b(this,i),(m=o.call(this,t,e)).workflowRepo=l,m.translate=s,m.operator=u,m.config=f,m.storageKey="MotionList",m.enabledWorkflows={statuteEnabled:!1,statute:null,motion:null,amendment:null},m.stateFilterOptions={property:"state_id",label:"State",options:[]},m.categoryFilterOptions={property:"category_id",label:"Category",options:[]},m.motionBlockFilterOptions={property:"motion_block_id",label:"Motion block",options:[]},m.motionCommentFilterOptions={property:"commentSectionIds",label:"Comment",options:[]},m.recommendationFilterOptions={property:"recommendation_id",label:"Recommendation",options:[]},m.tagFilterOptions={property:"tags_id",label:"Tags",options:[]},m.hasSpeakerOptions={property:"hasSpeakers",label:"Speakers",options:[{condition:!0,label:m.translate.instant("Has speakers")},{condition:!1,label:m.translate.instant("Has no speakers")}]},m.AmendmentFilterOption={property:"amendmentType",label:"Amendment",options:[{condition:y.a.Amendment,label:m.translate.instant("Is amendment")},{condition:y.a.Parent,label:m.translate.instant("Has amendments")},{condition:y.a.Lead,label:m.translate.instant("Is no amendment and has no amendments")}]},m.personalNoteFilterOptions=[{property:"star",label:m.translate.instant("Favorites"),options:[{condition:!0,label:m.translate.instant("Is favorite")},{condition:!1,label:m.translate.instant("Is not favorite")}]},{property:"hasNotes",label:m.translate.instant("Personal notes"),options:[{condition:!0,label:m.translate.instant("Has notes")},{condition:!1,label:m.translate.instant("Does not have notes")}]}],m.getWorkflowConfig(),m.getShowAmendmentConfig(),m.updateFilterForRepo(n,m.categoryFilterOptions,m.translate.instant("No category set")),m.updateFilterForRepo(r,m.motionBlockFilterOptions,m.translate.instant("No motion block set")),m.updateFilterForRepo(a,m.motionCommentFilterOptions,m.translate.instant("No comment")),m.updateFilterForRepo(c,m.tagFilterOptions,m.translate.instant("No tags")),m.subscribeWorkflows(),m.operator.getUserObservable().subscribe((function(){m.setFilterDefinitions()})),m}return f(i,[{key:"preFilter",value:function(t){if(!this.showAmendmentsInMainTable)return t.filter((function(t){return!t.parent_id}))}},{key:"getShowAmendmentConfig",value:function(){var t=this;this.config.get("motions_amendments_main_table").subscribe((function(e){t.showAmendmentsInMainTable=e}))}},{key:"getWorkflowConfig",value:function(){var t=this;this.config.get("motions_statute_amendments_workflow").subscribe((function(e){t.enabledWorkflows.statute=+e})),this.config.get("motions_workflow").subscribe((function(e){t.enabledWorkflows.motion=+e})),this.config.get("motions_amendments_workflow").subscribe((function(e){t.enabledWorkflows.amendment=+e})),this.config.get("motions_statutes_enabled").subscribe((function(e){t.enabledWorkflows.statuteEnabled=e}))}},{key:"getFilterDefinitions",value:function(){var t=[this.stateFilterOptions,this.categoryFilterOptions,this.motionBlockFilterOptions,this.recommendationFilterOptions,this.motionCommentFilterOptions,this.tagFilterOptions];return this.operator.hasPerms(l.b.agendaCanSeeListOfSpeakers)&&t.push(this.hasSpeakerOptions),this.showAmendmentsInMainTable&&t.push(this.AmendmentFilterOption),this.operator.isAnonymous||(t=t.concat(this.personalNoteFilterOptions)),t}},{key:"subscribeWorkflows",value:function(){var n=this;this.workflowRepo.getViewModelListObservable().subscribe((function(o){if(o&&o.length){var i,r=[],a=[],c=[],l=[],s=e(o);try{for(s.s();!(i=s.n()).done;){var b=i.value;if(n.isWorkflowEnabled(b.id)){r.push({name:b.name,filter:[]}),a.push({name:b.name,filter:[]});var u,f=e(b.states);try{for(f.s();!(u=f.n()).done;){var m,d=u.value,p=d.restriction.filter((function(t){return t!==k.b.motionsIsSubmitter}));p.length&&!(m=n.operator).hasPerms.apply(m,t(p))||(d.isFinalState?c.push(d.id):l.push(d.id),r[r.length-1].filter.push({condition:d.id,label:d.name}),d.recommendation_label&&a[r.length-1].filter.push({condition:d.id,label:d.recommendation_label}))}}catch(X){f.e(X)}finally{f.f()}}}}catch(X){s.e(X)}finally{s.f()}if(r&&r.length){var h=[];h.push({label:"Done",condition:c}),h.push({label:n.translate.instant("Undone"),condition:l}),h.push("-");var g,v=e(r);try{for(v.s();!(g=v.n()).done;){var y=g.value;h.push(y.name),h=h.concat(y.filter)}}catch(X){v.e(X)}finally{v.f()}n.stateFilterOptions.options=h}if(a&&a.length){var F,w=[],S=e(a);try{for(S.s();!(F=S.n()).done;){var W=F.value;w.push(W.name),w=w.concat(W.filter)}}catch(X){S.e(X)}finally{S.f()}w.push("-"),w.push({label:n.translate.instant("No recommendation"),condition:null}),n.recommendationFilterOptions.options=w}n.setFilterDefinitions()}}))}},{key:"isWorkflowEnabled",value:function(t){return t===this.enabledWorkflows.motion||this.enabledWorkflows.statuteEnabled&&t===this.enabledWorkflows.statute}}]),i}(g.a);return n.\u0275fac=function(t){return new(t||n)(F.bc(s.a),F.bc(a.a),F.bc(u.a),F.bc(m.a),F.bc(d.a),F.bc(h.a),F.bc(p.a),F.bc(w.k),F.bc(l.a),F.bc(v.a))},n.\u0275prov=F.Nb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},wL0i:function(e,n,o){"use strict";o.d(n,"a",(function(){return i}));var i=function(e){r(o,e);var n=c(o);function o(t,e,i,r){var a;return b(this,o),(a=n.call(this,t,e,i)).storage=r,a.canMultiSelect=!1,a._multiSelectMode=!1,a.singleButtonWidth="40px",a.badgeButtonWidth="45px",a.selectedRows=[],a}return f(o,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var e;(e=this.dataSource.selection).select.apply(e,t(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),o}(o("mV3u").a)}}])}();