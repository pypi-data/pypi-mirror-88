!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,n||t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=u(t);if(e){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return s(this,i)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[34,42],{"0bnU":function(e,r,a){"use strict";a.r(r),a.d(r,"MediafilesModule",(function(){return be}));var s,b,f,d=a("SVse"),p=a("iInd"),m=a("OwvW"),g=a("SSyl"),h=a("mV3u"),v=a("8Y7J"),y=a("cUpR"),S=a("TSSN"),F=a("zHaW"),k=a("mksl"),W=a("Dxy4"),w=a("rJgo"),X=a("Tj54"),j=a("PDjf"),M=a("GTZY"),T=((s=function(t){o(i,t);var e=l(i);function i(t,r,c,o,a,l){var s;return n(this,i),(s=e.call(this,t,r,c)).location=o,s.route=a,s.repo=l,s.parallel=!0,s.directoryId=null,s}return c(i,[{key:"ngOnInit",value:function(){var t=this;this.repo.getDirectoryIdByPath(this.route.snapshot.url.map((function(t){return t.path}))).then((function(e){t.directoryId=e}))}},{key:"uploadSuccess",value:function(){this.location.back()}},{key:"showError",value:function(t){this.raiseError(t)}},{key:"setUploadStrategy",value:function(t){this.parallel=t}}]),i}(h.a)).\u0275fac=function(t){return new(t||s)(v.Rb(y.c),v.Rb(S.k),v.Rb(F.a),v.Rb(d.n),v.Rb(p.a),v.Rb(g.a))},s.\u0275cmp=v.Lb({type:s,selectors:[["os-media-upload"]],features:[v.Cb],decls:19,vars:12,consts:[[3,"nav","goBack"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"os-card"],[3,"parallel","directoryId","uploadSuccessEvent","errorEvent"],["uploadMenu","matMenu"],["mat-menu-item","",3,"click"],["color","accent"]],template:function(t,e){if(1&t&&(v.Xb(0,"os-head-bar",0),v.Xb(1,"div",1),v.Xb(2,"h2"),v.Sc(3),v.kc(4,"translate"),v.Wb(),v.Wb(),v.Xb(5,"div",2),v.Xb(6,"button",3),v.Xb(7,"mat-icon"),v.Sc(8,"more_vert"),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(9,"mat-card",4),v.Xb(10,"os-media-upload-content",5),v.fc("uploadSuccessEvent",(function(){return e.uploadSuccess()}))("errorEvent",(function(t){return e.showError(t)})),v.Wb(),v.Wb(),v.Xb(11,"mat-menu",null,6),v.Xb(13,"button",7),v.fc("click",(function(){return e.setUploadStrategy(!e.parallel)})),v.Xb(14,"mat-icon",8),v.Sc(15),v.Wb(),v.Xb(16,"span"),v.Sc(17),v.kc(18,"translate"),v.Wb(),v.Wb(),v.Wb()),2&t){var i=v.Cc(12);v.rc("nav",!1)("goBack",!0),v.Fb(3),v.Tc(v.lc(4,8,"Upload files")),v.Fb(3),v.rc("matMenuTriggerFor",i),v.Fb(4),v.rc("parallel",e.parallel)("directoryId",e.directoryId),v.Fb(5),v.Tc(e.parallel?"check_box":"check_box_outline_blank"),v.Fb(2),v.Tc(v.lc(18,10,"Parallel upload"))}},directives:[k.a,W.b,w.e,X.a,j.a,M.a,w.f,w.c],pipes:[S.j],styles:[""]}),s),D=a("mrSG"),C=a("s7LF"),I=a("4LpT"),x=a("2Vo4"),_=a("HDdC"),R=a("AqIO"),O=a("R+Vs"),E=a("+KbT"),Q=a("Hila"),A=((b=function(){function t(e,i){n(this,t),this.config=e,this.httpService=i}return c(t,[{key:"setAs",value:function(t,e){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n="/rest/core/config/".concat(e,"/"),r=this.getMediaConfig(e),i.abrupt("return",this.httpService.put(n,{id:t.id,key:r.key,default:r.default,value:{display_name:r.display_name,key:r.key,default:r.default,path:r.path!==t.url?t.url:""}}));case 2:case"end":return i.stop()}}),i,this)})))}},{key:"isImageConfigObject",value:function(t){if(void 0!==t)return void 0!==t.path}},{key:"getLogoActions",value:function(){return this.config.get("logos_available")}},{key:"getFontActions",value:function(){return this.config.get("fonts_available")}},{key:"getMediaConfig",value:function(t){return this.config.instant(t)}}]),t}()).\u0275fac=function(t){return new(t||b)(v.bc(E.a),v.bc(Q.a))},b.\u0275prov=v.Nb({token:b,factory:b.\u0275fac,providedIn:"root"}),b),P=a("F48D"),L=a("KL36"),B=a("smbJ"),N=a("Izkr"),G=a("wL0i"),U=a("D/ll"),Y=a("A6Ob"),z=((f=function(t){o(i,t);var e=l(i);function i(t,r,c){var o;return n(this,i),(o=e.call(this,t,r,c)).storageKey="MediafileList",o.mediafilesSortOptions=[{property:"title"},{property:"mimetype",label:o.translate.instant("Type")},{property:"filesize",label:o.translate.instant("Size")}],o}return c(i,[{key:"getSortOptions",value:function(){return this.mediafilesSortOptions}},{key:"getDefaultDefinition",value:function(){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{sortProperty:"title",sortAscending:!0});case 1:case"end":return t.stop()}}),t)})))}}]),i}(Y.a)).\u0275fac=function(t){return new(t||f)(v.bc(S.k),v.bc(R.a),v.bc(U.a))},f.\u0275prov=v.Nb({token:f,factory:f.\u0275fac,providedIn:"root"}),f),V=a("iELJ"),J=a("3Xi6"),$=a("24UU"),H=a("dwQs"),q=a("vYAO"),K=a("ZFy/"),Z=a("BSbQ"),tt=a("Tp2j"),et=a("Q2Ze"),it=a("e6WT"),nt=a("IZUe"),rt=a("oqD5"),ct=["fileEditForm"],ot=["fileEditDialog"];function at(t,e){if(1&t){var i=v.Yb();v.Xb(0,"button",25),v.fc("click",(function(){v.Gc(i);var t=v.jc(),e=v.Cc(38);return t.createNewFolder(e)})),v.Xb(1,"mat-icon"),v.Sc(2,"create_new_folder"),v.Wb(),v.Wb()}}function lt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"div",26),v.Xb(1,"button",27),v.fc("click",(function(){return v.Gc(i),v.jc().toggleMultiSelect()})),v.Xb(2,"mat-icon"),v.Sc(3,"arrow_back"),v.Wb(),v.Wb(),v.Xb(4,"span"),v.Sc(5),v.Wb(),v.Xb(6,"span"),v.Sc(7),v.kc(8,"translate"),v.Wb(),v.Wb()}if(2&t){var n=v.jc();v.Fb(5),v.Uc("",n.selectedRows.length,"\xa0"),v.Fb(2),v.Tc(v.lc(8,2,"selected"))}}function st(t,e){if(1&t){var i=v.Yb();v.Xb(0,"button",8),v.fc("click",(function(){v.Gc(i);var t=v.jc().$implicit;return v.jc().changeDirectory(t.id)})),v.Xb(1,"span",33),v.Sc(2),v.Wb(),v.Wb()}if(2&t){var n=v.jc().$implicit,r=v.jc();v.rc("disabled",r.isMultiSelect),v.Fb(2),v.Uc(" ",n.filename," ")}}var ut=function(t){return{mediafile:t}};function bt(t,e){if(1&t&&(v.Xb(0,"button",34),v.Xb(1,"os-icon-container",35),v.Sc(2),v.Wb(),v.Wb()),2&t){var i=v.jc().$implicit,n=v.jc(),r=v.Cc(29);v.rc("matMenuTriggerFor",r)("matMenuTriggerData",v.xc(5,ut,i))("disabled",n.isMultiSelect),v.Fb(1),v.rc("noWrap",!0),v.Fb(1),v.Uc(" ",i.filename," ")}}function ft(t,e){if(1&t&&(v.Xb(0,"span",36),v.Sc(1),v.Wb()),2&t){var i=v.jc().$implicit;v.Fb(1),v.Uc(" ",i.filename," ")}}function dt(t,e){if(1&t&&(v.Xb(0,"span",28),v.Xb(1,"span",29),v.Xb(2,"mat-icon"),v.Sc(3,"chevron_right"),v.Wb(),v.Wb(),v.Qc(4,st,3,2,"button",30),v.Qc(5,bt,3,7,"button",31),v.Qc(6,ft,2,1,"span",32),v.Wb()),2&t){var i=e.$implicit,n=e.last,r=v.jc();v.Fb(4),v.rc("ngIf",!n),v.Fb(1),v.rc("ngIf",n&&r.showFileMenu(i)),v.Fb(1),v.rc("ngIf",n&&!r.showFileMenu(i))}}function pt(t,e){1&t&&(v.Xb(0,"span"),v.Sc(1,", "),v.Wb())}function mt(t,e){1&t&&(v.Xb(0,"span"),v.Sc(1,"..."),v.Wb())}function gt(t,e){if(1&t&&(v.Xb(0,"span"),v.Xb(1,"span"),v.Sc(2),v.kc(3,"translate"),v.Wb(),v.Qc(4,pt,2,0,"span",21),v.Qc(5,mt,2,0,"span",21),v.Wb()),2&t){var i=e.$implicit,n=e.last,r=v.jc(2);v.Fb(2),v.Tc(v.lc(3,3,i.getTitle())),v.Fb(2),v.rc("ngIf",!n),v.Fb(1),v.rc("ngIf",n&&r.directory.inherited_access_groups.length>3)}}function ht(t,e){if(1&t){var i=v.Yb();v.Xb(0,"span",37),v.Xb(1,"button",38),v.fc("click",(function(){v.Gc(i);var t=v.jc();return t.onEditFile(t.directory)})),v.Xb(2,"os-icon-container",39),v.kc(3,"translate"),v.Qc(4,gt,6,5,"span",40),v.kc(5,"slice"),v.Wb(),v.Wb(),v.Wb()}if(2&t){var n=v.jc();v.Fb(2),v.sc("matTooltip",v.lc(3,2,"Allowed access groups for this directory")),v.Fb(2),v.rc("ngForOf",v.nc(5,4,n.directory.inherited_access_groups,0,3))}}function vt(t,e){if(1&t&&v.Sb(0,"a",44),2&t){var i=v.jc().row;v.rc("routerLink",i.url)}}function yt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"a",45),v.fc("click",(function(){v.Gc(i);var t=v.jc().row;return v.jc().changeDirectory(t.id)})),v.Wb()}}function St(t,e){if(1&t&&(v.Xb(0,"div",41),v.Qc(1,vt,1,1,"a",42),v.Qc(2,yt,1,0,"a",43),v.Xb(3,"mat-icon",9),v.Sc(4),v.Wb(),v.Wb()),2&t){var i=e.row,n=v.jc();v.Fb(1),v.rc("ngIf",!i.is_directory&&!n.isMultiSelect),v.Fb(1),v.rc("ngIf",i.is_directory&&!n.isMultiSelect),v.Fb(2),v.Tc(i.getIcon())}}function Ft(t,e){if(1&t&&v.Sb(0,"a",44),2&t){var i=v.jc().row;v.rc("routerLink",i.url)}}function kt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"a",45),v.fc("click",(function(){v.Gc(i);var t=v.jc().row;return v.jc().changeDirectory(t.id)})),v.Wb()}}function Wt(t,e){if(1&t&&(v.Xb(0,"div",49),v.Xb(1,"span"),v.Sc(2),v.Wb(),v.Wb()),2&t){var i=v.jc().row,n=v.jc();v.Fb(2),v.Vc(" ",n.getDateFromTimestamp(i.timestamp)," \xb7 ",i.filesize," ")}}function wt(t,e){if(1&t&&(v.Xb(0,"div",41),v.Qc(1,Ft,1,1,"a",42),v.Qc(2,kt,1,0,"a",43),v.Xb(3,"div",46),v.Xb(4,"div",47),v.Sc(5),v.Wb(),v.Qc(6,Wt,3,2,"div",48),v.Wb(),v.Wb()),2&t){var i=e.row,n=v.jc();v.Fb(1),v.rc("ngIf",!i.is_directory&&!n.isMultiSelect),v.Fb(1),v.rc("ngIf",i.is_directory&&!n.isMultiSelect),v.Fb(3),v.Uc(" ",i.filename," "),v.Fb(1),v.rc("ngIf",!i.is_directory)}}function Xt(t,e){1&t&&(v.Xb(0,"span"),v.Sc(1,", "),v.Wb())}function jt(t,e){1&t&&(v.Xb(0,"span"),v.Sc(1,"..."),v.Wb())}function Mt(t,e){if(1&t&&(v.Xb(0,"span"),v.Xb(1,"span"),v.Sc(2),v.kc(3,"translate"),v.Wb(),v.Qc(4,Xt,2,0,"span",21),v.Qc(5,jt,2,0,"span",21),v.Wb()),2&t){var i=e.$implicit,n=e.last,r=v.jc(2).row;v.Fb(2),v.Tc(v.lc(3,3,i.getTitle())),v.Fb(2),v.rc("ngIf",!n),v.Fb(1),v.rc("ngIf",n&&r.access_groups.length>3)}}function Tt(t,e){if(1&t&&(v.Xb(0,"os-icon-container",52),v.Qc(1,Mt,6,5,"span",40),v.kc(2,"slice"),v.Wb()),2&t){var i=v.jc().row;v.Fb(1),v.rc("ngForOf",v.nc(2,1,i.access_groups,0,3))}}function Dt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"div",50),v.fc("click",(function(){v.Gc(i);var t=e.row;return v.jc().onEditFile(t)})),v.Qc(1,Tt,3,5,"os-icon-container",51),v.Wb()}if(2&t){var n=e.row;v.Fb(1),v.rc("ngIf",n.access_groups.length)}}function Ct(t,e){1&t&&(v.Xb(0,"mat-icon",9),v.Sc(1,"text_fields"),v.Wb())}function It(t,e){1&t&&(v.Xb(0,"mat-icon",9),v.Sc(1,"insert_photo"),v.Wb())}function xt(t,e){if(1&t&&(v.Xb(0,"div",55),v.Qc(1,Ct,2,0,"mat-icon",56),v.Qc(2,It,2,0,"mat-icon",56),v.Wb()),2&t){var i=v.jc().row,n=v.jc(),r=v.Cc(29);v.rc("matMenuTriggerFor",r)("matMenuTriggerData",v.xc(5,ut,i))("matTooltip",n.formatIndicatorTooltip(i)),v.Fb(1),v.rc("ngIf",i.isFont()),v.Fb(1),v.rc("ngIf",i.isImage())}}function _t(t,e){if(1&t&&(v.Xb(0,"div",53),v.Qc(1,xt,3,7,"div",54),v.Wb()),2&t){var i=e.row,n=v.jc();v.Fb(1),v.rc("ngIf",n.getFileSettings(i).length>0)}}function Rt(t,e){if(1&t&&(v.Xb(0,"button",58),v.Xb(1,"mat-icon"),v.Sc(2,"more_vert"),v.Wb(),v.Wb()),2&t){var i=v.jc().row,n=v.jc(),r=v.Cc(29);v.rc("matMenuTriggerFor",r)("matMenuTriggerData",v.xc(3,ut,i))("disabled",n.isMultiSelect)}}function Ot(t,e){if(1&t&&(v.Xb(0,"div",53),v.Qc(1,Rt,3,5,"button",57),v.Wb()),2&t){var i=e.row,n=v.jc();v.Fb(1),v.rc("ngIf",n.showFileMenu(i))}}function Et(t,e){1&t&&(v.Xb(0,"div",59),v.Xb(1,"span"),v.Sc(2),v.kc(3,"translate"),v.Wb(),v.Wb()),2&t&&(v.Fb(2),v.Tc(v.lc(3,1,"No data")))}function Qt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"button",60),v.fc("click",(function(t){v.Gc(i);var n=e.mediafile,r=e.action;return v.jc().onManageButton(t,n,r)})),v.Xb(1,"mat-icon",61),v.Sc(2),v.Wb(),v.Xb(3,"span"),v.Sc(4),v.Wb(),v.Wb()}if(2&t){var n=e.mediafile,r=e.action,c=v.jc();v.Fb(2),v.Uc(" ",c.isUsedAs(n,r)?"check_box":"check_box_outline_blank"," "),v.Fb(2),v.Tc(c.getNameOfAction(r))}}function At(t,e){1&t&&v.Tb(0)}var Pt=function(t,e){return{mediafile:t,action:e}};function Lt(t,e){if(1&t&&(v.Xb(0,"div"),v.Qc(1,At,1,0,"ng-container",64),v.Wb()),2&t){var i=e.$implicit,n=v.jc(3).mediafile;v.jc();var r=v.Cc(27);v.Fb(1),v.rc("ngTemplateOutlet",r)("ngTemplateOutletContext",v.yc(2,Pt,n,i))}}function Bt(t,e){if(1&t&&(v.Xb(0,"div"),v.Qc(1,Lt,2,5,"div",40),v.Wb()),2&t){var i=v.jc(3);v.Fb(1),v.rc("ngForOf",i.logoActions)}}function Nt(t,e){1&t&&v.Tb(0)}function Gt(t,e){if(1&t&&(v.Xb(0,"div"),v.Qc(1,Nt,1,0,"ng-container",64),v.Wb()),2&t){var i=e.$implicit,n=v.jc(3).mediafile;v.jc();var r=v.Cc(27);v.Fb(1),v.rc("ngTemplateOutlet",r)("ngTemplateOutletContext",v.yc(2,Pt,n,i))}}function Ut(t,e){if(1&t&&(v.Xb(0,"div"),v.Qc(1,Gt,2,5,"div",40),v.Wb()),2&t){var i=v.jc(3);v.Fb(1),v.rc("ngForOf",i.fontActions)}}function Yt(t,e){1&t&&v.Sb(0,"mat-divider")}function zt(t,e){if(1&t&&(v.Xb(0,"div"),v.Qc(1,Bt,2,1,"div",21),v.Qc(2,Ut,2,1,"div",21),v.Qc(3,Yt,1,0,"mat-divider",21),v.Wb()),2&t){var i=v.jc().mediafile;v.Fb(1),v.rc("ngIf",i.isImage()),v.Fb(1),v.rc("ngIf",i.isFont()),v.Fb(1),v.rc("ngIf",i.isFont()||i.isImage())}}function Vt(t,e){if(1&t&&v.Sb(0,"os-projector-button",65),2&t){var i=v.jc().mediafile;v.rc("object",i)("menuItem",!0)}}function Jt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"div"),v.Xb(1,"button",60),v.fc("click",(function(){v.Gc(i);var t=v.jc().mediafile;return v.jc().onEditFile(t)})),v.Xb(2,"mat-icon"),v.Sc(3,"edit"),v.Wb(),v.Xb(4,"span"),v.Sc(5),v.kc(6,"translate"),v.Wb(),v.Wb(),v.Xb(7,"button",60),v.fc("click",(function(){v.Gc(i);var t=v.jc().mediafile,e=v.jc(),n=v.Cc(40);return e.move(n,[t])})),v.Xb(8,"mat-icon"),v.Sc(9,"near_me"),v.Wb(),v.Xb(10,"span"),v.Sc(11),v.kc(12,"translate"),v.Wb(),v.Wb(),v.Xb(13,"button",66),v.fc("click",(function(){v.Gc(i);var t=v.jc().mediafile;return v.jc().onDelete(t)})),v.Xb(14,"mat-icon"),v.Sc(15,"delete"),v.Wb(),v.Xb(16,"span"),v.Sc(17),v.kc(18,"translate"),v.Wb(),v.Wb(),v.Wb()}2&t&&(v.Fb(5),v.Tc(v.lc(6,3,"Edit")),v.Fb(6),v.Tc(v.lc(12,5,"Move")),v.Fb(6),v.Tc(v.lc(18,7,"Delete")))}function $t(t,e){if(1&t&&(v.Qc(0,zt,4,3,"div",62),v.Qc(1,Vt,1,2,"os-projector-button",63),v.Qc(2,Jt,19,9,"div",21)),2&t){var i=e.mediafile,n=v.jc();v.rc("osPerms",n.permission.coreCanManageLogosAndFonts),v.Fb(1),v.rc("ngIf",i.isProjectable()),v.Fb(1),v.rc("ngIf",n.canEdit)}}function Ht(t,e){if(1&t){var i=v.Yb();v.Xb(0,"div"),v.Xb(1,"button",60),v.fc("click",(function(){return v.Gc(i),v.jc().downloadMultiple()})),v.Xb(2,"mat-icon"),v.Sc(3,"cloud_download"),v.Wb(),v.Xb(4,"span"),v.Sc(5),v.kc(6,"translate"),v.Wb(),v.Wb(),v.Xb(7,"button",60),v.fc("click",(function(){return v.Gc(i),v.jc().toggleMultiSelect()})),v.Xb(8,"mat-icon"),v.Sc(9,"library_add"),v.Wb(),v.Xb(10,"span"),v.Sc(11),v.kc(12,"translate"),v.Wb(),v.Wb(),v.Wb()}2&t&&(v.Fb(5),v.Tc(v.lc(6,2,"Download folder")),v.Fb(6),v.Tc(v.lc(12,4,"Multiselect")))}function qt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"button",67),v.fc("click",(function(){v.Gc(i);var t=v.jc(2),e=v.Cc(40);return t.move(e,t.selectedRows)})),v.Xb(1,"mat-icon"),v.Sc(2,"near_me"),v.Wb(),v.Xb(3,"span"),v.Sc(4),v.kc(5,"translate"),v.Wb(),v.Wb()}if(2&t){var n=v.jc(2);v.rc("disabled",!n.selectedRows.length),v.Fb(4),v.Tc(v.lc(5,2,"Move"))}}function Kt(t,e){1&t&&v.Sb(0,"mat-divider")}function Zt(t,e){if(1&t){var i=v.Yb();v.Xb(0,"button",67),v.fc("click",(function(){return v.Gc(i),v.jc(2).deleteSelected()})),v.Xb(1,"mat-icon",69),v.Sc(2,"delete"),v.Wb(),v.Xb(3,"span"),v.Sc(4),v.kc(5,"translate"),v.Wb(),v.Wb()}if(2&t){var n=v.jc(2);v.rc("disabled",!n.selectedRows.length),v.Fb(4),v.Tc(v.lc(5,2,"Delete"))}}function te(t,e){if(1&t){var i=v.Yb();v.Xb(0,"div"),v.Xb(1,"button",67),v.fc("click",(function(){v.Gc(i);var t=v.jc();return t.downloadMultiple(t.selectedRows)})),v.Xb(2,"mat-icon"),v.Sc(3,"cloud_download"),v.Wb(),v.Xb(4,"span"),v.Sc(5),v.kc(6,"translate"),v.Wb(),v.Wb(),v.Qc(7,qt,6,4,"button",68),v.Sb(8,"mat-divider"),v.Xb(9,"button",60),v.fc("click",(function(){return v.Gc(i),v.jc().selectAll()})),v.Xb(10,"mat-icon"),v.Sc(11,"done_all"),v.Wb(),v.Xb(12,"span"),v.Sc(13),v.kc(14,"translate"),v.Wb(),v.Wb(),v.Xb(15,"button",67),v.fc("click",(function(){return v.Gc(i),v.jc().deselectAll()})),v.Xb(16,"mat-icon"),v.Sc(17,"clear"),v.Wb(),v.Xb(18,"span"),v.Sc(19),v.kc(20,"translate"),v.Wb(),v.Wb(),v.Qc(21,Kt,1,0,"mat-divider",62),v.Qc(22,Zt,6,4,"button",68),v.Wb()}if(2&t){var n=v.jc();v.Fb(1),v.rc("disabled",!n.selectedRows.length),v.Fb(4),v.Tc(v.lc(6,8,"Download")),v.Fb(2),v.rc("osPerms",n.permission.mediafilesCanManage),v.Fb(6),v.Tc(v.lc(14,10,"Select all")),v.Fb(2),v.rc("disabled",!n.selectedRows.length),v.Fb(4),v.Tc(v.lc(20,12,"Deselect all")),v.Fb(2),v.rc("osPerms",n.permission.mediafilesCanManage),v.Fb(1),v.rc("osPerms",n.permission.mediafilesCanManage)}}function ee(t,e){1&t&&(v.Xb(0,"mat-error"),v.Sc(1),v.kc(2,"translate"),v.Wb()),2&t&&(v.Fb(1),v.Tc(v.lc(2,1,"Required")))}function ie(t,e){if(1&t){var i=v.Yb();v.Xb(0,"h1",70),v.Sc(1),v.kc(2,"translate"),v.Wb(),v.Xb(3,"div",71),v.Xb(4,"form",72),v.Xb(5,"mat-form-field"),v.Sb(6,"input",73),v.kc(7,"translate"),v.Qc(8,ee,3,3,"mat-error",21),v.Wb(),v.Xb(9,"mat-form-field"),v.Sb(10,"os-search-value-selector",74),v.kc(11,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(12,"div",75),v.Xb(13,"button",76),v.fc("click",(function(){v.Gc(i);var t=v.jc();return t.onSaveEditedFile(t.fileEditForm.value)})),v.Xb(14,"span"),v.Sc(15),v.kc(16,"translate"),v.Wb(),v.Wb(),v.Xb(17,"button",77),v.Xb(18,"span"),v.Sc(19),v.kc(20,"translate"),v.Wb(),v.Wb(),v.Wb()}if(2&t){var n=v.jc();v.Fb(1),v.Tc(v.lc(2,11,"Edit details for")),v.Fb(3),v.rc("formGroup",n.fileEditForm),v.Fb(2),v.sc("placeholder",v.lc(7,13,"New file name")),v.Fb(2),v.rc("ngIf",n.fileEditForm.invalid),v.Fb(2),v.sc("placeholder",v.lc(11,15,"Access groups")),v.rc("multiple",!0)("inputListValues",n.groupsBehaviorSubject),v.Fb(3),v.rc("disabled",!n.fileEditForm.valid),v.Fb(2),v.Tc(v.lc(16,17,"Save")),v.Fb(2),v.rc("mat-dialog-close",null),v.Fb(2),v.Tc(v.lc(20,19,"Cancel"))}}function ne(t,e){if(1&t&&(v.Xb(0,"h1",70),v.Sc(1),v.kc(2,"translate"),v.Wb(),v.Xb(3,"div",71),v.Xb(4,"form",72),v.Xb(5,"p"),v.Sc(6),v.kc(7,"translate"),v.Wb(),v.Xb(8,"mat-form-field"),v.Sb(9,"input",78),v.kc(10,"translate"),v.Wb(),v.Xb(11,"mat-form-field"),v.Sb(12,"os-search-value-selector",74),v.kc(13,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(14,"div",75),v.Xb(15,"button",79),v.Xb(16,"span"),v.Sc(17),v.kc(18,"translate"),v.Wb(),v.Wb(),v.Xb(19,"button",77),v.Xb(20,"span"),v.Sc(21),v.kc(22,"translate"),v.Wb(),v.Wb(),v.Wb()),2&t){var i=v.jc();v.Fb(1),v.Tc(v.lc(2,12,"New directory")),v.Fb(3),v.rc("formGroup",i.newDirectoryForm),v.Fb(2),v.Tc(v.lc(7,14,"Please enter a name for the new directory:")),v.Fb(3),v.sc("placeholder",v.lc(10,16,"Title")),v.Fb(3),v.sc("placeholder",v.lc(13,18,"Access groups")),v.rc("multiple",!0)("inputListValues",i.groupsBehaviorSubject),v.Fb(3),v.rc("disabled",!i.newDirectoryForm.valid)("mat-dialog-close",!0),v.Fb(2),v.Tc(v.lc(18,20,"Save")),v.Fb(2),v.rc("mat-dialog-close",null),v.Fb(2),v.Tc(v.lc(22,22,"Cancel"))}}function re(t,e){if(1&t&&(v.Xb(0,"h1",70),v.Xb(1,"span"),v.Sc(2),v.kc(3,"translate"),v.Wb(),v.Wb(),v.Xb(4,"div",80),v.Xb(5,"p"),v.Sc(6),v.kc(7,"translate"),v.Wb(),v.Xb(8,"mat-form-field"),v.Sb(9,"os-search-value-selector",81),v.kc(10,"translate"),v.Wb(),v.Wb(),v.Xb(11,"div",75),v.Xb(12,"button",82),v.Xb(13,"span"),v.Sc(14),v.kc(15,"translate"),v.Wb(),v.Wb(),v.Xb(16,"button",77),v.Xb(17,"span"),v.Sc(18),v.kc(19,"translate"),v.Wb(),v.Wb(),v.Wb()),2&t){var i=v.jc();v.Fb(2),v.Tc(v.lc(3,11,"Move into directory")),v.Fb(2),v.rc("formGroup",i.moveForm),v.Fb(2),v.Tc(v.lc(7,13,"Please select the directory:")),v.Fb(3),v.sc("placeholder",v.lc(10,15,"Parent directory")),v.rc("includeNone",!0)("noneTitle","Base folder")("inputListValues",i.filteredDirectoryBehaviorSubject),v.Fb(3),v.rc("mat-dialog-close",!0),v.Fb(2),v.Tc(v.lc(15,17,"Move")),v.Fb(2),v.rc("mat-dialog-close",null),v.Fb(2),v.Tc(v.lc(19,19,"Cancel"))}}var ce,oe,ae,le=[{path:"",redirectTo:"files",pathMatch:"full"},{path:"files",children:[{path:"**",component:(ce=function(e){o(a,e);var r=l(a);function a(e,i,c,o,l,s,u,b,f,d,p,m,g,h,v,y,S,F){var k,W;return n(this,a),(W=r.call(this,e,i,c,o)).translate=i,W.route=l,W.router=s,W.repo=u,W.mediaManage=b,W.promptService=f,W.vp=d,W.sortService=p,W.operator=m,W.dialog=g,W.fb=h,W.formBuilder=v,W.groupRepo=y,W.cd=S,W.configService=F,W.filteredDirectoryBehaviorSubject=new x.a([]),W.tableColumnDefinition=[{prop:"selection",width:"40px"},{prop:"icon",label:"",width:"40px"},{prop:"title",width:"auto",minWidth:60},{prop:"info",width:"20%",minWidth:60},{prop:"indicator",label:"",width:"40px"},{prop:"menu",label:"",width:"40px"}],W.columnSet=(k=Object(I.o)()).table.apply(k,t(W.tableColumnDefinition)).build(),W.directoryObservable=new _.a,W.canMultiSelect=!0,W.newDirectoryForm=W.formBuilder.group({title:["",C.H.required],access_groups_id:[]}),W.moveForm=W.formBuilder.group({directory_id:[]}),W.directoryBehaviorSubject=W.repo.getDirectoryBehaviorSubject(),W.groupsBehaviorSubject=W.groupRepo.getViewModelListBehaviorSubject(),W}return c(a,[{key:"ngOnInit",value:function(){var t=this;i(u(a.prototype),"setTitle",this).call(this,"Files"),this.repo.getDirectoryIdByPath(this.route.snapshot.url.map((function(t){return t.path}))).then((function(e){t.changeDirectory(e)})),this.mediaManage.getLogoActions().subscribe((function(e){t.logoActions=e})),this.mediaManage.getFontActions().subscribe((function(e){t.fontActions=e})),this.createDataSource()}},{key:"ngOnDestroy",value:function(){i(u(a.prototype),"ngOnDestroy",this).call(this),this.clearSubscriptions(),this.cd.detach()}},{key:"showFileMenu",value:function(t){return t.isProjectable()&&this.operator.hasPerms(m.b.coreCanManageProjector)||t.isFont()&&this.operator.hasPerms(m.b.coreCanManageLogosAndFonts)||t.isImage()&&this.operator.hasPerms(m.b.coreCanManageLogosAndFonts)||this.canEdit}},{key:"getDateFromTimestamp",value:function(t){return new Date(t).toLocaleString(this.translate.currentLang)}},{key:"createDataSource",value:function(){var t=this;this.dataSource=Object(I.p)().onTrigger((function(){return t.directoryObservable})).create(),this.dataSource.selection.changed.subscribe((function(e){t.selectedRows=e.source.selected}))}},{key:"changeDirectory",value:function(t){var e=this;this.clearSubscriptions(),this.directoryObservable=this.repo.getListObservableDirectory(t),this.folderSubscription=this.directoryObservable.subscribe((function(t){t&&(e.dataSource.refresh(),e.cd.markForCheck())})),t?this.directorySubscription=this.repo.getViewModelObservable(t).subscribe((function(t){e.directory=t,t?(e.directoryChain=t.getDirectoryChain(),e.router.navigate(["/mediafiles/files/"+t.path],{replaceUrl:!0})):(e.directoryChain=[],e.router.navigate(["/mediafiles/files/"],{replaceUrl:!0}))})):(this.directory=null,this.directoryChain=[],this.router.navigate(["/mediafiles/files/"],{replaceUrl:!0}))}},{key:"onMainEvent",value:function(){this.router.navigate(["/mediafiles/upload/"+(this.directory?this.directory.path:"")])}},{key:"onEditFile",value:function(t){var e=this;this.isMultiSelect||(this.fileToEdit=t,this.fileEditForm=this.fb.group({title:[t.filename,C.H.required],access_groups_id:[t.access_groups_id]}),this.dialogRef=this.dialog.open(this.fileEditDialog,N.a),this.dialogRef.keydownEvents().subscribe((function(t){"Enter"===t.key&&t.shiftKey&&e.fileEditForm.valid&&e.onSaveEditedFile(e.fileEditForm.value)})))}},{key:"onSaveEditedFile",value:function(t){var e=this;this.repo.update(t,this.fileToEdit).then((function(){e.dialogRef.close()}),this.raiseError)}},{key:"onDelete",value:function(t){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.translate.instant("Are you sure you want to delete this file?"),n=t.getTitle(),e.next=3,this.promptService.open(i,n);case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.repo.delete(t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"deleteSelected",value:function(){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete all selected files and folders?"),t.next=3,this.promptService.open(e);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.bulkDelete(this.selectedRows);case 7:this.deselectAll();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"getNameOfAction",value:function(t){return this.translate.instant(this.mediaManage.getMediaConfig(t).display_name)}},{key:"formatIndicatorTooltip",value:function(t){var e=this;return this.getFileSettings(t).map((function(t){return e.getNameOfAction(t)})).join("\n")}},{key:"isUsedAs",value:function(t,e){var i=this.mediaManage.getMediaConfig(e);return!!i&&i.path===t.url}},{key:"getFileSettings",value:function(t){var e=this,i=[];return t&&(t.isFont()?i=this.fontActions.filter((function(i){return e.isUsedAs(t,i)})):t.isImage()&&(i=this.logoActions.filter((function(i){return e.isUsedAs(t,i)})))),i}},{key:"onManageButton",value:function(t,e,i){var n=this;t.stopPropagation(),this.mediaManage.setAs(e,i).then((function(){n.cd.markForCheck()}))}},{key:"createNewFolder",value:function(t){var e=this;this.newDirectoryForm.reset(),this.dialog.open(t,N.a).afterClosed().subscribe((function(t){if(t){var i=new B.a(Object.assign(Object.assign({},e.newDirectoryForm.value),{parent_id:e.directory?e.directory.id:null,is_directory:!0}));e.repo.create(i).catch(e.raiseError)}}))}},{key:"downloadMultiple",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataSource.source,n="".concat(this.configService.instant("general_event_name")," - ").concat(null!==(e=null===(t=this.directory)||void 0===t?void 0:t.filename)&&void 0!==e?e:this.translate.instant("Files")).trim();this.repo.downloadArchive(n,i)}},{key:"move",value:function(t,e){var i=this;this.moveForm.reset(),e.some((function(t){return t.is_directory}))?this.filteredDirectoryBehaviorSubject.next(this.directoryBehaviorSubject.value.filter((function(t){return!e.some((function(e){return t.path.startsWith(e.path)}))}))):this.filteredDirectoryBehaviorSubject.next(this.directoryBehaviorSubject.value),this.dialog.open(t,N.a).afterClosed().subscribe((function(t){t&&i.repo.move(e,i.moveForm.value.directory_id).then((function(){i.dataSource.selection.clear(),i.cd.markForCheck()}),i.raiseError)}))}},{key:"onSelectRow",value:function(t){if(this.isMultiSelect){var e=t.row;this.dataSource.selection.isSelected(e)?this.dataSource.selection.deselect(e):this.dataSource.selection.select(e)}}},{key:"clearSubscriptions",value:function(){this.folderSubscription&&(this.folderSubscription.unsubscribe(),this.folderSubscription=null),this.directorySubscription&&(this.directorySubscription.unsubscribe(),this.directorySubscription=null)}},{key:"canEdit",get:function(){return this.operator.hasPerms(m.b.mediafilesCanManage)}},{key:"canAccessFileMenu",get:function(){return this.operator.hasPerms(m.b.coreCanManageProjector)||this.operator.hasPerms(m.b.agendaCanSeeListOfSpeakers)||this.operator.hasPerms(m.b.coreCanManageLogosAndFonts)||this.canEdit}},{key:"hiddenColumns",get:function(){var t=[];return this.canEdit||t.push("info"),this.isMultiSelect||t.push("selection"),this.canAccessFileMenu||t.push("menu"),t}}]),a}(G.a),ce.\u0275fac=function(t){return new(t||ce)(v.Rb(y.c),v.Rb(S.k),v.Rb(F.a),v.Rb(R.a),v.Rb(p.a),v.Rb(p.f),v.Rb(g.a),v.Rb(A),v.Rb(P.a),v.Rb(L.a),v.Rb(z),v.Rb(m.a),v.Rb(V.b),v.Rb(C.g),v.Rb(C.g),v.Rb(O.a),v.Rb(v.h),v.Rb(E.a))},ce.\u0275cmp=v.Lb({type:ce,selectors:[["os-mediafile-list"]],viewQuery:function(t,e){var i;1&t&&(v.Mc(ct,!0),v.Mc(ot,!0)),2&t&&(v.Bc(i=v.gc())&&(e.fileEditForm=i.first),v.Bc(i=v.gc())&&(e.fileEditDialog=i.first))},features:[v.Cb],decls:41,vars:22,consts:[[3,"hasMainButton","multiSelectMode","mainEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"click",4,"osPerms","osPermsAnd"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["class","central-info-slot",4,"ngIf"],[1,"custom-table-header"],[1,"folder-nav-bar","h-scroller"],["mat-button","",1,"folder",3,"disabled","click"],[1,"file-icon"],["class","folder-section",4,"ngFor","ngForOf"],["class","visibility",4,"ngIf"],["showHeader","false","vScrollAuto","","matCheckboxSelection","selection",1,"file-manager-table",3,"dataSource","columns","hideColumns","rowClick"],["class","fill clickable",4,"pblNgridCellDef"],["class","fill clickable",3,"click",4,"pblNgridCellDef"],["class","fill",4,"pblNgridCellDef"],["class","pbl-ngrid-no-data",4,"pblNgridNoDataRef"],["manageButton",""],["singleMediafileMenu","matMenu"],["matMenuContent",""],["mediafilesMenu","matMenu"],[4,"ngIf"],["fileEditDialog",""],["newFolderDialog",""],["moveDialog",""],["type","button","mat-icon-button","",3,"click"],[1,"central-info-slot"],["mat-icon-button","",3,"click"],[1,"folder-section"],[1,"arrow"],["class","folder","mat-button","",3,"disabled","click",4,"ngIf"],["class","folder","mat-button","",3,"matMenuTriggerFor","matMenuTriggerData","disabled",4,"ngIf"],["class","folder fake-folder folder-text",4,"ngIf"],[1,"folder-text"],["mat-button","",1,"folder",3,"matMenuTriggerFor","matMenuTriggerData","disabled"],["icon","arrow_drop_down","swap","true","size","large",3,"noWrap"],[1,"folder","fake-folder","folder-text"],[1,"visibility"],["mat-button","",1,"visible-for",3,"click"],["icon","group",3,"matTooltip"],[4,"ngFor","ngForOf"],[1,"fill","clickable"],["class","detail-link","target","_blank",3,"routerLink",4,"ngIf"],["class","detail-link",3,"click",4,"ngIf"],["target","_blank",1,"detail-link",3,"routerLink"],[1,"detail-link",3,"click"],[1,"innerTable"],[1,"file-title","ellipsis-overflow"],["class","info-text",4,"ngIf"],[1,"info-text"],[1,"fill","clickable",3,"click"],["icon","group",4,"ngIf"],["icon","group"],[1,"fill"],[3,"matMenuTriggerFor","matMenuTriggerData","matTooltip",4,"ngIf"],[3,"matMenuTriggerFor","matMenuTriggerData","matTooltip"],["class","file-icon",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData","disabled",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData","disabled"],[1,"pbl-ngrid-no-data"],["mat-menu-item","",3,"click"],["color","accent"],[4,"osPerms"],[3,"object","menuItem",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"object","menuItem"],["mat-menu-item","",1,"red-warning-text",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"disabled","click",4,"osPerms"],["color","warn"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],[1,"edit-file-form",3,"formGroup"],["type","text","matInput","","osAutofocus","","required","","formControlName","title",3,"placeholder"],["formControlName","access_groups_id",3,"multiple","placeholder","inputListValues"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","click"],["type","button","mat-button","",3,"mat-dialog-close"],["matInput","","osAutofocus","","formControlName","title","required","",3,"placeholder"],["type","submit","mat-button","","color","accent",3,"disabled","mat-dialog-close"],["mat-dialog-content","",1,"os-form-card-mobile",3,"formGroup"],["formControlName","directory_id",3,"includeNone","noneTitle","placeholder","inputListValues"],["type","submit","mat-button","","color","accent",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(v.Xb(0,"os-head-bar",0),v.fc("mainEvent",(function(){return e.onMainEvent()})),v.Xb(1,"div",1),v.Xb(2,"h2"),v.Sc(3),v.kc(4,"translate"),v.Wb(),v.Wb(),v.Xb(5,"div",2),v.Qc(6,at,3,0,"button",3),v.Xb(7,"button",4),v.Xb(8,"mat-icon"),v.Sc(9,"more_vert"),v.Wb(),v.Wb(),v.Wb(),v.Qc(10,lt,9,4,"div",5),v.Wb(),v.Xb(11,"div"),v.Xb(12,"div",6),v.Xb(13,"span",7),v.Xb(14,"button",8),v.fc("click",(function(){return e.changeDirectory(null)})),v.Xb(15,"mat-icon",9),v.Sc(16,"home"),v.Wb(),v.Wb(),v.Qc(17,dt,7,3,"span",10),v.Wb(),v.Qc(18,ht,6,8,"span",11),v.Wb(),v.Wb(),v.Xb(19,"pbl-ngrid",12),v.fc("rowClick",(function(t){return e.onSelectRow(t)})),v.Qc(20,St,5,3,"div",13),v.Qc(21,wt,7,4,"div",13),v.Qc(22,Dt,2,1,"div",14),v.Qc(23,_t,2,1,"div",15),v.Qc(24,Ot,2,1,"div",15),v.Qc(25,Et,4,3,"div",16),v.Wb(),v.Qc(26,Qt,5,2,"ng-template",null,17,v.Rc),v.Xb(28,"mat-menu",null,18),v.Qc(30,$t,3,3,"ng-template",19),v.Wb(),v.Xb(31,"mat-menu",null,20),v.Qc(33,Ht,13,6,"div",21),v.Qc(34,te,23,14,"div",21),v.Wb(),v.Qc(35,ie,21,21,"ng-template",null,22,v.Rc),v.Qc(37,ne,23,24,"ng-template",null,23,v.Rc),v.Qc(39,re,20,21,"ng-template",null,24,v.Rc)),2&t){var i=v.Cc(32);v.rc("hasMainButton",e.canEdit)("multiSelectMode",e.isMultiSelect),v.Fb(3),v.Tc(v.lc(4,20,"Files")),v.Fb(3),v.rc("osPerms",e.permission.mediafilesCanManage)("osPermsAnd",!e.isMultiSelect),v.Fb(1),v.rc("matMenuTriggerFor",i),v.Fb(3),v.rc("ngIf",e.isMultiSelect),v.Fb(4),v.rc("disabled",e.isMultiSelect),v.Fb(3),v.rc("ngForOf",e.directoryChain),v.Fb(1),v.rc("ngIf",e.canEdit&&e.directory&&e.directory.has_inherited_access_groups),v.Fb(1),v.rc("dataSource",e.dataSource)("columns",e.columnSet)("hideColumns",e.hiddenColumns),v.Fb(1),v.rc("pblNgridCellDef","icon"),v.Fb(1),v.rc("pblNgridCellDef","title"),v.Fb(1),v.rc("pblNgridCellDef","info"),v.Fb(1),v.rc("pblNgridCellDef","indicator"),v.Fb(1),v.rc("pblNgridCellDef","menu"),v.Fb(9),v.rc("ngIf",!e.isMultiSelect),v.Fb(1),v.rc("ngIf",e.isMultiSelect)}},directives:[k.a,J.a,W.b,w.e,X.a,d.t,d.s,I.d,I.B,$.b,H.b,I.b,I.k,w.f,w.b,q.a,K.c,p.i,w.c,d.A,Z.a,tt.a,V.i,V.f,C.J,C.u,C.l,et.c,it.b,C.d,nt.a,C.E,C.t,C.j,rt.a,V.c,V.d,et.b],pipes:[S.j,d.E],styles:[".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.folder-nav-bar{width:100%}.folder-nav-bar,.folder-section{display:-ms-flexbox;display:flex}.folder-section{white-space:nowrap}.folder-section .mat-button{padding:0}.arrow{height:64px}.arrow .mat-icon{line-height:64px;height:64px}.folder{height:64px}.folder>.content-node{white-space:nowrap}.fake-folder{padding:0 16px}.folder-text{font-size:16px;font-weight:500;margin:auto 5px;overflow:hidden}.visibility{display:-ms-flexbox;display:flex}.visibility .visible-for{width:-webkit-min-content;width:-moz-min-content;width:min-content}.file-manager-table{display:block;height:calc(100vh - 130px)}.file-manager-table .file-title{font-weight:500;font-size:16px}.file-manager-table .info-text{font-size:90%}.file-manager-table .pbl-ngrid-container>div{height:0}.file-manager-table .pbl-ngrid-row,.file-manager-table .pbl-ngrid-row .pbl-ngrid-cell{height:60px!important}.file-manager-table .pbl-ngrid-row:last-of-type{margin-bottom:60px!important}"],encapsulation:2,changeDetection:0}),ce)}],pathMatch:"prefix"},{path:"upload",data:{basePerm:m.b.mediafilesCanManage},children:[{path:"**",component:T}],pathMatch:"prefix"}],se=((oe=function t(){n(this,t)}).\u0275mod=v.Pb({type:oe}),oe.\u0275inj=v.Ob({factory:function(t){return new(t||oe)},imports:[[p.j.forChild(le)],p.j]}),oe),ue=a("PCNd"),be=((ae=function t(){n(this,t)}).\u0275mod=v.Pb({type:ae}),ae.\u0275inj=v.Ob({factory:function(t){return new(t||ae)},imports:[[d.c,se,ue.a]]}),ae)},F48D:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i("mrSG"),o=i("LBBb"),a=i("8Y7J"),l=i("iELJ"),s=function(){var t=function(){function t(e){n(this,t),this.dialog=e}return c(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.dialog.open(o.a,{width:"290px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return i.stop()}}),i,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.bc(l.b))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},LBBb:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var r=i("iELJ"),c=i("8Y7J"),o=i("SVse"),a=i("Dxy4"),l=i("TSSN");function s(t,e){if(1&t&&(c.Xb(0,"div"),c.Xb(1,"h2",1),c.Sc(2),c.Wb(),c.Sb(3,"mat-dialog-content",2),c.Xb(4,"mat-dialog-actions"),c.Xb(5,"button",3),c.Sc(6),c.kc(7,"translate"),c.Wb(),c.Xb(8,"button",4),c.Sc(9),c.kc(10,"translate"),c.Wb(),c.Wb(),c.Wb()),2&t){var i=c.jc();c.Fb(2),c.Tc(i.data.title),c.Fb(1),c.rc("innerHTML",i.data.content,c.Hc),c.Fb(2),c.rc("mat-dialog-close",!0),c.Fb(1),c.Tc(c.lc(7,6,"OK")),c.Fb(2),c.rc("mat-dialog-close",!1),c.Fb(1),c.Tc(c.lc(10,8,"Cancel"))}}var u=function(){var t=function t(e,i){n(this,t),this.dialogRef=e,this.data=i};return t.\u0275fac=function(e){return new(e||t)(c.Rb(r.h),c.Rb(r.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&c.Qc(0,s,11,10,"div",0),2&t&&c.rc("ngIf",e.data)},directives:[o.t,r.i,r.f,r.c,a.b,r.d],pipes:[l.j],encapsulation:2}),t}()},wL0i:function(e,i,r){"use strict";r.d(i,"a",(function(){return a}));var a=function(e){o(r,e);var i=l(r);function r(t,e,c,o){var a;return n(this,r),(a=i.call(this,t,e,c)).storage=o,a.canMultiSelect=!1,a._multiSelectMode=!1,a.singleButtonWidth="40px",a.badgeButtonWidth="45px",a.selectedRows=[],a}return c(r,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var e;(e=this.dataSource.selection).select.apply(e,t(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),r}(r("mV3u").a)}}])}();