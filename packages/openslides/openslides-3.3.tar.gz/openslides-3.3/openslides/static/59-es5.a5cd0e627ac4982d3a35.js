!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"Bp/c":function(o,r,i){"use strict";i.r(r),i.d(r,"FullscreenProjectorModule",(function(){return S}));var n=i("SVse"),c=i("PCNd"),s=i("iInd"),a=i("XNiG"),h=i("otHz"),l=i("OwvW"),p=i("3moa"),u=i("8Y7J"),d=i("ELcd"),f=i("PAIG"),j=["container"];function b(e,t){if(1&e&&u.Sb(0,"os-projector",4),2&e){var o=u.jc();u.rc("projector",o.projector)}}var m,v,w,g=((m=function(){function o(t,r,i,n){var c=this;e(this,o),this.route=r,this.operator=i,this.repo=n,this.isLoading=!0,this.canSeeProjector=!1,this.oldProjectorSize={width:0,height:0},this.resizeSubject=new a.a,this.projectorStyle={width:"100px"},this.resizeSubject.subscribe((function(){c.updateProjectorDimensions()}))}var r,i,n;return r=o,(i=[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.loadProjector(parseInt(t.id,10)||1),e.isLoading=!1})),this.operator.getUserObservable().subscribe((function(){e.canSeeProjector=e.operator.hasPerms(l.b.coreCanSeeProjector)}))}},{key:"loadProjector",value:function(e){var t=this;this.projectorId=e,this.repo.getViewModelObservable(this.projectorId).subscribe((function(e){t.projector=e,!e||e.width===t.oldProjectorSize.width&&e.height===t.oldProjectorSize.height||(t.oldProjectorSize.width=e.height,t.oldProjectorSize.height=e.height,t.updateProjectorDimensions())}))}},{key:"updateProjectorDimensions",value:function(){if(this.containerElement&&this.projector){var e=this.projector.width/this.projector.height;if(e>=this.containerElement.nativeElement.offsetWidth/this.containerElement.nativeElement.offsetHeight)this.projectorStyle.width=this.containerElement.nativeElement.offsetWidth+"px";else{var t=Math.floor(this.containerElement.nativeElement.offsetHeight*e);this.projectorStyle.width=t+"px"}}}}])&&t(r.prototype,i),n&&t(r,n),o}()).\u0275fac=function(e){return new(e||m)(u.Rb(h.a),u.Rb(s.a),u.Rb(l.a),u.Rb(p.a))},m.\u0275cmp=u.Lb({type:m,selectors:[["os-fullscreen-projector"]],viewQuery:function(e,t){var o;1&e&&u.Mc(j,!0),2&e&&u.Bc(o=u.gc())&&(t.containerElement=o.first)},decls:4,vars:3,consts:[["id","container",3,"osResized"],["container",""],["id","projector",3,"ngStyle"],[3,"projector",4,"ngIf"],[3,"projector"]],template:function(e,t){1&e&&(u.Xb(0,"div",0,1),u.Xb(2,"div",2),u.Qc(3,b,1,1,"os-projector",3),u.Wb(),u.Wb()),2&e&&(u.rc("osResized",t.resizeSubject),u.Fb(2),u.rc("ngStyle",t.projectorStyle),u.Fb(1),u.rc("ngIf",t.projector))},directives:[d.a,n.w,n.t,f.a],styles:["#container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background-color:#222;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#projector[_ngcontent-%COMP%]{width:500px;margin:auto;min-width:1px}"]}),m),y=[{path:"",component:g,pathMatch:"full"},{path:":id",component:g}],P=((w=function t(){e(this,t)}).\u0275mod=u.Pb({type:w}),w.\u0275inj=u.Ob({factory:function(e){return new(e||w)},imports:[[s.j.forChild(y)],s.j]}),w),S=((v=function t(){e(this,t)}).\u0275mod=u.Pb({type:v}),v.\u0275inj=u.Ob({factory:function(e){return new(e||v)},imports:[[n.c,P,c.a]]}),v)}}])}();