!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?r(t):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{ndCD:function(o,l,s){"use strict";s.r(l),s.d(l,"AmendmentListModule",(function(){return xt}));var b=s("SVse"),u=s("iInd"),m=s("mrSG"),d=s("eIep"),f=s("VVsa"),p=s("AOla"),g=s("AqIO"),v=s("dOok"),h=s("+KbT"),S=s("a9XT"),w=s("7dBR"),x=s("+az0"),y=s("Izkr"),W=s("wL0i"),X=s("TzFX"),k=s("zyuw"),F=s("d4fM"),M=s("y50V"),R=s("T9hM"),j=s("8Y7J"),I=s("cUpR"),O=s("TSSN"),T=s("zHaW"),P=s("iELJ"),C=s("mksl"),_=s("Dxy4"),D=s("rJgo"),L=s("Tj54"),Q=s("0Obk"),E=s("4LpT"),z=s("f44v"),A=s("Tp2j"),U=s("40uZ"),V=s("3Xi6"),N=s("BSbQ"),G=s("pcP9"),q=s("7jBc");function H(t,e){1&t&&(j.Xb(0,"div",12),j.Xb(1,"h2"),j.Sc(2),j.kc(3,"translate"),j.Wb(),j.Wb()),2&t&&(j.Fb(2),j.Tc(j.lc(3,1,"Amendments")))}function Y(t,e){if(1&t&&(j.Xb(0,"div",12),j.Xb(1,"h2"),j.Sc(2),j.kc(3,"translate"),j.kc(4,"async"),j.Wb(),j.Wb()),2&t){var n,i=j.jc();j.Fb(2),j.Vc(" ",j.lc(3,2,"Amendments to")," ",null==(n=j.lc(4,4,i.parentMotion))?null:n.identifierOrTitle," ")}}function B(t,e){1&t&&(j.Xb(0,"span"),j.Sc(1,"\xa0\xb7\xa0"),j.Wb())}function J(t,e){if(1&t&&(j.Xb(0,"span"),j.Qc(1,B,2,0,"span",11),j.Xb(2,"span"),j.Sc(3),j.kc(4,"translate"),j.Wb(),j.Xb(5,"span"),j.Sc(6),j.Wb(),j.Wb()),2&t){var n=j.jc().row;j.Fb(1),j.rc("ngIf",n.identifier),j.Fb(2),j.Tc(j.lc(4,3,"Line")),j.Fb(3),j.Uc("\xa0",n.getChangeLines(),"")}}function K(t,e){if(1&t&&(j.Xb(0,"span"),j.Xb(1,"span"),j.Sc(2),j.kc(3,"translate"),j.Wb(),j.Sc(4),j.Wb()),2&t){var n=j.jc().row;j.Fb(2),j.Tc(j.lc(3,2,"by")),j.Fb(2),j.Uc(" ",n.submitters," ")}}function Z(t,e){1&t&&(j.Xb(0,"span"),j.Sc(1," \xb7 "),j.Wb())}function $(t,e){if(1&t&&(j.Xb(0,"span"),j.Qc(1,Z,2,0,"span",11),j.Xb(2,"span"),j.Sc(3),j.kc(4,"translate"),j.Wb(),j.Sc(5),j.Wb()),2&t){var n=j.jc().row;j.Fb(1),j.rc("ngIf",n.submitters.length),j.Fb(2),j.Tc(j.lc(4,3,"Sequential number")),j.Fb(2),j.Uc(" ",n.id," ")}}function tt(t,e){if(1&t&&(j.Xb(0,"mat-basic-chip",20),j.Sc(1),j.Wb()),2&t){var n=j.jc().row,i=j.jc();j.rc("ngClass",n.stateCssColor)("disabled",!0),j.Fb(1),j.Uc(" ",i.motionRepo.getExtendedStateLabel(n)," ")}}function et(t,e){if(1&t&&(j.Xb(0,"div",21),j.Xb(1,"mat-basic-chip",22),j.Sc(2),j.Wb(),j.Wb()),2&t){var n=j.jc().row,i=j.jc();j.Fb(1),j.rc("disabled",!0),j.Fb(1),j.Uc(" ",i.motionRepo.getExtendedRecommendationLabel(n)," ")}}var nt=function(){return{back:"true"}};function it(t,e){if(1&t&&(j.Xb(0,"div",13),j.Sb(1,"a",14),j.Xb(2,"div",15),j.Xb(3,"div",16),j.Xb(4,"span"),j.Sc(5),j.Wb(),j.Qc(6,J,7,5,"span",11),j.Wb(),j.Xb(7,"div",17),j.Qc(8,K,5,4,"span",11),j.Qc(9,$,6,5,"span",11),j.Wb(),j.Xb(10,"div"),j.Qc(11,tt,2,3,"mat-basic-chip",18),j.Wb(),j.Qc(12,et,3,2,"div",19),j.Wb(),j.Wb()),2&t){var n=e.row,i=j.jc();j.Fb(1),j.rc("routerLink",n.getDetailStateURL())("state",j.wc(8,nt)),j.Fb(4),j.Tc(n.identifier),j.Fb(1),j.rc("ngIf",n.diffLines&&n.diffLines.length),j.Fb(2),j.rc("ngIf",n.submitters.length),j.Fb(1),j.rc("ngIf",i.showSequentialNumber),j.Fb(2),j.rc("ngIf",n.state),j.Fb(1),j.rc("ngIf",n.recommendation&&n.state.next_states_id.length>0)}}function ot(t,e){if(1&t&&(j.Xb(0,"div",13),j.Sb(1,"a",23),j.Xb(2,"div",15),j.Sb(3,"div",24),j.kc(4,"trust"),j.Wb(),j.Wb()),2&t){var n=e.row,i=j.jc();j.Fb(1),j.rc("routerLink",n.getDetailStateURL()),j.Fb(2),j.rc("innerHtml",j.mc(4,2,i.getAmendmentSummary(n),"html"),j.Hc)}}var rt=function(t){return{motion:t}};function ct(t,e){if(1&t){var n=j.Yb();j.Xb(0,"div",13),j.Xb(1,"button",25),j.fc("click",(function(t){return j.Gc(n),t.stopPropagation()})),j.Xb(2,"mat-icon"),j.Sc(3,"more_vert"),j.Wb(),j.Wb(),j.Wb()}if(2&t){var i=e.row,o=j.jc(),r=j.Cc(21);j.Fb(1),j.rc("disabled",o.isMultiSelect)("matMenuTriggerFor",r)("matMenuTriggerData",j.xc(3,rt,i))}}function at(t,e){if(1&t&&(j.Sb(0,"os-projector-button",26),j.Sb(1,"os-speaker-button",26)),2&t){var n=e.motion;j.rc("object",n)("menuItem",!0),j.Fb(1),j.rc("object",n)("menuItem",!0)}}function lt(t,e){if(1&t){var n=j.Yb();j.Xb(0,"div"),j.Xb(1,"button",28),j.fc("click",(function(){return j.Gc(n),j.jc(2).toggleMultiSelect()})),j.Xb(2,"mat-icon"),j.Sc(3,"library_add"),j.Wb(),j.Xb(4,"span"),j.Sc(5),j.kc(6,"translate"),j.Wb(),j.Wb(),j.Wb()}2&t&&(j.Fb(5),j.Tc(j.lc(6,1,"Multiselect")))}function st(t,e){if(1&t){var n=j.Yb();j.Xb(0,"div"),j.Qc(1,lt,7,3,"div",27),j.Xb(2,"button",28),j.fc("click",(function(){return j.Gc(n),j.jc().openExportDialog()})),j.Xb(3,"mat-icon"),j.Sc(4,"archive"),j.Wb(),j.Xb(5,"span"),j.Sc(6),j.kc(7,"translate"),j.Wb(),j.Wb(),j.Xb(8,"button",28),j.fc("click",(function(){return j.Gc(n),j.jc().exportAmendmentListPdf()})),j.Xb(9,"mat-icon"),j.Sc(10,"picture_as_pdf"),j.Wb(),j.Xb(11,"span"),j.Sc(12),j.kc(13,"translate"),j.Wb(),j.Wb(),j.Wb()}2&t&&(j.Fb(1),j.rc("osPerms","motions.can_manage"),j.Fb(5),j.Tc(j.lc(7,3,"Export")),j.Fb(6),j.Tc(j.lc(13,5,"Amendment list (PDF)")))}function bt(t,e){if(1&t){var n=j.Yb();j.Vb(0),j.Sb(1,"mat-divider"),j.Xb(2,"os-motion-multiselect-actions",31),j.fc("action",(function(t){return j.Gc(n),j.jc(2).multiselectWrapper(t)})),j.Wb(),j.Ub()}if(2&t){var i=j.jc(2);j.Fb(2),j.rc("selectedMotions",i.selectedRows)}}function ut(t,e){if(1&t){var n=j.Yb();j.Xb(0,"div"),j.Xb(1,"button",28),j.fc("click",(function(){return j.Gc(n),j.jc().selectAll()})),j.Xb(2,"mat-icon"),j.Sc(3,"done_all"),j.Wb(),j.Xb(4,"span"),j.Sc(5),j.kc(6,"translate"),j.Wb(),j.Wb(),j.Xb(7,"button",29),j.fc("click",(function(){return j.Gc(n),j.jc().deselectAll()})),j.Xb(8,"mat-icon"),j.Sc(9,"clear"),j.Wb(),j.Xb(10,"span"),j.Sc(11),j.kc(12,"translate"),j.Wb(),j.Wb(),j.Qc(13,bt,3,1,"ng-container",30),j.Wb()}if(2&t){var i=j.jc();j.Fb(5),j.Tc(j.lc(6,5,"Select all")),j.Fb(2),j.rc("disabled",!i.selectedRows.length),j.Fb(4),j.Tc(j.lc(12,7,"Deselect all")),j.Fb(2),j.rc("osPerms","motions.can_manage")("osPermsOr","motions.can_manage_metadata")}}var mt,dt,ft,pt=function(){return["summary"]},gt=((mt=function(o){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(f,o);var l,s,b,u=i(f);function f(e,n,i,o,l,s,b,m,d,p,g,v,h,S,w,y){var W,X;return t(this,f),(X=u.call(this,e,n,i,o)).route=l,X.motionRepo=s,X.motionSortService=b,X.motionMultiSelectService=m,X.amendmentSortService=d,X.amendmentFilterService=p,X.dialog=g,X.motionExport=v,X.linenumberingService=h,X.pdfExport=S,X.overlayService=w,X.configService=y,X.itemVisibility=x.b,X.tableColumnDefinition=[{prop:"meta",minWidth:250,width:"auto"},{prop:"summary",minWidth:280,width:"auto"},{prop:"speakers",width:X.singleButtonWidth}],X.filterProps=["submitters","title","identifier","amendment_paragraphs"],c((W=r(X),a(f.prototype)),"setTitle",W).call(W,"Amendments"),X.canMultiSelect=!0,X}return l=f,(s=[{key:"ngOnInit",value:function(){var t=this;this.route.snapshot.paramMap.get("id")?this.parentMotion=this.route.paramMap.pipe(Object(d.a)((function(e){return t.parentMotionId=+e.get("id"),t.amendmentFilterService.parentMotionId=t.parentMotionId,t.motionRepo.getViewModelObservable(t.parentMotionId)}))):this.amendmentFilterService.parentMotionId=void 0,this.configService.get("motions_show_sequential_numbers").subscribe((function(e){return t.showSequentialNumber=e}))}},{key:"getAmendmentSummary",value:function(t){var e=this,n=t.diffLines;return n.length?n.map((function(t){return e.linenumberingService.stripLineNumbers(t.text)})).join("[...]"):t.text}},{key:"openExportDialog",value:function(){var t=this;this.dialog.open(X.a,Object.assign(Object.assign({},y.b),{data:this.dataSource})).afterClosed().subscribe((function(e){return t.motionExport.evaluateExportRequest(e,t.isMultiSelect?t.selectedRows:t.dataSource.filteredData)}))}},{key:"multiselectWrapper",value:function(t){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.then((function(){return n.overlayService.hideSpinner()}),this.raiseError);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"exportAmendmentListPdf",value:function(){var t=this.parentMotionId?this.motionRepo.getViewModel(this.parentMotionId):void 0;this.pdfExport.exportAmendmentList(this.dataSource.filteredData,t)}}])&&e(l.prototype,s),b&&e(l,b),f}(W.a)).\u0275fac=function(t){return new(t||mt)(j.Rb(I.c),j.Rb(O.k),j.Rb(T.a),j.Rb(g.a),j.Rb(u.a),j.Rb(v.a),j.Rb(R.a),j.Rb(F.a),j.Rb(p.a),j.Rb(f.a),j.Rb(P.b),j.Rb(k.a),j.Rb(S.a),j.Rb(M.a),j.Rb(w.a),j.Rb(h.a))},mt.\u0275cmp=j.Lb({type:mt,selectors:[["os-amendment-list"]],features:[j.Cb],decls:27,vars:23,consts:[["prevUrl","../..",3,"nav","multiSelectMode"],["class","title-slot",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"central-info-slot"],["mat-icon-button","",3,"click"],["listStorageKey","amendments",3,"listObservableProvider","sortService","filterService","columns","filterProps","multiSelect","hiddenInMobile","selectedRows","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["amendmentListMenu","matMenu"],[4,"ngIf"],[1,"title-slot"],[1,"cell-slot","fill"],[1,"detail-link",3,"routerLink","state"],[1,"innerTable"],[1,"title-line","one-line"],[1,"submitters-line","one-line"],[3,"ngClass","disabled",4,"ngIf"],["class","spacer-top-3",4,"ngIf"],[3,"ngClass","disabled"],[1,"spacer-top-3"],[1,"bluegrey",3,"disabled"],[1,"detail-link",3,"routerLink"],[1,"motion-text",3,"innerHtml"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],[4,"osPerms"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],[4,"osPerms","osPermsOr"],[3,"selectedMotions","action"]],template:function(t,e){if(1&t&&(j.Xb(0,"os-head-bar",0),j.Qc(1,H,4,3,"div",1),j.Qc(2,Y,5,6,"div",1),j.Xb(3,"div",2),j.Xb(4,"button",3),j.Xb(5,"mat-icon"),j.Sc(6,"more_vert"),j.Wb(),j.Wb(),j.Wb(),j.Xb(7,"div",4),j.Xb(8,"button",5),j.fc("click",(function(){return e.toggleMultiSelect()})),j.Xb(9,"mat-icon"),j.Sc(10,"arrow_back"),j.Wb(),j.Wb(),j.Xb(11,"span"),j.Sc(12),j.Wb(),j.Xb(13,"span"),j.Sc(14),j.kc(15,"translate"),j.Wb(),j.Wb(),j.Wb(),j.Xb(16,"os-list-view-table",6),j.fc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),j.Qc(17,it,13,9,"div",7),j.Qc(18,ot,5,5,"div",7),j.Qc(19,ct,4,5,"div",7),j.Wb(),j.Xb(20,"mat-menu",null,8),j.Qc(22,at,2,4,"ng-template",9),j.Wb(),j.Xb(23,"mat-menu",null,10),j.Qc(25,st,14,7,"div",11),j.Qc(26,ut,14,9,"div",11),j.Wb()),2&t){var n=j.Cc(24);j.rc("nav",!1)("multiSelectMode",e.isMultiSelect),j.Fb(1),j.rc("ngIf",!e.parentMotion),j.Fb(1),j.rc("ngIf",e.parentMotion),j.Fb(2),j.rc("matMenuTriggerFor",n),j.Fb(8),j.Uc("",e.selectedRows.length,"\xa0"),j.Fb(2),j.Tc(j.lc(15,20,"selected")),j.Fb(2),j.rc("listObservableProvider",e.motionRepo)("sortService",e.amendmentSortService)("filterService",e.amendmentFilterService)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("multiSelect",e.isMultiSelect)("hiddenInMobile",j.wc(22,pt))("selectedRows",e.selectedRows),j.Fb(1),j.rc("pblNgridCellDef","meta"),j.Fb(1),j.rc("pblNgridCellDef","summary"),j.Fb(1),j.rc("pblNgridCellDef","menu"),j.Fb(6),j.rc("ngIf",!e.isMultiSelect),j.Fb(1),j.rc("ngIf",e.isMultiSelect)}},directives:[C.a,b.t,_.b,D.e,L.a,Q.a,E.b,D.f,D.b,u.i,z.a,b.q,A.a,U.a,V.a,D.c,N.a,G.a],pipes:[O.j,b.b,q.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:"";width:16px;height:16px;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="%23337ab7"/><path d="M0 0h24v24H0z" fill="none"/></svg>\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}.submitters-line{font-size:90%}'],encapsulation:2,changeDetection:0}),mt),vt=[{path:"",component:gt,pathMatch:"full"},{path:":id",component:gt}],ht=((dt=function e(){t(this,e)}).\u0275mod=j.Pb({type:dt}),dt.\u0275inj=j.Ob({factory:function(t){return new(t||dt)},imports:[[u.j.forChild(vt)],u.j]}),dt),St=s("PCNd"),wt=s("IItz"),xt=((ft=function e(){t(this,e)}).\u0275mod=j.Pb({type:ft}),ft.\u0275inj=j.Ob({factory:function(t){return new(t||ft)},imports:[[b.c,ht,St.a,wt.a]]}),ft)}}])}();