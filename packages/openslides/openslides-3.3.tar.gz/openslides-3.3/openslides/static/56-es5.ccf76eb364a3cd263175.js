!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"9st3":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n("Ri39");var i=n("8Y7J"),a=function(){var e=function e(){s(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.Mb({type:e,inputs:{data:"data",projector:"projector"}}),e}()},Xm5O:function(t,a,r){"use strict";r.r(a),r.d(a,"MotionSlideModule",(function(){return ue}));var o=r("SVse"),l=r("PCNd"),d=r("DGVe"),u=r("pSLD"),f=r("dOok"),b=r("4X/P"),m=r("a9XT"),g=r("GEzB"),h=r("3Y4h"),p=r("EV9s"),v=function(){function e(t,n,i,a){s(this,e),this.paragraphNo=n,this.newText=i,this.lineRange=a,this.id=t.id,this.merge_amendment_into_final=t.merge_amendment_into_final,this.merge_amendment_into_diff=t.merge_amendment_into_diff}return c(e,[{key:"getChangeId",value:function(){return"amendment-"+this.id.toString(10)+"-"+this.paragraphNo.toString(10)}},{key:"getChangeType",value:function(){return g.a.TYPE_AMENDMENT}},{key:"getChangeNewText",value:function(){return this.newText}},{key:"getLineFrom",value:function(){return this.lineRange.from}},{key:"getLineTo",value:function(){return this.lineRange.to}},{key:"isAccepted",value:function(){return 1===this.merge_amendment_into_final}},{key:"isRejected",value:function(){return 0===this.merge_amendment_into_final}},{key:"showInDiffView",value:function(){return 1===this.merge_amendment_into_diff}},{key:"showInFinalView",value:function(){return 1===this.merge_amendment_into_final}},{key:"isTitleChange",value:function(){return!1}}]),e}(),x=function(){function e(t){s(this,e),Object.assign(this,t)}return c(e,[{key:"getChangeId",value:function(){return"recommendation-"+this.id.toString(10)}},{key:"getChangeNewText",value:function(){return this.text}},{key:"getChangeType",value:function(){return g.a.TYPE_CHANGE_RECOMMENDATION}},{key:"getLineFrom",value:function(){return this.line_from}},{key:"getLineTo",value:function(){return this.line_to}},{key:"isAccepted",value:function(){return!this.rejected}},{key:"isRejected",value:function(){return this.rejected}},{key:"showInDiffView",value:function(){return!0}},{key:"showInFinalView",value:function(){return!this.rejected}},{key:"isTitleChange",value:function(){return 0===this.line_from&&0===this.line_to}}]),e}(),y=r("8Y7J"),F=r("TSSN"),_=r("7jBc");function L(e,t){1&e&&(y.Xb(0,"h3"),y.Sc(1),y.kc(2,"translate"),y.Wb()),2&e&&(y.Fb(1),y.Tc(y.lc(2,1,"Submitters")))}function T(e,t){1&e&&(y.Xb(0,"span"),y.Sc(1,", "),y.Wb())}function k(e,t){if(1&e&&(y.Xb(0,"span"),y.Sc(1),y.Qc(2,T,2,0,"span",0),y.Wb()),2&e){var n=t.$implicit,i=t.last;y.Fb(1),y.Uc(" ",n,""),y.Fb(1),y.rc("ngIf",!i)}}function w(e,t){if(1&e&&(y.Xb(0,"div"),y.Xb(1,"h3"),y.Sc(2),y.Wb(),y.Sc(3),y.Wb()),2&e){var n=y.jc(3);y.Fb(2),y.Tc(n.data.data.recommender),y.Fb(1),y.Uc(" ",n.getRecommendationLabel()," ")}}var S=function(e){return{"margin-top":e}};function C(e,t){if(1&e&&(y.Xb(0,"div",11),y.Qc(1,L,3,3,"h3",0),y.Qc(2,k,3,2,"span",12),y.Qc(3,w,4,2,"div",0),y.Wb()),2&e){var n=y.jc(2);y.rc("ngStyle",y.xc(4,S,n.projector.show_header_footer?"144px":"94px")),y.Fb(1),y.rc("ngIf",(null==n.data.data||null==n.data.data.submitters?null:n.data.data.submitters.length)>0),y.Fb(1),y.rc("ngForOf",n.data.data.submitters),y.Fb(1),y.rc("ngIf",n.data.data.recommendation&&n.data.data.recommender)}}function j(e,t){if(1&e&&(y.Xb(0,"span"),y.Sc(1),y.Wb()),2&e){var n=y.jc(2);y.Fb(1),y.Uc("",n.data.data.identifier,":")}}function I(e,t){1&e&&(y.Xb(0,"span"),y.Sc(1,","),y.Wb())}function W(e,t){if(1&e&&(y.Xb(0,"span"),y.Sc(1),y.Qc(2,I,2,0,"span",0),y.Wb()),2&e){var n=t.$implicit,i=t.last,a=y.jc(3);y.Fb(1),y.Uc(" ",a.getIdentifierOrTitle(n),""),y.Fb(1),y.rc("ngIf",!i)}}function X(e,t){if(1&e&&(y.Xb(0,"h2"),y.Xb(1,"span"),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Sc(4,": "),y.Qc(5,W,3,2,"span",12),y.Wb()),2&e){var n=y.jc(2);y.Fb(2),y.Tc(y.lc(3,2,"Referring motions")),y.Fb(3),y.rc("ngForOf",n.referencingMotions)}}function N(e,t){1&e&&(y.Xb(0,"span"),y.Sc(1,", "),y.Wb())}function O(e,t){if(1&e&&(y.Xb(0,"span"),y.Sc(1),y.Qc(2,N,2,0,"span",0),y.Wb()),2&e){var n=t.$implicit,i=t.last;y.Fb(1),y.Uc(" ",n,""),y.Fb(1),y.rc("ngIf",!i)}}function A(e,t){if(1&e&&(y.Xb(0,"tr"),y.Xb(1,"td",14),y.Xb(2,"b"),y.Sc(3),y.kc(4,"translate"),y.Wb(),y.Wb(),y.Xb(5,"td"),y.Qc(6,O,3,2,"span",12),y.Wb(),y.Wb()),2&e){var n=y.jc(3);y.Fb(3),y.Uc("",y.lc(4,2,"Submitters"),":"),y.Fb(3),y.rc("ngForOf",n.data.data.submitters)}}function M(e,t){if(1&e&&(y.Xb(0,"tr"),y.Xb(1,"td",14),y.Xb(2,"b"),y.Sc(3),y.Wb(),y.Wb(),y.Xb(4,"td"),y.Sc(5),y.Wb(),y.Wb()),2&e){var n=y.jc(3);y.Fb(3),y.Uc("",n.data.data.recommender,":"),y.Fb(2),y.Uc(" ",n.getRecommendationLabel()," ")}}function R(e,t){1&e&&(y.Xb(0,"span"),y.Sc(1,","),y.Wb())}function Q(e,t){if(1&e&&(y.Xb(0,"span"),y.Sc(1),y.Qc(2,R,2,0,"span",0),y.Wb()),2&e){var n=t.$implicit,i=t.last,a=y.jc(4);y.Fb(1),y.Uc(" ",a.getIdentifierOrTitle(n),""),y.Fb(1),y.rc("ngIf",!i)}}function E(e,t){if(1&e&&(y.Xb(0,"tr"),y.Xb(1,"td",14),y.Xb(2,"b"),y.Sc(3),y.kc(4,"translate"),y.Wb(),y.Wb(),y.Xb(5,"td"),y.Qc(6,Q,3,2,"span",12),y.Wb(),y.Wb()),2&e){var n=y.jc(3);y.Fb(3),y.Uc("",y.lc(4,2,"Referring motions"),":"),y.Fb(3),y.rc("ngForOf",n.referencingMotions)}}function D(e,t){if(1&e&&(y.Xb(0,"table",13),y.Qc(1,A,7,4,"tr",0),y.Qc(2,M,6,2,"tr",0),y.Qc(3,E,7,4,"tr",0),y.Wb()),2&e){var n=y.jc(2);y.Fb(1),y.rc("ngIf",(null==n.data.data||null==n.data.data.submitters?null:n.data.data.submitters.length)>0),y.Fb(1),y.rc("ngIf",n.data.data.recommendation&&n.data.data.recommender),y.Fb(1),y.rc("ngIf",n.data.data.recommendation_referencing_motions)}}function H(e,t){if(1&e&&(y.Xb(0,"span",15),y.Sc(1),y.kc(2,"translate"),y.Wb()),2&e){var n=y.jc(2);y.Fb(1),y.Uc(" ",y.lc(2,1,n.preamble),"")}}function P(e,t){if(1&e&&(y.Xb(0,"div"),y.Xb(1,"div",18),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Sb(4,"div",19),y.kc(5,"trust"),y.Wb()),2&e){var n=y.jc(3);y.Fb(2),y.Uc("",y.lc(3,2,"Changed title"),":"),y.Fb(2),y.rc("innerHTML",y.mc(5,4,n.getFormattedTitleDiff(),"html"),y.Hc)}}function U(e,t){if(1&e&&(y.Sb(0,"div",19),y.kc(1,"trust")),2&e){var n=y.jc(3);y.rc("innerHTML",y.mc(1,1,n.getFormattedText(),"html"),y.Hc)}}function V(e,t){if(1&e&&(y.Vb(0),y.Xb(1,"div",16),y.Qc(2,P,6,7,"div",0),y.Qc(3,U,2,4,"div",17),y.Wb(),y.Ub()),2&e){var n=y.jc(2);y.Fb(1),y.Jb("line-numbers-none",n.isLineNumberingNone())("line-numbers-inline",n.isLineNumberingInline())("line-numbers-outside",n.isLineNumberingOutside()),y.Fb(1),y.rc("ngIf",n.getTitleChangingObject()&&"diff"===n.crMode),y.Fb(1),y.rc("ngIf",n.getFormattedText())}}function z(e,t){if(1&e&&(y.Sb(0,"div",20),y.kc(1,"trust")),2&e){var n=y.jc(2);y.rc("innerHTML",y.mc(1,1,n.getFormattedStatuteAmendment(),"html"),y.Hc)}}function B(e,t){1&e&&(y.Xb(0,"div",24),y.Xb(1,"span"),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Wb()),2&e&&(y.Fb(2),y.Tc(y.lc(3,1,"No changes at the text.")))}function $(e,t){if(1&e&&(y.Xb(0,"h3",28),y.Xb(1,"span"),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Sc(4),y.Wb()),2&e){var n=y.jc().$implicit;y.Fb(2),y.Tc(y.lc(3,2,"Line")),y.Fb(2),y.Uc(" ",n.diffLineFrom,": ")}}function J(e,t){if(1&e&&(y.Xb(0,"h3",28),y.Xb(1,"span"),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Sc(4),y.Wb()),2&e){var n=y.jc().$implicit;y.Fb(2),y.Tc(y.lc(3,3,"Line")),y.Fb(2),y.Vc(" ",n.diffLineFrom," - ",n.diffLineTo-1,": ")}}function Y(e,t){if(1&e&&(y.Xb(0,"div",25),y.Qc(1,$,5,4,"h3",26),y.Qc(2,J,5,5,"h3",26),y.Sb(3,"div",27),y.kc(4,"trust"),y.Wb()),2&e){var n=t.$implicit,i=y.jc(3);y.Jb("line-numbers-none",i.isLineNumberingNone())("line-numbers-inline",i.isLineNumberingInline())("line-numbers-outside",i.isLineNumberingOutside()),y.Fb(1),y.rc("ngIf",n.diffLineTo===n.diffLineFrom+1),y.Fb(1),y.rc("ngIf",n.diffLineTo!==n.diffLineFrom+1),y.Fb(1),y.rc("innerHtml",y.mc(4,9,n.text,"html"),y.Hc)}}function G(e,t){if(1&e&&(y.Xb(0,"section",21),y.Qc(1,B,4,3,"div",22),y.Qc(2,Y,5,12,"div",23),y.Wb()),2&e){var n=y.jc(2);y.Fb(1),y.rc("ngIf",0===n.getAmendedParagraphs().length),y.Fb(1),y.rc("ngForOf",n.getAmendedParagraphs())}}function q(e,t){1&e&&(y.Xb(0,"div",31),y.Xb(1,"i",32),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Wb()),2&e&&(y.Fb(2),y.Tc(y.lc(3,1,"Rejected")))}function K(e,t){if(1&e&&(y.Xb(0,"div"),y.Xb(1,"div"),y.Qc(2,q,4,3,"div",29),y.Xb(3,"div",30),y.Xb(4,"div",18),y.Sc(5),y.kc(6,"translate"),y.Wb(),y.Sb(7,"div",19),y.kc(8,"trust"),y.Wb(),y.Wb(),y.Wb()),2&e){var n=t.ngIf,i=y.jc(3);y.Fb(1),y.Ib("diff-box diff-box-",n.getChangeId()," clearfix"),y.Fb(1),y.rc("ngIf",n.isRejected()),y.Fb(1),y.Jb("line-numbers-none",i.isLineNumberingNone())("line-numbers-inline",i.isLineNumberingInline())("line-numbers-outside",i.isLineNumberingOutside()),y.Gb("data-change-id",n.getChangeId()),y.Fb(2),y.Uc("",y.lc(6,13,"Changed title"),":"),y.Fb(2),y.rc("innerHTML",y.mc(8,15,i.getFormattedTitleDiff(),"html"),y.Hc)}}function Z(e,t){1&e&&(y.Xb(0,"div",31),y.Xb(1,"i",32),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Wb()),2&e&&(y.Fb(2),y.Tc(y.lc(3,1,"Rejected")))}function ee(e,t){if(1&e&&(y.Xb(0,"div",31),y.Xb(1,"i",32),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Wb()),2&e){var n=y.jc().$implicit;y.Fb(2),y.Vc("",n.amendment.identifier," - ",y.lc(3,2,n.amendment.state.name),"")}}function te(e,t){if(1&e&&(y.Xb(0,"div"),y.Xb(1,"div"),y.Qc(2,Z,4,3,"div",29),y.Qc(3,ee,4,4,"div",29),y.Sb(4,"div",33),y.kc(5,"trust"),y.Wb(),y.Wb()),2&e){var n=t.$implicit,i=y.jc(3);y.Fb(1),y.Ib("diff-box diff-box-",n.getChangeId()," clearfix"),y.Jb("collides",i.hasCollissions(n,i.getAllTextChangingObjects())),y.Fb(1),y.rc("ngIf",i.isChangeRecommendation(n)&&n.isRejected()),y.Fb(1),y.rc("ngIf",i.isAmendment(n)&&i.showAllAmendments),y.Fb(1),y.Jb("line-numbers-none",i.isLineNumberingNone())("line-numbers-inline",i.isLineNumberingInline())("line-numbers-outside",i.isLineNumberingOutside()),y.rc("innerHTML",y.mc(5,15,i.getAmendmentDiff(n),"html"),y.Hc),y.Gb("data-change-id",n.getChangeId())}}function ne(e,t){if(1&e&&(y.Xb(0,"section",21),y.Qc(1,K,9,18,"div",0),y.Qc(2,te,6,18,"div",12),y.Wb()),2&e){var n=y.jc(2);y.Fb(1),y.rc("ngIf",n.getTitleChangingObject()),y.Fb(1),y.rc("ngForOf",n.getAllTextChangingObjects())}}function ie(e,t){if(1&e&&(y.Xb(0,"div"),y.Xb(1,"h3"),y.Sc(2),y.kc(3,"translate"),y.Wb(),y.Sb(4,"div",19),y.kc(5,"trust"),y.Wb()),2&e){var n=y.jc(2);y.Fb(2),y.Tc(y.lc(3,2,"Reason")),y.Fb(2),y.rc("innerHTML",y.mc(5,4,n.data.data.reason,"html"),y.Hc)}}var ae=function(e){return{width:e}},re=function(e){return{height:e}},oe=function(e){return{slidetitle:e}};function ce(e,t){if(1&e&&(y.Xb(0,"div"),y.Qc(1,C,4,6,"div",1),y.Xb(2,"div",2),y.Sb(3,"div",3),y.Xb(4,"div",4),y.Xb(5,"h1"),y.Qc(6,j,2,1,"span",0),y.Sc(7),y.Wb(),y.Qc(8,X,6,4,"h2",0),y.Qc(9,D,4,3,"table",5),y.Wb(),y.Wb(),y.Xb(10,"div",6),y.Xb(11,"div",7),y.Qc(12,H,3,3,"span",8),y.Qc(13,V,4,8,"ng-container",0),y.Qc(14,z,2,4,"div",9),y.Qc(15,G,3,2,"section",10),y.Qc(16,ne,3,2,"section",10),y.Qc(17,ie,6,7,"div",0),y.Wb(),y.Wb(),y.Wb()),2&e){var n=y.jc();y.Fb(1),y.rc("ngIf",n.data.data.show_meta_box),y.Fb(1),y.rc("ngStyle",y.xc(15,ae,n.data.data.show_meta_box?"calc(100% - 250px)":"100%")),y.Fb(1),y.rc("ngStyle",y.xc(17,re,n.projector.show_header_footer?"50px":"0")),y.Fb(1),y.rc("ngClass",y.xc(19,oe,n.data.data.show_meta_box)),y.Fb(2),y.rc("ngIf",n.data.data.identifier),y.Fb(1),y.Uc(" ",n.getTitleWithChanges()," "),y.Fb(1),y.rc("ngIf",n.data.data.show_meta_box&&n.data.data.recommendation_referencing_motions),y.Fb(1),y.rc("ngIf",n.showMetaTable),y.Fb(2),y.rc("ngStyle",n.textDivStyles),y.Fb(1),y.rc("ngIf",n.isStatuteAmendment()||n.isParagraphBasedAmendment()||!!n.getFormattedText()),y.Fb(1),y.rc("ngIf",!n.isStatuteAmendment()&&!n.isParagraphBasedAmendment()),y.Fb(1),y.rc("ngIf",n.isStatuteAmendment()),y.Fb(1),y.rc("ngIf",n.isParagraphBasedAmendment()&&"diff"!==n.crMode),y.Fb(1),y.rc("ngIf",n.isParagraphBasedAmendment()&&"diff"===n.crMode),y.Fb(1),y.rc("ngIf",n.data.data.reason)}}var se,le,de=((le=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(r,t);var a=i(r);function r(e,t,n,i,o){var c;return s(this,r),(c=a.call(this,e,t)).changeRepo=n,c.lineNumbering=i,c.diff=o,c.referencingMotions=[],c._scroll=0,c._scale=0,c.textDivStyles={},c}return c(r,[{key:"getIdentifierOrTitle",value:function(e){return this.motionRepo.getIdentifierOrTitle(e)}},{key:"getRecommendationLabel",value:function(){var e=this.translate.instant(this.data.data.recommendation);return this.data.data.recommendation_extension&&(e+=" "+this.replaceReferencedMotions(this.data.data.recommendation_extension,this.data.data.referenced_motions)),e}},{key:"getAmendmentAmendedParagraphs",value:function(e){var t=this;if(!e.amendment_paragraphs)return[];var n=this.data.data.text;n=this.lineNumbering.insertLineNumbers(n,this.lineLength);var i=this.lineNumbering.splitToParagraphs(n);return e.amendment_paragraphs.map((function(n,a){if(null===n)return null;var r=t.diff.diff(i[a],n),o=t.diff.detectAffectedLineRange(r);if(null===o)return null;var c=t.diff.formatDiff(t.diff.extractRangeByLineNumbers(r,o.from,o.to)),s=t.diff.diffHtmlToFinalText(c);return new v(e,a,s,o)})).filter((function(e){return null!==e}))}},{key:"recalcUnifiedChanges",value:function(){var t=this;this.allChangingObjects=[],this.data.data.change_recommendations&&this.data.data.change_recommendations.forEach((function(e){t.allChangingObjects.push(new x(e))})),this.data.data.amendments&&this.data.data.amendments.forEach((function(n){var i;if(null===(i=n.change_recommendations)||void 0===i?void 0:i.length){var a,r=n.change_recommendations.map((function(e){return new x(e)}));(a=t.allChangingObjects).push.apply(a,e(r))}else{var o,c=t.getAmendmentAmendedParagraphs(n);(o=t.allChangingObjects).push.apply(o,e(c))}})),this.allChangingObjects.sort((function(e,t){return e.getLineFrom()<t.getLineFrom()?-1:e.getLineFrom()>t.getLineFrom()?1:0}))}},{key:"isStatuteAmendment",value:function(){return!!this.data.data.base_statute}},{key:"isParagraphBasedAmendment",value:function(){return this.data.data.is_child&&this.data.data.amendment_paragraphs&&this.data.data.amendment_paragraphs.length>0}},{key:"isLineNumberingNone",value:function(){return this.lnMode===h.d.None}},{key:"isLineNumberingInline",value:function(){return this.lnMode===h.d.Inside}},{key:"isLineNumberingOutside",value:function(){return this.lnMode===h.d.Outside}},{key:"extractMotionLineRange",value:function(e,t,n,i){var a=this.diff.extractRangeByLineNumbers(e,t.from,t.to),r=a.outerContextStart+a.innerContextStart+a.html+a.innerContextEnd+a.outerContextEnd;return n&&(r=this.lineNumbering.insertLineNumbers(r,i,null,null,t.from)),r}},{key:"getAllTextChangingObjects",value:function(){return this.allChangingObjects.filter((function(e){return!e.isTitleChange()}))}},{key:"getTitleChangingObject",value:function(){return this.allChangingObjects.find((function(e){return e.isTitleChange()}))}},{key:"getTitleWithChanges",value:function(){return this.changeRepo.getTitleWithChanges(this.data.data.title,this.getTitleChangingObject(),this.crMode)}},{key:"getFormattedTitleDiff",value:function(){var e=this.getTitleChangingObject();return this.changeRepo.getTitleChangesAsDiff(this.data.data.title,e)}},{key:"getFormattedText",value:function(){var e=this,t=this.data.data;if(!t.text)return null;switch(this.crMode){case h.b.Original:return this.lineNumbering.insertLineNumbers(t.text,this.lineLength,this.highlightedLine);case h.b.Changed:var n=this.getAllTextChangingObjects().filter((function(e){return e.getChangeType()===g.a.TYPE_CHANGE_RECOMMENDATION}));return this.diff.getTextWithChanges(t.text,n,this.lineLength,this.highlightedLine);case h.b.Diff:var i="",a=this.getAllTextChangingObjects().filter((function(e){return e.showInDiffView()})),r=this.lineNumbering.insertLineNumbers(t.text,this.lineLength);return a.forEach((function(t,n){if(0===n){var o={from:1,to:t.getLineFrom()};i+=e.extractMotionLineRange(r,o,!0,e.lineLength)}else if(a[n-1].getLineTo()<t.getLineFrom()){var c={from:a[n-1].getLineTo(),to:t.getLineFrom()};i+=e.extractMotionLineRange(r,c,!0,e.lineLength)}i+=e.diff.getChangeDiff(r,t,e.lineLength,e.highlightedLine)})),i+=this.diff.getTextRemainderAfterLastChange(r,a,this.lineLength,this.highlightedLine);case h.b.Final:var o=this.getAllTextChangingObjects().filter((function(e){return e.showInFinalView()}));return this.diff.getTextWithChanges(t.text,o,this.lineLength,this.highlightedLine);case h.b.ModifiedFinal:if(t.modified_final_version)return this.lineNumbering.insertLineNumbers(t.modified_final_version,this.lineLength,this.highlightedLine,null,1);var c=this.getAllTextChangingObjects().filter((function(e){return e.showInFinalView()}));return this.diff.getTextWithChanges(t.text,c,this.lineLength,this.highlightedLine);default:return console.error("unrecognized ChangeRecoMode option ("+this.crMode+")"),null}}},{key:"getAmendedParagraphs",value:function(){var e,t=this,n=this.data.data,i=this.lineNumbering.insertLineNumbers(null===(e=n.base_motion)||void 0===e?void 0:e.text,this.lineLength),a=this.lineNumbering.splitToParagraphs(i);return n.amendment_paragraphs.map((function(e,n){return null===e?null:t.diff.getAmendmentParagraphsLines(n,a[n],e,t.lineLength,t.crMode===h.b.Diff?t.getAllTextChangingObjects():void 0)})).filter((function(e){return null!==e}))}},{key:"getFormattedStatuteAmendment",value:function(){var e=this.diff.diff(this.data.data.base_statute.text,this.data.data.text);return this.lineNumbering.insertLineBreaksWithoutNumbers(e,this.lineLength,!0)}},{key:"hasCollissions",value:function(e,t){return this.motionRepo.changeHasCollissions(e,t)}},{key:"isAmendment",value:function(e){return e.getChangeType()===g.a.TYPE_AMENDMENT}},{key:"isChangeRecommendation",value:function(e){return e.getChangeType()===g.a.TYPE_CHANGE_RECOMMENDATION}},{key:"getAmendmentDiff",value:function(e){var t,n=this.lineNumbering.insertLineNumbers(null===(t=this.data.data.base_motion)||void 0===t?void 0:t.text,this.lineLength);return this.diff.getChangeDiff(n,e,this.lineLength,this.highlightedLine)}},{key:"data",set:function(e){this._data=e,this.lnMode=e.data.line_numbering_mode,this.lineLength=e.data.line_length,this.preamble=e.data.preamble,this.crMode=e.element.mode||"original",this.textDivStyles.width=e.data.show_meta_box?"calc(100% - 250px)":"100%",e.data.recommendation_referencing_motions&&(this.referencingMotions=e.data.recommendation_referencing_motions.sort((function(e,t){return e.identifier.localeCompare(t.identifier)}))),this.recalcUnifiedChanges()},get:function(){return this._data}},{key:"showMetaTable",get:function(){var e;return!this.data.data.show_meta_box&&((null===(e=this.data.data)||void 0===e?void 0:e.submitters.length)>0||!!this.data.data.recommendation&&!!this.data.data.recommender||!!this.data.data.recommendation_referencing_motions)}},{key:"scroll",set:function(e){this._scroll=e,e*=-100,this.textDivStyles["margin-top"]=(e+=40)+"px"},get:function(){return this._scroll}},{key:"scale",set:function(e){this._scale=e,e*=10,this.textDivStyles["font-size"]=(e+=100)+"%"},get:function(){return this._scale}}]),r}(p.a)).\u0275fac=function(e){return new(e||le)(y.Rb(F.k),y.Rb(f.a),y.Rb(u.a),y.Rb(m.a),y.Rb(b.a))},le.\u0275cmp=y.Lb({type:le,selectors:[["os-motion-slide"]],inputs:{data:"data",scroll:"scroll",scale:"scale"},features:[y.Cb],decls:1,vars:1,consts:[[4,"ngIf"],["id","sidebox",3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[1,"spacer",3,"ngStyle"],[3,"ngClass"],["class","metatable spacer-top-20","cellpadding","0","cellspacing","0",4,"ngIf"],["id","text-wrapper"],["id","text",3,"ngStyle"],["class","text-prefix-label",4,"ngIf"],["class","motion-text line-numbers-none",3,"innerHTML",4,"ngIf"],["class","text-holder",4,"ngIf"],["id","sidebox",3,"ngStyle"],[4,"ngFor","ngForOf"],["cellpadding","0","cellspacing","0",1,"metatable","spacer-top-20"],[1,"min"],[1,"text-prefix-label"],[1,"motion-text"],[3,"innerHTML",4,"ngIf"],[1,"bold"],[3,"innerHTML"],[1,"motion-text","line-numbers-none",3,"innerHTML"],[1,"text-holder"],["class","alert alert-info",4,"ngIf"],["class","motion-text motion-text-diff amendment-view",3,"line-numbers-none","line-numbers-inline","line-numbers-outside",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"motion-text","motion-text-diff","amendment-view"],["class","amendment-line-header",4,"ngIf"],[3,"innerHtml"],[1,"amendment-line-header"],["class","status-row",4,"ngIf"],[1,"motion-text","motion-text-diff"],[1,"status-row"],[1,"grey"],[1,"motion-text","motion-text-diff",3,"innerHTML"]],template:function(e,t){1&e&&y.Qc(0,ce,18,21,"div",0),2&e&&y.rc("ngIf",t.data)},directives:[o.t,o.w,o.q,o.s],pipes:[F.j,_.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:"";width:16px;height:16px;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="%23337ab7"/><path d="M0 0h24v24H0z" fill="none"/></svg>\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}.paragraph-context{opacity:.5}.slidetitle{margin-bottom:0!important}.slidetitle h1{margin:0!important}#sidebox{width:260px;right:0;background:#d3d3d3;border-radius:7px 0 0 7px;padding:3px 7px 10px 10px;position:fixed;z-index:5;word-break:break-word}#sidebox h3{margin-top:10px;margin-bottom:0}.metatable{background-color:#ddd;width:100%;font-size:120%}.metatable td{border-bottom:2px solid #fff}.metatable td.min{width:1%;white-space:nowrap;font-weight:500;padding:0 10px 0 7px;vertical-align:top}.spacer{min-width:1px}#text-wrapper{overflow:hidden}#text{position:relative}.motion-text.line-numbers-outside .os-line-number:after{top:17px!important;font-size:16px!important}'],encapsulation:2}),le),ue=((se=function e(){s(this,e)}).\u0275mod=y.Pb({type:se}),se.\u0275inj=y.Ob({factory:function(e){return new(e||se)},providers:[{provide:d.a.token,useValue:de}],imports:[[o.c,l.a]]}),se)}}])}();