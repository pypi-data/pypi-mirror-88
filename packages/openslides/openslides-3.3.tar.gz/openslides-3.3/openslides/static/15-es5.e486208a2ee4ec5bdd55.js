!function(){function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=r(e);if(t){var s=r(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2aHC":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("8Y7J"),a=function(){var e=function(){function e(){i(this,e)}return s(e,[{key:"stringToDuration",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h",r=e.replace(n,"").split(":");return r.length>1&&!isNaN(+r[0])&&!isNaN(+r[1])?t=60*+r[0]+ +r[1]:1!==r.length||isNaN(+r[0])||(t=+r[0]),(!t||t<0)&&(t=0),t}},{key:"durationToStringWithHours",value:function(e){var t=Math.floor(e/3600),n=("0"+Math.floor(e%3600/60)).slice(-2),r=("0"+Math.floor(e%60)).slice(-2);return isNaN(+n)||isNaN(+r)?"":"".concat(t,":").concat(n,":").concat(r," h")}},{key:"durationToString",value:function(e,t){var n=e<0,r=n?Math.ceil(e/60):Math.floor(e/60),i=("0"+Math.abs(e)%60).slice(-2);return isNaN(+r)||isNaN(+i)||!t?"":"".concat(0===r&&n?"-"+Math.abs(r):r,":").concat(i," ").concat(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},uzvl:function(n,r,a){"use strict";a.d(r,"a",(function(){return pe}));var o=a("mrSG"),c=a("8Y7J"),u=a("s7LF"),l=a("2Vo4"),f=a("OwvW"),p=a("3Y/2"),d=a("ZDbo"),b=a("+KbT"),m=a("2aHC"),g=a("F48D"),h=a("KL36"),k=(a("mzcc"),a("FyoB")),v=a("mV3u"),S=a("IBZR"),_=a("cUpR"),w=a("TSSN"),O=a("zHaW"),P=a("PDjf"),y=a("SVse"),C=a("3Xi6"),M=a("Tj54"),x=a("ZFy/"),W=a("o4Yh"),F=a("SqCe"),X=a("Dxy4"),R=a("BSbQ"),j=a("Q2Ze"),T=a("oqD5");function I(e,t){1&e&&(c.Xb(0,"mat-icon",13),c.kc(1,"translate"),c.Sc(2," lock "),c.Wb()),2&e&&c.sc("matTooltip",c.lc(1,1,"The list of speakers is closed."))}function L(e,t){if(1&e&&(c.Xb(0,"h1",11),c.Xb(1,"span"),c.Sc(2),c.Wb(),c.Qc(3,I,3,3,"mat-icon",12),c.Wb()),2&e){var n=c.jc();c.Fb(2),c.Uc(" ",n.title," "),c.Fb(1),c.rc("ngIf",n.closed)}}function E(e,t){1&e&&(c.Xb(0,"span"),c.pc(1),c.Wb())}function Q(e,t){1&e&&(c.Xb(0,"div",23),c.Xb(1,"mat-icon",24),c.Sc(2,"warning"),c.Wb(),c.Wb())}function N(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",25),c.fc("click",(function(){c.Gc(n);var e=c.jc().$implicit;return c.jc(2).removeSpeaker(e)})),c.kc(1,"translate"),c.Xb(2,"mat-icon"),c.Sc(3,"close"),c.Wb(),c.Wb()}2&e&&c.sc("matTooltip",c.lc(1,1,"Remove"))}function U(e,t){if(1&e&&(c.Xb(0,"mat-list-item"),c.Xb(1,"div",16),c.Xb(2,"div",17),c.Sc(3),c.Wb(),c.Xb(4,"div",18),c.Sc(5),c.Wb(),c.Qc(6,Q,3,0,"div",19),c.Xb(7,"div",20),c.Sc(8),c.kc(9,"translate"),c.Wb(),c.Xb(10,"div",21),c.Qc(11,N,4,3,"button",22),c.Wb(),c.Wb(),c.Wb()),2&e){var n=t.$implicit,r=t.index,i=c.jc(2);c.Fb(3),c.Uc("",r+1,"."),c.Fb(2),c.Tc(n.getTitle()),c.Fb(1),c.rc("ngIf",n.point_of_order),c.Fb(2),c.Wc(" ",i.durationString(n)," (",c.lc(9,7,"Start time"),": ",i.startTimeToString(n),") "),c.Fb(3),c.rc("osPerms","agenda.can_manage_list_of_speakers")}}function A(e,t){if(1&e&&(c.Xb(0,"mat-expansion-panel",14),c.Xb(1,"mat-expansion-panel-header"),c.Xb(2,"mat-panel-title"),c.Sc(3),c.kc(4,"translate"),c.Wb(),c.Wb(),c.Xb(5,"mat-list"),c.Qc(6,U,12,9,"mat-list-item",15),c.Wb(),c.Wb()),2&e){var n=c.jc();c.Fb(3),c.Tc(c.lc(4,2,"Last speakers")),c.Fb(3),c.rc("ngForOf",n.finishedSpeakers)}}function D(e,t){1&e&&c.Sb(0,"mat-divider")}function G(e,t){1&e&&c.Sb(0,"div",26)}function Y(e,t){1&e&&(c.Xb(0,"button",31),c.kc(1,"translate"),c.Xb(2,"mat-icon",24),c.Sc(3,"warning"),c.Wb(),c.Wb()),2&e&&c.sc("matTooltip",c.lc(1,1,"Point of order"))}function B(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",25),c.fc("click",(function(){return c.Gc(n),c.jc(2).onStopButton()})),c.kc(1,"translate"),c.Xb(2,"mat-icon"),c.Sc(3,"stop"),c.Wb(),c.Wb()}2&e&&c.sc("matTooltip",c.lc(1,1,"End speech"))}function $(e,t){if(1&e&&(c.Xb(0,"div",27),c.Xb(1,"span",28),c.Xb(2,"mat-icon"),c.Sc(3,"mic"),c.Wb(),c.Wb(),c.Xb(4,"span",18),c.Sc(5),c.Wb(),c.Xb(6,"span",29),c.Qc(7,Y,4,3,"button",30),c.Qc(8,B,4,3,"button",22),c.Wb(),c.Wb()),2&e){var n=c.jc();c.Fb(5),c.Tc(n.activeSpeaker.getListTitle()),c.Fb(2),c.rc("ngIf",n.activeSpeaker.point_of_order),c.Fb(1),c.rc("osPerms","agenda.can_manage_list_of_speakers")}}function V(e,t){if(1&e&&(c.Xb(0,"span",38),c.Sc(1),c.Xb(2,"span"),c.Sc(3),c.kc(4,"translate"),c.Wb(),c.Wb()),2&e){var n=c.jc(2).$implicit,r=c.jc(2);c.Fb(1),c.Uc(" ",r.hasSpokenCount(n)+1,". "),c.Fb(2),c.Tc(c.lc(4,2,"contribution"))}}function H(e,t){1&e&&(c.Xb(0,"span",38),c.Sc(1),c.kc(2,"translate"),c.Wb()),2&e&&(c.Fb(1),c.Uc(" ",c.lc(2,1,"First speech")," "))}function z(e,t){if(1&e&&(c.Xb(0,"span"),c.Sc(1),c.kc(2,"translate"),c.Wb()),2&e){var n=c.jc(2).$implicit;c.Fb(1),c.Uc("(",c.lc(2,1,n.gender),")")}}function J(e,t){if(1&e&&(c.Xb(0,"span"),c.Qc(1,V,5,4,"span",37),c.Qc(2,H,3,3,"span",37),c.Qc(3,z,3,3,"span",2),c.Wb()),2&e){var n=c.jc().$implicit,r=c.jc(2);c.Fb(1),c.rc("ngIf",r.hasSpokenCount(n)),c.Fb(1),c.rc("ngIf",r.showFistContributionHint&&r.isFirstContribution(n)),c.Fb(1),c.rc("ngIf",n.gender)}}function Z(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",25),c.fc("click",(function(){c.Gc(n);var e=c.jc().$implicit;return c.jc(2).onStartButton(e)})),c.kc(1,"translate"),c.Xb(2,"mat-icon"),c.Sc(3,"play_arrow"),c.Wb(),c.Wb()}2&e&&c.sc("matTooltip",c.lc(1,1,"Begin speech"))}function q(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",25),c.fc("click",(function(){c.Gc(n);var e=c.jc().$implicit;return c.jc(2).onMarkButton(e)})),c.kc(1,"translate"),c.Xb(2,"mat-icon"),c.Sc(3),c.Wb(),c.Wb()}if(2&e){var r=c.jc().$implicit;c.sc("matTooltip",c.lc(1,2,"Mark speaker")),c.Fb(3),c.Tc(r.marked?"star":"star_border")}}function K(e,t){1&e&&(c.Xb(0,"button",31),c.kc(1,"translate"),c.Xb(2,"mat-icon",24),c.Sc(3," warning "),c.Wb(),c.Wb()),2&e&&c.sc("matTooltip",c.lc(1,1,"Point of order"))}function ee(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",25),c.fc("click",(function(){c.Gc(n);var e=c.jc().$implicit;return c.jc(2).removeSpeaker(e)})),c.kc(1,"translate"),c.Xb(2,"mat-icon"),c.Sc(3,"close"),c.Wb(),c.Wb()}2&e&&c.sc("matTooltip",c.lc(1,1,"Remove"))}function te(e,t){1&e&&(c.Xb(0,"mat-icon"),c.Sc(1," star "),c.Wb())}function ne(e,t){if(1&e&&(c.Xb(0,"span"),c.Qc(1,te,2,0,"mat-icon",2),c.Wb()),2&e){var n=c.jc().$implicit;c.Fb(1),c.rc("ngIf",n.marked)}}function re(e,t){if(1&e&&(c.Qc(0,J,4,3,"span",34),c.Xb(1,"span"),c.Qc(2,Z,4,3,"button",22),c.Qc(3,q,4,4,"button",35),c.Qc(4,K,4,3,"button",30),c.Qc(5,ee,4,3,"button",22),c.Wb(),c.Qc(6,ne,2,1,"span",36)),2&e){var n=t.$implicit;c.rc("osPerms","agenda.can_manage_list_of_speakers")("osPermsAnd",!n.point_of_order),c.Fb(2),c.rc("osPerms","agenda.can_manage_list_of_speakers"),c.Fb(1),c.rc("osPerms","agenda.can_manage_list_of_speakers")("osPermsAnd",!n.point_of_order),c.Fb(1),c.rc("ngIf",n.point_of_order),c.Fb(1),c.rc("osPerms","agenda.can_manage_list_of_speakers"),c.Fb(1),c.rc("osPerms","agenda.can_manage_list_of_speakers")("osPermsComplement",!0)}}function ie(e,t){if(1&e){var n=c.Yb();c.Xb(0,"div",32),c.Xb(1,"os-sorting-list",33),c.fc("sortEvent",(function(e){return c.Gc(n),c.jc().onSortingChanged(e)})),c.Qc(2,re,7,9,"ng-template"),c.Wb(),c.Wb()}if(2&e){var r=c.jc();c.Fb(1),c.rc("live",!0)("input",r.waitingSpeakers)("count",!0)("enable",r.opCanManage&&(r.isSortMode||!r.isMobile))}}function ae(e,t){if(1&e){var n=c.Yb();c.Xb(0,"form",40),c.Xb(1,"mat-form-field",41),c.Xb(2,"os-search-value-selector",42),c.fc("clickNotFound",(function(e){return c.Gc(n),c.jc(2).onCreateUser(e)})),c.kc(3,"translate"),c.Vb(4,43),c.Xb(5,"mat-icon"),c.Sc(6,"add"),c.Wb(),c.Sc(7),c.kc(8,"translate"),c.Ub(),c.Wb(),c.Wb(),c.Wb()}if(2&e){var r=c.jc(2);c.rc("formGroup",r.addSpeakerForm),c.Fb(2),c.sc("placeholder",c.lc(3,5,"Select or search new speaker ...")),c.rc("inputListValues",r.filteredUsers)("showNotFoundButton",!0),c.Fb(5),c.Uc(" ",c.lc(8,7,"Create user")," ")}}function se(e,t){if(1&e&&(c.Xb(0,"div"),c.Qc(1,ae,9,9,"form",39),c.Wb()),2&e){var n=c.jc();c.Fb(1),c.rc("ngIf",n.waitingSpeakers&&(null==n.filteredUsers||null==n.filteredUsers.value?null:n.filteredUsers.value.length))}}function oe(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",44),c.fc("click",(function(){return c.Gc(n),c.jc().addUserAsNewSpeaker()})),c.Xb(1,"mat-icon"),c.Sc(2,"add"),c.Wb(),c.Xb(3,"span"),c.Sc(4),c.kc(5,"translate"),c.Wb(),c.Wb()}if(2&e){var r=c.jc();c.rc("disabled",r.closed||!r.canAddSelf),c.Fb(4),c.Tc(c.lc(5,2,"Add me"))}}function ce(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",44),c.fc("click",(function(){return c.Gc(n),c.jc().removeSpeaker()})),c.Xb(1,"mat-icon"),c.Sc(2,"remove"),c.Wb(),c.Xb(3,"span"),c.Sc(4),c.kc(5,"translate"),c.Wb(),c.Wb()}if(2&e){var r=c.jc();c.rc("disabled",r.closed),c.Fb(4),c.Tc(c.lc(5,2,"Remove me"))}}function ue(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",45),c.fc("click",(function(){return c.Gc(n),c.jc().addPointOfOrder()})),c.Xb(1,"mat-icon"),c.Sc(2,"warning"),c.Wb(),c.Sc(3,"\xa0 "),c.Xb(4,"span"),c.Sc(5),c.kc(6,"translate"),c.Wb(),c.Wb()}2&e&&(c.Fb(5),c.Tc(c.lc(6,1,"Point of order")))}function le(e,t){if(1&e){var n=c.Yb();c.Xb(0,"button",45),c.fc("click",(function(){return c.Gc(n),c.jc().removePointOfOrder()})),c.Xb(1,"mat-icon"),c.Sc(2,"remove"),c.Wb(),c.Xb(3,"span"),c.Sc(4),c.kc(5,"translate"),c.Wb(),c.Wb()}2&e&&(c.Fb(4),c.Tc(c.lc(5,1,"Withdraw point of order")))}var fe=["*"],pe=function(){var n=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(a,n);var r=t(a);function a(e,t,n,s,o,f,p,d,b,m,g){var h;return i(this,a),(h=r.call(this,e,t,n)).translate=t,h.listOfSpeakersRepo=s,h.operator=o,h.promptService=f,h.durationService=p,h.userRepository=d,h.config=b,h.viewport=m,h.cd=g,h.users=new l.a([]),h.filteredUsers=new l.a([]),h.isListOfSpeakersEmptyEvent=new c.p,h.canReaddLastSpeakerEvent=new c.p,h.addSpeakerForm=new u.k({user_id:new u.h}),h}return s(a,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.userRepository.getViewModelListObservable().subscribe((function(t){e.users.next(t),e.filterUsers(),e.cd.markForCheck()})),this.addSpeakerForm.valueChanges.subscribe((function(t){t&&t.user_id&&e.addUserAsNewSpeaker(t.user_id)})),this.viewport.isMobileSubject.subscribe((function(t){e.isMobile=t,e.cd.markForCheck()})),this.config.get("agenda_present_speakers_only").subscribe((function(){e.filterUsers()})),this.config.get("agenda_show_first_contribution").subscribe((function(t){e.showFistContributionHint=t})),this.config.get("agenda_enable_point_of_order_speakers").subscribe((function(t){e.showPointOfOrders=t})))}},{key:"isListOfSpeakersEmpty",value:function(){var e,t;if(!(null===(e=this.waitingSpeakers)||void 0===e?void 0:e.length)&&!(null===(t=this.finishedSpeakers)||void 0===t?void 0:t.length))return this.isListOfSpeakersEmptyEvent.emit(!this.activeSpeaker);this.isListOfSpeakersEmptyEvent.emit(!1)}},{key:"updateCanReaddLastSpeaker",value:function(){var e,t;if((null===(e=this.finishedSpeakers)||void 0===e?void 0:e.length)>0){var n=this.finishedSpeakers[this.finishedSpeakers.length-1],r=this.waitingSpeakers.some((function(e){return e.user_id===n.user_id}));t=!n.point_of_order&&!r}else t=!1;this.canReaddLastSpeakerEvent.emit(t)}},{key:"addUserAsNewSpeaker",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.listOfSpeakersRepo.createSpeaker(this.viewListOfSpeakers,e);case 3:this.addSpeakerForm.reset(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.raiseError(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"removeSpeaker",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.translate.instant(e?"Are you sure you want to remove this speaker from the list of speakers?":"Are you sure you want to remove yourself from this list of speakers?"),t.next=3,this.promptService.open(n);case 3:if(!t.sent){t.next=13;break}return t.prev=4,t.next=7,this.listOfSpeakersRepo.deleteSpeaker(this.viewListOfSpeakers,e?e.id:null);case 7:this.filterUsers(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),this.raiseError(t.t0);case 13:case"end":return t.stop()}}),t,this,[[4,10]])})))}},{key:"addPointOfOrder",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.translate.instant("Are you sure you want to submit a point of order?"),e.next=3,this.promptService.open(t);case 3:if(!e.sent){e.next=12;break}return e.prev=4,e.next=7,this.listOfSpeakersRepo.createSpeaker(this.viewListOfSpeakers,void 0,!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),this.raiseError(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})))}},{key:"removePointOfOrder",value:function(){this.listOfSpeakersRepo.deleteSpeaker(this.viewListOfSpeakers,void 0,!0).catch(this.raiseError)}},{key:"isOpInWaitlist",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!this.waitingSpeakers&&this.waitingSpeakers.some((function(n){return n.user_id===e.operator.user.id&&n.point_of_order===t}))}},{key:"onStartButton",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.listOfSpeakersRepo.startSpeaker(this.viewListOfSpeakers,e);case 3:this.filterUsers(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.raiseError(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"onStopButton",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.listOfSpeakersRepo.stopCurrentSpeaker(this.viewListOfSpeakers);case 3:this.filterUsers(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.raiseError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"onMarkButton",value:function(e){this.listOfSpeakersRepo.markSpeaker(this.viewListOfSpeakers,e,!e.marked).catch(this.raiseError)}},{key:"onSortingChanged",value:function(e){this.isMobile||this.onSaveSorting(e)}},{key:"onSaveSorting",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.listElement.sortedItems;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listOfSpeakersRepo.sortSpeakers(this.viewListOfSpeakers,e.map((function(e){return e.id}))).catch(this.raiseError);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setListOfSpeakers",value:function(e){var t,n;this.viewListOfSpeakers=e;var r=null==e?void 0:e.speakers.sort((function(e,t){return e.weight-t.weight}));this.waitingSpeakers=null==r?void 0:r.filter((function(e){return e.state===k.a.WAITING})),null===(t=this.waitingSpeakers)||void 0===t||t.sort((function(e,t){return e.weight-t.weight})),this.filterUsers(),this.finishedSpeakers=null==r?void 0:r.filter((function(e){return e.state===k.a.FINISHED})),null===(n=this.finishedSpeakers)||void 0===n||n.sort((function(e,t){return new Date(e.begin_time).getTime()-new Date(t.begin_time).getTime()})),this.activeSpeaker=null==r?void 0:r.find((function(e){return e.state===k.a.CURRENT})),this.updateCanReaddLastSpeaker(),this.isListOfSpeakersEmpty()}},{key:"filterUsers",value:function(){var e=this,t=this.config.instant("agenda_present_speakers_only")?this.users.getValue().filter((function(e){return e.is_present})):this.users.getValue();this.filteredUsers.next(this.waitingSpeakers&&this.waitingSpeakers.length?t.filter((function(t){return!e.waitingSpeakers.some((function(e){return e.user_id===t.id}))})):t)}},{key:"onCreateUser",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userRepository.createFromString(e);case 2:n=t.sent,this.addUserAsNewSpeaker(n.id);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"hasSpokenCount",value:function(e){return this.finishedSpeakers.filter((function(t){if(t&&t.user)return t.user.id===e.user.id})).length}},{key:"isFirstContribution",value:function(e){return this.listOfSpeakersRepo.isFirstContribution(e)}},{key:"durationString",value:function(e){var t=Math.floor((new Date(e.end_time).valueOf()-new Date(e.begin_time).valueOf())/1e3);return""+this.durationService.durationToString(t,"m")}},{key:"startTimeToString",value:function(e){return new Date(e.begin_time).toLocaleString(this.translate.currentLang)}},{key:"title",get:function(){var e;return null===(e=this.viewListOfSpeakers)||void 0===e?void 0:e.getTitle()}},{key:"closed",get:function(){var e;return null===(e=this.viewListOfSpeakers)||void 0===e?void 0:e.closed}},{key:"opCanManage",get:function(){return this.operator.hasPerms(this.permission.agendaCanManageListOfSpeakers)}},{key:"canAddSelf",get:function(){return!this.config.instant("agenda_present_speakers_only")||this.operator.user.is_present}},{key:"speakers",set:function(e){this.setListOfSpeakers(e)}},{key:"sortMode",set:function(e){this.isSortMode&&this.listElement.restore(),this.isSortMode=e}}]),a}(v.a);return n.\u0275fac=function(e){return new(e||n)(c.Rb(_.c),c.Rb(w.k),c.Rb(O.a),c.Rb(p.a),c.Rb(f.a),c.Rb(g.a),c.Rb(m.a),c.Rb(d.a),c.Rb(b.a),c.Rb(h.a),c.Rb(c.h))},n.\u0275cmp=c.Lb({type:n,selectors:[["os-list-of-speakers-content"]],viewQuery:function(e,t){var n;1&e&&c.Yc(S.a,!0),2&e&&c.Bc(n=c.gc())&&(t.listElement=n.first)},inputs:{speakers:"speakers",customTitle:"customTitle",sortMode:"sortMode"},outputs:{isListOfSpeakersEmptyEvent:"isListOfSpeakersEmptyEvent",canReaddLastSpeakerEvent:"canReaddLastSpeakerEvent"},features:[c.Cb],ngContentSelectors:fe,decls:14,vars:14,consts:[[1,"os-card","speaker-card"],["class","los-title",4,"ngIf"],[4,"ngIf"],["class","finished-list",4,"ngIf"],["class","spacer-bottom-40",4,"ngIf"],["class","current-speaker",4,"ngIf"],["class","waiting-list",4,"ngIf"],[4,"osPerms"],[1,"add-self-buttons"],["mat-stroked-button","",3,"disabled","click",4,"osPerms","osPermsAnd"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],[1,"los-title"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"finished-list"],[4,"ngFor","ngForOf"],[1,"finished-speaker-grid"],[1,"number"],[1,"name"],["class","point-of-order",4,"ngIf"],[1,"time"],[1,"controls"],["mat-icon-button","",3,"matTooltip","click",4,"osPerms"],[1,"point-of-order"],["color","warn"],["mat-icon-button","",3,"matTooltip","click"],[1,"spacer-bottom-40"],[1,"current-speaker"],[1,"prefix"],[1,"suffix"],["mat-icon-button","",3,"matTooltip",4,"ngIf"],["mat-icon-button","",3,"matTooltip"],[1,"waiting-list"],[3,"live","input","count","enable","sortEvent"],[4,"osPerms","osPermsAnd"],["mat-icon-button","",3,"matTooltip","click",4,"osPerms","osPermsAnd"],[4,"osPerms","osPermsComplement"],["class","red-warning-text speaker-warning",4,"ngIf"],[1,"red-warning-text","speaker-warning"],["class","search-new-speaker-form",3,"formGroup",4,"ngIf"],[1,"search-new-speaker-form",3,"formGroup"],[1,"search-users-field"],["formControlName","user_id",1,"search-users",3,"placeholder","inputListValues","showNotFoundButton","clickNotFound"],["notFoundDescription",""],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(c.qc(),c.Xb(0,"mat-card",0),c.Qc(1,L,4,2,"h1",1),c.Qc(2,E,2,0,"span",2),c.Qc(3,A,7,4,"mat-expansion-panel",3),c.Qc(4,D,1,0,"mat-divider",2),c.Qc(5,G,1,0,"div",4),c.Qc(6,$,9,3,"div",5),c.Qc(7,ie,3,4,"div",6),c.Qc(8,se,2,1,"div",7),c.Xb(9,"div",8),c.Qc(10,oe,6,4,"button",9),c.Qc(11,ce,6,4,"button",9),c.Qc(12,ue,7,3,"button",10),c.Qc(13,le,6,3,"button",10),c.Wb(),c.Wb()),2&e&&(c.Fb(1),c.rc("ngIf",!t.customTitle),c.Fb(1),c.rc("ngIf",t.customTitle),c.Fb(1),c.rc("ngIf",null==t.finishedSpeakers?null:t.finishedSpeakers.length),c.Fb(1),c.rc("ngIf",t.finishedSpeakers&&t.finishedSpeakers.length),c.Fb(1),c.rc("ngIf",t.finishedSpeakers&&t.finishedSpeakers.length),c.Fb(1),c.rc("ngIf",t.activeSpeaker),c.Fb(1),c.rc("ngIf",null==t.waitingSpeakers?null:t.waitingSpeakers.length),c.Fb(1),c.rc("osPerms","agenda.can_manage_list_of_speakers"),c.Fb(2),c.rc("osPerms","agenda.can_be_speaker")("osPermsAnd",!t.isOpInWaitlist()),c.Fb(1),c.rc("osPerms","agenda.can_be_speaker")("osPermsAnd",t.isOpInWaitlist()),c.Fb(1),c.rc("ngIf",t.showPointOfOrders&&!t.isOpInWaitlist(!0)),c.Fb(1),c.rc("ngIf",t.showPointOfOrders&&t.isOpInWaitlist(!0)))},directives:[P.a,y.t,C.a,M.a,x.c,W.c,W.g,W.h,F.a,y.s,F.d,X.b,R.a,S.a,u.J,u.u,u.l,j.c,T.a,u.t,u.j],pipes:[w.j],styles:['.los-title[_ngcontent-%COMP%]{margin-left:25px}.finished-list[_ngcontent-%COMP%]{box-shadow:none!important;margin-bottom:15px}.finished-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;margin-bottom:10px}.finished-list[_ngcontent-%COMP%]   .finished-speaker-grid[_ngcontent-%COMP%]{display:grid;width:100%;grid-gap:5px;grid-template-areas:"number name controls" "number time controls";grid-template-columns:30px 1fr -webkit-min-content;grid-template-columns:30px 1fr min-content}@media (min-width:960px){.finished-list[_ngcontent-%COMP%]   .finished-speaker-grid[_ngcontent-%COMP%]{grid-template-areas:"number name point-of-order time controls";grid-template-columns:30px 1fr -webkit-min-content -webkit-min-content;grid-template-columns:30px 1fr min-content min-content}}.finished-list[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{grid-area:number;margin:0}.finished-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{grid-area:name;margin:0}.finished-list[_ngcontent-%COMP%]   .point-of-order[_ngcontent-%COMP%]{grid-area:point-of-order;margin:0;white-space:nowrap;font-size:80%}.finished-list[_ngcontent-%COMP%]   .point-of-order[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{line-height:19px}.finished-list[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{grid-area:time;margin:0;white-space:nowrap;font-size:80%}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{grid-area:controls;margin:0;opacity:.7}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:20px;line-height:1}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{line-height:19px}.current-speaker[_ngcontent-%COMP%]{display:table;width:-webkit-fill-available;height:50px;margin:50px 25px 20px;box-shadow:0 3px 10px 0 rgba(0,0,0,.25)}.current-speaker[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{display:table-cell;padding:0 15px;vertical-align:middle}.current-speaker[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.current-speaker[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-weight:700;padding-left:10px;width:100%}.current-speaker[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;white-space:nowrap;padding-right:10px}.waiting-list[_ngcontent-%COMP%]{padding:10px 25px 0}.search-new-speaker-form[_ngcontent-%COMP%]{padding:15px 25px 0;width:auto}.search-new-speaker-form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]{width:100%}.search-new-speaker-form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]   .search-users[_ngcontent-%COMP%]{display:grid}.search-new-speaker-form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]   .search-users[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.add-self-buttons[_ngcontent-%COMP%]{margin:10px 20px;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.add-self-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.speaker-warning[_ngcontent-%COMP%]{margin-right:5px}'],changeDetection:0}),n}()}}])}();