(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0bMg":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));class a{static validation(...e){return t=>e.map(e=>t.get(e)).every(e=>e&&""===e.value||!e)?{noOneSet:!0}:null}}},"5NaA":function(e,t,o){"use strict";o.d(t,"a",(function(){return R}));var a=o("s7LF"),s=o("R+Vs"),n=o("+KbT"),i=o("owL4"),r=o("HRp2"),l=o("qnZ9"),c=o("Izkr"),p=o("aOHa"),b=o("mV3u"),h=o("8fOK"),u=o("8Y7J"),d=o("cUpR"),m=o("TSSN"),g=o("zHaW"),f=o("iELJ"),y=o("Q2Ze"),v=o("e6WT"),k=o("SVse"),F=o("ZTz/"),V=o("UhP/"),C=o("Tj54"),S=o("oqD5"),N=o("pMoy");function W(e,t){if(1&e&&(u.Xb(0,"mat-option",13),u.Sc(1),u.kc(2,"translate"),u.Wb()),2&e){const e=t.$implicit;u.rc("value",e.key),u.Fb(1),u.Uc(" ",u.lc(2,2,e.value)," ")}}function x(e,t){if(1&e){const e=u.Yb();u.Xb(0,"mat-icon",14),u.fc("click",(function(t){return u.Gc(e),u.jc(3).openVotingWarning(t)})),u.Sc(1," info "),u.Wb()}}function _(e,t){if(1&e&&(u.Xb(0,"mat-form-field"),u.Xb(1,"mat-select",10),u.kc(2,"translate"),u.Qc(3,W,3,4,"mat-option",11),u.kc(4,"keyvalue"),u.Wb(),u.Qc(5,x,2,0,"mat-icon",12),u.Xb(6,"mat-error"),u.Sc(7),u.kc(8,"translate"),u.Wb(),u.Wb()),2&e){const e=u.jc(2);u.Fb(1),u.rc("placeholder",u.lc(2,4,e.PollPropertyVerbose.type)),u.Fb(2),u.rc("ngForOf",u.lc(4,6,e.pollTypes)),u.Fb(2),u.rc("ngIf",e.showNonNominalWarning),u.Fb(2),u.Tc(u.lc(8,8,"This field is required."))}}function w(e,t){if(1&e&&(u.Xb(0,"mat-form-field"),u.Sb(1,"os-search-value-selector",15),u.kc(2,"translate"),u.Wb()),2&e){const e=u.jc(2);u.Fb(1),u.rc("multiple",!0)("showChips",!1)("includeNone",!1)("placeholder",u.lc(2,5,e.PollPropertyVerbose.groups))("inputListValues",e.groupObservable)}}function O(e,t){if(1&e&&(u.Xb(0,"mat-option",13),u.Sc(1),u.kc(2,"translate"),u.Wb()),2&e){const e=t.$implicit;u.rc("value",e.key),u.Fb(1),u.Uc(" ",u.lc(2,2,e.value)," ")}}function P(e,t){if(1&e&&(u.Xb(0,"mat-form-field"),u.Xb(1,"mat-select",16),u.kc(2,"translate"),u.Qc(3,O,3,4,"mat-option",11),u.kc(4,"keyvalue"),u.Wb(),u.Xb(5,"mat-error"),u.Sc(6),u.kc(7,"translate"),u.Wb(),u.Wb()),2&e){const e=u.jc(2);u.Fb(1),u.rc("placeholder",u.lc(2,3,e.PollPropertyVerbose.pollmethod)),u.Fb(2),u.rc("ngForOf",u.mc(4,5,e.pollMethods,e.keepEntryOrder)),u.Fb(3),u.Tc(u.lc(7,8,"This field is required."))}}function T(e,t){if(1&e&&(u.Xb(0,"mat-form-field"),u.Sb(1,"input",17),u.kc(2,"translate"),u.Wb()),2&e){const e=u.jc(2);u.Fb(1),u.sc("placeholder",u.lc(2,1,e.PollPropertyVerbose.votes_amount))}}function X(e,t){if(1&e&&(u.Xb(0,"div",18),u.Xb(1,"mat-checkbox",19),u.Sc(2),u.kc(3,"translate"),u.Wb(),u.Xb(4,"mat-checkbox",20),u.Sc(5),u.kc(6,"translate"),u.Wb(),u.Xb(7,"mat-checkbox",21),u.Sc(8),u.kc(9,"translate"),u.Wb(),u.Wb()),2&e){const e=u.jc(2);u.Fb(2),u.Uc(" ",u.lc(3,3,e.PollPropertyVerbose.global_yes)," "),u.Fb(3),u.Tc(u.lc(6,5,e.PollPropertyVerbose.global_no)),u.Fb(3),u.Uc(" ",u.lc(9,7,e.PollPropertyVerbose.global_abstain)," ")}}function j(e,t){if(1&e&&(u.Vb(0),u.Xb(1,"div",8),u.Qc(2,_,9,10,"mat-form-field",5),u.Qc(3,w,3,7,"mat-form-field",5),u.Wb(),u.Xb(4,"div",8),u.Qc(5,P,8,10,"mat-form-field",5),u.Qc(6,T,3,3,"mat-form-field",5),u.Wb(),u.Qc(7,X,10,9,"div",9),u.Ub()),2&e){const e=u.jc();u.Fb(2),u.rc("ngIf",e.isEVotingEnabled),u.Fb(1),u.rc("ngIf",e.contentForm.get("type").value&&"analog"!==e.contentForm.get("type").value),u.Fb(2),u.rc("ngIf",e.pollMethods),u.Fb(1),u.rc("ngIf",e.showAmountAndGlobal(e.data)),u.Fb(1),u.rc("ngIf",e.showAmountAndGlobal(e.data))}}function I(e,t){if(1&e&&(u.Vb(0),u.Xb(1,"mat-option",13),u.Sc(2),u.kc(3,"translate"),u.Wb(),u.Ub()),2&e){const e=t.$implicit;u.Fb(1),u.rc("value",e.key),u.Fb(1),u.Tc(u.lc(3,2,e.value))}}let R=(()=>{class e extends b.a{constructor(e,t,o,a,s,n,i){super(e,t,o),this.translate=t,this.fb=a,this.groupRepo=s,this.configService=n,this.dialog=i,this.PollType=l.f,this.PollPropertyVerbose=h.d,this.pollTypes=h.e,this.majorityMethods=h.a,this.groupObservable=null,this.pollValues=[],this.publishImmediately=!0,this.showNonNominalWarning=!1,this.initContentForm()}get isEVotingEnabled(){return!!this.pollService&&this.pollService.isElectronicVotingEnabled}ngOnInit(){this.groupObservable=this.groupRepo.getViewModelListObservableWithoutDefaultGroup(),this.data&&(this.data.state&&this.disablePollType(),this.data instanceof p.c&&(this.data.assignment&&!this.data.votes_amount&&(this.data.votes_amount=this.data.assignment.open_posts),this.data.pollmethod||(this.data.pollmethod=this.configService.instant("assignment_poll_method"))),Object.keys(this.contentForm.controls).forEach(e=>{this.data[e]&&this.contentForm.get(e).patchValue(this.data[e])})),this.updatePollValues(this.contentForm.value),this.updatePercentBases(this.contentForm.get("pollmethod").value),this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.updatePollValues(e)}),this.contentForm.get("pollmethod").valueChanges.subscribe(e=>{e&&(this.updatePercentBases(e),this.setWarning())}),this.contentForm.get("type").valueChanges.subscribe(()=>{this.setWarning()})),this.setWarning()}disablePollType(){this.contentForm.get("type").disable()}showAmountAndGlobal(e){const t=this.contentForm.get("pollmethod").value;return("Y"===t||"N"===t)&&(!e||!e.state||e.isCreated)}updatePercentBases(e){if(e){let t=[];e===r.b.YN?t=[l.c.YNA,r.c.Y]:e===r.b.YNA?t=[r.c.Y]:(e===r.b.Y||r.b.N)&&(t=[l.c.YN,l.c.YNA]);const o={};for(const[e,s]of Object.entries(this.percentBases))t.includes(e)||(o[e]=s);const a=this.contentForm.get("onehundred_percent_base");a.setValue(this.getNormedPercentBase(a.value,e)),this.validPercentBases=o}}getNormedPercentBase(e,t){return t!==r.b.YN||e!==r.c.YNA&&e!==r.c.Y?t===r.b.YNA&&e===r.c.Y?r.c.YNA:t!==r.b.Y||e!==r.c.YN&&e!==r.c.YNA?e:r.c.Y:r.c.YN}setWarning(){this.showNonNominalWarning=this.contentForm.get("type").value===l.f.Pseudoanonymous}getValues(){return Object.assign(Object.assign({},this.data),this.contentForm.value)}updatePollValues(e){this.data&&(this.pollValues=[[this.pollService.getVerboseNameForKey("type"),this.pollService.getVerboseNameForValue("type",e.type)]],this.data.pollClassType===h.c.Assignment&&this.pollValues.push([this.pollService.getVerboseNameForKey("pollmethod"),this.pollService.getVerboseNameForValue("pollmethod",e.pollmethod)]),"analog"!==e.type&&this.pollValues.push([this.pollService.getVerboseNameForKey("groups"),e&&e.groups_id&&e.groups_id.length?this.groupRepo.getNameForIds(...e.groups_id):"---"]),"Y"!==e.pollmethod&&"N"!==e.pollmethod||(this.pollValues.push([this.pollService.getVerboseNameForKey("votes_amount"),e.votes_amount]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_yes"),e.global_yes]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_no"),e.global_no]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_abstain"),e.global_abstain])))}initContentForm(){this.contentForm=this.fb.group({title:["",a.H.required],type:["",a.H.required],pollmethod:["",a.H.required],onehundred_percent_base:["",a.H.required],majority_method:["",a.H.required],votes_amount:[1,[a.H.required,a.H.min(1)]],groups_id:[],global_yes:[!1],global_no:[!1],global_abstain:[!1]})}openVotingWarning(e){e.stopPropagation(),this.dialog.open(i.a,c.a)}keepEntryOrder(){return 0}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(d.c),u.Rb(m.k),u.Rb(g.a),u.Rb(a.g),u.Rb(s.a),u.Rb(n.a),u.Rb(f.b))},e.\u0275cmp=u.Lb({type:e,selectors:[["os-poll-form"]],inputs:{pollMethods:"pollMethods",percentBases:"percentBases",data:"data",pollService:"pollService"},features:[u.Cb],decls:13,vars:13,consts:[[1,"os-form-card-mobile"],[3,"formGroup"],[1,"poll-preview-title"],["matInput","","required","","formControlName","title",3,"placeholder"],[1,"poll-preview-meta-info-form",3,"formGroup"],[4,"ngIf"],["formControlName","onehundred_percent_base","required","",3,"placeholder"],[4,"ngFor","ngForOf"],[1,"info-grid"],["class","global-options",4,"ngIf"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["color","primary","matSuffix","",3,"click",4,"ngIf"],[3,"value"],["color","primary","matSuffix","",3,"click"],["formControlName","groups_id",3,"multiple","showChips","includeNone","placeholder","inputListValues"],["formControlName","pollmethod","required","",3,"placeholder"],["type","number","matInput","","formControlName","votes_amount","min","1","required","",3,"placeholder"],[1,"global-options"],["formControlName","global_yes"],["formControlName","global_no"],["formControlName","global_abstain"]],template:function(e,t){1&e&&(u.Xb(0,"div",0),u.Xb(1,"form",1),u.Xb(2,"mat-form-field"),u.Xb(3,"h2",2),u.Sb(4,"input",3),u.kc(5,"translate"),u.Wb(),u.Wb(),u.Wb(),u.Xb(6,"form",4),u.Qc(7,j,8,5,"ng-container",5),u.Xb(8,"mat-form-field"),u.Xb(9,"mat-select",6),u.kc(10,"translate"),u.Qc(11,I,4,4,"ng-container",7),u.kc(12,"keyvalue"),u.Wb(),u.Wb(),u.Wb(),u.Wb()),2&e&&(u.Fb(1),u.rc("formGroup",t.contentForm),u.Fb(3),u.rc("placeholder",u.lc(5,6,"Title")),u.Fb(2),u.rc("formGroup",t.contentForm),u.Fb(1),u.rc("ngIf",!t.data||!t.data.state||t.data.isCreated),u.Fb(2),u.sc("placeholder",u.lc(10,8,t.PollPropertyVerbose.onehundred_percent_base)),u.Fb(2),u.rc("ngForOf",u.mc(12,10,t.validPercentBases,t.keepEntryOrder)))},directives:[a.J,a.u,a.l,y.c,v.b,a.d,a.E,a.t,a.j,k.t,F.a,k.s,y.b,V.n,C.a,y.j,S.a,a.z,N.a],pipes:[m.j,k.l],styles:[".poll-preview-title{margin:0}.poll-preview-meta-info-form .info-grid{display:grid;-moz-column-gap:1em;column-gap:1em;grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}.poll-preview-meta-info-form .mat-checkbox{margin-right:2em}.poll-preview-meta-info-form .global-options{margin-bottom:1em}"],encapsulation:2}),e})()},acT5:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var a=o("8Y7J"),s=o("s7LF"),n=o("mV3u"),i=o("cUpR"),r=o("TSSN"),l=o("zHaW"),c=o("Q2Ze"),p=o("e6WT"),b=o("SVse"),h=o("pMoy");function u(e,t){if(1&e){const e=a.Yb();a.Xb(0,"mat-checkbox",4),a.fc("change",(function(t){return a.Gc(e),a.jc().checkboxStateChanged(t.checked)})),a.Sc(1),a.Wb()}if(2&e){const e=a.jc();a.rc("name","checkbox")("ngModel",e.isChecked),a.Fb(1),a.Uc(" ",e.checkboxLabel," ")}}function d(e,t){1&e&&a.Sb(0,"div",5)}let m=(()=>{class e extends n.a{constructor(e,t,o,a){super(e,t,o),this.translate=t,this.fb=a,this.inputType="text",this.isChecked=!1,this.propagateChange=e=>{},this.initForm()}ngOnInit(){this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.sendValue(e)}))}checkboxStateChanged(e){this.isChecked=e,e?this.contentForm.disable({emitEvent:!1}):this.contentForm.enable({emitEvent:!1}),this.sendValue()}writeValue(e){(e||"number"==typeof e)&&(e===this.checkboxValue?this.checkboxStateChanged(!0):this.contentForm.patchValue(e))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){}initForm(){this.contentForm=this.fb.control("")}sendValue(e){this.propagateChange(this.isChecked?this.checkboxValue:e)}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(i.c),a.Rb(r.k),a.Rb(l.a),a.Rb(s.g))},e.\u0275cmp=a.Lb({type:e,selectors:[["os-check-input"]],inputs:{inputType:"inputType",placeholder:"placeholder",checkboxValue:"checkboxValue",checkboxLabel:"checkboxLabel"},features:[a.Eb([{provide:s.r,multi:!0,useExisting:Object(a.Z)(()=>e)}]),a.Cb],decls:5,vars:6,consts:[[1,"check-input--container"],["matInput","",1,"check-input--input",3,"type","formControl","placeholder","min"],["tabindex","-1",3,"name","ngModel","change",4,"ngIf"],["class","placeholder",4,"ngIf"],["tabindex","-1",3,"name","ngModel","change"],[1,"placeholder"]],template:function(e,t){1&e&&(a.Xb(0,"div",0),a.Xb(1,"mat-form-field"),a.Sb(2,"input",1),a.Wb(),a.Qc(3,u,2,3,"mat-checkbox",2),a.Qc(4,d,1,0,"div",3),a.Wb()),2&e&&(a.Fb(2),a.rc("type",t.inputType)("formControl",t.contentForm)("placeholder",t.placeholder)("min",0),a.Fb(1),a.rc("ngIf",t.checkboxLabel),a.Fb(1),a.rc("ngIf",!t.checkboxLabel))},directives:[c.c,p.b,s.d,s.t,s.i,b.t,h.a,s.w],styles:[".check-input--container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.check-input--container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-flex:1;flex:1;padding:0 5px}"]}),e})()},b1ae:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var a=o("qnZ9"),s=o("0bMg"),n=o("mV3u");class i extends n.a{constructor(e,t,o,a){super(e,t,o),this.translate=t,this.dialogRef=a,this.addKeyListener()}addKeyListener(){this.dialogRef&&this.dialogRef.keydownEvents().subscribe(e=>{"Enter"===e.key&&e.shiftKey&&this.submitPoll(),"Escape"===e.key&&this.dialogRef.close()})}submitPoll(){const e=Object.assign(Object.assign({},this.pollForm.getValues()),{votes:this.getVoteData(),publish_immediately:this.publishImmediately});this.dialogRef.close(e)}publishStateChanged(e){this.dialogVoteForm.setValidators(e?s.a.validation(...Object.keys(this.dialogVoteForm.controls)):null)}getVoteData(){if(!this.isVoteDataEmpty(this.dialogVoteForm.value))return this.replaceEmptyValues(this.dialogVoteForm.value)}isVoteDataEmpty(e){return Object.values(e).every(e=>!e||"object"==typeof e&&this.isVoteDataEmpty(e))}replaceEmptyValues(e,t=!1){const o={};for(const s of Object.keys(e))o[s]="object"==typeof e[s]&&e[s]?this.replaceEmptyValues(e[s],t):t?e[s]===a.h?null:e[s]:e[s]?e[s]:a.h;return o}undoReplaceEmptyValues(e){return this.replaceEmptyValues(e,!0)}}},iCsr:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var a=o("mV3u"),s=o("8Y7J"),n=o("cUpR"),i=o("TSSN"),r=o("zHaW"),l=o("SVse"),c=o("hrfs");function p(e,t){if(1&e&&s.Sb(0,"canvas",2),2&e){const e=s.jc();s.rc("datasets",e.isCircle?null:e.chartData)("data",e.isCircle?e.chartData:null)("colors",e.circleColors)("labels",e.labels)("options",e.chartOptions)("chartType",e.type)("legend",e.legend)}}let b=(()=>{class e extends a.a{constructor(e,t,o){super(e,t,o),this.type="horizontalBar",this.legend=!1}set data(e){e&&this.progressInputData(e)}get chartOptions(){return this.isCircle?{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},legend:{position:"left"}}:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,stepSize:1},stacked:!0}],yAxes:[{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{mirror:!0,labelOffset:-20},stacked:!0}]}}}get isCircle(){return"pie"===this.type||"doughnut"===this.type}calcBarChartHeight(){if(!this.isCircle)return 120+60*this.labels.length+"px"}progressInputData(e){this.isCircle?(this.chartData=e.flatMap(e=>e.data),this.circleColors=[{backgroundColor:e.map(e=>e.backgroundColor).filter(e=>!!e),hoverBackgroundColor:e.map(e=>e.hoverBackgroundColor).filter(e=>!!e)}]):this.chartData=e,this.labels||(this.labels=e.map(e=>e.label))}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.c),s.Rb(i.k),s.Rb(r.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["os-charts"]],inputs:{type:"type",labels:"labels",legend:"legend",data:"data"},features:[s.Cb],decls:2,vars:3,consts:[[1,"charts-wrapper"],["class","chart-js-canvas","baseChart","",3,"datasets","data","colors","labels","options","chartType","legend",4,"ngIf"],["baseChart","",1,"chart-js-canvas",3,"datasets","data","colors","labels","options","chartType","legend"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Qc(1,p,1,7,"canvas",1),s.Wb()),2&e&&(s.Nc("height",t.calcBarChartHeight()),s.Fb(1),s.rc("ngIf",t.chartData&&t.chartData.length))},directives:[l.t,c.a],styles:[".charts-wrapper[_ngcontent-%COMP%]{position:relative;display:block;height:100%;margin:auto}"],changeDetection:0}),e})()},owL4:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var a=o("8Y7J"),s=o("iELJ"),n=o("Dxy4"),i=o("TSSN");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Lb({type:e,selectors:[["os-voting-privacy-warning"]],decls:13,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(a.Xb(0,"h1",0),a.Xb(1,"span"),a.Sc(2),a.kc(3,"translate"),a.Wb(),a.Wb(),a.Xb(4,"div",1),a.Xb(5,"span"),a.Sc(6),a.kc(7,"translate"),a.Wb(),a.Wb(),a.Xb(8,"div",2),a.Xb(9,"button",3),a.Xb(10,"span"),a.Sc(11),a.kc(12,"translate"),a.Wb(),a.Wb(),a.Wb()),2&e&&(a.Fb(2),a.Tc(a.lc(3,4,"Secret voting can not be guaranteed")),a.Fb(4),a.Uc(" ",a.lc(7,6,"During non-nominal voting OpenSlides does NOT store the individual user ID of the voter. This in no way means that a non-nominal vote is completely anonymous and secure. The votes cannot track their individual votes after the data has been submitted. The validity of the data cannot always be guaranteed.")," "),a.Fb(3),a.rc("mat-dialog-close",null),a.Fb(2),a.Tc(a.lc(12,8,"I know the risk")))},directives:[s.i,s.f,s.c,n.b,s.d],pipes:[i.j],styles:[""]}),e})()}}]);