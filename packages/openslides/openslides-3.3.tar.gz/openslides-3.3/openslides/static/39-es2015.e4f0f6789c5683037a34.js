(window.webpackJsonp=window.webpackJsonp||[]).push([[39,42],{F48D:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));var r=o("mrSG"),n=o("LBBb"),s=o("8Y7J"),c=o("iELJ");let i=(()=>{class t{constructor(t){this.dialog=t}open(t,e=""){return Object(r.a)(this,void 0,void 0,(function*(){return this.dialog.open(n.a,{width:"290px",data:{title:t,content:e}}).afterClosed().toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(s.bc(c.b))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LBBb:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var r=o("iELJ"),n=o("8Y7J"),s=o("SVse"),c=o("Dxy4"),i=o("TSSN");function l(t,e){if(1&t&&(n.Xb(0,"div"),n.Xb(1,"h2",1),n.Sc(2),n.Wb(),n.Sb(3,"mat-dialog-content",2),n.Xb(4,"mat-dialog-actions"),n.Xb(5,"button",3),n.Sc(6),n.kc(7,"translate"),n.Wb(),n.Xb(8,"button",4),n.Sc(9),n.kc(10,"translate"),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Fb(2),n.Tc(t.data.title),n.Fb(1),n.rc("innerHTML",t.data.content,n.Hc),n.Fb(2),n.rc("mat-dialog-close",!0),n.Fb(1),n.Tc(n.lc(7,6,"OK")),n.Fb(2),n.rc("mat-dialog-close",!1),n.Fb(1),n.Tc(n.lc(10,8,"Cancel"))}}let a=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(r.h),n.Rb(r.a))},t.\u0275cmp=n.Lb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&n.Qc(0,l,11,10,"div",0),2&t&&n.rc("ngIf",e.data)},directives:[s.t,r.i,r.f,r.c,c.b,r.d],pipes:[i.j],encapsulation:2}),t})()},zdrJ:function(t,e,o){"use strict";o.r(e),o.d(e,"CinemaModule",(function(){return at}));var r=o("SVse"),n=o("PCNd"),s=o("iMzm"),c=o("iInd"),i=o("mrSG"),l=o("OwvW"),a=o("+WZz"),p=o("3Y/2"),b=o("3moa"),u=o("Jrw6"),d=o("mV3u"),f=o("DJZM"),h=o("8Y7J"),m=o("cUpR"),g=o("TSSN"),j=o("zHaW"),P=o("mksl"),k=o("PDjf"),v=o("Dxy4"),S=o("Tj54"),O=o("3Xi6"),T=o("lJxs"),F=o("ITcc"),L=(o("3n8p"),o("jcOe")),C=o("8fOK"),M=o("PoOO"),w=o("pA48"),W=o("RGiq"),X=o("76GY"),R=o("5go9"),I=o("DGQJ");const y=function(t){return{poll:t,last:!1}};function V(t,e){if(1&t&&h.Tb(0,3),2&t){const t=e.$implicit;h.jc();const o=h.Cc(3);h.rc("ngTemplateOutlet",o)("ngTemplateOutletContext",h.xc(2,y,t))}}const x=function(t){return{poll:t,last:!0}};function Q(t,e){if(1&t&&h.Tb(0,3),2&t){const t=h.jc(),e=h.Cc(3);h.rc("ngTemplateOutlet",e)("ngTemplateOutletContext",h.xc(2,x,t.lastPublishedPoll))}}function U(t,e){if(1&t&&h.Sb(0,"os-poll-progress",9),2&t){const t=h.jc().poll;h.rc("poll",t)}}function J(t,e){if(1&t&&h.Sb(0,"os-motion-poll-vote",9),2&t){const t=h.jc(2).poll;h.rc("poll",t)}}function E(t,e){if(1&t&&h.Sb(0,"os-motion-poll-detail-content",9),2&t){const t=h.jc(3);h.rc("poll",t.lastPublishedPoll)}}function A(t,e){if(1&t&&(h.Xb(0,"div"),h.Qc(1,J,1,1,"os-motion-poll-vote",7),h.Qc(2,E,1,1,"os-motion-poll-detail-content",7),h.Wb()),2&t){const t=h.jc(),e=t.poll,o=t.last;h.Fb(1),h.rc("ngIf",e.canBeVotedFor()&&!o),h.Fb(1),h.rc("ngIf",o)}}function B(t,e){if(1&t&&h.Sb(0,"os-assignment-poll-vote",9),2&t){const t=h.jc(2).poll;h.rc("poll",t)}}function D(t,e){if(1&t&&h.Sb(0,"os-assignment-poll-detail-content",9),2&t){const t=h.jc(3);h.rc("poll",t.lastPublishedPoll)}}function Y(t,e){if(1&t&&(h.Xb(0,"div"),h.Qc(1,B,1,1,"os-assignment-poll-vote",7),h.Qc(2,D,1,1,"os-assignment-poll-detail-content",7),h.Wb()),2&t){const t=h.jc(),e=t.poll,o=t.last;h.Fb(1),h.rc("ngIf",e.canBeVotedFor()&&!o),h.Fb(1),h.rc("ngIf",o)}}const _=function(){return{back:"true"}};function G(t,e){if(1&t&&(h.Xb(0,"mat-card",4),h.Xb(1,"p",5),h.Xb(2,"a",6),h.Sc(3),h.Wb(),h.Wb(),h.Qc(4,U,1,1,"os-poll-progress",7),h.Qc(5,A,3,2,"div",8),h.Qc(6,Y,3,2,"div",8),h.Wb()),2&t){const t=e.poll,o=h.jc();h.Fb(2),h.rc("routerLink",o.getPollDetailLink(t))("state",h.wc(6,_)),h.Fb(1),h.Tc(o.getPollVoteTitle(t)),h.Fb(1),h.rc("ngIf",o.canManage(t)&&t.canBeVotedFor()),h.Fb(1),h.rc("ngIf","motion"===t.pollClassType),h.Fb(1),h.rc("ngIf","assignment"===t.pollClassType)}}let z=(()=>{class t extends d.a{constructor(t,e,o,r,n,s){super(t,e,o),this.operator=r,this.pollService=n,this.cd=s}get currentProjection(){return this._currentProjection}get hasProjectedModelOpenPolls(){return(this.currentProjection instanceof L.a||this.currentProjection instanceof F.b)&&this.currentProjection.polls.some(t=>t.isStarted)}set currentProjection(t){this._currentProjection=t,this.updateLastPublished()}get showExtendedTitle(){var t;const e=this.polls.every(t=>this.polls[0].getContentObject()===t.getContentObject());return this.currentProjection&&e?(null===(t=this.polls[0])||void 0===t?void 0:t.getContentObject())!==this.currentProjection:!e}ngOnInit(){this.subscriptions.push(this.pollService.getViewModelListObservable().pipe(Object(T.a)(t=>t.filter(t=>t.canBeVotedFor()))).subscribe(t=>{this.polls=t,this.cd.markForCheck(),this.updateLastPublished()}))}identifyPoll(t,e){return e.id}getPollDetailLink(t){return t.parentLink}getPollVoteTitle(t){const e=t.getContentObject(),o=e.getListTitle(),r=e.getVerboseName(),n=t.getTitle();return this.showExtendedTitle?`(${r}) ${o} - ${n}`:n}updateLastPublished(){const t=this.getLastfinshedPoll(this.currentProjection);t!==this.lastPublishedPoll&&(this.lastPublishedPoll=t,this.cd.markForCheck())}getLastfinshedPoll(t){if(t instanceof L.a||t instanceof F.b){let e=t.polls;return e=e.filter(t=>t.stateHasVotes).reverse(),e[0]}return null}canManage(t){return t.pollClassType===C.c.Motion?this.operator.hasPerms(this.permission.motionsCanManagePolls):t.pollClassType===C.c.Assignment&&this.operator.hasPerms(this.permission.assignmentsCanManage)}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(m.c),h.Rb(g.k),h.Rb(j.a),h.Rb(l.a),h.Rb(M.a),h.Rb(h.h))},t.\u0275cmp=h.Lb({type:t,selectors:[["os-poll-collection"]],inputs:{currentProjection:"currentProjection"},features:[h.Cb],decls:4,vars:3,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["pollArea",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"os-card"],[1,"subtitle-text"],[3,"routerLink","state"],[3,"poll",4,"ngIf"],[4,"ngIf"],[3,"poll"]],template:function(t,e){1&t&&(h.Qc(0,V,1,4,"ng-container",0),h.Qc(1,Q,1,4,"ng-container",1),h.Qc(2,G,7,7,"ng-template",null,2,h.Rc)),2&t&&(h.rc("ngForOf",e.polls)("ngForTrackBy",e.identifyPoll),h.Fb(1),h.rc("ngIf",e.lastPublishedPoll&&!e.hasProjectedModelOpenPolls))},directives:[r.s,r.t,r.A,k.a,c.i,w.a,W.a,X.a,R.a,I.a],styles:[""],changeDetection:0}),t})();var H=o("uzvl"),N=o("ZFy/"),$=o("PAIG");function Z(t,e){1&t&&(h.Xb(0,"mat-icon",18),h.kc(1,"translate"),h.Sc(2," lock "),h.Wb()),2&t&&h.sc("matTooltip",h.lc(1,1,"The list of speakers is closed."))}function K(t,e){if(1&t&&(h.Vb(0),h.Qc(1,Z,3,3,"mat-icon",17),h.Ub()),2&t){const t=h.jc(2);h.Fb(1),h.rc("ngIf",t.isLosClosed)}}function q(t,e){1&t&&(h.Xb(0,"mat-icon",18),h.kc(1,"translate"),h.Sc(2," lock "),h.Wb()),2&t&&h.sc("matTooltip",h.lc(1,1,"The list of speakers is closed."))}function tt(t,e){1&t&&(h.Xb(0,"mat-icon",18),h.kc(1,"translate"),h.Sc(2," lock_open "),h.Wb()),2&t&&h.sc("matTooltip",h.lc(1,1,"The list of speakers is open."))}function et(t,e){if(1&t){const t=h.Yb();h.Xb(0,"button",19),h.fc("click",(function(){return h.Gc(t),h.jc(2).toggleListOfSpeakersOpen()})),h.Qc(1,q,3,3,"mat-icon",17),h.Qc(2,tt,3,3,"mat-icon",17),h.Wb()}if(2&t){const t=h.jc(2);h.Fb(1),h.rc("ngIf",t.isLosClosed),h.Fb(1),h.rc("ngIf",!t.isLosClosed)}}function ot(t,e){if(1&t&&(h.Xb(0,"os-list-of-speakers-content",12),h.Xb(1,"p",13),h.Xb(2,"a",14),h.Sc(3),h.kc(4,"translate"),h.Wb(),h.Qc(5,K,2,1,"ng-container",15),h.Qc(6,et,3,2,"button",16),h.Wb(),h.Wb()),2&t){const t=h.jc();h.rc("customTitle",!0)("speakers",t.listOfSpeakers),h.Fb(2),h.Jb("disabled",!t.closUrl),h.rc("routerLink",t.closUrl),h.Fb(1),h.Uc(" ",h.lc(4,9,"List of speakers")," "),h.Fb(2),h.rc("osPerms",t.permission.agendaCanManageListOfSpeakers)("osPermsComplement",!0),h.Fb(1),h.rc("osPerms",t.permission.agendaCanManageListOfSpeakers)}}function rt(t,e){if(1&t&&h.Sb(0,"os-projector",20),2&t){const t=h.jc();h.rc("projector",t.projector)}}const nt=function(){return{back:"true"}},st=[{path:"",component:(()=>{class t extends d.a{constructor(t,e,o,r,n,s,c,i,l){super(t,e,o),this.operator=r,this.projectorService=n,this.projectorRepo=s,this.closService=c,this.listOfSpeakersRepo=i,this.cd=l}get title(){var t;return this.projectedViewModel?this.projectedViewModel.getListTitle():this.currentProjectorElement?null===(t=this.projectorService.getSlideTitle(this.currentProjectorElement))||void 0===t?void 0:t.title:""}get projectorTitle(){var t;return(null===(t=this.projector)||void 0===t?void 0:t.getTitle())||""}get closUrl(){var t;return this.listOfSpeakers&&this.operator.hasPerms(this.permission.agendaCanManageListOfSpeakers)?null===(t=this.listOfSpeakers)||void 0===t?void 0:t.listOfSpeakersUrl:""}get isLosClosed(){var t;return null===(t=this.listOfSpeakers)||void 0===t?void 0:t.closed}get viewModelUrl(){return this.projectedViewModel&&Object(u.a)(this.projectedViewModel)?this.projectedViewModel.getDetailStateURL():""}get projectorUrl(){return this.projector?this.operator.hasPerms(this.permission.coreCanManageProjector)?"/projectors/detail/"+this.projector.id:"/projector/"+this.projector.id:""}get projectionTarget(){return this.operator.hasPerms(this.permission.coreCanManageProjector)?"_self":"_blank"}ngOnInit(){super.setTitle("Autopilot"),this.subscriptions.push(this.projectorRepo.getReferenceProjectorObservable().subscribe(t=>{this.projector=t,this.currentProjectorElement=(null==t?void 0:t.firstUnstableElement)||null,this.projectedViewModel=this.currentProjectorElement?this.projectorService.getViewModelFromProjectorElement(this.currentProjectorElement):null}),this.closService.currentListOfSpeakersObservable.subscribe(t=>{this.listOfSpeakers=t}))}toggleListOfSpeakersOpen(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.listOfSpeakersRepo.setListOpenness(this.listOfSpeakers,this.isLosClosed).catch(this.raiseError)}))}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(m.c),h.Rb(g.k),h.Rb(j.a),h.Rb(l.a),h.Rb(a.a),h.Rb(b.a),h.Rb(f.a),h.Rb(p.a),h.Rb(h.h))},t.\u0275cmp=h.Lb({type:t,selectors:[["os-cinema"]],features:[h.Cb],decls:21,vars:19,consts:[[1,"title-slot"],[1,"content-container"],[1,"os-card"],[1,"line-and-icon"],["mat-icon-button","",3,"disabled","routerLink","state"],[3,"customTitle","speakers",4,"osPerms","osPermsAnd"],[3,"currentProjection"],[1,"os-card","spacer-bottom-60"],[1,"subtitle-text"],[3,"routerLink","target"],[1,"projector"],[3,"projector",4,"ngIf"],[3,"customTitle","speakers"],[1,"line-and-icon","subtitle-text"],[3,"routerLink"],[4,"osPerms","osPermsComplement"],["mat-icon-button","",3,"click",4,"osPerms"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],["mat-icon-button","",3,"click"],[3,"projector"]],template:function(t,e){1&t&&(h.Xb(0,"os-head-bar"),h.Xb(1,"div",0),h.Xb(2,"h2"),h.Sc(3),h.kc(4,"translate"),h.Wb(),h.Wb(),h.Wb(),h.Xb(5,"div",1),h.Xb(6,"mat-card",2),h.Xb(7,"h1",3),h.Sc(8),h.Xb(9,"a",4),h.Xb(10,"mat-icon"),h.Sc(11,"open_in_new"),h.Wb(),h.Wb(),h.Wb(),h.Wb(),h.Qc(12,ot,7,11,"os-list-of-speakers-content",5),h.Sb(13,"os-poll-collection",6),h.Xb(14,"mat-card",7),h.Xb(15,"p",8),h.Sc(16),h.kc(17,"translate"),h.Wb(),h.Xb(18,"a",9),h.Xb(19,"div",10),h.Qc(20,rt,1,1,"os-projector",11),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&t&&(h.Fb(3),h.Tc(h.lc(4,14,"Autopilot")),h.Fb(5),h.Uc(" ",e.title," "),h.Fb(1),h.Jb("disabled",!e.viewModelUrl),h.rc("disabled",!e.viewModelUrl)("routerLink",e.viewModelUrl)("state",h.wc(18,nt)),h.Fb(3),h.rc("osPerms",e.permission.agendaCanSeeListOfSpeakers)("osPermsAnd",e.listOfSpeakers),h.Fb(1),h.rc("currentProjection",e.projectedViewModel),h.Fb(3),h.Tc(h.lc(17,16,e.projectorTitle)),h.Fb(2),h.rc("routerLink",e.projectorUrl)("target",e.projectionTarget),h.Fb(2),h.rc("ngIf",e.projector))},directives:[P.a,k.a,v.a,c.i,S.a,O.a,z,r.t,H.a,N.c,v.b,$.a],pipes:[g.j],styles:[".projector[_ngcontent-%COMP%]{border:1px solid #d3d3d3}"]}),t})(),pathMatch:"full"}];let ct=(()=>{class t{}return t.\u0275mod=h.Pb({type:t}),t.\u0275inj=h.Ob({factory:function(e){return new(e||t)},imports:[[c.j.forChild(st)],c.j]}),t})();var it=o("tSYa"),lt=o("bVYn");let at=(()=>{class t{}return t.\u0275mod=h.Pb({type:t}),t.\u0275inj=h.Ob({factory:function(e){return new(e||t)},imports:[[r.c,ct,it.MotionPollModule,s.AssignmentPollModule,n.a,lt.PollsModule]]}),t})()}}]);