(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{ndCD:function(t,e,n){"use strict";n.r(e),n.d(e,"AmendmentListModule",(function(){return mt}));var i=n("SVse"),o=n("iInd"),c=n("mrSG"),r=n("eIep"),s=n("VVsa"),a=n("AOla"),l=n("AqIO"),b=n("dOok"),m=n("+KbT"),d=n("a9XT"),u=n("7dBR"),p=n("+az0"),f=n("Izkr"),g=n("wL0i"),h=n("TzFX"),S=n("zyuw"),v=n("d4fM"),x=n("y50V"),W=n("T9hM"),X=n("8Y7J"),w=n("cUpR"),F=n("TSSN"),k=n("zHaW"),M=n("iELJ"),R=n("mksl"),j=n("Dxy4"),I=n("rJgo"),y=n("Tj54"),T=n("0Obk"),C=n("4LpT"),L=n("f44v"),D=n("Tp2j"),P=n("40uZ"),Q=n("3Xi6"),O=n("BSbQ"),_=n("pcP9"),z=n("7jBc");function A(t,e){1&t&&(X.Xb(0,"div",12),X.Xb(1,"h2"),X.Sc(2),X.kc(3,"translate"),X.Wb(),X.Wb()),2&t&&(X.Fb(2),X.Tc(X.lc(3,1,"Amendments")))}function E(t,e){if(1&t&&(X.Xb(0,"div",12),X.Xb(1,"h2"),X.Sc(2),X.kc(3,"translate"),X.kc(4,"async"),X.Wb(),X.Wb()),2&t){const t=X.jc();var n;X.Fb(2),X.Vc(" ",X.lc(3,2,"Amendments to")," ",null==(n=X.lc(4,4,t.parentMotion))?null:n.identifierOrTitle," ")}}function U(t,e){1&t&&(X.Xb(0,"span"),X.Sc(1,"\xa0\xb7\xa0"),X.Wb())}function V(t,e){if(1&t&&(X.Xb(0,"span"),X.Qc(1,U,2,0,"span",11),X.Xb(2,"span"),X.Sc(3),X.kc(4,"translate"),X.Wb(),X.Xb(5,"span"),X.Sc(6),X.Wb(),X.Wb()),2&t){const t=X.jc().row;X.Fb(1),X.rc("ngIf",t.identifier),X.Fb(2),X.Tc(X.lc(4,3,"Line")),X.Fb(3),X.Uc("\xa0",t.getChangeLines(),"")}}function N(t,e){if(1&t&&(X.Xb(0,"span"),X.Xb(1,"span"),X.Sc(2),X.kc(3,"translate"),X.Wb(),X.Sc(4),X.Wb()),2&t){const t=X.jc().row;X.Fb(2),X.Tc(X.lc(3,2,"by")),X.Fb(2),X.Uc(" ",t.submitters," ")}}function G(t,e){1&t&&(X.Xb(0,"span"),X.Sc(1," \xb7 "),X.Wb())}function q(t,e){if(1&t&&(X.Xb(0,"span"),X.Qc(1,G,2,0,"span",11),X.Xb(2,"span"),X.Sc(3),X.kc(4,"translate"),X.Wb(),X.Sc(5),X.Wb()),2&t){const t=X.jc().row;X.Fb(1),X.rc("ngIf",t.submitters.length),X.Fb(2),X.Tc(X.lc(4,3,"Sequential number")),X.Fb(2),X.Uc(" ",t.id," ")}}function H(t,e){if(1&t&&(X.Xb(0,"mat-basic-chip",20),X.Sc(1),X.Wb()),2&t){const t=X.jc().row,e=X.jc();X.rc("ngClass",t.stateCssColor)("disabled",!0),X.Fb(1),X.Uc(" ",e.motionRepo.getExtendedStateLabel(t)," ")}}function Y(t,e){if(1&t&&(X.Xb(0,"div",21),X.Xb(1,"mat-basic-chip",22),X.Sc(2),X.Wb(),X.Wb()),2&t){const t=X.jc().row,e=X.jc();X.Fb(1),X.rc("disabled",!0),X.Fb(1),X.Uc(" ",e.motionRepo.getExtendedRecommendationLabel(t)," ")}}const B=function(){return{back:"true"}};function J(t,e){if(1&t&&(X.Xb(0,"div",13),X.Sb(1,"a",14),X.Xb(2,"div",15),X.Xb(3,"div",16),X.Xb(4,"span"),X.Sc(5),X.Wb(),X.Qc(6,V,7,5,"span",11),X.Wb(),X.Xb(7,"div",17),X.Qc(8,N,5,4,"span",11),X.Qc(9,q,6,5,"span",11),X.Wb(),X.Xb(10,"div"),X.Qc(11,H,2,3,"mat-basic-chip",18),X.Wb(),X.Qc(12,Y,3,2,"div",19),X.Wb(),X.Wb()),2&t){const t=e.row,n=X.jc();X.Fb(1),X.rc("routerLink",t.getDetailStateURL())("state",X.wc(8,B)),X.Fb(4),X.Tc(t.identifier),X.Fb(1),X.rc("ngIf",t.diffLines&&t.diffLines.length),X.Fb(2),X.rc("ngIf",t.submitters.length),X.Fb(1),X.rc("ngIf",n.showSequentialNumber),X.Fb(2),X.rc("ngIf",t.state),X.Fb(1),X.rc("ngIf",t.recommendation&&t.state.next_states_id.length>0)}}function K(t,e){if(1&t&&(X.Xb(0,"div",13),X.Sb(1,"a",23),X.Xb(2,"div",15),X.Sb(3,"div",24),X.kc(4,"trust"),X.Wb(),X.Wb()),2&t){const t=e.row,n=X.jc();X.Fb(1),X.rc("routerLink",t.getDetailStateURL()),X.Fb(2),X.rc("innerHtml",X.mc(4,2,n.getAmendmentSummary(t),"html"),X.Hc)}}const Z=function(t){return{motion:t}};function $(t,e){if(1&t){const t=X.Yb();X.Xb(0,"div",13),X.Xb(1,"button",25),X.fc("click",(function(e){return X.Gc(t),e.stopPropagation()})),X.Xb(2,"mat-icon"),X.Sc(3,"more_vert"),X.Wb(),X.Wb(),X.Wb()}if(2&t){const t=e.row,n=X.jc(),i=X.Cc(21);X.Fb(1),X.rc("disabled",n.isMultiSelect)("matMenuTriggerFor",i)("matMenuTriggerData",X.xc(3,Z,t))}}function tt(t,e){if(1&t&&(X.Sb(0,"os-projector-button",26),X.Sb(1,"os-speaker-button",26)),2&t){const t=e.motion;X.rc("object",t)("menuItem",!0),X.Fb(1),X.rc("object",t)("menuItem",!0)}}function et(t,e){if(1&t){const t=X.Yb();X.Xb(0,"div"),X.Xb(1,"button",28),X.fc("click",(function(){return X.Gc(t),X.jc(2).toggleMultiSelect()})),X.Xb(2,"mat-icon"),X.Sc(3,"library_add"),X.Wb(),X.Xb(4,"span"),X.Sc(5),X.kc(6,"translate"),X.Wb(),X.Wb(),X.Wb()}2&t&&(X.Fb(5),X.Tc(X.lc(6,1,"Multiselect")))}function nt(t,e){if(1&t){const t=X.Yb();X.Xb(0,"div"),X.Qc(1,et,7,3,"div",27),X.Xb(2,"button",28),X.fc("click",(function(){return X.Gc(t),X.jc().openExportDialog()})),X.Xb(3,"mat-icon"),X.Sc(4,"archive"),X.Wb(),X.Xb(5,"span"),X.Sc(6),X.kc(7,"translate"),X.Wb(),X.Wb(),X.Xb(8,"button",28),X.fc("click",(function(){return X.Gc(t),X.jc().exportAmendmentListPdf()})),X.Xb(9,"mat-icon"),X.Sc(10,"picture_as_pdf"),X.Wb(),X.Xb(11,"span"),X.Sc(12),X.kc(13,"translate"),X.Wb(),X.Wb(),X.Wb()}2&t&&(X.Fb(1),X.rc("osPerms","motions.can_manage"),X.Fb(5),X.Tc(X.lc(7,3,"Export")),X.Fb(6),X.Tc(X.lc(13,5,"Amendment list (PDF)")))}function it(t,e){if(1&t){const t=X.Yb();X.Vb(0),X.Sb(1,"mat-divider"),X.Xb(2,"os-motion-multiselect-actions",31),X.fc("action",(function(e){return X.Gc(t),X.jc(2).multiselectWrapper(e)})),X.Wb(),X.Ub()}if(2&t){const t=X.jc(2);X.Fb(2),X.rc("selectedMotions",t.selectedRows)}}function ot(t,e){if(1&t){const t=X.Yb();X.Xb(0,"div"),X.Xb(1,"button",28),X.fc("click",(function(){return X.Gc(t),X.jc().selectAll()})),X.Xb(2,"mat-icon"),X.Sc(3,"done_all"),X.Wb(),X.Xb(4,"span"),X.Sc(5),X.kc(6,"translate"),X.Wb(),X.Wb(),X.Xb(7,"button",29),X.fc("click",(function(){return X.Gc(t),X.jc().deselectAll()})),X.Xb(8,"mat-icon"),X.Sc(9,"clear"),X.Wb(),X.Xb(10,"span"),X.Sc(11),X.kc(12,"translate"),X.Wb(),X.Wb(),X.Qc(13,it,3,1,"ng-container",30),X.Wb()}if(2&t){const t=X.jc();X.Fb(5),X.Tc(X.lc(6,5,"Select all")),X.Fb(2),X.rc("disabled",!t.selectedRows.length),X.Fb(4),X.Tc(X.lc(12,7,"Deselect all")),X.Fb(2),X.rc("osPerms","motions.can_manage")("osPermsOr","motions.can_manage_metadata")}}const ct=function(){return["summary"]};let rt=(()=>{class t extends g.a{constructor(t,e,n,i,o,c,r,s,a,l,b,m,d,u,f,g){super(t,e,n,i),this.route=o,this.motionRepo=c,this.motionSortService=r,this.motionMultiSelectService=s,this.amendmentSortService=a,this.amendmentFilterService=l,this.dialog=b,this.motionExport=m,this.linenumberingService=d,this.pdfExport=u,this.overlayService=f,this.configService=g,this.itemVisibility=p.b,this.tableColumnDefinition=[{prop:"meta",minWidth:250,width:"auto"},{prop:"summary",minWidth:280,width:"auto"},{prop:"speakers",width:this.singleButtonWidth}],this.filterProps=["submitters","title","identifier","amendment_paragraphs"],super.setTitle("Amendments"),this.canMultiSelect=!0}ngOnInit(){this.route.snapshot.paramMap.get("id")?this.parentMotion=this.route.paramMap.pipe(Object(r.a)(t=>(this.parentMotionId=+t.get("id"),this.amendmentFilterService.parentMotionId=this.parentMotionId,this.motionRepo.getViewModelObservable(this.parentMotionId)))):this.amendmentFilterService.parentMotionId=void 0,this.configService.get("motions_show_sequential_numbers").subscribe(t=>this.showSequentialNumber=t)}getAmendmentSummary(t){const e=t.diffLines;return e.length?e.map(t=>this.linenumberingService.stripLineNumbers(t.text)).join("[...]"):t.text}openExportDialog(){this.dialog.open(h.a,Object.assign(Object.assign({},f.b),{data:this.dataSource})).afterClosed().subscribe(t=>this.motionExport.evaluateExportRequest(t,this.isMultiSelect?this.selectedRows:this.dataSource.filteredData))}multiselectWrapper(t){return Object(c.a)(this,void 0,void 0,(function*(){t.then(()=>this.overlayService.hideSpinner(),this.raiseError)}))}exportAmendmentListPdf(){const t=this.parentMotionId?this.motionRepo.getViewModel(this.parentMotionId):void 0;this.pdfExport.exportAmendmentList(this.dataSource.filteredData,t)}}return t.\u0275fac=function(e){return new(e||t)(X.Rb(w.c),X.Rb(F.k),X.Rb(k.a),X.Rb(l.a),X.Rb(o.a),X.Rb(b.a),X.Rb(W.a),X.Rb(v.a),X.Rb(a.a),X.Rb(s.a),X.Rb(M.b),X.Rb(S.a),X.Rb(d.a),X.Rb(x.a),X.Rb(u.a),X.Rb(m.a))},t.\u0275cmp=X.Lb({type:t,selectors:[["os-amendment-list"]],features:[X.Cb],decls:27,vars:23,consts:[["prevUrl","../..",3,"nav","multiSelectMode"],["class","title-slot",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"central-info-slot"],["mat-icon-button","",3,"click"],["listStorageKey","amendments",3,"listObservableProvider","sortService","filterService","columns","filterProps","multiSelect","hiddenInMobile","selectedRows","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["amendmentListMenu","matMenu"],[4,"ngIf"],[1,"title-slot"],[1,"cell-slot","fill"],[1,"detail-link",3,"routerLink","state"],[1,"innerTable"],[1,"title-line","one-line"],[1,"submitters-line","one-line"],[3,"ngClass","disabled",4,"ngIf"],["class","spacer-top-3",4,"ngIf"],[3,"ngClass","disabled"],[1,"spacer-top-3"],[1,"bluegrey",3,"disabled"],[1,"detail-link",3,"routerLink"],[1,"motion-text",3,"innerHtml"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],[4,"osPerms"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],[4,"osPerms","osPermsOr"],[3,"selectedMotions","action"]],template:function(t,e){if(1&t&&(X.Xb(0,"os-head-bar",0),X.Qc(1,A,4,3,"div",1),X.Qc(2,E,5,6,"div",1),X.Xb(3,"div",2),X.Xb(4,"button",3),X.Xb(5,"mat-icon"),X.Sc(6,"more_vert"),X.Wb(),X.Wb(),X.Wb(),X.Xb(7,"div",4),X.Xb(8,"button",5),X.fc("click",(function(){return e.toggleMultiSelect()})),X.Xb(9,"mat-icon"),X.Sc(10,"arrow_back"),X.Wb(),X.Wb(),X.Xb(11,"span"),X.Sc(12),X.Wb(),X.Xb(13,"span"),X.Sc(14),X.kc(15,"translate"),X.Wb(),X.Wb(),X.Wb(),X.Xb(16,"os-list-view-table",6),X.fc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),X.Qc(17,J,13,9,"div",7),X.Qc(18,K,5,5,"div",7),X.Qc(19,$,4,5,"div",7),X.Wb(),X.Xb(20,"mat-menu",null,8),X.Qc(22,tt,2,4,"ng-template",9),X.Wb(),X.Xb(23,"mat-menu",null,10),X.Qc(25,nt,14,7,"div",11),X.Qc(26,ot,14,9,"div",11),X.Wb()),2&t){const t=X.Cc(24);X.rc("nav",!1)("multiSelectMode",e.isMultiSelect),X.Fb(1),X.rc("ngIf",!e.parentMotion),X.Fb(1),X.rc("ngIf",e.parentMotion),X.Fb(2),X.rc("matMenuTriggerFor",t),X.Fb(8),X.Uc("",e.selectedRows.length,"\xa0"),X.Fb(2),X.Tc(X.lc(15,20,"selected")),X.Fb(2),X.rc("listObservableProvider",e.motionRepo)("sortService",e.amendmentSortService)("filterService",e.amendmentFilterService)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("multiSelect",e.isMultiSelect)("hiddenInMobile",X.wc(22,ct))("selectedRows",e.selectedRows),X.Fb(1),X.rc("pblNgridCellDef","meta"),X.Fb(1),X.rc("pblNgridCellDef","summary"),X.Fb(1),X.rc("pblNgridCellDef","menu"),X.Fb(6),X.rc("ngIf",!e.isMultiSelect),X.Fb(1),X.rc("ngIf",e.isMultiSelect)}},directives:[R.a,i.t,j.b,I.e,y.a,T.a,C.b,I.f,I.b,o.i,L.a,i.q,D.a,P.a,Q.a,I.c,O.a,_.a],pipes:[F.j,i.b,z.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:"";width:16px;height:16px;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="%23337ab7"/><path d="M0 0h24v24H0z" fill="none"/></svg>\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}.submitters-line{font-size:90%}'],encapsulation:2,changeDetection:0}),t})();const st=[{path:"",component:rt,pathMatch:"full"},{path:":id",component:rt}];let at=(()=>{class t{}return t.\u0275mod=X.Pb({type:t}),t.\u0275inj=X.Ob({factory:function(e){return new(e||t)},imports:[[o.j.forChild(st)],o.j]}),t})();var lt=n("PCNd"),bt=n("IItz");let mt=(()=>{class t{}return t.\u0275mod=X.Pb({type:t}),t.\u0275inj=X.Ob({factory:function(e){return new(e||t)},imports:[[i.c,at,lt.a,bt.a]]}),t})()}}]);