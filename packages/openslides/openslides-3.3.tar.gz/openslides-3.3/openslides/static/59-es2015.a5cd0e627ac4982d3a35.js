(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"Bp/c":function(t,e,o){"use strict";o.r(e),o.d(e,"FullscreenProjectorModule",(function(){return w}));var r=o("SVse"),i=o("PCNd"),n=o("iInd"),s=o("XNiG"),c=o("otHz"),h=o("OwvW"),a=o("3moa"),p=o("8Y7J"),l=o("ELcd"),d=o("PAIG");const j=["container"];function u(t,e){if(1&t&&p.Sb(0,"os-projector",4),2&t){const t=p.jc();p.rc("projector",t.projector)}}let b=(()=>{class t{constructor(t,e,o,r){this.route=e,this.operator=o,this.repo=r,this.isLoading=!0,this.canSeeProjector=!1,this.oldProjectorSize={width:0,height:0},this.resizeSubject=new s.a,this.projectorStyle={width:"100px"},this.resizeSubject.subscribe(()=>{this.updateProjectorDimensions()})}ngOnInit(){this.route.params.subscribe(t=>{this.loadProjector(parseInt(t.id,10)||1),this.isLoading=!1}),this.operator.getUserObservable().subscribe(()=>{this.canSeeProjector=this.operator.hasPerms(h.b.coreCanSeeProjector)})}loadProjector(t){this.projectorId=t,this.repo.getViewModelObservable(this.projectorId).subscribe(t=>{this.projector=t,!t||t.width===this.oldProjectorSize.width&&t.height===this.oldProjectorSize.height||(this.oldProjectorSize.width=t.height,this.oldProjectorSize.height=t.height,this.updateProjectorDimensions())})}updateProjectorDimensions(){if(!this.containerElement||!this.projector)return;const t=this.projector.width/this.projector.height;if(t>=this.containerElement.nativeElement.offsetWidth/this.containerElement.nativeElement.offsetHeight)this.projectorStyle.width=this.containerElement.nativeElement.offsetWidth+"px";else{const e=Math.floor(this.containerElement.nativeElement.offsetHeight*t);this.projectorStyle.width=e+"px"}}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(c.a),p.Rb(n.a),p.Rb(h.a),p.Rb(a.a))},t.\u0275cmp=p.Lb({type:t,selectors:[["os-fullscreen-projector"]],viewQuery:function(t,e){var o;1&t&&p.Mc(j,!0),2&t&&p.Bc(o=p.gc())&&(e.containerElement=o.first)},decls:4,vars:3,consts:[["id","container",3,"osResized"],["container",""],["id","projector",3,"ngStyle"],[3,"projector",4,"ngIf"],[3,"projector"]],template:function(t,e){1&t&&(p.Xb(0,"div",0,1),p.Xb(2,"div",2),p.Qc(3,u,1,1,"os-projector",3),p.Wb(),p.Wb()),2&t&&(p.rc("osResized",e.resizeSubject),p.Fb(2),p.rc("ngStyle",e.projectorStyle),p.Fb(1),p.rc("ngIf",e.projector))},directives:[l.a,r.w,r.t,d.a],styles:["#container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background-color:#222;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#projector[_ngcontent-%COMP%]{width:500px;margin:auto;min-width:1px}"]}),t})();const f=[{path:"",component:b,pathMatch:"full"},{path:":id",component:b}];let m=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},imports:[[n.j.forChild(f)],n.j]}),t})(),w=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},imports:[[r.c,m,i.a]]}),t})()}}]);