!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0Obk":function(r,i,n){"use strict";n.d(i,"a",(function(){return U}));var a=n("mrSG"),l=n("8Y7J"),c=n("iInd"),u=n("4LpT"),b=n("pLZG"),f=n("/uUt"),h=n("OwvW"),p=n("+WZz"),d=n("AqIO"),v=(n("+8Rz"),n("A6Ob"),n("KL36")),m=n("SVse"),S=n("q7Ft"),g=n("24UU"),w=n("dwQs"),y=n("XROA"),k=n("3Xi6"),j=n("Tp2j"),O=n("Tj54"),x=n("ZFy/"),C=n("40uZ"),F=n("TSSN");function P(e,t){if(1&e){var r=l.Yb();l.Xb(0,"os-sort-filter-bar",9),l.fc("searchFieldChange",(function(e){return l.Gc(r),l.jc(2).searchFilter(e)})),l.Xb(1,"div",10),l.pc(2,1),l.Wb(),l.Wb()}if(2&e){var i=l.jc(2);l.rc("totalCount",i.totalCount)("filterCount",i.countFilter)("filterService",i.filterService)("sortService",i.sortService)("searchFieldInput",i.inputValue)}}function I(e,t){if(1&e){var r=l.Yb();l.Xb(0,"os-projector-button",14),l.fc("changeEvent",(function(){return l.Gc(r),l.jc(3).viewUpdateEvent()})),l.Wb()}if(2&e){var i=l.jc().row,o=l.jc(2);l.rc("object",o.getProjectable(i))}}function R(e,t){1&e&&(l.Xb(0,"mat-icon",17),l.kc(1,"translate"),l.Sc(2," videocam "),l.Wb()),2&e&&l.sc("matTooltip",l.lc(1,1,"Currently projected"))}function L(e,t){if(1&e&&(l.Xb(0,"div",15),l.Qc(1,R,3,3,"mat-icon",16),l.Wb()),2&e){var r=l.jc().row,i=l.jc(2);l.Fb(1),l.rc("ngIf",i.projectorService.isProjected(i.getProjectable(r)))}}function W(e,t){1&e&&(l.Xb(0,"div",11),l.Qc(1,I,1,1,"os-projector-button",12),l.Qc(2,L,2,1,"div",13),l.Wb()),2&e&&(l.Fb(1),l.rc("osPerms","core.can_manage_projector"),l.Fb(1),l.rc("osPerms","core.can_manage_projector")("osPermsComplement",!0))}function X(e,t){1&e&&(l.Xb(0,"div",18),l.Xb(1,"span"),l.Sc(2),l.kc(3,"translate"),l.Wb(),l.Wb()),2&e&&(l.Fb(2),l.Tc(l.lc(3,1,"No data")))}function M(e,t){if(1&e&&(l.Xb(0,"div",19),l.Sb(1,"os-speaker-button",20),l.Wb()),2&e){var r=t.row,i=l.jc(2);l.Fb(1),l.rc("object",r.contentObjectData?r.contentObjectData:r)("disabled",i.multiSelect)}}function T(e,t){if(1&e){var r=l.Yb();l.Xb(0,"mat-drawer-container",1),l.Xb(1,"div",2),l.Qc(2,P,3,5,"os-sort-filter-bar",3),l.Xb(3,"pbl-ngrid",4),l.fc("rowClick",(function(e){return l.Gc(r),l.jc().onSelectRow(e)})),l.Qc(4,W,3,3,"div",5),l.Qc(5,X,4,3,"div",6),l.Xb(6,"div",null,7),l.pc(8,0,["class","ngrid-lg"]),l.Wb(),l.Qc(9,M,2,2,"div",8),l.Wb(),l.Wb(),l.Wb()}if(2&e){var i=l.jc();l.Fb(2),l.rc("ngIf",i.showFilterBar),l.Fb(1),l.rc("showHeader",!i.showFilterBar||!i.fullScreen)("showHeader",!1)("dataSource",i.dataSource)("columns",i.columnSet)("hideColumns",i.hiddenColumns)("rowClassUpdate",i.isElementProjected),l.Gb("vScrollFixed",-1!==i.vScrollFixed&&i.vScrollFixed)("vScrollAuto",-1===i.vScrollFixed),l.Fb(1),l.rc("pblNgridCellDef","projector"),l.Fb(5),l.rc("pblNgridCellDef","speaker")}}var Q=[[["",8,"cell-slot"]],[["",8,"filter-bar-info-slot"]]],A=[".cell-slot",".filter-bar-info-slot"],U=function(){var r=function(){function r(e,t,i,n,s,a){var u=this;o(this,r),this.operator=e,this.store=n,this.cd=s,this.projectorService=a,this.multiSelect=!1,this.allowProjector=!0,this.selectedRowsChange=new l.p,this.columns=[],this.showFilterBar=!0,this.alwaysShowMenu=!1,this.showListOfSpeakers=!0,this.showMenu=!0,this.vScrollFixed=110,this.fullScreen=!0,this.dataSourceChange=new l.p,this.subs=[],this.isElementProjected=function(e){if(u.allowProjector&&u.projectorService.isProjected(u.getProjectable(e.$implicit)))return"projected"},t.isMobileSubject.subscribe((function(e){e!==u.isMobile&&u.cd.markForCheck(),u.isMobile=e})),this.subs.push(i.events.pipe(Object(b.a)((function(e){return e instanceof c.d}))).subscribe((function(){u.saveScrollOffset()})))}return s(r,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getListObservable(),e.next=3,this.restoreSearchQuery();case 3:this.createDataSource(),this.changeRowHeight(),this.cd.detectChanges(),this.scrollToPreviousPosition();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.cd.detach();var e,r=t(this.subs);try{for(r.s();!(e=r.n()).done;){e.value.unsubscribe()}}catch(i){r.e(i)}finally{r.f()}this.subs=[]}},{key:"createDataSource",value:function(){var t,r=this;this.dataSource=Object(u.p)().onTrigger((function(){return r.dataListObservable?r.dataListObservable:[]})).create(),this.dataSource.onSourceChanged.subscribe((function(){r.dataSourceChange.next(r.dataSource),r.checkSelection()})),this.dataSource.selection.changed.subscribe((function(e){r.selectedRows=e.source.selected,r.selectedRowsChange.emit(r.selectedRows)})),this.columnSet=(t=Object(u.o)().default({width:"60px"})).table.apply(t,e(this.defaultStartColumns).concat(e(this.columns),e(this.defaultEndColumns))).build(),this.dataSource.setFilter(this.getFilterPredicate()),this.filterService&&this.subs.push(this.filterService.outputObservable.pipe(Object(f.a)()).subscribe((function(){r.dataSource.refresh()}))),this.sortService&&this.subs.push(this.sortService.outputObservable.subscribe((function(){r.dataSource.refresh()})))}},{key:"getListObservable",value:function(){if(this.listObservableProvider||this.listObservable){var e=this.listObservableProvider?this.listObservableProvider.getViewModelListObservable():this.listObservable;this.filterService&&this.sortService?(this.filterService.initFilters(e),this.sortService.initSorting(this.filterService.outputObservable),this.dataListObservable=this.sortService.outputObservable):this.filterService?(this.filterService.initFilters(e),this.dataListObservable=this.filterService.outputObservable):this.sortService?(this.sortService.initSorting(e),this.dataListObservable=this.sortService.outputObservable):this.dataListObservable=e}}},{key:"viewUpdateEvent",value:function(){this.cd.markForCheck()}},{key:"getFilterPredicate",value:function(){var e=this;return function(r){if(!e.inputValue)return!0;var i=e.inputValue.trim().toLowerCase();if(-1!==(""+r.id).trim().toLowerCase().indexOf(i))return!0;if(e.filterProps&&e.filterProps.length){var o,n=t(e.filterProps);try{for(n.s();!(o=n.n()).done;){var s,a=o.value.split("."),l=r,c=t(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;l&&(l=l[u])}}catch(f){c.e(f)}finally{c.f()}if(l){var b="";if((b="function"==typeof l?""+l():l.constructor===Array?l.join(""):""+l)&&-1!==b.trim().toLowerCase().indexOf(i))return!0}}}catch(f){n.e(f)}finally{n.f()}}}}},{key:"onSelectRow",value:function(e){if(this.multiSelect){var t=e.row;this.dataSource.selection.isSelected(t)?this.dataSource.selection.deselect(t):this.dataSource.selection.select(t)}}},{key:"getProjectable",value:function(e){var t,r;return null!==(r=null===(t=e)||void 0===t?void 0:t.contentObject)&&void 0!==r?r:e}},{key:"searchFilter",value:function(e){this.listStorageKey&&this.saveSearchQuery(this.listStorageKey,e),this.inputValue=e,this.dataSource.syncFilter()}},{key:"getScrollOffset",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.get("scroll_"+e);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=0;case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"saveScrollOffset",value:function(){var e=this.ngrid.viewport.measureScrollOffset();this.store.set("scroll_"+this.listStorageKey,e)}},{key:"saveSearchQuery",value:function(e,t){this.store.set("query_"+e,t)}},{key:"restoreSearchQuery",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.get("query_"+this.listStorageKey);case 2:this.inputValue=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"scrollToPreviousPosition",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ngrid){e.next=5;break}return e.next=3,this.getScrollOffset(this.listStorageKey);case 3:t=e.sent,this.ngrid.viewport.scrollToOffset(t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"changeRowHeight",value:function(){this.vScrollFixed>0?document.documentElement.style.setProperty("--pbl-height",this.vScrollFixed+"px"):document.documentElement.style.removeProperty("--pbl-height")}},{key:"checkSelection",value:function(){var e=this;if(this.multiSelect){var t,r=[];this.selectedRows.forEach((function(t){var i=e.dataSource.source.find((function(e){return e.id===t.id}));i&&r.push(i)})),this.dataSource.selection.clear(),(t=this.dataSource.selection).select.apply(t,r)}}},{key:"projectorColumnWidth",get:function(){return this.operator.hasPerms(h.b.coreCanManageProjector)?60:24}},{key:"defaultStartColumns",get:function(){return[{prop:"selection",label:"",width:"40px"},{prop:"projector",label:"",width:this.projectorColumnWidth+"px"}]}},{key:"defaultEndColumns",get:function(){return[{prop:"speaker",label:"",width:"45px"},{prop:"menu",label:"",width:"40px"}]}},{key:"countFilter",get:function(){return this.dataSource.filteredData.length}},{key:"totalCount",get:function(){return this.dataSource.length}},{key:"hiddenColumns",get:function(){var e=this,t=[];if(this.multiSelect||t.push("selection"),(this.alwaysShowMenu||this.isMobile)&&this.showMenu||t.push("menu"),(this.multiSelect||this.isMobile||!this.allowProjector)&&t.push("projector"),!this.isMobile&&this.operator.hasPerms(h.b.agendaCanSeeListOfSpeakers)&&this.showListOfSpeakers||t.push("speaker"),this.restricted&&this.restricted.length){var r=this.restricted.filter((function(t){return!e.operator.hasPerms(t.permission)})).map((function(e){return e.columnName}));t=t.concat(r)}return this.isMobile&&this.hiddenInMobile&&this.hiddenInMobile.length&&(t=t.concat(this.hiddenInMobile)),t}}]),r}();return r.\u0275fac=function(e){return new(e||r)(l.Rb(h.a),l.Rb(v.a),l.Rb(c.f),l.Rb(d.a),l.Rb(l.h),l.Rb(p.a))},r.\u0275cmp=l.Lb({type:r,selectors:[["os-list-view-table"]],viewQuery:function(e,t){var r;1&e&&l.Yc(u.d,!0),2&e&&l.Bc(r=l.gc())&&(t.ngrid=r.first)},inputs:{listObservableProvider:"listObservableProvider",listObservable:"listObservable",sortService:"sortService",filterService:"filterService",multiSelect:"multiSelect",allowProjector:"allowProjector",hiddenInMobile:"hiddenInMobile",restricted:"restricted",selectedRows:"selectedRows",columns:"columns",filterProps:"filterProps",listStorageKey:"listStorageKey",showFilterBar:"showFilterBar",alwaysShowMenu:"alwaysShowMenu",showListOfSpeakers:"showListOfSpeakers",showMenu:"showMenu",vScrollFixed:"vScrollFixed",fullScreen:"fullScreen"},outputs:{selectedRowsChange:"selectedRowsChange",dataSourceChange:"dataSourceChange"},ngContentSelectors:A,decls:1,vars:1,consts:[["class","list-view-frame",4,"ngIf"],[1,"list-view-frame"],[1,"list-view-table-wrapper"],["class","sort-filter-bar",3,"totalCount","filterCount","filterService","sortService","searchFieldInput","searchFieldChange",4,"ngIf"],["matCheckboxSelection","selection","rowClassUpdateFreq","ngDoCheck",1,"vscroll-list-view",3,"showHeader","dataSource","columns","hideColumns","rowClassUpdate","rowClick"],["class","fill ngrid-lg",4,"pblNgridCellDef"],["class","pbl-ngrid-no-data",4,"pblNgridNoDataRef"],["contentWrapper",""],["class","fill",4,"pblNgridCellDef"],[1,"sort-filter-bar",3,"totalCount","filterCount","filterService","sortService","searchFieldInput","searchFieldChange"],[1,"extra-info-slot"],[1,"fill","ngrid-lg"],["class","projector-button",3,"object","changeEvent",4,"osPerms"],["class","projector-button",4,"osPerms","osPermsComplement"],[1,"projector-button",3,"object","changeEvent"],[1,"projector-button"],["color","accent",3,"matTooltip",4,"ngIf"],["color","accent",3,"matTooltip"],[1,"pbl-ngrid-no-data"],[1,"fill"],[3,"object","disabled"]],template:function(e,t){1&e&&(l.qc(Q),l.Qc(0,T,10,11,"mat-drawer-container",0)),2&e&&l.rc("ngIf",t.columns&&t.columnSet)},directives:[m.t,S.b,u.d,g.b,u.B,w.b,u.b,u.k,y.a,k.a,j.a,O.a,x.c,C.a],pipes:[F.j],styles:[".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.list-view-frame{height:calc(100vh - 64px)}.list-view-table-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;height:100%}.list-view-table-wrapper .sort-filter-bar{-ms-flex:0 1 auto;flex:0 1 auto;display:block}.list-view-table-wrapper .pbl-ngrid-container>div{height:0}.list-view-table-wrapper .vscroll-list-view{-ms-flex:1 1 auto;flex:1 1 auto;height:100%}.list-view-table-wrapper .vscroll-list-view .projector-button{margin:auto;display:-ms-flexbox;display:flex}.list-view-table-wrapper .vscroll-list-view .pbl-ngrid-row{height:var(--pbl-height)}.list-view-table-wrapper .vscroll-list-view .pbl-ngrid-row:last-of-type{margin-bottom:60px!important}.list-view-table-wrapper .vscroll-list-view .pbl-ngrid-cell{height:inherit}.list-view-table-wrapper .vscroll-list-view .multiselect .pbl-ngrid-cell{cursor:pointer}"],encapsulation:2,changeDetection:0}),r}()},"40uZ":function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var i=r("/uUt"),n=r("3Y/2"),a=r("J/o/"),l=r("8Y7J"),c=r("3Xi6"),u=r("SVse"),b=r("iInd"),f=r("Dxy4"),h=r("ZFy/"),p=r("Tj54"),d=r("8Qe2"),v=r("rJgo"),m=r("f44v"),S=r("TSSN");function g(e,t){if(1&e&&(l.Xb(0,"a",4),l.Xb(1,"button",5),l.kc(2,"translate"),l.Xb(3,"mat-icon",6),l.Sc(4),l.Wb(),l.Wb(),l.Wb()),2&e){var r=l.jc(3);l.rc("routerLink",r.listOfSpeakersUrl),l.Fb(1),l.rc("disabled",r.disabled)("matTooltip",l.lc(2,5,r.tooltip)),l.Fb(2),l.rc("matBadge",r.listOfSpeakers.waitingSpeakerAmount>0?r.listOfSpeakers.waitingSpeakerAmount:null),l.Fb(1),l.Uc(" ",r.icon," ")}}function w(e,t){if(1&e&&(l.Xb(0,"mat-basic-chip",9),l.Xb(1,"span"),l.Sc(2),l.Wb(),l.Wb()),2&e){var r=l.jc(4);l.Fb(2),l.Tc(r.listOfSpeakers.waitingSpeakerAmount)}}function y(e,t){if(1&e&&(l.Xb(0,"button",7),l.Xb(1,"mat-icon"),l.Sc(2),l.Wb(),l.Xb(3,"span"),l.Sc(4),l.kc(5,"translate"),l.Wb(),l.Xb(6,"span"),l.Sc(7,"\xa0"),l.Wb(),l.Qc(8,w,3,1,"mat-basic-chip",8),l.Wb()),2&e){var r=l.jc(3);l.rc("routerLink",r.listOfSpeakers.listOfSpeakersUrl),l.Fb(2),l.Tc(r.icon),l.Fb(2),l.Tc(l.lc(5,4,"List of speakers")),l.Fb(4),l.rc("ngIf",r.listOfSpeakers.waitingSpeakerAmount>0)}}function k(e,t){if(1&e&&(l.Vb(0),l.Qc(1,g,5,7,"a",2),l.Qc(2,y,9,6,"button",3),l.Ub()),2&e){var r=l.jc(2);l.Fb(1),l.rc("ngIf",!r.menuItem),l.Fb(1),l.rc("ngIf",r.menuItem)}}function j(e,t){if(1&e&&(l.Vb(0),l.Qc(1,k,3,2,"ng-container",1),l.Ub()),2&e){var r=l.jc();l.Fb(1),l.rc("ngIf",r.listOfSpeakers)}}var O,x=((O=function(){function e(t){o(this,e),this.listOfSpeakersRepo=t,this.menuItem=!1}return s(e,[{key:"ngOnDestroy",value:function(){this.cleanLosSub()}},{key:"cleanLosSub",value:function(){this.losSub&&(this.losSub.unsubscribe(),this.losSub=null)}},{key:"object",set:function(e){var t,r=this;t=Object(a.b)(e)?e.listOfSpeakers:function(e){return!!e&&void 0!==e.id&&void 0!==e.collection}(e)?this.listOfSpeakersRepo.findByContentObject(e):null,this.cleanLosSub(),t&&(this.losSub=this.listOfSpeakersRepo.getViewModelObservable(t.id).pipe(Object(i.a)()).subscribe((function(e){r.listOfSpeakers=e})))}},{key:"listOfSpeakersUrl",get:function(){if(!this.disabled)return this.listOfSpeakers.listOfSpeakersUrl}},{key:"icon",get:function(){return this.listOfSpeakers.closed?"voice_over_off":"record_voice_over"}},{key:"tooltip",get:function(){return this.listOfSpeakers.closed?"The list of speakers is closed.":"List of speakers"}}]),e}()).\u0275fac=function(e){return new(e||O)(l.Rb(n.a))},O.\u0275cmp=l.Lb({type:O,selectors:[["os-speaker-button"]],inputs:{object:"object",disabled:"disabled",menuItem:"menuItem"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],["class","anchor-button",3,"routerLink",4,"ngIf"],["type","button","mat-menu-item","",3,"routerLink",4,"ngIf"],[1,"anchor-button",3,"routerLink"],["type","button","mat-icon-button","",3,"disabled","matTooltip"],["matBadgeColor","accent",3,"matBadge"],["type","button","mat-menu-item","",3,"routerLink"],["disableRipple","","class","lightblue",4,"ngIf"],["disableRipple","",1,"lightblue"]],template:function(e,t){1&e&&l.Qc(0,j,2,1,"ng-container",0),2&e&&l.rc("osPerms","agenda.can_see_list_of_speakers")},directives:[c.a,u.t,b.i,f.b,h.c,p.a,d.a,v.c,b.g,m.a],pipes:[S.j],styles:[".mat-basic-chip .mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],encapsulation:2}),O)}}])}();