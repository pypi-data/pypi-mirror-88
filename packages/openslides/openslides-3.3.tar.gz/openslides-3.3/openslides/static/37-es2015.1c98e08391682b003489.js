(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"76GY":function(t,e,a){"use strict";a.d(e,"a",(function(){return y}));var n=a("w7eE"),s=a("OwvW"),o=a("qnZ9"),c=a("ykax"),i=a("8Y7J"),r=a("cUpR"),l=a("TSSN"),b=a("SVse"),p=a("iCsr"),u=a("vYAO"),h=a("j7f2"),d=a("6ako"),g=a("QUb3");function f(t,e){if(1&t&&(i.Xb(0,"os-icon-container",10),i.Sc(1),i.kc(2,"translate"),i.kc(3,"pollKeyVerbose"),i.Wb()),2&t){const t=i.jc().$implicit,e=i.jc(3);i.rc("icon",t.value[0].icon)("size",e.iconSize),i.Fb(1),i.Uc(" ",i.lc(2,3,i.lc(3,5,t.votingOption))," ")}}function C(t,e){if(1&t&&(i.Xb(0,"span"),i.Sc(1),i.kc(2,"translate"),i.kc(3,"pollKeyVerbose"),i.Wb()),2&t){const t=i.jc().$implicit;i.Fb(1),i.Uc(" ",i.lc(2,1,i.lc(3,3,t.votingOption))," ")}}function v(t,e){if(1&t&&(i.Xb(0,"span"),i.Sc(1),i.kc(2,"pollPercentBase"),i.Wb()),2&t){const t=i.jc().$implicit,e=i.jc(3);i.Fb(1),i.Uc(" ",i.nc(2,1,t.value[0].amount,e.poll,"motion")," ")}}function m(t,e){if(1&t&&(i.Xb(0,"tr"),i.Xb(1,"td"),i.Qc(2,f,4,7,"os-icon-container",8),i.Qc(3,C,4,5,"span",2),i.Wb(),i.Xb(4,"td",9),i.Qc(5,v,3,5,"span",2),i.Wb(),i.Xb(6,"td",9),i.Sc(7),i.kc(8,"parsePollNumber"),i.Wb(),i.Wb()),2&t){const t=e.$implicit;i.Hb(t.votingOption),i.Fb(2),i.rc("ngIf",t.value[0].icon),i.Fb(1),i.rc("ngIf",!t.value[0].icon),i.Fb(2),i.rc("ngIf",t.value[0].showPercent),i.Fb(2),i.Uc(" ",i.lc(8,6,t.value[0].amount)," ")}}function S(t,e){if(1&t&&(i.Vb(0),i.Xb(1,"table",3),i.Xb(2,"tbody"),i.Xb(3,"tr"),i.Sb(4,"th"),i.Xb(5,"th",4),i.Sc(6),i.kc(7,"translate"),i.Wb(),i.Wb(),i.Qc(8,m,9,8,"tr",5),i.Wb(),i.Wb(),i.Xb(9,"div",6),i.Sb(10,"os-charts",7),i.Wb(),i.Ub()),2&t){const t=i.jc(2);i.Fb(6),i.Tc(i.lc(7,4,"Votes")),i.Fb(2),i.rc("ngForOf",t.tableData)("ngForTrackBy",t.trackByIndex),i.Fb(2),i.rc("data",t.chartData)}}function P(t,e){1&t&&(i.Xb(0,"div"),i.Xb(1,"i"),i.Sc(2),i.kc(3,"translate"),i.Wb(),i.Wb()),2&t&&(i.Fb(2),i.Uc(" ",i.lc(3,1,"No results yet.")," "))}function O(t,e){1&t&&(i.Xb(0,"div"),i.Xb(1,"i"),i.Sc(2),i.kc(3,"translate"),i.Wb(),i.Wb()),2&t&&(i.Fb(2),i.Uc(" ",i.lc(3,1,"Counting of votes is in progress ...")," "))}function k(t,e){if(1&t&&(i.Xb(0,"div",1),i.Qc(1,S,11,6,"ng-container",2),i.Qc(2,P,4,3,"div",2),i.Qc(3,O,4,3,"div",2),i.Wb()),2&t){const t=i.jc();i.Fb(1),i.rc("ngIf",t.hasResults&&t.canSeeResults),i.Fb(1),i.rc("ngIf",!t.hasResults),i.Fb(1),i.rc("ngIf",t.hasResults&&!t.canSeeResults)}}let y=(()=>{class t extends n.a{constructor(t,e,a,n,s){super(t,e),this.pollService=a,this.cd=n,this.operator=s,this.iconSize="large"}set poll(t){this._poll=t,this.setTableData(),this.setChartData(),this.cd.markForCheck()}get poll(){return this._poll}get state(){return this.poll.state}get hasResults(){return this.isFinished||this.isPublished}get isFinished(){return this.state===o.e.Finished}get isPublished(){return this.state===o.e.Published}get canSeeResults(){return this.operator.hasPerms(this.permission.motionsCanManagePolls)||this.isPublished}setTableData(){this.tableData=this.pollService.generateTableData(this.poll)}setChartData(){this.chartData=this.pollService.generateChartData(this.poll)}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.c),i.Rb(l.k),i.Rb(c.a),i.Rb(i.h),i.Rb(s.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",iconSize:"iconSize"},features:[i.Cb],decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[4,"ngIf"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf","ngForTrackBy"],[1,"doughnut-chart"],["type","doughnut",3,"data"],[3,"icon","size",4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"]],template:function(t,e){1&t&&i.Qc(0,k,4,3,"div",0),2&t&&i.rc("ngIf",e.poll)},directives:[b.t,b.s,p.a,u.a],pipes:[l.j,h.a,d.a,g.a],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t})()},"9st3":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a("Ri39");var n=a("8Y7J");let s=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=n.Mb({type:t,inputs:{data:"data",projector:"projector"}}),t})()},SQVg:function(t,e,a){"use strict";a.r(e),a.d(e,"MotionPollSlideModule",(function(){return f}));var n=a("SVse"),s=a("PCNd"),o=a("DGVe"),c=a("qKrL"),i=a("qnZ9"),r=a("ykax"),l=a("JTqh"),b=a("8Y7J"),p=a("76GY");function u(t,e){if(1&t&&(b.Xb(0,"span"),b.Sc(1),b.Wb()),2&t){const t=b.jc(2);b.Fb(1),b.Uc("",t.data.data.motion.identifier,":")}}function h(t,e){if(1&t&&(b.Xb(0,"div"),b.Sb(1,"os-motion-poll-detail-content",4),b.Wb()),2&t){const t=b.jc(2);b.Fb(1),b.rc("poll",t.pollData)}}function d(t,e){if(1&t&&(b.Vb(0),b.Xb(1,"div",1),b.Xb(2,"h1",2),b.Qc(3,u,2,1,"span",0),b.Sc(4),b.Wb(),b.Xb(5,"h2",3),b.Sc(6),b.Wb(),b.Wb(),b.Qc(7,h,2,1,"div",0),b.Ub()),2&t){const t=b.jc();b.Fb(3),b.rc("ngIf",t.data.data.motion.identifier),b.Fb(1),b.Uc(" ",t.data.data.motion.title," "),b.Fb(2),b.Tc(t.data.data.poll.title),b.Fb(1),b.rc("ngIf",t.data.data.poll.state===t.PollState.Published)}}let g=(()=>{class t extends l.a{constructor(t){super(t),this.PollState=i.e,this.chartDataSubject.subscribe(()=>{if(this.data&&this.data.data){this.pollData=this.data.data.poll;const t=this.pollData.options[0];this.voteYes=t.yes,this.voteNo=t.no,this.voteAbstain=t.abstain}})}getDecimalFields(){return c.a.DECIMAL_FIELDS}showChart(){return this.pollService.showChart(this.pollData)}getTableData(){return this.pollService.generateTableData(this.pollData)}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(r.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["os-motion-poll-slide"]],features:[b.Cb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slidetitle"],[1,"motion-title"],[1,"poll-title"],["iconSize","gigantic",3,"poll"]],template:function(t,e){1&t&&b.Qc(0,d,8,4,"ng-container",0),2&t&&b.rc("ngIf",e.data&&e.data.data)},directives:[n.t,p.a],styles:[".motion-title[_ngcontent-%COMP%]{margin:0 0 10px}"]}),t})(),f=(()=>{class t{}return t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({factory:function(e){return new(e||t)},providers:[{provide:o.a.token,useValue:g}],imports:[[n.c,s.a]]}),t})()},iCsr:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var n=a("mV3u"),s=a("8Y7J"),o=a("cUpR"),c=a("TSSN"),i=a("zHaW"),r=a("SVse"),l=a("hrfs");function b(t,e){if(1&t&&s.Sb(0,"canvas",2),2&t){const t=s.jc();s.rc("datasets",t.isCircle?null:t.chartData)("data",t.isCircle?t.chartData:null)("colors",t.circleColors)("labels",t.labels)("options",t.chartOptions)("chartType",t.type)("legend",t.legend)}}let p=(()=>{class t extends n.a{constructor(t,e,a){super(t,e,a),this.type="horizontalBar",this.legend=!1}set data(t){t&&this.progressInputData(t)}get chartOptions(){return this.isCircle?{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},legend:{position:"left"}}:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,stepSize:1},stacked:!0}],yAxes:[{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{mirror:!0,labelOffset:-20},stacked:!0}]}}}get isCircle(){return"pie"===this.type||"doughnut"===this.type}calcBarChartHeight(){if(!this.isCircle)return 120+60*this.labels.length+"px"}progressInputData(t){this.isCircle?(this.chartData=t.flatMap(t=>t.data),this.circleColors=[{backgroundColor:t.map(t=>t.backgroundColor).filter(t=>!!t),hoverBackgroundColor:t.map(t=>t.hoverBackgroundColor).filter(t=>!!t)}]):this.chartData=t,this.labels||(this.labels=t.map(t=>t.label))}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(o.c),s.Rb(c.k),s.Rb(i.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["os-charts"]],inputs:{type:"type",labels:"labels",legend:"legend",data:"data"},features:[s.Cb],decls:2,vars:3,consts:[[1,"charts-wrapper"],["class","chart-js-canvas","baseChart","",3,"datasets","data","colors","labels","options","chartType","legend",4,"ngIf"],["baseChart","",1,"chart-js-canvas",3,"datasets","data","colors","labels","options","chartType","legend"]],template:function(t,e){1&t&&(s.Xb(0,"div",0),s.Qc(1,b,1,7,"canvas",1),s.Wb()),2&t&&(s.Nc("height",e.calcBarChartHeight()),s.Fb(1),s.rc("ngIf",e.chartData&&e.chartData.length))},directives:[r.t,l.a],styles:[".charts-wrapper[_ngcontent-%COMP%]{position:relative;display:block;height:100%;margin:auto}"],changeDetection:0}),t})()}}]);