(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[35],{1938:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),c=n(12),l=n.n(c),s=n(13),u=n.n(s),f=n(5),d=n.n(f),b=(n(1),n(247)),p=n.n(b),h=n(408),y=n(0);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var O=function(t){l()(n,t);var e=v(n);function n(){return a()(this,n),e.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var t=this.getTitle();return Object(y.f)(p.a,{title:"".concat(t?"".concat(t," - "):"","Sentry")},this.renderComponent())}}]),n}(h.a);O.displayName="AsyncView"},1939:function(t,e,n){"use strict";var r=n(16),a=n.n(r),i=n(9),o=n.n(i),c=n(10),l=n.n(c),s=n(12),u=n.n(s),f=n(13),d=n.n(f),b=n(5),p=n.n(b),h=n(3),y=n(1),v=n.n(y),O=n(204),j=n(8),g=n(0);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var w=function(t){u()(n,t);var e=m(n);function n(){return o()(this,n),e.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var t=this.props,e=t.icon,n=t.title,r=t.subtitle,i=t.action,o=t.tabs,c=t.noTitleStyles,l=a()(t,["icon","title","subtitle","action","tabs","noTitleStyles"]);return Object(g.f)("div",l,Object(g.f)(P,null,Object(g.f)(S,null,e&&Object(g.f)(F,null,e),n&&Object(g.f)(R,{tabs:o,styled:c},Object(g.f)(O.a,null,n),r&&Object(g.f)(k,null,r))),i&&Object(g.f)(x,{tabs:o},i)),o&&Object(g.f)("div",null,o))}}]),n}(v.a.Component);w.displayName="UnstyledSettingsPageHeader",w.defaultProps={noTitleStyles:!1};var P=Object(h.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),S=Object(h.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),R=Object(h.a)("div",{target:"e1uay4fd2",label:"Title"})((function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(t){return t.tabs?"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(2)," 0"):"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(4)," 0")}),";"),k=Object(h.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(t){return t.theme.gray400}),";font-weight:400;font-size:",(function(t){return t.theme.fontSizeLarge}),";padding:",Object(j.a)(1.5)," 0 ",Object(j.a)(3),";"),F=Object(h.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(j.a)(1),";"),x=Object(h.a)("div",{target:"e1uay4fd5",label:"Action"})((function(t){return t.tabs?"margin-top: ".concat(Object(j.a)(2)):null}),";"),D=Object(h.a)(w,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(j.a)(4),";");e.a=D},1945:function(t,e,n){"use strict";var r=n(6),a=n.n(r),i=n(7),o=n.n(i),c=n(16),l=n.n(c),s=n(9),u=n.n(s),f=n(10),d=n.n(f),b=n(12),p=n.n(b),h=n(13),y=n.n(h),v=n(5),O=n.n(v),j=n(1),g=n.n(j),m=n(47),w=n(2),P=n.n(w),S=n(278),R=n(677),k=n.n(R),F=n(21),x=n(674),D=n(1947),q=n(0);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O()(t);if(e){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var N=function(t){p()(n,t);var e=A(n);function n(){var t;u()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={highlighted:H(t.props,t.context).hash},t}return d()(n,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){if(H(this.props,this.context).hash!==H(t,this.context).hash){var e=H(t,this.context).hash;this.scrollToHash(e),this.setState({highlighted:e})}}},{key:"scrollToHash",value:function(t){var e=t||H(this.props,this.context).hash;if(e)try{k()(Object(x.a)(decodeURIComponent(e)),{align:"middle",offset:-100})}catch(t){m.c(t)}}},{key:"shouldDisplayForm",value:function(t){var e=t.filter((function(t){return"function"!=typeof t&&Object(F.d)(null==t?void 0:t.visible)}));if(t.length===e.length){var n=this.props,r=n.additionalFieldProps,a=l()(n,["additionalFieldProps"]);return!e.every((function(t){return"function"==typeof t.visible?!t.visible(T(T({},a),r)):!t.visible}))}return!0}},{key:"renderForm",value:function(t){var e=t.fields,n=t.formPanelProps,r=t.title;return this.shouldDisplayForm(e)||(null==n?void 0:n.renderFooter)||(null==n?void 0:n.renderHeader)?Object(q.f)(D.a,a()({title:r,fields:e},n)):null}},{key:"render",value:function(){var t=this,e=this.props,n=e.access,r=e.fields,a=e.title,i=e.forms,o=e.disabled,c=e.features,s=e.additionalFieldProps,u=e.renderFooter,f=e.renderHeader,d=(e.location,l()(e,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),b={access:n,disabled:o,features:c,additionalFieldProps:s,renderFooter:u,renderHeader:f,highlighted:this.state.highlighted};return Object(q.f)(S.Box,d,void 0!==i&&i.map((function(e,n){return Object(q.f)(g.a.Fragment,{key:n},t.renderForm(T({formPanelProps:b},e)))})),void 0===i&&void 0!==r&&this.renderForm({fields:r,formPanelProps:b,title:a}))}}]),n}(g.a.Component);function H(t,e){return t.location||e.location||{}}N.displayName="JsonForm",N.contextTypes={location:P.a.object},N.defaultProps={additionalFieldProps:{}},e.a=N},1947:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var r=n(6),a=n.n(r),i=n(16),o=n.n(i),c=n(9),l=n.n(c),s=n(10),u=n.n(s),f=n(12),d=n.n(f),b=n(13),p=n.n(b),h=n(5),y=n.n(h),v=n(1),O=n.n(v),j=n(164),g=n(674),m=n(1964),w=n(0);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var S=function(t){d()(n,t);var e=P(n);function n(){return l()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.title,r=e.fields,i=e.access,c=e.disabled,l=e.additionalFieldProps,s=e.renderFooter,u=e.renderHeader,f=o()(e,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(w.f)(j.a,{id:"string"==typeof n?Object(g.a)(n):void 0},n&&Object(w.f)(j.e,null,n),Object(w.f)(j.c,null,"function"==typeof u&&u({title:n,fields:r}),r.map((function(e){if("function"==typeof e)return e();e.defaultValue;var n=o()(e,["defaultValue"]);return!0===c&&(n.disabled=!0,n.disabledReason=void 0),Object(w.f)(m.a,a()({access:i,disabled:c,key:e.name},f,l,{field:n,highlighted:t.props.highlighted==="#".concat(e.name)}))})),"function"==typeof s&&s({title:n,fields:r})))}}]),n}(O.a.Component);S.displayName="FormPanel"},1951:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(679),a=n.n(r),i=n(542);function o(t,e){var n,r,o,c,l=e.routes,s=e.params,u=e.location,f=e.stepBack,d=l.map((function(t){return t.path||""}));"string"!=typeof t?(c=l.indexOf(t)+1,o=a()(d.slice(0,c),(function(t){return"/"===t[0]}))):o=a()(d,(function(t){return"/"===t[0]}));var b=d.slice(o,c);void 0!==f&&(b=b.slice(0,f));var p=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",h=null!==(r=null==u?void 0:u.hash)&&void 0!==r?r:"",y="".concat(b.join("")).concat("string"!=typeof t?"":t).concat(p).concat(h);return Object(i.a)(y,s)}},2132:function(t,e,n){"use strict";var r=n(3),a=Object(r.a)("div",{target:"e1pnf9a40",label:"ConfirmHeader"})({name:"1pihav0",styles:"font-size:1.2em;margin-bottom:10px;"});e.a=a},2149:function(t,e,n){"use strict";var r=n(6),a=n.n(r),i=n(9),o=n.n(i),c=n(10),l=n.n(c),s=n(12),u=n.n(s),f=n(13),d=n.n(f),b=n(5),p=n.n(b),h=n(1),y=n.n(h),v=n(206),O=n(4),j=n(2132),g=n(675),m=n(0);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var P=Object(m.f)(y.a.Fragment,null,Object(m.f)(j.a,null,Object(O.b)("Do you want to remove this method?")),Object(m.f)(g.a,null,Object(O.b)("Removing the last authentication method will disable two-factor authentication completely."))),S=function(t){u()(n,t);var e=w(n);function n(){return o()(this,n),e.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return Object(m.f)(v.a,a()({},this.props,{message:P}))}}]),n}(y.a.Component);S.displayName="RemoveConfirm",S.defaultProps=v.a.defaultProps,e.a=S},2232:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(235),a=n.n(r),i=n(80);function o(){var t=a.a.get("pending-invite");return t?i.parse(t):null}},2233:function(t,e,n){"use strict";n.r(e),n.d(e,"route",(function(){return i}));var r=function(t){return!t.user.isManaged},a=[{title:"Password",fields:[{name:"password",type:"secret",autoComplete:"current-password",label:"Current Password",placeholder:"",help:"Your current password",visible:r,required:!0},{name:"passwordNew",type:"secret",autoComplete:"new-password",label:"New Password",placeholder:"",help:"",required:!0,visible:r,validate:function(t){var e=t.id,n=t.form;return n[e]!==n.passwordVerify?[[e,""]]:[]}},{name:"passwordVerify",type:"secret",autoComplete:"new-password",label:"Verify New Password",placeholder:"",help:"Verify your new password",required:!0,visible:r,validate:function(t){var e=t.id,n=t.form;return n.passwordNew&&n.passwordNew!==n[e]?[[e,"Passwords do not match"]]:[]}}]}],i="/settings/account/security/";e.default=a},2928:function(t,e,n){"use strict";n.r(e);var r=n(22),a=n.n(r),i=n(30),o=n.n(i),c=n(9),l=n.n(c),s=n(10),u=n.n(s),f=n(12),d=n.n(f),b=n(13),p=n.n(b),h=n(5),y=n.n(h),v=n(3),O=(n(1),n(35)),j=n(29),g=n(696),m=n(226),w=n(415),P=n(164),S=n(31),R=n(15),k=n(4),F=n(8),x=n(1951),D=n(1938),q=n(2149),C=n(72),T=n(58),A=n(2232),N=n(0),H=Object(v.a)(C.b,{target:"e21uako0",label:"StyledAlert"})("margin:",Object(F.a)(3)," 0;"),z=function(){return Object(A.a)()?Object(N.f)(H,{"data-test-id":"require-2fa",type:"error",icon:Object(N.f)(R.B,{size:"md"})},Object(k.c)("You have been invited to an organization that requires [link:two-factor authentication]. Setup two-factor authentication below to join your organization.",{link:Object(N.f)(T.a,{href:"https://docs.sentry.io/accounts/require-2fa/"})})):null},E=n(2233),V=n(36),B=n(1944),I=n(1945);function U(){var t=V.default.get("user");return Object(N.f)(B.a,{apiMethod:"PUT",apiEndpoint:"/users/me/password/",initialData:{},onSubmitSuccess:function(t,e){e.resetForm(),Object(O.d)("Password has been changed")},onSubmitError:function(){Object(O.a)("Error changing password")},hideFooter:!0},Object(N.f)(I.a,{forms:E.default,additionalFieldProps:{user:t},renderFooter:function(){return Object(N.f)(P.f,{justifyContent:"flex-end"},Object(N.f)(j.a,{type:"submit",priority:"primary"},Object(k.b)("Change password")))},renderHeader:function(){return Object(N.f)(P.b,{type:"info"},Object(k.b)("Changing your password will invalidate all logged in sessions."))}}))}U.displayName="PasswordForm";var W=U,J=n(411),M=n(676),L=n(1939),Y=n(675);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(t){d()(n,t);var e=_(n);function n(){var t;l()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).handleSessionClose=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.requestPromise("/auth/",{method:"DELETE",data:{all:!0}});case 3:window.location.assign("/auth/login/"),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),Object(O.a)(Object(k.b)("There was a problem closing all sessions")),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),t.formatOrgSlugs=function(){var e=t.props.orgsRequire2fa.map((function(t){return t.slug}));return[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length>1?" and ":"")},t}return u()(n,[{key:"getTitle",value:function(){return Object(k.b)("Security")}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var t=this,e=this.props,n=e.authenticators,r=e.countEnrolled,a=e.deleteDisabled,i=e.onDisable,o=!(null==n?void 0:n.length);return Object(N.f)("div",null,Object(N.f)(L.a,{title:Object(k.b)("Security"),tabs:Object(N.f)(w.a,{underlined:!0},Object(N.f)(m.a,{to:Object(x.a)("",this.props),index:!0},Object(k.b)("Settings")),Object(N.f)(m.a,{to:Object(x.a)("session-history/",this.props)},Object(k.b)("Session History")))}),!o&&0===r&&Object(N.f)(z,null),Object(N.f)(W,null),Object(N.f)(P.a,null,Object(N.f)(P.e,null,Object(k.b)("Sessions")),Object(N.f)(P.c,null,Object(N.f)(M.a,{alignRight:!0,flexibleControlStateSize:!0,label:Object(k.b)("Sign out of all devices"),help:Object(k.b)("Signing out of all devices will sign you out of this device as well.")},Object(N.f)(j.a,{"data-test-id":"signoutAll",onClick:this.handleSessionClose},Object(k.b)("Sign out of all devices"))))),Object(N.f)(P.a,null,Object(N.f)(P.e,null,Object(k.b)("Two-Factor Authentication")),o&&Object(N.f)(J.a,null,Object(k.b)("No available authenticators to add")),Object(N.f)(P.c,null,!o&&(null==n?void 0:n.map((function(e){var n=e.id,r=e.authId,o=e.description,c=e.isBackupInterface,l=e.isEnrolled,s=e.configureButton,u=e.name;return Object(N.f)(Q,{key:n},Object(N.f)(X,null,Object(N.f)(Z,null,Object(N.f)(tt,{enabled:l}),Object(N.f)(K,null,u)),Object(N.f)($,null,!c&&!l&&Object(N.f)(j.a,{to:"/settings/account/security/mfa/".concat(n,"/enroll/"),size:"small",priority:"primary",className:"enroll-button"},Object(k.b)("Add")),l&&r&&Object(N.f)(j.a,{to:"/settings/account/security/mfa/".concat(r,"/"),size:"small",className:"details-button"},s),!c&&l&&Object(N.f)(S.a,{title:Object(k.b)("Two-factor authentication is required for organization(s): ".concat(t.formatOrgSlugs(),".")),disabled:!a},Object(N.f)(q.a,{onConfirm:function(){return i(e)},disabled:a},Object(N.f)(j.a,{size:"small",label:Object(k.b)("delete"),icon:Object(N.f)(R.r,null)})))),c&&!l?Object(k.b)("requires 2FA"):null),Object(N.f)(et,null,o))}))))))}}]),n}(D.a),K=Object(v.a)("span",{target:"ekt5q3n0",label:"AuthenticatorName"})({name:"1x1uhd2",styles:"font-size:1.2em;"}),Q=Object(v.a)(P.f,{target:"ekt5q3n1",label:"AuthenticatorPanelItem"})({name:"cgq59l",styles:"flex-direction:column;"}),X=Object(v.a)("div",{target:"ekt5q3n2",label:"AuthenticatorHeader"})({name:"14oqdsi",styles:"display:flex;flex:1;align-items:center;"}),Z=Object(v.a)("div",{target:"ekt5q3n3",label:"AuthenticatorTitle"})({name:"1rr4qq7",styles:"flex:1;"}),$=Object(v.a)("div",{target:"ekt5q3n4",label:"Actions"})("display:grid;grid-auto-flow:column;grid-gap:",Object(F.a)(1),";"),tt=Object(v.a)(g.a,{target:"ekt5q3n5",label:"AuthenticatorStatus"})("margin-right:",Object(F.a)(1),";"),et=Object(v.a)(Y.a,{target:"ekt5q3n6",label:"Description"})("margin-top:",Object(F.a)(2),";margin-bottom:0;");e.default=G}}]);
//# sourceMappingURL=AccountSecurity.js.map