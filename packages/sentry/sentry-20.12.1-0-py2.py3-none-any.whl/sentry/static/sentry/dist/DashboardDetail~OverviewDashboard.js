(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[20],{1940:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"f",(function(){return s})),r.d(e,"g",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"c",(function(){return d}));var n=r(3),a=r(8),o=Object(n.a)("div",{target:"e1w1bh460",label:"GridCell"})({name:"1kuy7z7",styles:"font-size:14px;"}),i=Object(n.a)(o,{target:"e1w1bh461",label:"GridCellNumber"})({name:"s2uf1z",styles:"text-align:right;"}),c=Object(n.a)("div",{target:"e1w1bh462",label:"DoubleHeaderContainer"})("display:grid;grid-template-columns:1fr 1fr;padding:",Object(a.a)(2)," ",Object(a.a)(3)," ",Object(a.a)(1)," ",Object(a.a)(3),";grid-gap:",Object(a.a)(3),";"),s=Object(n.a)("div",{target:"e1w1bh463",label:"HeaderTitle"})("display:inline-grid;grid-auto-flow:column;grid-gap:",Object(a.a)(1),";font-size:",(function(t){return t.theme.fontSizeLarge}),";color:",(function(t){return t.theme.textColor}),";align-items:center;"),u=Object(n.a)(s,{target:"e1w1bh464",label:"HeaderTitleLegend"})("background-color:",(function(t){return t.theme.white}),";border-radius:",(function(t){return t.theme.borderRadius}),";position:absolute;z-index:1;"),l=Object(n.a)("div",{target:"e1w1bh465",label:"ChartContainer"})("padding:",Object(a.a)(2)," ",Object(a.a)(3),";"),d=Object(n.a)("div",{target:"e1w1bh466",label:"ErrorPanel"})({name:"195kgij",styles:"display:flex;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:200px;position:relative;border-color:transparent;margin-bottom:0;"})},1943:function(t,e,r){"use strict";r(1);var n=r(247),a=r.n(n),o=r(0),i=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(o.f)(a.a,{title:e},t.children)};i.displayName="SentryDocumentTitle",e.a=i},2267:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return s}));var n=r(35),a=r(4);function o(t,e,r){var o=r.title,i=r.widgets,c=t.requestPromise("/organizations/".concat(e,"/dashboards/"),{method:"POST",data:{title:o,widgets:i}});return c.catch((function(t){var e,r=null!==(e=null==t?void 0:t.responseJSON)&&void 0!==e?e:null;r?Object(n.a)(r):Object(n.a)(Object(a.b)("Unable to create dashboard"))})),c}function i(t,e,r){var o={title:r.title,widgets:r.widgets},i=t.requestPromise("/organizations/".concat(e,"/dashboards/").concat(r.id,"/"),{method:"PUT",data:o});return i.catch((function(t){var e,r=null!==(e=null==t?void 0:t.responseJSON)&&void 0!==e?e:null;r?Object(n.a)(r):Object(n.a)(Object(a.b)("Unable to update dashboard"))})),i}function c(t,e,r){var o=t.requestPromise("/organizations/".concat(e,"/dashboards/").concat(r,"/"),{method:"DELETE"});return o.catch((function(t){var e,r=null!==(e=null==t?void 0:t.responseJSON)&&void 0!==e?e:null;r?Object(n.a)(r):Object(n.a)(Object(a.b)("Unable to delete dashboard"))})),o}function s(t,e,r){return t.requestPromise("/organizations/".concat(e,"/dashboards/widgets/"),{method:"POST",data:r})}},2274:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o}));var n=r(4),a={id:"",dateCreated:"",createdBy:"",title:Object(n.b)("Untitled dashboard"),widgets:[]},o=[{label:Object(n.b)("Area chart"),value:"area"},{label:Object(n.b)("Bar chart"),value:"bar"},{label:Object(n.b)("Line chart"),value:"line"}];Object(n.b)("1 Minute"),Object(n.b)("5 Minutes"),Object(n.b)("15 Minutes"),Object(n.b)("30 Minutes"),Object(n.b)("1 Hour"),Object(n.b)("1 Day")},2275:function(t,e,r){"use strict";var n=r(6),a=r.n(n),o=r(9),i=r.n(o),c=r(10),s=r.n(c),u=r(12),l=r.n(u),d=r(13),f=r.n(d),b=r(5),p=r.n(b),h=r(3),g=r(1),v=r.n(g),O=r(15),y=r(8),j=r(52),m=r(0);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var D=function(t){l()(r,t);var e=w(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={isFocused:!1,isHovering:!1},t.refInput=v.a.createRef(),t.blur=function(){t.refInput.current&&t.refInput.current.blur()},t.focus=function(){t.refInput.current&&t.refInput.current.focus()},t.onBlur=function(e){t.setState({isFocused:!1,isHovering:!1}),Object(j.a)(t.props.onBlur,r.setValueOnEvent(e))},t.onFocus=function(e){t.setState({isFocused:!0}),Object(j.a)(t.props.onFocus,r.setValueOnEvent(e))},t.onChangeUsingOnInput=function(e){Object(j.a)(t.props.onChange,r.setValueOnEvent(e))},t.onKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),t.refInput.current&&t.refInput.current.blur()),Object(j.a)(t.props.onKeyUp,r.setValueOnEvent(e))},t.onKeyUp=function(e){"Escape"===e.key&&t.refInput.current&&t.refInput.current.blur(),Object(j.a)(t.props.onKeyUp,r.setValueOnEvent(e))},t.onMouseEnter=function(){t.setState({isHovering:!t.props.disabled})},t.onMouseMove=function(){t.setState({isHovering:!t.props.disabled})},t.onMouseLeave=function(){t.setState({isHovering:!1})},t.onClickIcon=function(e){t.props.disabled||(t.refInput.current&&t.refInput.current.focus(),Object(j.a)(t.props.onClick,r.setValueOnEvent(e)))},t}return s()(r,[{key:"render",value:function(){var t=this.props,e=t.value,r=t.placeholder,n=t.disabled,o=this.state.isFocused,i=e||r||"";return Object(m.f)(k,{style:this.props.style,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},Object(m.f)(S,a()({},this.props,{ref:this.refInput,suppressContentEditableWarning:!0,contentEditable:!this.props.disabled,isHovering:this.state.isHovering,isDisabled:this.props.disabled,onBlur:this.onBlur,onFocus:this.onFocus,onInput:this.onChangeUsingOnInput,onChange:this.onChangeUsingOnInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp}),i),!o&&!n&&Object(m.f)("div",{onClick:this.onClickIcon},Object(m.f)(C,null)))}}],[{key:"setValueOnEvent",value:function(t){var e=t.target.innerText||t.currentTarget.innerText;return t.target.value=e,t.currentTarget.value=e,t}}]),r}(v.a.Component);D.displayName="InputInline";var k=Object(h.a)("div",{target:"e9oz5gz0",label:"Wrapper"})({name:"1684o59",styles:"display:inline-flex;align-items:center;vertical-align:text-bottom;"}),S=Object(h.a)("div",{target:"e9oz5gz1",label:"Input"})("min-width:40px;margin:0;border:1px solid ",(function(t){return t.isHovering?t.theme.border:"transparent"}),";outline:none;line-height:inherit;border-radius:",Object(y.a)(.5),";background:transparent;&:focus,&:active{border:1px solid ",(function(t){return t.isDisabled?"transparent":t.theme.border}),";background-color:",(function(t){return t.isDisabled?"transparent":t.theme.gray200}),";}"),C=Object(h.a)(O.u,{target:"e9oz5gz2",label:"StyledIconEdit"})("color:",(function(t){return t.theme.gray300}),";margin-left:",Object(y.a)(.5),";&:hover{cursor:pointer;}");e.a=D},2337:function(t,e,r){"use strict";var n=r(7),a=r.n(n),o=r(9),i=r.n(o),c=r(10),s=r.n(c),u=r(12),l=r.n(u),d=r(13),f=r.n(d),b=r(5),p=r.n(b),h=r(3),g=r(1),v=r.n(g),O=r(11),y=r(61),j=r.n(y),m=r(688),w=r(1953),D=r(1949),k=r(1955),S=r(1957),C=r(1960),P=r(205),z=r(144),E=r(164),x=r(248),R=r(15),I=r(4),U=r(8),W=r(1946),M=r(63),A=r(191),H=r(24),q=r(49),L=r(305),T=r(57),F=r(1940),N=r(22),B=r.n(N),V=r(30),K=r.n(V),J=r(33),G=r.n(J),Q=r(1973),Y=r(45);function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}function _(t,e){return{seriesName:e,data:t.data.map((function(t){var e=G()(t,2);return{name:1e3*e[0],value:e[1].reduce((function(t,e){return t+e.count}),0)}}))}}function tt(t,e){var r=[],n=t.name;if(Object(P.f)(e)){var a=Object.keys(e).map((function(t){var r=n?"".concat(n," : ").concat(t):t,a=e[t];return[a.order||0,_(a,r)]})).sort((function(t,e){return t[0]-e[0]})).map((function(t){return t[1]}));r=r.concat(a)}else{var o=t.fields[0],i=n?"".concat(n," : ").concat(o):o,c=_(e,i);r.push(c)}return r}var et=function(t){l()(n,t);var e,r=$(n);function n(){var t;i()(this,n);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=r.call.apply(r,[this].concat(a))).state={loading:!0,error:!1,results:[]},t}return s()(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t){var e=this.props,r=e.selection,n=e.widget;j()(n.interval,t.widget.interval)&&j()(n.queries,t.widget.queries)&&j()(r,t.selection)||this.fetchData()}},{key:"fetchData",value:(e=K()(B.a.mark((function t(){var e,r,n,a,o,i,c,s,u,l,d,f,b,p,h=this;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props,r=e.selection,n=e.api,a=e.organization,o=e.widget,this.setState({loading:!0,results:[]}),i=r.datetime.period,c=r.datetime,s=c.start,u=c.end,l=r.projects,d=r.environments,g=o.interval,v={start:s,end:u,period:i},O=void 0,O=Object(Y.n)(g),f=Object(P.c)(v)/O>4e3?Object(P.d)(v,!0):g,b=o.queries.map((function(t){var e={organization:a,interval:f,start:s,end:u,project:l,environment:d,period:i,query:t.conditions,yAxis:t.fields,includePrevious:!1};return Object(Q.a)(n,e)})),p=0,b.forEach(function(){var t=K()(B.a.mark((function t(e,r){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:n=t.sent,p++,h.setState((function(t){var e=t.results.concat(tt(o.queries[r],n));return Z(Z({},t),{},{results:e,loading:p!==b.length})})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),h.setState({error:!0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}var g,v,O}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props.children,e=this.state;return t({loading:e.loading,results:e.results,error:e.error})}}]),n}(v.a.Component);et.displayName="WidgetQueries";var rt=et,nt=r(0);function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ct=function(t){l()(r,t);var e=it(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={hovering:!1},t}return s()(r,[{key:"shouldComponentUpdate",value:function(t,e){return!j()(t.widget,this.props.widget)||!j()(t.selection,this.props.selection)||e.hovering!==this.state.hovering}},{key:"chartComponent",value:function(t){switch(this.props.widget.displayType){case"bar":return Object(nt.f)(m.a,t);case"line":default:return Object(nt.f)(k.a,t)}}},{key:"renderVisual",value:function(){var t,e,r,n=this,a=this.props,o=a.location,i=a.router,c=a.selection,s=a.api,u=a.organization,l=a.widget,d=c.datetime.period,f=c.datetime,b=f.start,p=f.end,h=c.projects,g=c.environments,v={right:10,top:5,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",type:"plain",textStyle:{verticalAlign:"top",fontSize:11,fontFamily:"Rubik"},selected:Object(P.e)(o),formatter:function(t){var e=Object(M.n)(t);if(null!==e){var r=Object(M.o)(e);null!==r&&(t=r.toUpperCase())}return t}},O=null!==(t=null===(e=l.queries[0])||void 0===e?void 0:null===(r=e.fields)||void 0===r?void 0:r[0])&&void 0!==t?t:"count()",y={grid:{left:"0px",right:"0px",top:"40px",bottom:"10px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:W.c},yAxis:{axisLabel:{color:H.b.chartLabel,formatter:function(t){return Object(W.b)(t,O)}}}};return Object(nt.f)(w.a,{router:i,period:d,start:b,end:p,projects:h,environments:g},(function(t){return Object(nt.f)(rt,{api:s,organization:u,widget:l,selection:c},(function(e){var r=e.results,a=e.error,o=e.loading;if(a)return Object(nt.f)(D.a,null,Object(nt.f)(R.Ib,{color:"gray500",size:"lg"}));var i=r?H.b.charts.getColorPalette(r.length-2):[],c=r?r.map((function(t,e){return ot(ot({},t),{},{color:i[e]})})):[];return t.toolBox.z=-1,Object(nt.f)(S.a,{loading:o,reloading:o},Object(nt.f)(C.a,{visible:o}),Object(A.a)({value:n.chartComponent(ot(ot(ot({},t),y),{},{legend:v,series:c})),fixed:"Widget Chart"}))}))}))}},{key:"renderEditPanel",value:function(){if(!this.state.hovering||!this.props.isEditing)return null;var t=this.props,e=t.onEdit,r=t.onDelete;return Object(nt.f)(lt,null,Object(nt.f)(dt,null,Object(nt.f)(R.G,{color:"gray500",size:"lg"}),Object(nt.f)(ft,{onClick:function(){e()}},Object(nt.f)(R.u,{color:"gray500",size:"lg"})),Object(nt.f)(ft,{onClick:function(){r()}},Object(nt.f)(R.r,{color:"gray500",size:"lg"}))))}},{key:"render",value:function(){var t=this,e=this.props.widget;return Object(nt.f)(z.a,{customComponent:Object(nt.f)(st,null,Object(I.b)("Error loading widget data"))},Object(nt.f)(ut,{onMouseLeave:function(){t.state.hovering&&t.setState({hovering:!1})},onMouseOver:function(){t.state.hovering||t.setState({hovering:!0})}},Object(nt.f)(F.a,null,Object(nt.f)(F.g,null,e.title),this.renderVisual(),this.renderEditPanel())))}}]),r}(v.a.Component);ct.displayName="WidgetCard";e.a=Object(q.a)(Object(T.a)(Object(L.a)(O.withRouter(ct))));var st=Object(h.a)(x.a,{target:"e1n2ojl30",label:"ErrorCard"})("display:flex;align-items:center;justify-content:center;background-color:",(function(t){return t.theme.alert.error.backgroundLight}),";border:1px solid ",(function(t){return t.theme.alert.error.border}),";color:",(function(t){return t.theme.alert.error.textLight}),";border-radius:",(function(t){return t.theme.borderRadius}),";margin-bottom:",Object(U.a)(2),";"),ut=Object(h.a)(E.a,{target:"e1n2ojl31",label:"StyledPanel"})({name:"1uk1gs8",styles:"margin:0;"}),lt=Object(h.a)("div",{target:"e1n2ojl32",label:"EditPanel"})({name:"hm5z1d",styles:"position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(255,255,255,0.5);"}),dt=Object(h.a)("div",{target:"e1n2ojl33",label:"IconContainer"})({name:"1tmn3mk",styles:"display:flex;> * + *{margin-left:50px;}"}),ft=Object(h.a)("div",{target:"e1n2ojl34",label:"IconClick"})({name:"1p3qk0r",styles:"&:hover{cursor:pointer;}"})},2799:function(t,e,r){"use strict";r.r(e);var n=r(7),a=r.n(n),o=r(9),i=r.n(o),c=r(10),s=r.n(c),u=r(12),l=r.n(u),d=r(13),f=r.n(d),b=r(5),p=r.n(b),h=r(3),g=r(1),v=r.n(g),O=r(11),y=r(61),j=r.n(y),m=r(2267),w=r(35),D=r(698),k=r(44),S=r(681),C=r(4),P=r(8),z=r(49),E=r(57),x=r(29),R=r(109),I=r(180),U=r(15),W=r(0);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var A=function(t){l()(r,t);var e=M(r);function r(){return i()(this,r),e.apply(this,arguments)}return s()(r,[{key:"render",value:function(){var t=this,e=this.props,r=e.dashboardState,n=e.dashboards,a=e.dashboard,o=e.onEdit,i=e.onCreate,c=e.onCancel,s=e.onCommit,u=e.onDelete,l=Object(W.f)(x.a,{"data-test-id":"dashboard-cancel",onClick:function(t){t.preventDefault(),c()}},Object(C.b)("Cancel"));if("edit"===r)return Object(W.f)(R.a,{gap:1,key:"edit-controls"},l,Object(W.f)(x.a,{"data-test-id":"dashboard-delete",onClick:function(t){t.preventDefault(),u()},priority:"danger"},Object(C.b)("Delete")),Object(W.f)(x.a,{"data-test-id":"dashboard-commit",onClick:function(t){t.preventDefault(),s()},priority:"primary"},Object(C.b)("Finish Editing")));if("create"===r)return Object(W.f)(R.a,{gap:1,key:"create-controls"},l,Object(W.f)(x.a,{"data-test-id":"dashboard-commit",onClick:function(t){t.preventDefault(),s()},priority:"primary",icon:Object(W.f)(U.b,{size:"xs",isCircled:!0})},Object(C.b)("Create Dashboard")));var d=n.map((function(t){return{label:t.title,value:t}})),f=void 0;return a?f={label:a.title,value:a}:d.length&&(f=d[0]),Object(W.f)(R.a,{gap:1,key:"controls"},Object(W.f)(H,null,Object(W.f)(I.a,{key:"select",name:"parameter",placeholder:Object(C.b)("Select Dashboard"),options:d,value:f,onChange:function(e){var r=e.value,n=t.props.organization;O.browserHistory.push({pathname:"/organizations/".concat(n.slug,"/dashboards/").concat(r.id,"/"),query:{}})}})),Object(W.f)(x.a,{"data-test-id":"dashboard-edit",onClick:function(t){t.preventDefault(),o()},icon:Object(W.f)(U.u,{size:"xs"})},Object(C.b)("Edit")),Object(W.f)(x.a,{"data-test-id":"dashboard-create",onClick:function(t){t.preventDefault(),i()},priority:"primary",icon:Object(W.f)(U.b,{size:"xs",isCircled:!0})},Object(C.b)("Create Dashboard")))}}]),r}(v.a.Component);A.displayName="Controls";var H=Object(h.a)("div",{target:"e104d2ty0",label:"DashboardSelect"})("min-width:200px;font-size:",(function(t){return t.theme.fontSizeMedium}),";"),q=A,L=r(28),T=r.n(L),F=r(65),N=r(544),B=r(305),V=r(2337);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var J=function(t){l()(r,t);var e=K(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleStartAdd=function(){var e=t.props,r=e.organization,n=e.dashboard,a=e.selection;Object(F.b)({organization:r,dashboard:n,selection:a,onAddWidget:t.handleAddComplete})},t.handleAddComplete=function(e){t.props.onUpdate([].concat(T()(t.props.dashboard.widgets),[e]))},t.handleUpdateComplete=function(e){return function(r){var n=T()(t.props.dashboard.widgets);n[e]=r,t.props.onUpdate(n)}},t.handleDeleteWidget=function(e){return function(){var r=T()(t.props.dashboard.widgets);r.splice(e,1),t.props.onUpdate(r)}},t.handleEditWidget=function(e,r){return function(){var n=t.props,a=n.organization,o=n.dashboard,i=n.selection;Object(F.b)({organization:a,dashboard:o,widget:e,selection:i,onAddWidget:t.handleAddComplete,onUpdateWidget:t.handleUpdateComplete(r)})}},t}return s()(r,[{key:"componentDidMount",value:function(){this.props.isEditing&&this.fetchTags()}},{key:"componentDidUpdate",value:function(t){var e=this.props.isEditing;t.isEditing!==e&&e&&this.fetchTags()}},{key:"fetchTags",value:function(){var t=this.props,e=t.api,r=t.organization,n=t.selection;Object(N.c)(e,r.slug,n)}},{key:"renderWidget",value:function(t,e){var r=this.props.isEditing;return Object(W.f)(Y,{key:"".concat(t.id,":").concat(e)},Object(W.f)(V.a,{widget:t,isEditing:r,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(t,e)}))}},{key:"render",value:function(){var t=this,e=this.props,r=e.isEditing,n=e.dashboard;return Object(W.f)(Q,null,n.widgets.map((function(e,r){return t.renderWidget(e,r)})),r&&Object(W.f)(Y,{key:"add"},Object(W.f)(X,{key:"add",onClick:this.handleStartAdd},Object(W.f)(U.b,{size:"lg",isCircled:!0,color:"inactive"}))))}}]),r}(v.a.Component);J.displayName="Dashboard";var G=Object(z.a)(Object(B.a)(J)),Q=Object(h.a)("div",{target:"e1nz851n0",label:"WidgetContainer"})("display:grid;grid-template-columns:repeat(2,1fr);grid-gap:",Object(P.a)(2),";"),Y=Object(h.a)("div",{target:"e1nz851n1",label:"WidgetWrapper"})({name:"79elbk",styles:"position:relative;"}),X=Object(h.a)("a",{target:"e1nz851n2",label:"AddWidgetWrapper"})("width:100%;height:100%;min-height:200px;border:2px dashed ",(function(t){return t.theme.border}),";border-radius:",(function(t){return t.theme.borderRadius}),";display:flex;align-items:center;justify-content:center;"),Z=r(2274),$=r(115),_=r.n($),tt=r(408),et=r(682),rt=r(1943),nt=r(204);function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ct=function(t){l()(r,t);var e=it(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={loading:!0,reloading:!1,error:!1,errors:[],dashboards:[],selectedDashboard:null},t}return s()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,r=t.params,n="/organizations/".concat(e.slug,"/dashboards/"),a=[["dashboards",n]];return r.dashboardId&&a.push(["selectedDashboard","".concat(n).concat(r.dashboardId,"/")]),a}},{key:"getDashboards",value:function(){var t=this.state.dashboards;return Array.isArray(t)?t:[]}},{key:"onRequestSuccess",value:function(t){var e=t.stateKey,r=t.data,n=this.props,a=n.params,o=n.organization;if(!a.dashboardId&&"selectedDashboard"!==e){var i=r.length?r[0].id:"default-overview",c="/organizations/".concat(o.slug,"/dashboards/").concat(i,"/");O.browserHistory.replace({pathname:c})}}},{key:"renderBody",value:function(){var t=this.props,e=t.organization,r=t.children,n=this.state,a=n.selectedDashboard,o=n.error;return Object(W.f)(nt.b,null,Object(W.f)(et.a,{organization:e},r({error:o,dashboard:a,dashboards:this.getDashboards(),reloadData:this.reloadData.bind(this)})))}},{key:"renderError",value:function(t){return Object.values(this.state.errors).find((function(t){return t&&404===t.status}))?Object(W.f)(D.a,null):_()(p()(r.prototype),"renderError",this).call(this,t,!0,!0)}},{key:"renderComponent",value:function(){var t=this.props,e=t.organization,n=t.location;return e.features.includes("dashboards-v2")?Object(W.f)(rt.a,{title:Object(C.b)("Dashboards"),objSlug:e.slug},_()(p()(r.prototype),"renderComponent",this).call(this)):(O.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboards/"),query:ot({},n.query)}),null)}}]),r}(tt.a),st=r(6),ut=r.n(st),lt=r(2275);function dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var pt=function(t){l()(r,t);var e=bt(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).refInput=v.a.createRef(),t.onBlur=function(e){var r=(e.target.value||"").trim().slice(0,255).trim();if(!r)return Object(w.a)(Object(C.b)("Please set the title for this dashboard")),void(t.refInput.current&&t.refInput.current.focus());var n=t.props,a=n.dashboard,o=n.onUpdate;a&&(e.target.innerText=r,o(ft(ft({},a),{},{title:r})))},t}return s()(r,[{key:"render",value:function(){var t=this.props,e=t.dashboard,r=t.isEditing;return e?r?Object(W.f)(ht,null,Object(W.f)(gt,{name:"dashboard-title",ref:this.refInput,value:e.title,onBlur:this.onBlur})):Object(W.f)(ht,null,e.title):Object(W.f)(ht,null,Object(C.b)("Dashboards"))}}]),r}(v.a.Component);pt.displayName="DashboardTitle";var ht=Object(h.a)("div",{target:"e14jh2hu0",label:"Container"})("margin-right:",Object(P.a)(1),";"),gt=Object(h.a)(v.a.forwardRef((function(t,e){return Object(W.f)(lt.a,ut()({},t,{ref:e}))})),{target:"e14jh2hu1",label:"StyledInlineInput"})({name:"1370mw6",styles:"overflow-wrap:anywhere;white-space:normal;"}),vt=pt,Ot=r(715),yt=r.n(Ot);function jt(t){return yt()(t)}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var kt=Object(C.b)("You have unsaved changes are you sure you want to leave?"),St=function(t){l()(r,t);var e=Dt(r);function r(){var t;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={dashboardState:"view",modifiedDashboard:null},t.onEdit=function(e){return function(){e&&t.setState({dashboardState:"edit",modifiedDashboard:jt(e)})}},t.onRouteLeave=function(){if("view"!==t.state.dashboardState)return kt},t.onUnload=function(e){"view"!==t.state.dashboardState&&(e.preventDefault(),e.returnValue=kt)},t.onCreate=function(){t.setState({dashboardState:"create",modifiedDashboard:jt(Z.b)})},t.onCancel=function(){t.setState({dashboardState:"view",modifiedDashboard:null})},t.onDelete=function(e){return function(){var r=t.props,n=r.api,a=r.organization;(null==e?void 0:e.id)&&Object(m.b)(n,a.slug,e.id).then((function(){Object(w.d)(Object(C.b)("Dashboard deleted")),O.browserHistory.replace({pathname:"/organizations/".concat(a.slug,"/dashboards/"),query:{}})}))}},t.onCommit=function(e){var r=e.dashboard,n=e.reloadData;return function(){var e=t.props,a=e.api,o=e.organization,i=e.location,c=t.state,s=c.dashboardState,u=c.modifiedDashboard;switch(s){case"create":u&&Object(m.a)(a,o.slug,u).then((function(e){Object(w.d)(Object(C.b)("Dashboard created")),t.setState({dashboardState:"view",modifiedDashboard:null}),O.browserHistory.replace({pathname:"/organizations/".concat(o.slug,"/dashboards/").concat(e.id,"/"),query:wt({},i.query)})}));break;case"edit":if(u)return j()(r,u)?void t.setState({dashboardState:"view",modifiedDashboard:null}):void Object(m.c)(a,o.slug,u).then((function(e){Object(w.d)(Object(C.b)("Dashboard updated")),t.setState({dashboardState:"view",modifiedDashboard:null}),r&&e.id!==r.id?O.browserHistory.replace({pathname:"/organizations/".concat(o.slug,"/dashboards/").concat(e.id,"/"),query:wt({},i.query)}):n()}));t.setState({dashboardState:"view",modifiedDashboard:null});break;case"view":default:t.setState({dashboardState:"view",modifiedDashboard:null})}}},t.onWidgetChange=function(e){var r=t.state.modifiedDashboard;null!==r&&t.setState((function(t){return wt(wt({},t),{},{modifiedDashboard:wt(wt({},r),{},{widgets:e})})}))},t.setModifiedDashboard=function(e){t.setState({modifiedDashboard:e})},t}return s()(r,[{key:"componentDidMount",value:function(){var t=this.props,e=t.route;t.router.setRouteLeaveHook(e,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var t=this,e=this.props,r=e.api,n=e.location,a=e.params,o=e.organization,i=this.state,c=i.modifiedDashboard,s=i.dashboardState;return Object(W.f)(S.a,{skipLoadLastUsed:o.features.includes("global-views")},Object(W.f)(ct,{api:r,location:n,params:a,organization:o},(function(e){var r=e.dashboard,n=e.dashboards,a=e.error,i=e.reloadData;return Object(W.f)(v.a.Fragment,null,Object(W.f)(Ct,null,Object(W.f)(vt,{dashboard:c||r,onUpdate:t.setModifiedDashboard,isEditing:"view"!==s}),Object(W.f)(q,{organization:o,dashboards:n,dashboard:r,onEdit:t.onEdit(r),onCreate:t.onCreate,onCancel:t.onCancel,onCommit:t.onCommit({dashboard:r,reloadData:i}),onDelete:t.onDelete(r),dashboardState:s})),a?Object(W.f)(D.a,null):r?Object(W.f)(G,{dashboard:c||r,organization:o,isEditing:"edit"===s||"create"===s,onUpdate:t.onWidgetChange}):Object(W.f)(k.default,null))})))}}]),r}(v.a.Component);St.displayName="DashboardDetail";var Ct=Object(h.a)("div",{target:"e39ap620",label:"StyledPageHeader"})("display:flex;align-items:center;justify-content:space-between;font-size:",(function(t){return t.theme.headerFontSize}),";color:",(function(t){return t.theme.textColor}),";height:40px;margin-bottom:",Object(P.a)(1),";white-space:nowrap;");e.default=Object(z.a)(Object(E.a)(St))}}]);
//# sourceMappingURL=DashboardDetail~OverviewDashboard.js.map