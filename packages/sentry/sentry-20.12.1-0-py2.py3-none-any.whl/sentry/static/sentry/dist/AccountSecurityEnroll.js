(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[37],{1938:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(9),a=n.n(r),o=n(10),c=n.n(o),i=n(12),u=n.n(i),s=n(13),l=n.n(s),f=n(5),d=n.n(f),p=(n(1),n(247)),h=n.n(p),b=n(408),y=n(0);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(t){u()(n,t);var e=m(n);function n(){return a()(this,n),e.apply(this,arguments)}return c()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var t=this.getTitle();return Object(y.f)(h.a,{title:"".concat(t?"".concat(t," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);v.displayName="AsyncView"},1939:function(t,e,n){"use strict";var r=n(16),a=n.n(r),o=n(9),c=n.n(o),i=n(10),u=n.n(i),s=n(12),l=n.n(s),f=n(13),d=n.n(f),p=n(5),h=n.n(p),b=n(3),y=n(1),m=n.n(y),v=n(204),O=n(8),j=n(0);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var S=function(t){l()(n,t);var e=g(n);function n(){return c()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var t=this.props,e=t.icon,n=t.title,r=t.subtitle,o=t.action,c=t.tabs,i=t.noTitleStyles,u=a()(t,["icon","title","subtitle","action","tabs","noTitleStyles"]);return Object(j.f)("div",u,Object(j.f)(k,null,Object(j.f)(P,null,e&&Object(j.f)(w,null,e),n&&Object(j.f)(x,{tabs:c,styled:i},Object(j.f)(v.a,null,n),r&&Object(j.f)(R,null,r))),o&&Object(j.f)(E,{tabs:c},o)),c&&Object(j.f)("div",null,c))}}]),n}(m.a.Component);S.displayName="UnstyledSettingsPageHeader",S.defaultProps={noTitleStyles:!1};var k=Object(b.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),P=Object(b.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),x=Object(b.a)("div",{target:"e1uay4fd2",label:"Title"})((function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(t){return t.tabs?"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(2)," 0"):"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(4)," 0")}),";"),R=Object(b.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(t){return t.theme.gray400}),";font-weight:400;font-size:",(function(t){return t.theme.fontSizeLarge}),";padding:",Object(O.a)(1.5)," 0 ",Object(O.a)(3),";"),w=Object(b.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(O.a)(1),";"),E=Object(b.a)("div",{target:"e1uay4fd5",label:"Action"})((function(t){return t.tabs?"margin-top: ".concat(Object(O.a)(2)):null}),";"),C=Object(b.a)(S,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(O.a)(4),";");e.a=C},1945:function(t,e,n){"use strict";var r=n(6),a=n.n(r),o=n(7),c=n.n(o),i=n(16),u=n.n(i),s=n(9),l=n.n(s),f=n(10),d=n.n(f),p=n(12),h=n.n(p),b=n(13),y=n.n(b),m=n(5),v=n.n(m),O=n(1),j=n.n(O),g=n(47),S=n(2),k=n.n(S),P=n(278),x=n(677),R=n.n(x),w=n(21),E=n(674),C=n(1947),F=n(0);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var N=function(t){h()(n,t);var e=A(n);function n(){var t;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={highlighted:q(t.props,t.context).hash},t}return d()(n,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){if(q(this.props,this.context).hash!==q(t,this.context).hash){var e=q(t,this.context).hash;this.scrollToHash(e),this.setState({highlighted:e})}}},{key:"scrollToHash",value:function(t){var e=t||q(this.props,this.context).hash;if(e)try{R()(Object(E.a)(decodeURIComponent(e)),{align:"middle",offset:-100})}catch(t){g.c(t)}}},{key:"shouldDisplayForm",value:function(t){var e=t.filter((function(t){return"function"!=typeof t&&Object(w.d)(null==t?void 0:t.visible)}));if(t.length===e.length){var n=this.props,r=n.additionalFieldProps,a=u()(n,["additionalFieldProps"]);return!e.every((function(t){return"function"==typeof t.visible?!t.visible(T(T({},a),r)):!t.visible}))}return!0}},{key:"renderForm",value:function(t){var e=t.fields,n=t.formPanelProps,r=t.title;return this.shouldDisplayForm(e)||(null==n?void 0:n.renderFooter)||(null==n?void 0:n.renderHeader)?Object(F.f)(C.a,a()({title:r,fields:e},n)):null}},{key:"render",value:function(){var t=this,e=this.props,n=e.access,r=e.fields,a=e.title,o=e.forms,c=e.disabled,i=e.features,s=e.additionalFieldProps,l=e.renderFooter,f=e.renderHeader,d=(e.location,u()(e,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),p={access:n,disabled:c,features:i,additionalFieldProps:s,renderFooter:l,renderHeader:f,highlighted:this.state.highlighted};return Object(F.f)(P.Box,d,void 0!==o&&o.map((function(e,n){return Object(F.f)(j.a.Fragment,{key:n},t.renderForm(T({formPanelProps:p},e)))})),void 0===o&&void 0!==r&&this.renderForm({fields:r,formPanelProps:p,title:a}))}}]),n}(j.a.Component);function q(t,e){return t.location||e.location||{}}N.displayName="JsonForm",N.contextTypes={location:k.a.object},N.defaultProps={additionalFieldProps:{}},e.a=N},1947:function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(6),a=n.n(r),o=n(16),c=n.n(o),i=n(9),u=n.n(i),s=n(10),l=n.n(s),f=n(12),d=n.n(f),p=n(13),h=n.n(p),b=n(5),y=n.n(b),m=n(1),v=n.n(m),O=n(164),j=n(674),g=n(1964),S=n(0);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var P=function(t){d()(n,t);var e=k(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.title,r=e.fields,o=e.access,i=e.disabled,u=e.additionalFieldProps,s=e.renderFooter,l=e.renderHeader,f=c()(e,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(S.f)(O.a,{id:"string"==typeof n?Object(j.a)(n):void 0},n&&Object(S.f)(O.e,null,n),Object(S.f)(O.c,null,"function"==typeof l&&l({title:n,fields:r}),r.map((function(e){if("function"==typeof e)return e();e.defaultValue;var n=c()(e,["defaultValue"]);return!0===i&&(n.disabled=!0,n.disabledReason=void 0),Object(S.f)(g.a,a()({access:o,disabled:i,key:e.name},f,u,{field:n,highlighted:t.props.highlighted==="#".concat(e.name)}))})),"function"==typeof s&&s({title:n,fields:r})))}}]),n}(v.a.Component);P.displayName="FormPanel"},2132:function(t,e,n){"use strict";var r=n(3),a=Object(r.a)("div",{target:"e1pnf9a40",label:"ConfirmHeader"})({name:"1pihav0",styles:"font-size:1.2em;margin-bottom:10px;"});e.a=a},2149:function(t,e,n){"use strict";var r=n(6),a=n.n(r),o=n(9),c=n.n(o),i=n(10),u=n.n(i),s=n(12),l=n.n(s),f=n(13),d=n.n(f),p=n(5),h=n.n(p),b=n(1),y=n.n(b),m=n(206),v=n(4),O=n(2132),j=n(675),g=n(0);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var k=Object(g.f)(y.a.Fragment,null,Object(g.f)(O.a,null,Object(v.b)("Do you want to remove this method?")),Object(g.f)(j.a,null,Object(v.b)("Removing the last authentication method will disable two-factor authentication completely."))),P=function(t){l()(n,t);var e=S(n);function n(){return c()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return Object(g.f)(m.a,a()({},this.props,{message:k}))}}]),n}(y.a.Component);P.displayName="RemoveConfirm",P.defaultProps=m.a.defaultProps,e.a=P},2232:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(235),a=n.n(r),o=n(80);function c(){var t=a.a.get("pending-invite");return t?o.parse(t):null}},2946:function(t,e,n){"use strict";n.r(e);var r=n(33),a=n.n(r),o=n(22),c=n.n(o),i=n(30),u=n.n(i),s=n(9),l=n.n(s),f=n(10),d=n.n(f),p=n(12),h=n.n(p),b=n(13),y=n.n(b),m=n(5),v=n.n(m),O=n(7),j=n.n(O),g=n(28),S=n.n(g),k=n(1),P=n.n(k),x=n(11),R=n(35),w=n(65),E=n(425),C=n(29),F=n(696),D=n(164),T=n(3),A=n(0),N=function(t){var e=t.code;return Object(A.f)(_,null,Object(A.f)("tbody",null,e.map((function(t,e){return Object(A.f)("tr",{key:e},t.map((function(t,e){return t?Object(A.f)(H,{key:e}):Object(A.f)(I,{key:e})})))}))))};N.displayName="Qrcode";var q=Object(T.a)("td",{target:"e8bpnt20",label:"Cell"})({name:"1c97kwh",styles:"height:6px;width:6px;padding:0;"}),H=Object(T.a)(q,{target:"e8bpnt21",label:"BlackCell"})({name:"1qzfsby",styles:"background-color:black;"}),I=Object(T.a)(q,{target:"e8bpnt22",label:"WhiteCell"})({name:"cxmp86",styles:"background-color:white;"}),_=Object(T.a)("table",{target:"e8bpnt23",label:"Table"})({name:"1uk1gs8",styles:"margin:0;"}),U=N,z=n(1120),B=n(4),M=n(2232),J=n(1938),V=n(2149),W=n(676),L=n(1944),Q=n(1945),G=n(680),K=n(1939),X=n(675);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tt={name:"1v994a0",styles:"margin-right:6px;"},et={name:"1ttqh2b-AccountSecurityEnroll",styles:"margin-left:6px;;label:AccountSecurityEnroll;"},nt=function(t){h()(r,t);var e,n=Y(r);function r(){var t;l()(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a)))._form={},t.handleFieldChange=function(e,n){t._form[e]=n},t.handleSmsReset=function(){return t.setState({hasSentCode:!1},t.remountComponent)},t.handleSmsSubmit=u()(c.a.mark((function e(){var n,r,a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.authenticator,a=n.hasSentCode,t._form.phone){e.next=3;break}return e.abrupt("return");case 3:return o={phone:t._form.phone,otp:a?t._form.otp||"":void 0,secret:r.secret},t.setState({loading:a}),a||Object(R.c)(Object(B.b)("Sending code to %s...",o.phone)),e.prev=6,e.next=9,t.api.requestPromise(t.enrollEndpoint,{data:o});case 9:e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(6),t._form={},i="sms"===r.id,t.setState({hasSentCode:!i}),t.remountComponent(),Object(R.a)(t.state.hasSentCode?Object(B.b)("Incorrect OTP"):Object(B.b)("Error sending SMS")),e.abrupt("return");case 19:a?t.handleEnrollSuccess():(t.setState({hasSentCode:!0,loading:!1}),Object(R.c)(Object(B.b)("Sent code to %s",o.phone)));case 20:case"end":return e.stop()}}),e,null,[[6,11]])}))),t.handleU2fTap=function(){var e=u()(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$($({},n),t._form),t.setState({loading:!0}),e.prev=2,e.next=5,t.api.requestPromise(t.enrollEndpoint,{data:r});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),t.handleEnrollError(),e.abrupt("return");case 11:t.handleEnrollSuccess();case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.handleTotpSubmit=function(){var e=u()(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$($($({},t._form),n||{}),{},{secret:t.state.authenticator.secret}),t.setState({loading:!0}),e.prev=2,e.next=5,t.api.requestPromise(t.enrollEndpoint,{method:"POST",data:r});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),t.handleEnrollError(),e.abrupt("return");case 11:t.handleEnrollSuccess();case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.handleRemove=u()(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.state.authenticator)&&n.authId){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.api.requestPromise(t.authenticatorEndpoint,{method:"DELETE"});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),Object(R.a)(Object(B.b)("Error removing authenticator")),e.abrupt("return");case 12:t.props.router.push("/settings/account/security/"),Object(R.d)(Object(B.b)("Authenticator has been removed"));case 14:case"end":return e.stop()}}),e,null,[[3,8]])}))),t}return d()(r,[{key:"getTitle",value:function(){return Object(B.b)("Security")}},{key:"getEndpoints",value:function(){var t=this;return[["authenticator",this.enrollEndpoint,{},{allowError:function(e){var n=e&&400===e.status&&e.responseJSON&&"Already enrolled"===e.responseJSON.details;return n&&(t.props.router.push("/settings/account/security/"),Object(R.a)(Object(B.b)("Already enrolled"))),n}}]]}},{key:"componentDidMount",value:function(){this.pendingInvitation=Object(M.a)()}},{key:"handleEnrollSuccess",value:(e=u()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pendingInvitation){t.next=3;break}return t.next=3,Object(E.b)(this.pendingInvitation.memberId,{addOrg:!0,fetchOrgDetails:!0});case 3:this.props.router.push("/settings/account/security/"),Object(w.k)({authenticatorName:this.authenticatorName});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"handleEnrollError",value:function(){this.setState({loading:!1}),Object(R.a)(Object(B.b)("Error adding %s authenticator",this.authenticatorName))}},{key:"renderBody",value:function(){var t=this.state,e=t.authenticator,n=t.hasSentCode;if(!e)return null;var r=function(t){var e=t.authenticator,n=t.hasSentCode,r=t.onSmsReset,a=t.onSmsSubmit,o=t.onU2fTap,c=e||{},i=c.form,u=c.qrcode,s=c.challenge,l=c.id;return i?u?[function(){return Object(A.f)(D.f,{key:"qrcode",justifyContent:"center",p:2},Object(A.f)(U,{code:e.qrcode}))},function(){return Object(A.f)(W.a,{key:"secret",label:Object(B.b)("Authenticator secret")},Object(A.f)(G.a,null,e.secret))}].concat(S()(i),[function(){return Object(A.f)(D.f,{key:"confirm",justifyContent:"flex-end",p:2},Object(A.f)(C.a,{priority:"primary",type:"submit"},Object(B.b)("Confirm")))}]):"sms"===l?[$($({},i[0]),{},{disabled:function(){return n}}),$($({},i[1]),{},{required:!0,visible:function(){return n}}),function(){return Object(A.f)(D.f,{key:"sms-footer",justifyContent:"flex-end",p:2,pr:"36px"},n&&Object(A.f)(C.a,{css:tt,onClick:r},Object(B.b)("Start Over")),Object(A.f)(C.a,{priority:"primary",type:"button",onClick:a},n?Object(B.b)("Confirm"):Object(B.b)("Send Code")))}]:"u2f"===l?[i.find((function(t){return"deviceName"===t.name})),function(){return Object(A.f)(z.default,{key:"u2f-enroll",style:{marginBottom:0},challengeData:s,displayMode:"enroll",flowMode:"enroll",onTap:o})}]:null:null}({authenticator:e,hasSentCode:n,onSmsReset:this.handleSmsReset,onSmsSubmit:this.handleSmsSubmit,onU2fTap:this.handleU2fTap}),o=r?r.filter((function(t){return void 0!==t.defaultValue})).map((function(t){return[t.name,t.defaultValue]})).reduce((function(t,e){var n=a()(e,2),r=n[0],o=n[1];return t[r]=o,t}),{}):{};return Object(A.f)(P.a.Fragment,null,Object(A.f)(K.a,{title:Object(A.f)(P.a.Fragment,null,Object(A.f)("span",null,e.name),Object(A.f)(F.a,{css:et,enabled:e.isEnrolled})),action:e.isEnrolled&&e.removeButton&&Object(A.f)(V.a,{onConfirm:this.handleRemove},Object(A.f)(C.a,{priority:"danger"},e.removeButton))}),Object(A.f)(X.a,null,e.description),e.form&&!!e.form.length&&Object(A.f)(L.a,{apiMethod:"POST",onFieldChange:this.handleFieldChange,apiEndpoint:this.authenticatorEndpoint,onSubmit:this.handleTotpSubmit,initialData:$($({},o),e),hideFooter:!0},Object(A.f)(Q.a,{forms:[{title:"Configuration",fields:r}]})))}},{key:"authenticatorEndpoint",get:function(){return"/users/me/authenticators/".concat(this.props.params.authId,"/")}},{key:"enrollEndpoint",get:function(){return"".concat(this.authenticatorEndpoint,"enroll/")}},{key:"authenticatorName",get:function(){var t=this.state.authenticator;return t&&t.name||"Authenticator"}}]),r}(J.a);e.default=Object(x.withRouter)(nt)}}]);
//# sourceMappingURL=AccountSecurityEnroll.js.map