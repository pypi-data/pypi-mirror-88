(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[60],{2090:function(t,e,r){"use strict";var n=r(3),a=(r(1),r(164)),i=r(8),o=r(0);function s(t){var e=t.className,r=t.image,n=t.children;return Object(o.f)(a.a,{className:e},Object(o.f)(c,null,Object(o.f)(u,null,r),Object(o.f)(l,null,n)))}s.displayName="OnboardingPanel";var c=Object(n.a)("div",{target:"eipqko00",label:"Container"})("padding:",Object(i.a)(3),";position:relative;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){min-height:350px;}"),l=Object(n.a)("div",{target:"eipqko01",label:"StyledBox"})("z-index:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:2;}"),u=Object(n.a)(l,{target:"eipqko02",label:"IlloBox"})("position:relative;min-height:100px;max-width:300px;margin:",Object(i.a)(2)," auto;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:1;margin:",Object(i.a)(3),";max-width:auto;}");e.a=s},2262:function(t,e,r){"use strict";function n(t,e){return t.requestPromise("/promptsactivity/",{method:"PUT",data:{organization_id:e.organizationId,project_id:e.projectId,feature:e.feature,status:e.status}})}r.d(e,"a",(function(){return n}))},2695:function(t,e,r){t.exports=r.p+"alerts-empty-state.9078ef.svg"},2918:function(t,e,r){"use strict";r.r(e);var n=r(22),a=r.n(n),i=r(30),o=r.n(i),s=r(7),c=r.n(s),l=r(9),u=r.n(l),d=r(10),f=r.n(d),b=r(12),p=r.n(b),h=r(13),j=r.n(h),O=r(5),g=r.n(O),m=r(3),v=r(1),y=r.n(v),k=r(1100),w=r.n(k),x=r(131),S=r.n(x),z=r(2262),R=r(107),P=r(72),L=r(408),I=r(29),A=r(109),q=r(2058),N=r(280),D=r(58),E=r(44),C=r(681),T=r(673),B=r(164),_=r(1943),V=r(15),W=r(4),M=r(8),F=r(37),G=r(213),U=r(57),X=r(411),J=r(2388),H=r(2695),K=r.n(H),Y=r(2090),Q=r(0);function Z(t){var e=t.actions;return Object(Q.f)(Y.a,{image:Object(Q.f)($,{src:K.a})},Object(Q.f)("h3",null,Object(W.b)("More signal, less noise")),Object(Q.f)("p",null,Object(W.b)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")),Object(Q.f)(tt,{gap:1},e))}Z.displayName="Onboarding";var $=Object(m.a)("img",{target:"e1ljbtxe0",label:"AlertsImage"})("@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width:",(function(t){return t.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),tt=Object(m.a)(A.a,{target:"e1ljbtxe1",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"}),et=Z,rt=r(358),nt=r.n(rt),at=r(40),it=r.n(at),ot=r(422),st=r(144),ct=r(306),lt=r(60),ut=r(207),dt=r(31),ft=r(51),bt=r(191),pt=r(24),ht=r(2068),jt=r(2048),Ot=r(33),gt=r.n(Ot),mt=r(248);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var yt=y.a.lazy((function(){return Promise.all([r.e(26),r.e(193)]).then(r.bind(null,2895))})),kt=y.a.lazy((function(){return Promise.all([r.e(26),r.e(194)]).then(r.bind(null,2896))})),wt=function(t){p()(r,t);var e=vt(r);function r(){return u()(this,r),e.apply(this,arguments)}return f()(r,[{key:"render",value:function(){var t=this.props,e=t.className,r=t.error,n=t.eventStats;if(r)return Object(Q.f)(zt,{error:r});if(!n)return Object(Q.f)(St,null);var a=n.data.map((function(t){var e=gt()(t,2)[1];return e&&Array.isArray(e)&&e.length&&e[0].count||0}));return Object(Q.f)(y.a.Suspense,{fallback:Object(Q.f)(St,null)},Object(Q.f)("div",{"data-test-id":"incident-sparkline",className:e},Object(Q.f)(yt,{data:a,width:100,height:32},Object(Q.f)(kt,{style:{stroke:pt.b.gray300,fill:"none",strokeWidth:2}}))))}}]),r}(y.a.Component);wt.displayName="SparkLine";var xt=Object(m.a)(wt,{target:"e1ut8dj0",label:"StyledSparkLine"})("flex-shrink:0;width:100%;height:",38,"px;"),St=Object(m.a)(mt.a,{target:"e1ut8dj1",label:"SparkLinePlaceholder"})("height:",38,"px;"),zt=Object(m.a)(St,{target:"e1ut8dj2",label:"SparklineError"})({name:"mp4ek8",styles:"align-items:center;line-height:1;"}),Rt=xt,Pt=Object(m.a)("div",{target:"e1k7qk1w0",label:"TableLayout"})("display:grid;grid-template-columns:",(function(t){return"open"===t.status?"4fr 1fr 2fr":"3fr 2fr 2fr 1fr 2fr"}),";grid-column-gap:",Object(M.a)(1.5),";width:100%;align-items:center;"),Lt=Object(m.a)("div",{target:"e1k7qk1w1",label:"TitleAndSparkLine"})("display:",(function(t){return"open"===t.status?"grid":"flex"}),";grid-gap:",Object(M.a)(1),";grid-template-columns:auto 120px;align-items:center;padding-right:",Object(M.a)(2),";overflow:hidden;");function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var At=function(t){p()(r,t);var e=It(r);function r(){var t;u()(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).getProject=nt()((function(t,e){return e.find((function(e){return e.slug===t}))})),t}return f()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.orgId,r=t.incident;return"open"===t.filteredStatus?[["stats","/organizations/".concat(e,"/incidents/").concat(r.identifier,"/stats/")]]:[]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderError",value:function(){return this.renderBody()}},{key:"renderTimeSince",value:function(t){return Object(Q.f)(Nt,null,Object(Q.f)(ut.a,{date:t}))}},{key:"renderStatusIndicator",value:function(){var t=this.props.incident.status,e=t===ht.c.CLOSED,r=t===ht.c.WARNING,n=e?pt.b.gray200:r?pt.b.orange300:pt.b.red200,a=e?Object(W.b)("Resolved"):r?Object(W.b)("Warning"):Object(W.b)("Critical");return Object(Q.f)(dt.a,{title:Object(W.c)("Status: [text]",{text:a})},Object(Q.f)(Et,{color:n}))}},{key:"renderBody",value:function(){var t=this.props,e=t.incident,r=t.orgId,n=t.projectsLoaded,a=t.projects,i=t.filteredStatus,o=this.state,s=o.error,c=o.stats,l=it()(e.dateStarted),u=it.a.duration(it()(e.dateClosed||new Date).diff(l)).as("seconds"),d=e.projects[0];return Object(Q.f)(st.a,null,Object(Q.f)(Bt,null,Object(Q.f)(Pt,{status:i},Object(Q.f)(Lt,{status:i},Object(Q.f)(Ct,null,this.renderStatusIndicator(),Object(Q.f)(Tt,{to:"/organizations/".concat(r,"/alerts/").concat(e.identifier,"/")},"Alert #",e.id),e.title),"open"===i&&Object(Q.f)(Rt,{error:s&&Object(Q.f)(qt,null),eventStats:null==c?void 0:c.eventStats})),Object(Q.f)(Dt,{avatarSize:18,project:n?this.getProject(d,a):{slug:d}}),this.renderTimeSince(e.dateStarted),"closed"===i&&Object(Q.f)(ot.a,{seconds:Object(bt.a)({value:u,fixed:1200})}),"closed"===i&&e.dateClosed&&this.renderTimeSince(e.dateClosed))))}},{key:"metricPreset",get:function(){var t=this.props.incident;return t?Object(jt.f)(t):void 0}}]),r}(L.a);function qt(){return Object(Q.f)(dt.a,{title:Object(W.b)("Error loading alert stats")},Object(Q.f)(V.Ib,null))}qt.displayName="ErrorLoadingStatsIcon";var Nt=Object(m.a)("div",{target:"e12tl7g20",label:"CreatedResolvedTime"})(ft.a," line-height:1.4;display:flex;align-items:center;"),Dt=Object(m.a)(ct.a,{target:"e12tl7g21",label:"ProjectBadge"})({name:"6su6fj",styles:"flex-shrink:0;"}),Et=Object(m.a)("div",{target:"e12tl7g22",label:"StatusIndicator"})("width:10px;height:12px;background:",(function(t){return t.color}),";display:inline-block;border-top-right-radius:40%;border-bottom-right-radius:40%;margin-bottom:-1px;"),Ct=Object(m.a)("span",{target:"e12tl7g23",label:"Title"})(ft.a),Tt=Object(m.a)(lt.a,{target:"e12tl7g24",label:"IncidentLink"})("padding:0 ",Object(M.a)(1),";"),Bt=Object(m.a)(B.f,{target:"e12tl7g25",label:"IncidentPanelItem"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";padding:",Object(M.a)(1.5)," ",Object(M.a)(2)," ",Object(M.a)(1.5)," 0;"),_t=At;function Vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var Ft="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function Gt(t){return["open","closed"].includes(t)?t:"open"}var Ut=function(t){p()(n,t);var e,r=Mt(n);function n(){return u()(this,n),r.apply(this,arguments)}return f()(n,[{key:"getEndpoints",value:function(){var t=this.props,e=t.params,r=t.location.query,n=Gt(r.status);return[["incidentList","/organizations/".concat(e&&e.orgId,"/incidents/"),{query:Wt(Wt({},r),{},{status:n})}]]}},{key:"onLoadAllEndpointsSuccess",value:(e=o()(a.a.mark((function t(){var e,r,n,i,o,s,c,l,u,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.state.incidentList)&&0===r.length){t.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),t.abrupt("return");case 4:return this.setState({loading:!0}),n=this.props,i=n.params,o=n.location,s=n.organization,t.next=8,this.api.requestPromise("/organizations/".concat(null==i?void 0:i.orgId,"/alert-rules/"),{method:"GET",query:o.query});case 8:if(c=t.sent,!(l=c.length>0)){t.next=13;break}return this.setState({hasAlertRule:l,firstVisitShown:!1,loading:!1}),t.abrupt("return");case 13:return t.next=15,this.api.requestPromise("/promptsactivity/",{query:{organization_id:s.id,feature:"alert_stream"}});case 15:u=t.sent,(d=!(null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.dismissed_ts))&&Object(z.a)(this.api,{feature:"alert_stream",organizationId:s.id,status:"dismissed"}),this.setState({hasAlertRule:l,firstVisitShown:d,loading:!1});case 19:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){var t=this.state.firstVisitShown,e=this.props.organization;if(!t)return null;var r=Object(Q.f)(y.a.Fragment,null,Object(Q.f)(I.a,{size:"small",external:!0,href:Ft},Object(W.b)("View Features")),Object(Q.f)(q.b,{organization:e,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream"},Object(W.b)("Create Alert Rule")));return Object(Q.f)(et,{actions:r})}},{key:"tryRenderEmpty",value:function(){var t=this.state,e=t.hasAlertRule,r=t.incidentList,n=Gt(this.props.location.query.status);return!r||r.length>0?null:Object(Q.f)(X.a,{size:"medium",icon:Object(Q.f)(V.i,{isCircled:!0,size:"48"}),title:e?"open"===n?Object(W.b)("No unresolved metric alerts in these projects."):Object(W.b)("No resolved metric alerts in these projects."):Object(W.b)("No metric alert rules exist for these projects."),description:Object(W.c)("Learn more about [link:Metric Alerts]",{link:Object(Q.f)(D.a,{href:Ft})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var t,e,r=this.state,n=r.loading,a=r.incidentList,i=r.incidentListPageLinks,o=r.hasAlertRule,s=this.props.params.orgId,c=new Set(w()(null==a?void 0:a.map((function(t){return t.projects})))),l=!(!a||0!==a.length||void 0!==o),u=n||l,d=Gt(this.props.location.query.status);return Object(Q.f)(y.a.Fragment,null,null!==(t=this.tryRenderOnboarding())&&void 0!==t?t:Object(Q.f)(B.a,null,!n&&Object(Q.f)(Kt,null,Object(Q.f)(Pt,{status:d},Object(Q.f)(Ht,{status:d},Object(Q.f)("div",null,Object(W.b)("Alert")),"open"===d&&Object(Q.f)("div",null,Object(W.b)("Graph"))),Object(Q.f)("div",null,Object(W.b)("Project")),Object(Q.f)("div",null,Object(W.b)("Triggered")),"closed"===d&&Object(Q.f)("div",null,Object(W.b)("Duration")),"closed"===d&&Object(Q.f)("div",null,Object(W.b)("Resolved")))),u?Object(Q.f)(E.default,null):null!==(e=this.tryRenderEmpty())&&void 0!==e?e:Object(Q.f)(B.c,null,Object(Q.f)(G.a,{orgId:s,slugs:Array.from(c)},(function(t){var e=t.initiallyLoaded,r=t.projects;return a.map((function(t){return Object(Q.f)(_t,{key:t.id,projectsLoaded:e,projects:r,incident:t,orgId:s,filteredStatus:d})}))})))),Object(Q.f)(T.a,{pageLinks:i}))}},{key:"renderBody",value:function(){var t=this.props,e=t.params,r=t.location,n=t.organization,a=t.router,i=r.pathname,o=r.query,s=e.orgId,c=S()(Wt(Wt({},o),{},{status:"open"}),"cursor"),l=S()(Wt(Wt({},o),{},{status:"closed"}),"cursor"),u=Gt(o.status);return Object(Q.f)(_.a,{title:Object(W.b)("Alerts"),objSlug:s},Object(Q.f)(C.a,{organization:n,showDateSelector:!1},Object(Q.f)(J.a,{organization:n,router:a,activeTab:"stream"}),Object(Q.f)(N.a,null,Object(Q.f)(N.f,{fullWidth:!0},!this.tryRenderOnboarding()&&Object(Q.f)(Jt,{merged:!0,active:u},Object(Q.f)(I.a,{to:{pathname:i,query:c},barId:"open",size:"small"},Object(W.b)("Unresolved")),Object(Q.f)(I.a,{to:{pathname:i,query:l},barId:"closed",size:"small"},Object(W.b)("Resolved"))),this.renderList()))))}}]),n}(L.a),Xt=function(t){p()(r,t);var e=Mt(r);function r(){return u()(this,r),e.apply(this,arguments)}return f()(r,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(t){var e,r;(null===(e=t.location.query)||void 0===e?void 0:e.status)!==(null===(r=this.props.location.query)||void 0===r?void 0:r.status)&&this.trackView()}},{key:"trackView",value:function(){var t=this.props,e=t.location,r=t.organization,n=Gt(e.query.status);Object(F.d)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:r.id,status:n})}},{key:"renderNoAccess",value:function(){return Object(Q.f)(N.a,null,Object(Q.f)(N.f,{fullWidth:!0},Object(Q.f)(P.b,{type:"warning"},Object(W.b)("You don't have access to this feature"))))}},{key:"render",value:function(){var t=this.props.organization;return Object(Q.f)(R.a,{features:["organizations:incidents"],organization:t,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess},Object(Q.f)(Ut,this.props))}}]),r}(y.a.Component);Xt.displayName="IncidentsListContainer";var Jt=Object(m.a)(A.a,{target:"ebw9n8a0",label:"StyledButtonBar"})("width:100px;margin-bottom:",Object(M.a)(1),";"),Ht=Object(m.a)(Lt,{target:"ebw9n8a1",label:"PaddedTitleAndSparkLine"})("padding-left:",Object(M.a)(2),";"),Kt=Object(m.a)(B.e,{target:"ebw9n8a2",label:"StyledPanelHeader"})("padding:",Object(M.a)(1.5)," ",Object(M.a)(2)," ",Object(M.a)(1.5)," 0;");e.default=Object(U.a)(Xt)}}]);
//# sourceMappingURL=AlertsList.js.map