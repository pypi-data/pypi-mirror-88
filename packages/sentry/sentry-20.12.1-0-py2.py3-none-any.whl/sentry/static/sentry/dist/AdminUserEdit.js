(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[55],{1938:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(9),i=r.n(n),o=r(10),a=r.n(o),s=r(12),c=r.n(s),u=r(13),l=r.n(u),f=r(5),d=r.n(f),p=(r(1),r(247)),h=r.n(p),b=r(408),y=r(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var m=function(e){c()(r,e);var t=v(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(y.f)(h.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(b.a);m.displayName="AsyncView"},1945:function(e,t,r){"use strict";var n=r(6),i=r.n(n),o=r(7),a=r.n(o),s=r(16),c=r.n(s),u=r(9),l=r.n(u),f=r(10),d=r.n(f),p=r(12),h=r.n(p),b=r(13),y=r.n(b),v=r(5),m=r.n(v),O=r(1),j=r.n(O),g=r(47),P=r(2),R=r.n(P),F=r(278),w=r(677),D=r.n(w),x=r(21),k=r(674),U=r(1947),S=r(0);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var C=function(e){h()(r,e);var t=q(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={highlighted:H(e.props,e.context).hash},e}return d()(r,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(H(this.props,this.context).hash!==H(e,this.context).hash){var t=H(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}}},{key:"scrollToHash",value:function(e){var t=e||H(this.props,this.context).hash;if(t)try{D()(Object(k.a)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){g.c(e)}}},{key:"shouldDisplayForm",value:function(e){var t=e.filter((function(e){return"function"!=typeof e&&Object(x.d)(null==e?void 0:e.visible)}));if(e.length===t.length){var r=this.props,n=r.additionalFieldProps,i=c()(r,["additionalFieldProps"]);return!t.every((function(e){return"function"==typeof e.visible?!e.visible(T(T({},i),n)):!e.visible}))}return!0}},{key:"renderForm",value:function(e){var t=e.fields,r=e.formPanelProps,n=e.title;return this.shouldDisplayForm(t)||(null==r?void 0:r.renderFooter)||(null==r?void 0:r.renderHeader)?Object(S.f)(U.a,i()({title:n,fields:t},r)):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.access,n=t.fields,i=t.title,o=t.forms,a=t.disabled,s=t.features,u=t.additionalFieldProps,l=t.renderFooter,f=t.renderHeader,d=(t.location,c()(t,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),p={access:r,disabled:a,features:s,additionalFieldProps:u,renderFooter:l,renderHeader:f,highlighted:this.state.highlighted};return Object(S.f)(F.Box,d,void 0!==o&&o.map((function(t,r){return Object(S.f)(j.a.Fragment,{key:r},e.renderForm(T({formPanelProps:p},t)))})),void 0===o&&void 0!==n&&this.renderForm({fields:n,formPanelProps:p,title:i}))}}]),r}(j.a.Component);function H(e,t){return e.location||t.location||{}}C.displayName="JsonForm",C.contextTypes={location:R.a.object},C.defaultProps={additionalFieldProps:{}},t.a=C},1947:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r(6),i=r.n(n),o=r(16),a=r.n(o),s=r(9),c=r.n(s),u=r(10),l=r.n(u),f=r(12),d=r.n(f),p=r(13),h=r.n(p),b=r(5),y=r.n(b),v=r(1),m=r.n(v),O=r(164),j=r(674),g=r(1964),P=r(0);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var i=y()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var F=function(e){d()(r,e);var t=R(r);function r(){return c()(this,r),t.apply(this,arguments)}return l()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.fields,o=t.access,s=t.disabled,c=t.additionalFieldProps,u=t.renderFooter,l=t.renderHeader,f=a()(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(P.f)(O.a,{id:"string"==typeof r?Object(j.a)(r):void 0},r&&Object(P.f)(O.e,null,r),Object(P.f)(O.c,null,"function"==typeof l&&l({title:r,fields:n}),n.map((function(t){if("function"==typeof t)return t();t.defaultValue;var r=a()(t,["defaultValue"]);return!0===s&&(r.disabled=!0,r.disabledReason=void 0),Object(P.f)(g.a,i()({access:o,disabled:s,key:t.name},f,c,{field:r,highlighted:e.props.highlighted==="#".concat(t.name)}))})),"function"==typeof u&&u({title:r,fields:n})))}}]),r}(m.a.Component);F.displayName="FormPanel"},2883:function(e,t,r){"use strict";r.r(t);var n=r(6),i=r.n(n),o=r(22),a=r.n(o),s=r(30),c=r.n(s),u=r(9),l=r.n(u),f=r(10),d=r.n(f),p=r(12),h=r.n(p),b=r(13),y=r.n(b),v=r(5),m=r.n(v),O=r(3),j=r(1),g=r.n(j),P=r(11),R=r(35),F=r(65),w=r(29),D=r(4),x=r(8),k=r(1938),U=r(2046),S=r(1944),E=r(1945),T=r(2102),q=r(0);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var H={title:"User details",fields:[{name:"name",type:"string",required:!0,label:Object(D.b)("Name")},{name:"username",type:"string",required:!0,label:Object(D.b)("Username"),help:Object(D.b)("The username is the unique id of the user in the system")},{name:"email",type:"string",required:!0,label:Object(D.b)("Email"),help:Object(D.b)("The users primary email address")},{name:"isActive",type:"boolean",required:!0,label:Object(D.b)("Active"),help:Object(D.b)("Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")},{name:"isStaff",type:"boolean",required:!0,label:Object(D.b)("Admin"),help:Object(D.b)("Designates whether this user can perform administrative functions.")},{name:"isSuperuser",type:"boolean",required:!0,label:Object(D.b)("Superuser"),help:Object(D.b)("Designates whether this user has all permissions without explicitly assigning them.")}]},A={disable:Object(D.b)("Disable User"),delete:Object(D.b)("Permanently Delete User")},M=function(e){h()(r,e);var t=C(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={deleteType:"disable"},e.onRemove=function(){e.props.onRemove(e.state.deleteType),e.props.closeModal()},e}return d()(r,[{key:"render",value:function(){var e=this,t=this.props.user,r=this.state.deleteType;return Object(q.f)(g.a.Fragment,null,Object(q.f)("p",null,Object(D.c)("Removing user [user]",{user:Object(q.f)("strong",null,t.email)})),Object(q.f)(U.b,{value:r,onChange:function(t){return e.setState({deleteType:t})},choices:[["disable",Object(D.b)("Disable the account.")],["delete",Object(D.b)("Permanently remove the user and their data.")]]}),Object(q.f)(B,null,Object(q.f)(w.a,{priority:"danger",onClick:this.onRemove},A[r]),Object(q.f)(w.a,{onClick:this.props.closeModal},Object(D.b)("Nevermind"))))}}]),r}(g.a.Component);M.displayName="RemoveUserModal";var N=function(e){h()(o,e);var t,r,n=C(o);function o(){var e;l()(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).removeUser=function(t){return"delete"===t?e.deleteUser():e.deactivateUser()},e.formModel=new T.a,e}return d()(o,[{key:"getEndpoints",value:function(){return[["user",this.userEndpoint]]}},{key:"deleteUser",value:(r=c()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"DELETE",data:{hardDelete:!0,organizations:[]}});case 2:Object(R.d)(Object(D.b)("%s's account has been deleted.",this.state.user.email)),P.browserHistory.replace("/manage/users/");case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"deactivateUser",value:(t=c()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"PUT",data:{isActive:!1}});case 2:t=e.sent,this.setState({user:t}),this.formModel.setInitialData(t),Object(R.d)(Object(D.b)("%s's account has been deactivated.",t.email));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderBody",value:function(){var e=this,t=this.state.user;return Object(q.f)(g.a.Fragment,null,Object(q.f)("h3",null,Object(D.b)("Users")),Object(q.f)("p",null,Object(D.b)("Editing user: %s",t.email)),Object(q.f)(S.a,{model:this.formModel,initialData:t,apiMethod:"PUT",apiEndpoint:this.userEndpoint,requireChanges:!0,onSubmitError:R.a,onSubmitSuccess:function(t){e.setState({user:t}),Object(R.d)("User account updated.")},extraButton:Object(q.f)(w.a,{type:"button",onClick:function(){return Object(F.j)((function(r){return Object(q.f)(M,i()({user:t,onRemove:e.removeUser},r))}))},style:{marginLeft:Object(x.a)(1)},priority:"danger"},Object(D.b)("Remove User"))},Object(q.f)(E.a,{forms:[H]})))}},{key:"userEndpoint",get:function(){var e=this.props.params;return"/users/".concat(e.id,"/")}}]),o}(k.a),B=Object(O.a)("div",{target:"e1fsmxla0",label:"ModalFooter"})("display:grid;grid-auto-flow:column;grid-gap:",Object(x.a)(1),";justify-content:end;padding:20px 30px;margin:20px -30px -30px;border-top:1px solid ",(function(e){return e.theme.border}),";");t.default=N}}]);
//# sourceMappingURL=AdminUserEdit.js.map