(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[42,73],{1932:function(e,t,r){"use strict";r.r(t);var n=r(22),i=r.n(n),o=r(7),a=r.n(o),c=r(30),u=r.n(c),s=r(9),l=r.n(s),d=r(10),f=r.n(d),b=r(12),p=r.n(b),h=r(13),v=r.n(h),g=r(5),O=r.n(g),y=r(146),j=r.n(y),m=r(3),w=r(1),P=r.n(w),x=r(715),k=r.n(x),C=r(276),S=r.n(C),R=r(366),D=r.n(R),q=r(2267),z=r(35),E=r(29),F=r(109),A=r(28),Q=r.n(A),T=r(2141),L=r(107),W=r(180),I=r(15),N=r(4),U=r(8),Z=r(63),M=r(2025),B=r(2292),G=r(307),H=r(2046),J=r(676),V=r(0);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var i=O()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v()(this,r)}}var X=function(e){p()(r,e);var t=Y(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selectedQuery:null,source:"new"},e.handleFieldChange=function(t){var r=e.props,n=r.widgetQuery,i=r.onChange;return function(e){var r=K(K({},n),{},a()({},t,e));i(r)}},e.handleAddField=function(t){var r=e.props,n=r.widgetQuery,i=r.onChange;t.preventDefault(),i(K(K({},n),{},{fields:[].concat(Q()(n.fields),[""])}))},e.handleRemoveField=function(t,r){var n=e.props,i=n.widgetQuery,o=n.onChange;t.preventDefault();var a=k()(i);a.fields.splice(r,r+1),o(a)},e.handleQueryField=function(t,r){var n=e.props,i=n.widgetQuery,o=n.onChange,a=k()(i);D()(a,"fields.".concat(t),Object(Z.l)(r)),o(a)},e.handleSavedQueryChange=function(t){var r,n,i=e.props,o=i.onChange,a=i.widgetQuery,c=k()(a);c.fields=[null!==(r=t.query.yAxis)&&void 0!==r?r:"count()"],c.conditions=null!==(n=t.query.query)&&void 0!==n?n:"",c.name=t.query.name,o(c),e.setState({selectedQuery:t})},e.handleLoadOptions=function(t){var r=e.props,n=r.api,i=r.organization;return new Promise((function(e,r){Object(T.c)(n,i.slug,t).then((function(t){var r=t.map((function(e){return{label:e.name,value:e.id,query:e}}));e(r)})).catch(r)}))},e.handleSourceChange=function(t){e.setState((function(e){return K(K({},e),{},{source:t,selectedQuery:"new"===t?null:e.selectedQuery})}))},e}return f()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.canRemove,n=t.errors,i=t.fieldOptions,o=t.organization,a=t.selection,c=t.widgetQuery,u=this.state,s=u.selectedQuery,l=u.source;return Object(V.f)($,null,r&&Object(V.f)(te,null,Object(V.f)(E.a,{"data-test-id":"remove-query",priority:"default",size:"zero",borderless:!0,onClick:this.props.onRemove,icon:Object(V.f)(I.r,null),title:Object(N.b)("Remove this query")})),Object(V.f)(J.a,{"data-test-id":"source",label:"Source",inline:!1,flexibleControlStateSize:!0,stacked:!0,required:!0},Object(V.f)(H.b,{orientInline:!0,value:this.state.source,label:"",onChange:this.handleSourceChange,choices:[["new",Object(N.b)("New Query")],["existing",Object(N.b)("Existing Discover Query")]]})),"new"===l&&Object(V.f)(J.a,{"data-test-id":"new-query",label:Object(N.b)("Query"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==n?void 0:n.conditions,required:!0},Object(V.f)(M.a,{organization:o,projectIds:a.projects,query:c.conditions,fields:[],onSearch:this.handleFieldChange("conditions"),onBlur:this.handleFieldChange("conditions"),useFormWrapper:!1})),"existing"===l&&Object(V.f)(L.a,{organization:o,features:["discover-query"]},(function(t){var r=t.hasFeature;return Object(V.f)(J.a,{"data-test-id":"discover-query",label:Object(N.b)("Query"),inline:!1,flexibleControlStateSize:!0,stacked:!0,required:!0},Object(V.f)(W.a,{async:!0,defaultOptions:!0,value:s,name:"discoverQuery",loadOptions:e.handleLoadOptions,onChange:e.handleSavedQueryChange,options:[],disabled:!r,cache:!0,onSelectResetsInput:!1,onCloseResetsInput:!1,onBlurResetsInput:!1}))})),r&&Object(V.f)(J.a,{"data-test-id":"Query Name",label:"Y-Axis",inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==n?void 0:n.name},Object(V.f)(G.a,{type:"text",name:"name",required:!0,value:c.name,onChange:function(t){return e.handleFieldChange("name")(t.target.value)}})),Object(V.f)(J.a,{"data-test-id":"y-axis",label:"Y-Axis",inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==n?void 0:n.fields,required:!0},c.fields.map((function(t,r){return Object(V.f)(ee,{key:"".concat(t,":").concat(r)},Object(V.f)(B.a,{fieldValue:Object(Z.i)({field:t}),fieldOptions:i,onChange:function(t){return e.handleQueryField(r,t)}}),c.fields.length>1&&Object(V.f)(E.a,{size:"zero",borderless:!0,onClick:function(t){return e.handleRemoveField(t,r)},icon:Object(V.f)(I.r,null),title:Object(N.b)("Remove this field")}))})),Object(V.f)("div",null,Object(V.f)(E.a,{"data-test-id":"add-field",size:"small",onClick:this.handleAddField,icon:Object(V.f)(I.b,{isCircled:!0})},Object(N.b)("Add an overlay")))))}}]),r}(P.a.Component);X.displayName="WidgetQueryForm";var $=Object(m.a)("div",{target:"ecbripu0",label:"QueryWrapper"})("padding-bottom:",Object(U.a)(2),";"),ee=Object(m.a)("div",{target:"ecbripu1",label:"QueryFieldWrapper"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",Object(U.a)(1),";> * + *{margin-left:",Object(U.a)(1),";}"),te=Object(m.a)("div",{target:"ecbripu2",label:"RemoveButtonWrapper"})("position:absolute;top:",Object(U.a)(2),";right:",Object(U.a)(2),";"),re=X,ne=r(49),ie=r(305),oe=r(2034),ae=r(2274),ce=r(2337),ue=r(683);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var i=O()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v()(this,r)}}var fe={name:"",fields:["count()"],conditions:""};function be(e,t){return Object.keys(e).forEach((function(r){var n=e[r];Array.isArray(n)&&"string"==typeof n[0]?t[r]=n[0]:Array.isArray(n)&&"object"===j()(n[0])?t[r]=n.map((function(e){return be(e,{})})):t[r]=be(n,{})})),t}var pe=function(e){p()(r,e);var t=de(r);function r(e){var n;l()(this,r),(n=t.call(this,e)).handleSubmit=function(){var e=u()(i.a.mark((function e(t){var r,o,a,c,u,s,l,d,f,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.props,o=r.api,a=r.closeModal,c=r.organization,u=r.onAddWidget,s=r.onUpdateWidget,l=r.widget,n.setState({loading:!0}),e.prev=3,d=S()(n.state,["title","displayType","interval","queries"]),e.next=7,Object(q.d)(o,c.slug,d);case 7:"function"==typeof s&&l?(s(le({id:null==l?void 0:l.id},d)),Object(z.d)(Object(N.b)("Updated widget."))):(u(d),Object(z.d)(Object(N.b)("Added widget."))),a(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),b=be(null!==(f=null===e.t0||void 0===e.t0?void 0:e.t0.responseJSON)&&void 0!==f?f:{},{}),n.setState({errors:b});case 15:return e.prev=15,n.setState({loading:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),n.handleFieldChange=function(e){return function(t){n.setState((function(r){var n=k()(r);return D()(n,e,t),n}))}},n.handleQueryChange=function(e,t){n.setState((function(r){var n=k()(r);return D()(n,"queries.".concat(t),e),n}))},n.handleQueryRemove=function(e){n.setState((function(t){var r=k()(t);return r.queries.splice(e,e+1),r}))};var o=e.widget;return o?(n.state={title:o.title,displayType:o.displayType,interval:o.interval,queries:o.queries,errors:void 0,loading:!1},n):(n.state={title:"",displayType:"line",interval:"5m",queries:[le({},fe)],errors:void 0,loading:!1},v()(n))}return f()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.Footer,n=t.Body,i=t.Header,o=t.api,a=t.closeModal,c=t.organization,u=t.selection,s=t.tags,l=t.onUpdateWidget,d=t.widget,f=this.state,b=f.errors,p=Object(ue.c)({organization:c,tagKeys:Object.values(s).map((function(e){return e.key})),measurementKeys:[]}),h="function"==typeof l&&!!d;return Object(V.f)(P.a.Fragment,null,Object(V.f)(i,{closeButton:!0,onHide:a},Object(V.f)("h4",null,h?Object(N.b)("Edit Widget"):Object(N.b)("Add Widget"))),Object(V.f)(n,null,Object(V.f)(he,null,Object(V.f)(J.a,{"data-test-id":"widget-name",label:Object(N.b)("Widget Name"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==b?void 0:b.title,required:!0},Object(V.f)(G.a,{type:"text",name:"title",required:!0,value:f.title,onChange:function(t){e.handleFieldChange("title")(t.target.value)}})),Object(V.f)(J.a,{"data-test-id":"chart-type",label:Object(N.b)("Chart Type"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==b?void 0:b.displayType,required:!0},Object(V.f)(W.a,{deprecatedSelectControl:!0,required:!0,options:ae.a.slice(),name:"displayType",label:Object(N.b)("Chart Style"),value:f.displayType,onChange:this.handleFieldChange("displayType")}))),f.queries.map((function(t,r){var n;return Object(V.f)(re,{key:r,api:o,organization:c,selection:u,fieldOptions:p,widgetQuery:t,canRemove:f.queries.length>1,onRemove:function(){return e.handleQueryRemove(r)},onChange:function(t){return e.handleQueryChange(t,r)},errors:null==b?void 0:null===(n=b.queries)||void 0===n?void 0:n[r]})})),Object(V.f)(ce.a,{api:o,organization:c,selection:u,widget:this.state,isEditing:!1,onDelete:function(){},onEdit:function(){}})),Object(V.f)(r,null,Object(V.f)(F.a,{gap:1},Object(V.f)(E.a,{external:!0,href:"https://docs.sentry.io/product/error-monitoring/dashboards/"},Object(N.b)("Read the docs")),Object(V.f)(E.a,{"data-test-id":"add-widget",priority:"primary",type:"button",onClick:this.handleSubmit,disabled:f.loading,busy:f.loading},h?Object(N.b)("Update Widget"):Object(N.b)("Add Widget")))))}}]),r}(P.a.Component);pe.displayName="AddDashboardWidgetModal";var he=Object(m.a)("div",{target:"e1mshziv0",label:"DoubleFieldWrapper"})("display:inline-grid;grid-template-columns:repeat(2,1fr);grid-column-gap:",Object(U.a)(1),";width:100%;");t.default=Object(ne.a)(Object(ie.a)(Object(oe.a)(pe)))},1940:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return d}));var n=r(3),i=r(8),o=Object(n.a)("div",{target:"e1w1bh460",label:"GridCell"})({name:"1kuy7z7",styles:"font-size:14px;"}),a=Object(n.a)(o,{target:"e1w1bh461",label:"GridCellNumber"})({name:"s2uf1z",styles:"text-align:right;"}),c=Object(n.a)("div",{target:"e1w1bh462",label:"DoubleHeaderContainer"})("display:grid;grid-template-columns:1fr 1fr;padding:",Object(i.a)(2)," ",Object(i.a)(3)," ",Object(i.a)(1)," ",Object(i.a)(3),";grid-gap:",Object(i.a)(3),";"),u=Object(n.a)("div",{target:"e1w1bh463",label:"HeaderTitle"})("display:inline-grid;grid-auto-flow:column;grid-gap:",Object(i.a)(1),";font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.textColor}),";align-items:center;"),s=Object(n.a)(u,{target:"e1w1bh464",label:"HeaderTitleLegend"})("background-color:",(function(e){return e.theme.white}),";border-radius:",(function(e){return e.theme.borderRadius}),";position:absolute;z-index:1;"),l=Object(n.a)("div",{target:"e1w1bh465",label:"ChartContainer"})("padding:",Object(i.a)(2)," ",Object(i.a)(3),";"),d=Object(n.a)("div",{target:"e1w1bh466",label:"ErrorPanel"})({name:"195kgij",styles:"display:flex;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:200px;position:relative;border-color:transparent;margin-bottom:0;"})},1946:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return u}));var n=r(4),i=r(63),o=r(101);function a(e,t){switch(Object(i.h)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return Object(o.h)(e,2);case"duration":return Object(o.j)(e/1e3,2,!0);default:return e.toString()}}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(Object(i.h)(t)){case"integer":case"number":return r?Object(o.f)(e):e.toLocaleString();case"percentage":return Object(o.h)(e,0);case"duration":return u(e);default:return e.toString()}}function u(e){if(0===e)return"0";if(e>=o.e){var t=(e/o.e).toFixed(0);return Object(n.b)("%swk",t)}if(e>=o.a){var r=(e/o.a).toFixed(0);return Object(n.b)("%sd",r)}if(e>=o.b){var i=(e/o.b).toFixed(0);return Object(n.b)("%shr",i)}if(e>=o.c){var a=(e/o.c).toFixed(0);return Object(n.b)("%smin",a)}if(e>=o.d){var c=(e/o.d).toFixed(0);return Object(n.b)("%ss",c)}var u=(e/o.d).toFixed(1);return Object(n.b)("%ss",u)}},1949:function(e,t,r){"use strict";var n=r(3),i=Object(n.a)("div",{target:"esa86kh0",label:"ErrorPanel"})("display:flex;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(function(e){return e.height||"200px"}),";position:relative;border-color:transparent;margin-bottom:0;");t.a=i},1953:function(e,t,r){"use strict";var n=r(7),i=r.n(n),o=r(16),a=r.n(o),c=r(9),u=r.n(c),s=r(10),l=r.n(s),d=r(12),f=r.n(d),b=r(13),p=r.n(b),h=r(5),v=r.n(h),g=r(1),O=r.n(g),y=r(40),j=r.n(y),m=r(195),w=r(2087),P=r(2088),x=r(52),k=r(45);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p()(this,r)}}var R=function(e){return e?j.a.utc(e).format(j.a.HTML5_FMT.DATETIME_LOCAL_SECONDS):null},D=function(e){f()(r,e);var t=S(r);function r(e){var n;return u()(this,r),(n=t.call(this,e)).saveCurrentPeriod=function(e){n.currentPeriod={period:e.period,start:R(e.start),end:R(e.end)}},n.setPeriod=function(e,t){var r=e.period,i=e.start,o=e.end,a=n.props,c=a.router,u=a.onZoom,s=R(i),l=R(o);t&&n.history.push(n.currentPeriod),Object(x.a)(u,{period:r,start:s,end:l}),n.zooming=function(){Object(m.c)({period:r,start:s?Object(k.k)(s):s,end:l?Object(k.k)(l):l},c),n.saveCurrentPeriod({period:r,start:i,end:o})}},n.handleChartReady=function(e){e.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),Object(x.a)(n.props.onChartReady,e)},n.handleZoomRestore=function(e,t){n.history.length&&(n.setPeriod(n.history[0]),n.history=[],Object(x.a)(n.props.onRestore,e,t))},n.handleDataZoom=function(e,t){var r=t.getModel().option.xAxis[0];if(null===r.rangeStart&&null===r.rangeEnd){var i=n.history.pop();if(!i)return;n.setPeriod(i)}else{var o=j.a.utc(r.rangeStart),a=j.a.utc(r.rangeEnd);n.setPeriod({period:null,start:o,end:a},!0)}Object(x.a)(n.props.onDataZoom,e,t)},n.handleChartFinished=function(){"function"==typeof n.zooming&&(n.zooming(),n.zooming=null),Object(x.a)(n.props.onFinished)},n.history=[],n.saveCurrentPeriod(e),n}return l()(r,[{key:"componentDidUpdate",value:function(){this.props.disabled||this.saveCurrentPeriod(this.props)}},{key:"render",value:function(){var e=this.props,t=e.utc,r=e.disabled,n=e.children,o=e.xAxisIndex,c=(e.onZoom,e.onRestore,e.onChartReady,e.onDataZoom,e.onFinished,a()(e,["utc","disabled","children","xAxisIndex","onZoom","onRestore","onChartReady","onDataZoom","onFinished"]));return n(r?c:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:t,dataZoom:Object(w.a)({xAxisIndex:o}),showTimeInTooltip:!0,toolBox:Object(P.a)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onRestore:this.handleZoomRestore,onFinished:this.handleChartFinished},c))}}]),r}(O.a.Component);D.displayName="ChartZoom",t.a=D},1955:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r(6),i=r.n(n),o=r(7),a=r.n(o),c=r(16),u=r.n(c),s=r(9),l=r.n(s),d=r(10),f=r.n(d),b=r(12),p=r.n(b),h=r(13),v=r.n(h),g=r(5),O=r.n(g),y=r(1),j=r.n(y),m=r(695),w=r(687),P=r(0);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var i=O()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v()(this,r)}}var S=function(e){p()(r,e);var t=C(r);function r(){return l()(this,r),t.apply(this,arguments)}return f()(r,[{key:"render",value:function(){var e=this.props,t=e.series,r=e.seriesOptions,n=u()(e,["series","seriesOptions"]);return Object(P.f)(w.a,i()({},n,{series:t.map((function(e){var t=e.seriesName,n=e.data,i=e.dataArray,o=u()(e,["seriesName","data","dataArray"]);return Object(m.a)(k(k(k({},r),o),{},{name:t,data:i||n.map((function(e){var t=e.value;return[e.name,t]})),animation:!1,animationThreshold:1,animationDuration:0}))}))}))}}]),r}(j.a.Component);S.displayName="LineChart"},1957:function(e,t,r){"use strict";var n=r(9),i=r.n(n),o=r(10),a=r.n(o),c=r(12),u=r.n(c),s=r(13),l=r.n(s),d=r(5),f=r.n(d),b=r(1),p=r.n(b),h=r(1970),v=r(0);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var O=function(e){u()(r,e);var t=g(r);function r(){var e;i()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={prevReloading:e.props.reloading,prevLoading:e.props.loading,key:1},e}return a()(r,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.loading,n=e.reloading;return r&&!n?Object(v.f)(h.a,{height:t,"data-test-id":"events-request-loading"}):Object(v.f)(p.a.Fragment,{key:String(this.state.key)},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevReloading,n=e.reloading,i=t.prevLoading,o=e.loading;return i!==o?{prevReloading:n,prevLoading:o,key:t.key+1}:o?{prevReloading:n,prevLoading:o,key:t.key}:r&&!n?{prevReloading:n,prevLoading:o,key:t.key+1}:{prevReloading:n,prevLoading:o,key:t.key}}}]),r}(p.a.Component);O.displayName="TransitionChart",O.defaultProps={height:"200px"},t.a=O},1970:function(e,t,r){"use strict";var n=r(16),i=r.n(n),o=r(3),a=(r(1),r(2076)),c=r(0),u=Object(o.a)((function(e){e.height;var t=i()(e,["height"]);return Object(c.f)("div",t,Object(c.f)(a.a,null))}),{target:"e1ply9d40",label:"LoadingPanel"})("flex:1;flex-shrink:0;overflow:hidden;height:",(function(e){return e.height}),";position:relative;border-color:transparent;margin-bottom:0;");u.defaultProps={height:"200px"},t.a=u},1973:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return m}));var n=r(22),i=r.n(n),o=r(30),a=r.n(o),c=r(7),u=r.n(c),s=r(33),l=r.n(s),d=r(276),f=r.n(d),b=r(205),p=r(89),h=r(2089);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e,t){var r=t.organization,n=t.project,i=t.environment,o=t.period,a=t.start,c=t.end,u=t.interval,s=t.includePrevious,d=t.query,f=t.yAxis,p=t.field,v=t.topEvents,O=t.orderby,y=Object(b.b)(s,o),j=Object.fromEntries(Object.entries({interval:u,project:n,environment:i,query:d,yAxis:f,field:p,topEvents:v,orderby:O}).filter((function(e){return void 0!==l()(e,2)[1]}))),m=Object(h.a)({period:o,start:a,end:c},{shouldDoublePeriod:y});return e.requestPromise("/organizations/".concat(r.slug,"/events-stats/"),{query:g(g({},j),m)})};function y(e,t,r){return j.apply(this,arguments)}function j(){return(j=a()(i.a.mark((function e(t,r,n){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f()(n,Object.values(p.e)),a=g(g({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-facets/"),{query:a}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,r){return w.apply(this,arguments)}function w(){return(w=a()(i.a.mark((function e(t,r,n){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f()(n,Object.values(p.e)),a=g(g({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-meta/"),{query:a}).then((function(e){return e.count})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2032:function(e,t,r){"use strict";var n=r(3),i=r(0),o=r(118),a=function(e){return Object(i.e)("display:block;width:1rem;height:1rem;border-radius:50%;background-color:",e.theme.green300,";animation:0.2s ",o.d," ease;opacity:",e.disabled?.4:null,";")},c=Object(n.a)("input",{target:"e1d7o7s40",label:"Radio"})("display:flex;padding:0;width:1.5em;height:1.5em;position:relative;border-radius:50%;align-items:center;justify-content:center;border:1px solid ",(function(e){return e.theme.border}),";box-shadow:inset 0 1px 1px rgba(0,0,0,0.04);background:none;appearance:none;margin:0 !important;&:focus,&.focus-visible{outline:none !important;border:1px solid ",(function(e){return e.theme.border}),";box-shadow:rgba(209,202,216,0.5) 0 0 0 3px;}&:checked:after{content:'';",a,"}");c.defaultProps={type:"radio"},t.a=c},2046:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r(6),i=r.n(n),o=r(33),a=r.n(o),c=r(16),u=r.n(c),s=r(3),l=r(1),d=r.n(l),f=r(102),b=r(2032),p=r(8),h=r(0),v=function(e){var t=e.value,r=e.disabled,n=e.choices,o=e.label,c=e.onChange,s=e.orientInline,l=u()(e,["value","disabled","choices","label","onChange","orientInline"]);return Object(h.f)(y,i()({orientInline:s},l,{role:"radiogroup","aria-labelledby":o}),(n||[]).map((function(e,n){var i=a()(e,3),o=i[0],u=i[1],s=i[2];return Object(h.f)(O,{key:n,role:"radio",index:n,"aria-checked":t===o,disabled:r},Object(h.f)(b.a,{"aria-label":o,disabled:r,checked:t===o,onChange:function(e){return!r&&c(o,e)}}),Object(h.f)(j,{disabled:r},u),s&&Object(h.f)(d.a.Fragment,null,Object(h.f)("div",null),Object(h.f)(m,null,s)))})))};v.displayName="RadioGroup";var g=function(e){return!["disabled","animate"].includes(e)&&Object(f.default)(e)},O=Object(s.a)("label",{shouldForwardProp:g,target:"e1r42lk40",label:"RadioLineItem"})("display:grid;grid-gap:0.25em 0.5em;grid-template-columns:max-content auto;align-items:center;cursor:",(function(e){return e.disabled?"default":"pointer"}),";outline:none;font-weight:normal;margin:0;"),y=Object(s.a)("div",{target:"e1r42lk41",label:"Container"})("display:grid;grid-gap:",(function(e){return Object(p.a)(e.orientInline?3:1)}),";grid-auto-flow:",(function(e){return e.orientInline?"column":"row"}),";grid-auto-rows:max-content;grid-auto-columns:max-content;"),j=Object(s.a)("div",{shouldForwardProp:g,target:"e1r42lk42",label:"RadioLineText"})("opacity:",(function(e){return e.disabled?.4:null}),";"),m=Object(s.a)("div",{target:"e1r42lk43",label:"Description"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeRelativeSmall}),";line-height:1.4em;");t.b=v},2089:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(33),i=r.n(n),o=r(40),a=r.n(o),c=r(32),u=r(45),s=function(e){var t=e.period,r=e.start,n=e.end,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.shouldDoublePeriod;if(t||r||n||(t=c.n),t){if(!s)return{statsPeriod:t};var l=t.match(/([0-9]+)([mhdw])/),d=i()(l,3),f=d[1],b=d[2];return{statsPeriod:"".concat(2*parseInt(f,10)).concat(b)}}if(!r||!n)throw new Error("start and end required");var p=Object(u.j)(r),h=Object(u.j)(n);if(s){var v=a()(n).diff(a()(r)),g=a()(r).subtract(v);return{start:Object(u.j)(g),end:h}}return{start:p,end:h}}},2141:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(35),i=r(4);function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=e.requestPromise("/organizations/".concat(t,"/discover/saved/"),{method:"GET",query:{query:"version:2 ".concat(r).trim()}});return o.catch((function(){Object(n.a)(Object(i.b)("Unable to load saved queries"))})),o}function a(e,t,r){var o=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r,"/"),{method:"GET"});return o.catch((function(){Object(n.a)(Object(i.b)("Unable to load saved query"))})),o}function c(e,t,r){var o=e.requestPromise("/organizations/".concat(t,"/discover/saved/"),{method:"POST",data:r});return o.catch((function(){Object(n.a)(Object(i.b)("Unable to create your saved query"))})),o}function u(e,t,r){var o=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r.id,"/"),{method:"PUT",data:r});return o.catch((function(){Object(n.a)(Object(i.b)("Unable to update your saved query"))})),o}function s(e,t,r){var o=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r,"/"),{method:"DELETE"});return o.catch((function(){Object(n.a)(Object(i.b)("Unable to delete the saved query"))})),o}},2267:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return u}));var n=r(35),i=r(4);function o(e,t,r){var o=r.title,a=r.widgets,c=e.requestPromise("/organizations/".concat(t,"/dashboards/"),{method:"POST",data:{title:o,widgets:a}});return c.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?Object(n.a)(r):Object(n.a)(Object(i.b)("Unable to create dashboard"))})),c}function a(e,t,r){var o={title:r.title,widgets:r.widgets},a=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r.id,"/"),{method:"PUT",data:o});return a.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?Object(n.a)(r):Object(n.a)(Object(i.b)("Unable to update dashboard"))})),a}function c(e,t,r){var o=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r,"/"),{method:"DELETE"});return o.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?Object(n.a)(r):Object(n.a)(Object(i.b)("Unable to delete dashboard"))})),o}function u(e,t,r){return e.requestPromise("/organizations/".concat(t,"/dashboards/widgets/"),{method:"POST",data:r})}},2274:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(4),i={id:"",dateCreated:"",createdBy:"",title:Object(n.b)("Untitled dashboard"),widgets:[]},o=[{label:Object(n.b)("Area chart"),value:"area"},{label:Object(n.b)("Bar chart"),value:"bar"},{label:Object(n.b)("Line chart"),value:"line"}];Object(n.b)("1 Minute"),Object(n.b)("5 Minutes"),Object(n.b)("15 Minutes"),Object(n.b)("30 Minutes"),Object(n.b)("1 Hour"),Object(n.b)("1 Day")},2337:function(e,t,r){"use strict";var n=r(7),i=r.n(n),o=r(9),a=r.n(o),c=r(10),u=r.n(c),s=r(12),l=r.n(s),d=r(13),f=r.n(d),b=r(5),p=r.n(b),h=r(3),v=r(1),g=r.n(v),O=r(11),y=r(61),j=r.n(y),m=r(688),w=r(1953),P=r(1949),x=r(1955),k=r(1957),C=r(1960),S=r(205),R=r(144),D=r(164),q=r(248),z=r(15),E=r(4),F=r(8),A=r(1946),Q=r(63),T=r(191),L=r(24),W=r(49),I=r(305),N=r(57),U=r(1940),Z=r(22),M=r.n(Z),B=r(30),G=r.n(B),H=r(33),J=r.n(H),V=r(1973),_=r(45);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f()(this,r)}}function $(e,t){return{seriesName:t,data:e.data.map((function(e){var t=J()(e,2);return{name:1e3*t[0],value:t[1].reduce((function(e,t){return e+t.count}),0)}}))}}function ee(e,t){var r=[],n=e.name;if(Object(S.f)(t)){var i=Object.keys(t).map((function(e){var r=n?"".concat(n," : ").concat(e):e,i=t[e];return[i.order||0,$(i,r)]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));r=r.concat(i)}else{var o=e.fields[0],a=n?"".concat(n," : ").concat(o):o,c=$(t,a);r.push(c)}return r}var te=function(e){l()(n,e);var t,r=X(n);function n(){var e;a()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).state={loading:!0,error:!1,results:[]},e}return u()(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.widget;j()(n.interval,e.widget.interval)&&j()(n.queries,e.widget.queries)&&j()(r,e.selection)||this.fetchData()}},{key:"fetchData",value:(t=G()(M.a.mark((function e(){var t,r,n,i,o,a,c,u,s,l,d,f,b,p,h=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,r=t.selection,n=t.api,i=t.organization,o=t.widget,this.setState({loading:!0,results:[]}),a=r.datetime.period,c=r.datetime,u=c.start,s=c.end,l=r.projects,d=r.environments,v=o.interval,g={start:u,end:s,period:a},O=void 0,O=Object(_.n)(v),f=Object(S.c)(g)/O>4e3?Object(S.d)(g,!0):v,b=o.queries.map((function(e){var t={organization:i,interval:f,start:u,end:s,project:l,environment:d,period:a,query:e.conditions,yAxis:e.fields,includePrevious:!1};return Object(V.a)(n,t)})),p=0,b.forEach(function(){var e=G()(M.a.mark((function e(t,r){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:n=e.sent,p++,h.setState((function(e){var t=e.results.concat(ee(o.queries[r],n));return Y(Y({},e),{},{results:t,loading:p!==b.length})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.setState({error:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}var v,g,O}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children,t=this.state;return e({loading:t.loading,results:t.results,error:t.error})}}]),n}(g.a.Component);te.displayName="WidgetQueries";var re=te,ne=r(0);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f()(this,r)}}var ce=function(e){l()(r,e);var t=ae(r);function r(){var e;a()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hovering:!1},e}return u()(r,[{key:"shouldComponentUpdate",value:function(e,t){return!j()(e.widget,this.props.widget)||!j()(e.selection,this.props.selection)||t.hovering!==this.state.hovering}},{key:"chartComponent",value:function(e){switch(this.props.widget.displayType){case"bar":return Object(ne.f)(m.a,e);case"line":default:return Object(ne.f)(x.a,e)}}},{key:"renderVisual",value:function(){var e,t,r,n=this,i=this.props,o=i.location,a=i.router,c=i.selection,u=i.api,s=i.organization,l=i.widget,d=c.datetime.period,f=c.datetime,b=f.start,p=f.end,h=c.projects,v=c.environments,g={right:10,top:5,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",type:"plain",textStyle:{verticalAlign:"top",fontSize:11,fontFamily:"Rubik"},selected:Object(S.e)(o),formatter:function(e){var t=Object(Q.n)(e);if(null!==t){var r=Object(Q.o)(t);null!==r&&(e=r.toUpperCase())}return e}},O=null!==(e=null===(t=l.queries[0])||void 0===t?void 0:null===(r=t.fields)||void 0===r?void 0:r[0])&&void 0!==e?e:"count()",y={grid:{left:"0px",right:"0px",top:"40px",bottom:"10px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:A.c},yAxis:{axisLabel:{color:L.b.chartLabel,formatter:function(e){return Object(A.b)(e,O)}}}};return Object(ne.f)(w.a,{router:a,period:d,start:b,end:p,projects:h,environments:v},(function(e){return Object(ne.f)(re,{api:u,organization:s,widget:l,selection:c},(function(t){var r=t.results,i=t.error,o=t.loading;if(i)return Object(ne.f)(P.a,null,Object(ne.f)(z.Ib,{color:"gray500",size:"lg"}));var a=r?L.b.charts.getColorPalette(r.length-2):[],c=r?r.map((function(e,t){return oe(oe({},e),{},{color:a[t]})})):[];return e.toolBox.z=-1,Object(ne.f)(k.a,{loading:o,reloading:o},Object(ne.f)(C.a,{visible:o}),Object(T.a)({value:n.chartComponent(oe(oe(oe({},e),y),{},{legend:g,series:c})),fixed:"Widget Chart"}))}))}))}},{key:"renderEditPanel",value:function(){if(!this.state.hovering||!this.props.isEditing)return null;var e=this.props,t=e.onEdit,r=e.onDelete;return Object(ne.f)(le,null,Object(ne.f)(de,null,Object(ne.f)(z.G,{color:"gray500",size:"lg"}),Object(ne.f)(fe,{onClick:function(){t()}},Object(ne.f)(z.u,{color:"gray500",size:"lg"})),Object(ne.f)(fe,{onClick:function(){r()}},Object(ne.f)(z.r,{color:"gray500",size:"lg"}))))}},{key:"render",value:function(){var e=this,t=this.props.widget;return Object(ne.f)(R.a,{customComponent:Object(ne.f)(ue,null,Object(E.b)("Error loading widget data"))},Object(ne.f)(se,{onMouseLeave:function(){e.state.hovering&&e.setState({hovering:!1})},onMouseOver:function(){e.state.hovering||e.setState({hovering:!0})}},Object(ne.f)(U.a,null,Object(ne.f)(U.g,null,t.title),this.renderVisual(),this.renderEditPanel())))}}]),r}(g.a.Component);ce.displayName="WidgetCard";t.a=Object(W.a)(Object(N.a)(Object(I.a)(O.withRouter(ce))));var ue=Object(h.a)(q.a,{target:"e1n2ojl30",label:"ErrorCard"})("display:flex;align-items:center;justify-content:center;background-color:",(function(e){return e.theme.alert.error.backgroundLight}),";border:1px solid ",(function(e){return e.theme.alert.error.border}),";color:",(function(e){return e.theme.alert.error.textLight}),";border-radius:",(function(e){return e.theme.borderRadius}),";margin-bottom:",Object(F.a)(2),";"),se=Object(h.a)(D.a,{target:"e1n2ojl31",label:"StyledPanel"})({name:"1uk1gs8",styles:"margin:0;"}),le=Object(h.a)("div",{target:"e1n2ojl32",label:"EditPanel"})({name:"hm5z1d",styles:"position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(255,255,255,0.5);"}),de=Object(h.a)("div",{target:"e1n2ojl33",label:"IconContainer"})({name:"1tmn3mk",styles:"display:flex;> * + *{margin-left:50px;}"}),fe=Object(h.a)("div",{target:"e1n2ojl34",label:"IconClick"})({name:"1p3qk0r",styles:"&:hover{cursor:pointer;}"})}}]);
//# sourceMappingURL=AddDashboardWidgetModal.js.map