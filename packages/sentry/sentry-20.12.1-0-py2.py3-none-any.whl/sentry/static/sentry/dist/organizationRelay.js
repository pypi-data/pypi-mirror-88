(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[218],{1938:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),c=n(12),l=n.n(c),s=n(13),u=n.n(s),f=n(5),d=n.n(f),p=(n(1),n(247)),b=n.n(p),y=n(408),h=n(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=v(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(b.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(y.a);m.displayName="AsyncView"},1939:function(e,t,n){"use strict";var r=n(16),a=n.n(r),i=n(9),o=n.n(i),c=n(10),l=n.n(c),s=n(12),u=n.n(s),f=n(13),d=n.n(f),p=n(5),b=n.n(p),y=n(3),h=n(1),v=n.n(h),m=n(204),g=n(8),O=n(0);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var w=function(e){u()(n,e);var t=j(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,o=e.tabs,c=e.noTitleStyles,l=a()(e,["icon","title","subtitle","action","tabs","noTitleStyles"]);return Object(O.f)("div",l,Object(O.f)(R,null,Object(O.f)(k,null,t&&Object(O.f)(z,null,t),n&&Object(O.f)(S,{tabs:o,styled:c},Object(O.f)(m.a,null,n),r&&Object(O.f)(x,null,r))),i&&Object(O.f)(C,{tabs:o},i)),o&&Object(O.f)("div",null,o))}}]),n}(v.a.Component);w.displayName="UnstyledSettingsPageHeader",w.defaultProps={noTitleStyles:!1};var R=Object(y.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),k=Object(y.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),S=Object(y.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(g.a)(4)," ").concat(Object(g.a)(2)," ").concat(Object(g.a)(2)," 0"):"".concat(Object(g.a)(4)," ").concat(Object(g.a)(2)," ").concat(Object(g.a)(4)," 0")}),";"),x=Object(y.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(g.a)(1.5)," 0 ",Object(g.a)(3),";"),z=Object(y.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(g.a)(1),";"),C=Object(y.a)("div",{target:"e1uay4fd5",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(g.a)(2)):null}),";"),D=Object(y.a)(w,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(g.a)(4),";");t.a=D},2050:function(e,t,n){"use strict";t.__esModule=!0;var r=n(2051);t.default=r.TextareaAutosize},2051:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.__esModule=!0;var c=n(1),l=n(2),s=n(2052),u=n(2053),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.textarea=null,t.onResize=function(e){t.props.onResize&&t.props.onResize(e)},t.updateLineHeight=function(){t.textarea&&t.setState({lineHeight:u(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t}return a(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.maxRows,r=t.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout((function(){return e.textarea&&s(e.textarea)})):this.textarea&&s(this.textarea),this.textarea&&this.textarea.addEventListener("autosize:resized",this.onResize)},t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener("autosize:resized",this.onResize),s.destroy(this.textarea))},t.prototype.render=function(){var e=this,t=this.props,n=(t.onResize,t.maxRows),r=(t.onChange,t.style),a=(t.innerRef,t.children),l=o(t,["onResize","maxRows","onChange","style","innerRef","children"]),s=this.state.lineHeight,u=n&&s?s*n:null;return c.createElement("textarea",i({},l,{onChange:this.onChange,style:u?i({},r,{maxHeight:u}):r,ref:function(t){e.textarea=t,"function"==typeof e.props.innerRef?e.props.innerRef(t):e.props.innerRef&&(e.props.innerRef.current=t)}}),a)},t.prototype.componentDidUpdate=function(){this.textarea&&s.update(this.textarea)},t.defaultProps={rows:1,async:!1},t.propTypes={rows:l.number,maxRows:l.number,onResize:l.func,innerRef:l.any,async:l.bool},t}(c.Component);t.TextareaAutosize=c.forwardRef((function(e,t){return c.createElement(f,i({},e,{innerRef:t}))}))},2052:function(e,t,n){var r,a,i;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/a=[e,t],void 0===(i="function"==typeof(r=function(e,t){"use strict";var n,r,a="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var t,n=null,r=null,o=null,c=function(){e.clientWidth!==r&&f()},l=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",f,!1),e.removeEventListener("keyup",f,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",f,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),a.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",f,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",f,!1),e.addEventListener("autosize:update",f,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:l,update:f}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),f()}function s(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",r=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),a&&(document.documentElement.scrollTop=a)}}function f(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(s("scroll"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(s("hidden"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==r){o=r;var a=i("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}}function c(e){var t=a.get(e);t&&t.destroy()}function l(e){var t=a.get(e);t&&t.update()}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((s=function(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return o(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],c),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=s,e.exports=t.default})?r.apply(t,a):r)||(e.exports=i)},2053:function(e,t,n){var r=n(2054);e.exports=function(e){var t=r(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var a=e.style.lineHeight;e.style.lineHeight=t+"em",t=r(e,"line-height"),n=parseFloat(t,10),a?e.style.lineHeight=a:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var i=e.nodeName,o=document.createElement(i);o.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&o.setAttribute("rows","1");var c=r(e,"font-size");o.style.fontSize=c,o.style.padding="0px",o.style.border="0px";var l=document.body;l.appendChild(o),n=o.offsetHeight,l.removeChild(o)}return n}},2054:function(e,t){e.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},2072:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(16),o=n.n(i),c=n(3),l=n(1),s=n.n(l),u=n(2050),f=n.n(u),d=n(102),p=n(420),b=n(0),y=s.a.forwardRef((function(e,t){var n=e.autosize,r=e.rows,i=o()(e,["autosize","rows"]);return n?Object(b.f)(f.a,a()({async:!0,ref:t,rows:r||2},i)):Object(b.f)("textarea",a()({ref:t},i))}));y.displayName="TextAreaControl";var h=Object(c.a)(y,{shouldForwardProp:function(e){return["autosize","rows","maxRows"].includes(e)||Object(d.default)(e)},target:"edis3zx0",label:"TextArea"})(p.a,";line-height:1.3em;");t.a=h},2094:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(16),o=n.n(i),c=(n(1),n(410)),l=n(72),s=n(15),u=n(4),f=n(0),d=function(e){var t=e.access,n=void 0===t?["org:write"]:t,r=o()(e,["access"]);return Object(f.f)(c.a,{access:n},(function(e){return!e.hasAccess&&Object(f.f)(l.b,a()({type:"warning",icon:Object(f.f)(s.Ib,{size:"sm"})},r),Object(u.b)("These settings can only be edited by users with the organization owner or manager role."))}))};d.displayName="PermissionAlert",t.a=d},2250:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(9),o=n.n(i),c=n(10),l=n.n(c),s=n(12),u=n.n(s),f=n(13),d=n.n(f),p=n(5),b=n.n(p),y=n(1),h=n.n(y),v=n(72),m=n(206),g=n(4),O=n(307),j=n(676),w=n(0);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var k={priority:"primary",cancelText:Object(g.b)("Cancel"),confirmText:Object(g.b)("Confirm")},S=function(e){u()(n,e);var t=R(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={disableConfirmButton:!0,confirmInput:""},e.handleChange=function(t){var n=t.target.value;n===e.props.confirmInput?e.setState({disableConfirmButton:!1,confirmInput:n}):e.setState({disableConfirmButton:!0,confirmInput:n})},e.renderConfirmMessage=function(){var t=e.props,n=t.message,r=t.confirmInput;return Object(w.f)(h.a.Fragment,null,Object(w.f)(v.b,{type:"error"},n),Object(w.f)(j.a,{flexibleControlStateSize:!0,inline:!1,label:Object(g.b)("Please enter %s to confirm the deletion",Object(w.f)("code",null,r))},Object(w.f)(O.a,{type:"text",placeholder:r,onChange:e.handleChange,value:e.state.confirmInput})))},e}return l()(n,[{key:"render",value:function(){var e=this.state.disableConfirmButton;return Object(w.f)(m.a,a()({},this.props,{bypass:!1,disableConfirmButton:e,message:this.renderConfirmMessage()}))}}]),n}(h.a.PureComponent);S.displayName="ConfirmDelete",S.defaultProps=k,t.a=S},2902:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),i=n(16),o=n.n(i),c=n(1),l=n.n(c),s=n(107),u=n(423),f=n(164),d=n(4),p=n(57),b=n(7),y=n.n(b),h=n(22),v=n.n(h),m=n(30),g=n.n(m),O=n(9),j=n.n(O),w=n(10),R=n.n(w),k=n(115),S=n.n(k),x=n(12),z=n.n(x),C=n(13),D=n.n(C),P=n(5),E=n.n(P),T=n(3),K=n(61),F=n.n(K),A=n(131),N=n.n(A),L=n(35),M=n(65),V=n(425),H=n(29),W=n(58),_=n(15),B=n(1938),I=n(1939),q=n(675),U=n(2094),Y=n(28),X=n.n(Y),J=n(440),G=n(8),$=n(307),Q=n(2072),Z=n(676),ee=n(754),te=n(680),ne=n(0),re=function(e){var t,n=e.values,r=e.onChange,a=e.errors,i=e.onValidate,o=e.isFormValid,c=e.disables,l=e.onValidateKey,s=e.onSave,u=function(e){return function(t){r(e,t.target.value)}};return Object(ne.f)("form",{onSubmit:function(){o&&s()},id:"relay-form"},Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(d.b)("Display Name"),error:a.name,inline:!1,stacked:!0,required:!0},Object(ne.f)($.a,{type:"text",name:"name",placeholder:Object(d.b)("Display Name"),onChange:u("name"),value:n.name,onBlur:i("name"),disabled:c.name})),c.publicKey?Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(d.b)("Public Key"),inline:!1,stacked:!0},Object(ne.f)(te.a,{onCopy:(t=n.publicKey,g()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))},n.publicKey)):Object(ne.f)(Z.a,{label:Object(d.b)("Public Key"),error:a.publicKey,flexibleControlStateSize:!0,inline:!1,stacked:!0,required:!0},Object(ne.f)($.a,{type:"text",name:"publicKey",placeholder:Object(d.b)("Public Key"),onChange:u("publicKey"),value:n.publicKey,onBlur:l}),Object(ne.f)(ee.a,null,Object(d.b)("Only enter the Public Key value from your credentials file. Never share the Secret key with Sentry or any third party"))),Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(d.b)("Description"),inline:!1,stacked:!0},Object(ne.f)(Q.a,{name:"description",placeholder:Object(d.b)("Description"),onChange:u("description"),value:n.description,disabled:c.description})))};re.displayName="Form";var ae=re;var ie=function(e){var t,n=null===(t=e.responseJSON)||void 0===t?void 0:t.trustedRelays[0];return n?"Bad structure received for Trusted Relays"===n?{type:"bad-structure",message:Object(d.b)("An invalid structure was sent.")}:"Relay key info with missing name in Trusted Relays"===n?{type:"missing-name",message:Object(d.b)("Field Required")}:"Relay key info with empty name in Trusted Relays"===n?{type:"empty-name",message:Object(d.b)("Invalid Field")}:n.startsWith("Missing public key for Relay key info with name:")?{type:"missing-key",message:Object(d.b)("Field Required")}:n.startsWith("Invalid public key for relay key info with name:")?{type:"invalid-key",message:Object(d.b)("Invalid Relay key")}:n.startsWith("Duplicated key in Trusted Relays:")?{type:"duplicated-key",message:Object(d.b)("Relay key already taken")}:{type:"unknown",message:Object(d.b)("An unknown error occurred while saving Relay public key.")}:{type:"unknown",message:Object(d.b)("An unknown error occurred while saving Relay public key.")}},oe=n(109),ce=function(e){var t=e.title,n=e.onSave,r=e.content,a=e.disabled,i=e.Header,o=e.Body,c=e.Footer,s=e.closeModal,u=e.btnSaveLabel,f=void 0===u?Object(d.b)("Save"):u;return Object(ne.f)(l.a.Fragment,null,Object(ne.f)(i,{closeButton:!0},t),Object(ne.f)(o,null,r),Object(ne.f)(c,null,Object(ne.f)(oe.a,{gap:1.5},Object(ne.f)(H.a,{onClick:s},Object(d.b)("Cancel")),Object(ne.f)(H.a,{onClick:function(e){e.preventDefault(),n()},disabled:a,type:"submit",priority:"primary",form:"relay-form"},f))))};ce.displayName="Modal";var le=ce;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var de=function(e){z()(n,e);var t=fe(n);function n(){var e;j()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=e.getDefaultState(),e.handleChange=function(t,n){e.setState((function(e){return{values:ue(ue({},e.values),{},y()({},t,n)),errors:N()(e.errors,t)}}))},e.handleSave=g()(v.a.mark((function t(){var n,r,a,i,o,c,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.onSubmitSuccess,a=n.closeModal,i=n.orgSlug,o=n.api,c=e.getData().trustedRelays.map((function(e){return N()(e,["created","lastModified"])})),t.prev=2,t.next=5,o.requestPromise("/organizations/".concat(i,"/"),{method:"PUT",data:{trustedRelays:c}});case 5:l=t.sent,r(l),a(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.convertErrorXhrResponse(ie(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.handleValidate=function(t){return function(){var n=!e.state.values[t].replace(/\s/g,""),r=e.state.errors[t];n&&r||(!n||r?!n&&r&&e.clearError(t):e.setState((function(e){return{errors:ue(ue({},e.errors),{},y()({},t,Object(d.b)("Field Required")))}})))}},e.handleValidateKey=function(){var t=e.props.savedRelays,n=e.state,r=n.values,a=n.errors;!t.find((function(e){return e.publicKey===r.publicKey}))||a.publicKey?(a.publicKey&&e.setState({errors:N()(a,"publicKey")}),e.handleValidate("publicKey")()):e.setState({errors:ue(ue({},a),{},{publicKey:Object(d.b)("Relay key already taken")})})},e}return R()(n,[{key:"componentDidMount",value:function(){this.validateForm()}},{key:"componentDidUpdate",value:function(e,t){F()(t.values,this.state.values)||this.validateForm(),!F()(t.errors,this.state.errors)&&Object.keys(this.state.errors).length>0&&this.setValidForm(!1)}},{key:"getDefaultState",value:function(){return{values:{name:"",publicKey:"",description:""},requiredValues:["name","publicKey"],errors:{},disables:{},isFormValid:!1,title:this.getTitle()}}},{key:"getTitle",value:function(){return""}},{key:"getData",value:function(){throw new Error("Not implemented")}},{key:"getBtnSaveLabel",value:function(){}},{key:"setValidForm",value:function(e){this.setState({isFormValid:e})}},{key:"validateForm",value:function(){var e=this.state,t=e.values,n=e.requiredValues,r=e.errors,a=n.every((function(e){return!!t[e].replace(/\s/g,"")&&!r[e]}));this.setValidForm(a)}},{key:"clearError",value:function(e){this.setState((function(t){return{errors:N()(t.errors,e)}}))}},{key:"convertErrorXhrResponse",value:function(e){switch(e.type){case"invalid-key":case"missing-key":this.setState((function(t){return{errors:ue(ue({},t.errors),{},{publicKey:e.message})}}));break;case"empty-name":case"missing-name":this.setState((function(t){return{errors:ue(ue({},t.errors),{},{name:e.message})}}));break;default:Object(L.a)(e.message)}}},{key:"getForm",value:function(){var e=this.state,t=e.values,n=e.errors,r=e.disables,a=e.isFormValid;return Object(ne.f)(ae,{isFormValid:a,onSave:this.handleSave,onChange:this.handleChange,onValidate:this.handleValidate,onValidateKey:this.handleValidateKey,errors:n,values:t,disables:r})}},{key:"getContent",value:function(){return this.getForm()}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.isFormValid,r=this.getBtnSaveLabel(),i=this.getContent();return Object(ne.f)(le,a()({},this.props,{title:t,onSave:this.handleSave,btnSaveLabel:r,disabled:!n,content:i}))}}]),n}(l.a.Component);de.displayName="DialogManager";var pe=de,be=n(438),ye=Object(T.a)((function(e){var t=e.title,n=e.subtitle,r=e.children,a=e.className;return Object(ne.f)(be.a,{className:a},t,n&&Object(ne.f)("small",null,n),Object(ne.f)("div",null,r))}),{target:"emhqto00",label:"Item"})("display:grid;grid-gap:",Object(G.a)(1.5),";"),he=function(e){var t=e.command;return Object(ne.f)(me,null,Object(ne.f)(ge,null,"$"),t)};he.displayName="Terminal";var ve=he,me=Object(T.a)("div",{target:"e1i4f0j90",label:"Wrapper"})("background:",(function(e){return e.theme.gray500}),";padding:",Object(G.a)(1.5)," ",Object(G.a)(3),";font-family:",(function(e){return e.theme.text.familyMono}),";color:",(function(e){return e.theme.white}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object(G.a)(.75),";"),ge=Object(T.a)("div",{target:"e1i4f0j91",label:"Prompt"})("color:",(function(e){return e.theme.gray300}),";");function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var je=function(e){z()(n,e);var t=Oe(n);function n(){return j()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getTitle",value:function(){return Object(d.b)("Register Key")}},{key:"getBtnSaveLabel",value:function(){return Object(d.b)("Register")}},{key:"getData",value:function(){var e=this.props.savedRelays;return{trustedRelays:[].concat(X()(e),[this.state.values])}}},{key:"getContent",value:function(){return Object(ne.f)(we,{symbol:"colored-numeric"},Object(ne.f)(ye,{title:Object(d.c)("Initialize the configuration. [link: Learn how]",{link:Object(ne.f)(W.a,{href:"https://docs.sentry.io/product/relay/getting-started/#initializing-configuration"})}),subtitle:Object(d.b)("Within your terminal:")},Object(ne.f)(ve,{command:"relay config init"})),Object(ne.f)(ye,{title:Object(d.c)("Go to the file [jsonFile: credentials.json] to find the public key and enter it below.",{jsonFile:Object(ne.f)(Re,{href:"https://docs.sentry.io/product/relay/getting-started/#registering-relay-with-sentry"})})},S()(E()(n.prototype),"getForm",this).call(this)))}}]),n}(pe),we=Object(T.a)(J.a,{target:"e11lw50d0",label:"StyledList"})("display:grid;grid-gap:",Object(G.a)(3),";"),Re=Object(T.a)(W.a,{target:"e11lw50d1",label:"CredentialsLink"})("color:",(function(e){return e.theme.active}),";:hover{color:",(function(e){return e.theme.active}),";}");function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var ze=function(e){z()(n,e);var t=xe(n);function n(){return j()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getDefaultState",value:function(){return Se(Se({},S()(E()(n.prototype),"getDefaultState",this).call(this)),{},{values:{name:this.props.relay.name,publicKey:this.props.relay.publicKey,description:this.props.relay.description||""},disables:{publicKey:!0}})}},{key:"getTitle",value:function(){return Object(d.b)("Edit Key")}},{key:"getData",value:function(){var e=this.props.savedRelays,t=this.state.values;return{trustedRelays:e.map((function(e){return e.publicKey===t.publicKey?t:e}))}}}]),n}(pe),Ce=n(411),De=function(){return Object(ne.f)(f.a,null,Object(ne.f)(Ce.a,null,Object(d.b)("No Keys Registered.")))};De.displayName="EmptyState";var Pe=De,Ee=n(513),Te=n.n(Ee),Ke=n(412),Fe=function(e){var t=e.activities;return Object(ne.f)(Ne,{headers:[Object(d.b)("Version"),Object(d.b)("First Used"),Object(d.b)("Last Used")]},t.map((function(e){var t=e.relayId,n=e.version,r=e.firstSeen,a=e.lastSeen;return Object(ne.f)(l.a.Fragment,{key:t},Object(ne.f)("div",null,n),Object(ne.f)(Ke.a,{date:r,seconds:!1}),Object(ne.f)(Ke.a,{date:a,seconds:!1}))})))};Fe.displayName="ActivityList";var Ae=Fe,Ne=Object(T.a)(f.g,{target:"eeq3cnj0",label:"StyledPanelTable"})("grid-template-columns:repeat(3,2fr);@media (min-width:",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:2fr repeat(2,1fr);}"),Le=n(251),Me=n(2250),Ve=n(303),He=function(e){var t=e.publicKey,n=e.name,r=e.description,a=e.created,i=e.disabled,o=e.onEdit,c=e.onDelete,l=Object(ne.f)(H.a,{size:"small",icon:Object(ne.f)(_.r,null),label:Object(d.b)("Delete Key"),disabled:i,title:i?Object(d.b)("You do not have permission to delete keys"):void 0});return Object(ne.f)(qe,null,Object(ne.f)(Be,null,Object(ne.f)(_e,null,Object(ne.f)("div",null,n),r&&Object(ne.f)(Ve.a,{position:"top",size:"sm",title:r})),Object(ne.f)(Ie,null,Object(d.c)("Created on [date]",{date:Object(ne.f)(Ke.a,{date:a,timeAndDate:!0})}))),Object(ne.f)(oe.a,{gap:1},Object(ne.f)(Le.a,{value:t},Object(ne.f)(H.a,{size:"small",icon:Object(ne.f)(_.q,null)},Object(d.b)("Copy Key"))),Object(ne.f)(H.a,{size:"small",onClick:o(t),icon:Object(ne.f)(_.u,null),label:Object(d.b)("Edit Key"),disabled:i,title:i?Object(d.b)("You do not have permission to edit keys"):void 0}),i?l:Object(ne.f)(Me.a,{message:Object(d.b)("After removing this Public Key, your Relay will no longer be able to communicate with Sentry and events will be dropped."),onConfirm:c(t),confirmInput:n},l)))};He.displayName="CardHeader";var We=He,_e=Object(T.a)("div",{target:"e5hz7hr0",label:"Name"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object(G.a)(.5),";"),Be=Object(T.a)("div",{target:"e5hz7hr1",label:"MainInfo"})("color:",(function(e){return e.theme.textColor}),";display:grid;grid-gap:",Object(G.a)(1),";"),Ie=Object(T.a)("small",{target:"e5hz7hr2",label:"Date"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),qe=Object(T.a)("div",{target:"e5hz7hr3",label:"Header"})("display:grid;grid-gap:",Object(G.a)(1),";align-items:flex-start;@media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr max-content;}");var Ue=function(e){var t=e.children;return Object(ne.f)(Xe,null,t)};Ue.displayName="CommandLine";var Ye=Ue,Xe=Object(T.a)("code",{target:"encb4l0",label:"Wrapper"})("padding:",Object(G.a)(.5)," ",Object(G.a)(1),";color:",(function(e){return e.theme.pink300}),";background:",(function(e){return e.theme.pink100}),";border:1px solid ",(function(e){return e.theme.pink200}),";font-family:",(function(e){return e.theme.text.familyMono}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;"),Je=function(e){var t=e.onRefresh,n=e.disabled;return Object(ne.f)(f.a,null,Object(ne.f)(Ce.a,{title:Object(d.b)("Waiting on Activity!"),description:n?void 0:Object(d.c)("Run relay in your terminal with [commandLine]",{commandLine:Object(ne.f)(Ye,null,"relay run")}),action:Object(ne.f)(H.a,{icon:Object(ne.f)(_.jb,null),onClick:t},Object(d.b)("Refresh"))}))};Je.displayName="WaitingActivity";var Ge=Je,$e=function(e){var t=e.relays,n=e.relayActivities,r=e.onRefresh,a=e.onDelete,i=e.onEdit,o=e.disabled,c=function(e,t){return e.reduce((function(e,n){var r=n.name,a=n.description,i=n.created,o=n.publicKey;return e.hasOwnProperty(o)||(e[o]={name:r,description:a,created:i,activities:[]}),e[o].activities.length||(e[o].activities=t.filter((function(e){return e.publicKey===o}))),e}),{})}(Te()(t,(function(e){return e.created}),["desc"]),n);return Object(ne.f)(Ze,null,Object.keys(c).map((function(e){var t=c[e],n=t.name,l=t.description,s=t.created,u=t.activities;return Object(ne.f)(et,{key:e},Object(ne.f)(We,{publicKey:e,name:n,description:l,created:s,onEdit:i,onDelete:a,disabled:o}),function(e){return e.length?Object(ne.f)(Ae,{activities:e}):Object(ne.f)(Ge,{onRefresh:r,disabled:o})}(u))})))};$e.displayName="List";var Qe=$e,Ze=Object(T.a)("div",{target:"e1nk16xu0",label:"Wrapper"})("display:grid;grid-gap:",Object(G.a)(3),";"),et=Object(T.a)("div",{target:"e1nk16xu1",label:"Card"})("display:grid;grid-gap:",Object(G.a)(1),";");function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var at=function(e){z()(n,e);var t=rt(n);function n(){var e;j()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleDelete=function(t){return g()(v.a.mark((function n(){var r,a,i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state.relays,a=r.filter((function(e){return e.publicKey!==t})).map((function(e){return N()(e,["created","lastModified"])})),n.prev=2,n.next=5,e.api.requestPromise("/organizations/".concat(e.props.organization.slug,"/"),{method:"PUT",data:{trustedRelays:a}});case 5:i=n.sent,Object(L.d)(Object(d.b)("Successfully deleted Relay public key")),e.setRelays(i.trustedRelays),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),Object(L.a)(Object(d.b)("An unknown error occurred while deleting Relay public key"));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))},e.handleOpenEditDialog=function(t){return function(){var n=e.state.relays.find((function(e){return e.publicKey===t}));n&&Object(M.j)((function(t){return Object(ne.f)(ze,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,relay:n,onSubmitSuccess:function(t){e.successfullySaved(t,Object(d.b)("Successfully updated Relay public key"))}}))}))}},e.handleOpenAddDialog=function(){Object(M.j)((function(t){return Object(ne.f)(je,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,onSubmitSuccess:function(t){e.successfullySaved(t,Object(d.b)("Successfully added Relay public key"))}}))}))},e.handleRefresh=function(){e.fetchData()},e}return R()(n,[{key:"componentDidUpdate",value:function(e,t){F()(t.relays,this.state.relays)||(this.fetchData(),Object(V.h)(nt(nt({},e.organization),{},{trustedRelays:this.state.relays}))),S()(E()(n.prototype),"componentDidUpdate",this).call(this,e,t)}},{key:"getTitle",value:function(){return Object(d.b)("Relay")}},{key:"getDefaultState",value:function(){return nt(nt({},S()(E()(n.prototype),"getDefaultState",this).call(this)),{},{relays:this.props.organization.trustedRelays})}},{key:"getEndpoints",value:function(){var e=this.props.organization;return[["relayActivities","/organizations/".concat(e.slug,"/relay_usage/")]]}},{key:"setRelays",value:function(e){this.setState({relays:e})}},{key:"successfullySaved",value:function(e,t){Object(L.d)(t),this.setRelays(e.trustedRelays)}},{key:"renderContent",value:function(e){var t=this.state,n=t.relays,r=t.relayActivities;return t.loading?this.renderLoading():n.length?Object(ne.f)(Qe,{relays:n,relayActivities:r,onEdit:this.handleOpenEditDialog,onRefresh:this.handleRefresh,onDelete:this.handleDelete,disabled:e}):Object(ne.f)(Pe,null)}},{key:"renderBody",value:function(){var e=!this.props.organization.access.includes("org:write");return Object(ne.f)(l.a.Fragment,null,Object(ne.f)(I.a,{title:Object(d.b)("Relay"),action:Object(ne.f)(H.a,{title:e?Object(d.b)("You do not have permission to register keys"):void 0,priority:"primary",size:"small",icon:Object(ne.f)(_.b,{size:"xs",isCircled:!0}),onClick:this.handleOpenAddDialog,disabled:e},Object(d.b)("Register Key"))}),Object(ne.f)(U.a,null),Object(ne.f)(it,null,Object(d.b)("Sentry Relay offers enterprise-grade data security by providing a standalone service that acts as a middle layer between your application and sentry.io.")),Object(ne.f)(q.a,null,Object(d.c)("Go to [link:Relay Documentation] for setup and details.",{link:Object(ne.f)(W.a,{href:"https://getsentry.github.io/relay/"})})),this.renderContent(e))}}]),n}(B.a),it=Object(T.a)(q.a,{target:"ecjys5m0",label:"StyledTextBlock"})({name:"1274r9c",styles:"max-width:600px;"}),ot=function(e){var t=e.organization,n=o()(e,["organization"]);return Object(ne.f)(s.a,{features:["relay"],organization:t,renderDisabled:function(){return Object(ne.f)(u.a,{alert:f.b,features:t.features,featureName:Object(d.b)("Relay")})}},Object(ne.f)(at,a()({organization:t},n)))};ot.displayName="OrganizationRelay";t.default=Object(p.a)(ot)}}]);
//# sourceMappingURL=organizationRelay.js.map