{"version":3,"sources":["webpack:///./app/views/performance/transactionVitals/constants.tsx","webpack:///./app/views/performance/transactionSummary/utils.tsx","webpack:///./app/utils/discover/discoverQuery.tsx","webpack:///./app/utils/discover/genericDiscoverQuery.tsx","webpack:///./app/components/discoverButton.tsx","webpack:///./app/views/sharedGroupDetails/sharedGroupHeader.tsx","webpack:///./app/views/sharedGroupDetails/index.tsx"],"names":["NUM_BUCKETS","PERCENTILE","WEB_VITAL_DETAILS","WebVital","FP","slug","name","t","acronym","description","failureThreshold","type","measurementType","FCP","LCP","FID","CLS","TTFB","RequestTime","LONG_WEB_VITAL_NAMES","Object","fromEntries","values","map","value","WEB_VITAL_ACRONYMS","FILTER_OPTIONS","label","_VITAL_GROUPS","vitals","min","precision","_COLORS","theme","charts","getColorPalette","reduce","count","length","reverse","VITAL_GROUPS","group","colors","splice","ZOOM_KEYS","keys","forEach","vital","vitalSlug","push","TransactionFilterOptions","transactionSummaryRouteWithQuery","orgSlug","transaction","projectID","query","unselectedSeries","display","trendDisplay","showTransactions","pathname","generateTransactionSummaryRoute","project","environment","statsPeriod","start","end","DiscoverQuery","props","route","withApi","GenericDiscoverQuery","state","isLoading","tableFetchID","undefined","error","tableData","pageLinks","_shouldRefetchData","prevProps","thisAPIPayload","getPayload","otherAPIPayload","isAPIPayloadSimilar","limit","cursor","fetchData","api","beforeFetch","afterFetch","eventView","setError","noPagination","isValid","url","Symbol","apiPayload","setState","per_page","requestPromise","method","includeAllArgs","then","data","jqXHR","prevState","getResponseHeader","err","responseJSON","detail","this","refetchCondition","eventViewValidation","shouldRefetchExternal","shouldRefetchData","getRequestPayload","getEventsAPIPayload","location","childrenProps","children","React","Component","DiscoverButton","buttonProps","features","hasFeature","disabled","SharedGroupHeader","Wrapper","Details","Title","title","isUnhandled","message","culprit","space","p","border","fontSizeExtraLarge","breakpoints","headerFontSize","overflowEllipsis","SharedGroupDetails","getInitialState","handleRetry","loading","document","body","classList","add","remove","params","shareId","onRetry","permalink","latestEvent","getTitle","className","to","Container","organization","event","isShare","childContextTypes","SentryTypes","Group"],"mappings":"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","file":"SharedGroupDetails.js","sourcesContent":["import {t} from 'app/locale';\nimport {SelectValue} from 'app/types';\nimport {measurementType, WebVital} from 'app/utils/discover/fields';\nimport theme from 'app/utils/theme';\n\nimport {Vital, VitalGroup} from './types';\n\nexport const NUM_BUCKETS = 100;\n\nexport const PERCENTILE = 0.75;\n\nexport const WEB_VITAL_DETAILS: Record<WebVital, Vital> = {\n  [WebVital.FP]: {\n    slug: 'fp',\n    name: t('First Paint'),\n    acronym: 'FP',\n    description: t(\n      'Render time of the first pixel loaded in the viewport (may overlap with FCP).'\n    ),\n    failureThreshold: 3000,\n    type: measurementType(WebVital.FP),\n  },\n  [WebVital.FCP]: {\n    slug: 'fcp',\n    name: t('First Contentful Paint'),\n    acronym: 'FCP',\n    description: t(\n      'Render time of the first image, text or other DOM node in the viewport.'\n    ),\n    failureThreshold: 3000,\n    type: measurementType(WebVital.FCP),\n  },\n  [WebVital.LCP]: {\n    slug: 'lcp',\n    name: t('Largest Contentful Paint'),\n    acronym: 'LCP',\n    description: t(\n      'Render time of the largest image, text or other DOM node in the viewport.'\n    ),\n    failureThreshold: 4000,\n    type: measurementType(WebVital.LCP),\n  },\n  [WebVital.FID]: {\n    slug: 'fid',\n    name: t('First Input Delay'),\n    acronym: 'FID',\n    description: t(\n      'Response time of the browser to a user interaction (clicking, tapping, etc).'\n    ),\n    failureThreshold: 300,\n    type: measurementType(WebVital.FID),\n  },\n  [WebVital.CLS]: {\n    slug: 'cls',\n    name: t('Cumulative Layout Shift'),\n    acronym: 'CLS',\n    description: t(\n      'Sum of layout shift scores that measure the visual stability of the page.'\n    ),\n    failureThreshold: 0.25,\n    type: measurementType(WebVital.CLS),\n  },\n  [WebVital.TTFB]: {\n    slug: 'ttfb',\n    name: t('Time to First Byte'),\n    acronym: 'TTFB',\n    description: t(\n      \"The time that it takes for a user's browser to receive the first byte of page content.\"\n    ),\n    failureThreshold: 600,\n    type: measurementType(WebVital.TTFB),\n  },\n  [WebVital.RequestTime]: {\n    slug: 'ttfb.requesttime',\n    name: t('Request Time'),\n    acronym: 'RT',\n    description: t(\n      'Captures the time spent making the request and receiving the first byte of the response.'\n    ),\n    failureThreshold: 600,\n    type: measurementType(WebVital.RequestTime),\n  },\n};\n\n// translate known short form names into their long forms\nexport const LONG_WEB_VITAL_NAMES = Object.fromEntries(\n  Object.values(WEB_VITAL_DETAILS).map(value => {\n    return [value.slug, value.name];\n  })\n);\n\nexport const WEB_VITAL_ACRONYMS = Object.fromEntries(\n  Object.values(WEB_VITAL_DETAILS).map(value => {\n    return [value.slug, value.acronym];\n  })\n);\n\nexport const FILTER_OPTIONS: SelectValue<string>[] = [\n  {label: t('Exclude Outliers'), value: 'exclude_outliers'},\n  {label: t('View All'), value: 'all'},\n];\n\n/**\n * This defines the grouping for histograms. Histograms that are in the same group\n * will be queried together on initial load for alignment. However, the zoom controls\n * are defined for each measurement independently.\n */\nconst _VITAL_GROUPS = [\n  {\n    vitals: [WebVital.FP, WebVital.FCP, WebVital.LCP],\n    min: 0,\n  },\n  {\n    vitals: [WebVital.FID],\n    min: 0,\n    precision: 2,\n  },\n  {\n    vitals: [WebVital.CLS],\n    min: 0,\n    precision: 2,\n  },\n];\n\nconst _COLORS = [\n  ...theme.charts.getColorPalette(\n    _VITAL_GROUPS.reduce((count, {vitals}) => count + vitals.length, 0) - 1\n  ),\n].reverse();\n\nexport const VITAL_GROUPS: VitalGroup[] = _VITAL_GROUPS.map(group => ({\n  ...group,\n  colors: _COLORS.splice(0, group.vitals.length),\n}));\n\nexport const ZOOM_KEYS = _VITAL_GROUPS.reduce((keys: string[], {vitals}) => {\n  vitals.forEach(vital => {\n    const vitalSlug = WEB_VITAL_DETAILS[vital].slug;\n    keys.push(`${vitalSlug}Start`);\n    keys.push(`${vitalSlug}End`);\n  });\n  return keys;\n}, []);\n","import {Query} from 'history';\n\nimport {TrendFunctionField} from '../trends/types';\n\nimport {DisplayModes} from './charts';\n\nexport enum TransactionFilterOptions {\n  FASTEST = 'fastest',\n  SLOW = 'slow',\n  OUTLIER = 'outlier',\n  RECENT = 'recent',\n}\n\nexport function generateTransactionSummaryRoute({orgSlug}: {orgSlug: String}): string {\n  return `/organizations/${orgSlug}/performance/summary/`;\n}\n\nexport function transactionSummaryRouteWithQuery({\n  orgSlug,\n  transaction,\n  projectID,\n  query,\n  unselectedSeries = 'p100()',\n  display,\n  trendDisplay,\n  showTransactions,\n}: {\n  orgSlug: string;\n  transaction: string;\n  query: Query;\n  display?: DisplayModes;\n  trendDisplay?: TrendFunctionField;\n  unselectedSeries?: string | string[];\n  projectID?: string | string[];\n  showTransactions?: TransactionFilterOptions;\n}) {\n  const pathname = generateTransactionSummaryRoute({\n    orgSlug,\n  });\n\n  return {\n    pathname,\n    query: {\n      transaction,\n      project: projectID,\n      environment: query.environment,\n      statsPeriod: query.statsPeriod,\n      start: query.start,\n      end: query.end,\n      query: query.query,\n      unselectedSeries,\n      showTransactions,\n      display,\n      trendDisplay,\n    },\n  };\n}\n","import React from 'react';\n\nimport {MetaType} from 'app/utils/discover/eventView';\nimport withApi from 'app/utils/withApi';\n\nimport GenericDiscoverQuery, {DiscoverQueryProps} from './genericDiscoverQuery';\n\n/**\n * An individual row in a DiscoverQuery result\n */\nexport type TableDataRow = {\n  id: string;\n  [key: string]: React.ReactText;\n};\n\n/**\n * A DiscoverQuery result including rows and metadata.\n */\nexport type TableData = {\n  data: Array<TableDataRow>;\n  meta?: MetaType;\n};\n\nfunction DiscoverQuery(props: DiscoverQueryProps) {\n  return <GenericDiscoverQuery<TableData, {}> route=\"eventsv2\" {...props} />;\n}\n\nexport default withApi(DiscoverQuery);\n","import React from 'react';\nimport {Location} from 'history';\n\nimport {EventQuery} from 'app/actionCreators/events';\nimport {Client} from 'app/api';\nimport EventView, {\n  isAPIPayloadSimilar,\n  LocationQuery,\n} from 'app/utils/discover/eventView';\n\nexport type GenericChildrenProps<T> = {\n  isLoading: boolean;\n  error: null | string;\n  tableData: T | null;\n  pageLinks: null | string;\n};\n\nexport type DiscoverQueryProps = {\n  api: Client;\n  /**\n   * Used as the default source for cursor values.\n   */\n  location: Location;\n  eventView: EventView;\n  orgSlug: string;\n  /**\n   * Record limit to get.\n   */\n  limit?: number;\n  /**\n   * Explicit cursor value if you aren't using `location.query.cursor` because there are\n   * multiple paginated results on the page.\n   */\n  cursor?: string;\n  /**\n   * Include this whenever pagination won't be used. Limit can still be used when this is\n   * passed, but cursor will be ignored.\n   */\n  noPagination?: boolean;\n};\n\ntype RequestProps<P> = DiscoverQueryProps & P;\n\ntype ReactProps<T> = {\n  children?: (props: GenericChildrenProps<T>) => React.ReactNode;\n};\n\ntype Props<T, P> = RequestProps<P> &\n  ReactProps<T> & {\n    /**\n     * Route to the endpoint\n     */\n    route: string;\n    /**\n     * Allows components to modify the payload before it is set.\n     */\n    getRequestPayload?: (props: Props<T, P>) => any;\n    /**\n     * An external hook in addition to the event view check to check if data should be refetched\n     */\n    shouldRefetchData?: (prevProps: Props<T, P>, props: Props<T, P>) => boolean;\n    /**\n     * A hook before fetch that can be used to do things like clearing the api\n     */\n    beforeFetch?: (api: Client) => void;\n    /**\n     * A hook to modify data into the correct output after data has been received\n     */\n    afterFetch?: (data: any, props: Props<T, P>) => T;\n    /**\n     * A callback to set an error so that the error can be rendered in parent components\n     */\n    setError?: (msg: string | undefined) => void;\n  };\n\ntype State<T> = {\n  tableFetchID: symbol | undefined;\n} & GenericChildrenProps<T>;\n\n/**\n * Generic component for discover queries\n */\nclass GenericDiscoverQuery<T, P> extends React.Component<Props<T, P>, State<T>> {\n  state: State<T> = {\n    isLoading: true,\n    tableFetchID: undefined,\n    error: null,\n\n    tableData: null,\n    pageLinks: null,\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props<T, P>) {\n    // Reload data if we aren't already loading,\n    const refetchCondition = !this.state.isLoading && this._shouldRefetchData(prevProps);\n\n    // or if we've moved from an invalid view state to a valid one,\n    const eventViewValidation =\n      prevProps.eventView.isValid() === false && this.props.eventView.isValid();\n\n    const shouldRefetchExternal = this.props.shouldRefetchData\n      ? this.props.shouldRefetchData(prevProps, this.props)\n      : false;\n\n    if (refetchCondition || eventViewValidation || shouldRefetchExternal) {\n      this.fetchData();\n    }\n  }\n\n  getPayload(props: Props<T, P>) {\n    if (this.props.getRequestPayload) {\n      return this.props.getRequestPayload(props);\n    }\n    return props.eventView.getEventsAPIPayload(props.location);\n  }\n\n  _shouldRefetchData = (prevProps: Props<T, P>): boolean => {\n    const thisAPIPayload = this.getPayload(this.props);\n    const otherAPIPayload = this.getPayload(prevProps);\n\n    return (\n      !isAPIPayloadSimilar(thisAPIPayload, otherAPIPayload) ||\n      prevProps.limit !== this.props.limit ||\n      prevProps.route !== this.props.route ||\n      prevProps.cursor !== this.props.cursor\n    );\n  };\n\n  fetchData = () => {\n    const {\n      api,\n      beforeFetch,\n      afterFetch,\n      eventView,\n      orgSlug,\n      route,\n      limit,\n      cursor,\n      setError,\n      noPagination,\n    } = this.props;\n\n    if (!eventView.isValid()) {\n      return;\n    }\n\n    const url = `/organizations/${orgSlug}/${route}/`;\n    const tableFetchID = Symbol(`tableFetchID`);\n    const apiPayload: Partial<EventQuery & LocationQuery> = this.getPayload(this.props);\n\n    this.setState({isLoading: true, tableFetchID});\n\n    setError?.(undefined);\n\n    if (limit) {\n      apiPayload.per_page = limit;\n    }\n    if (noPagination) {\n      apiPayload.noPagination = noPagination;\n    }\n    if (cursor) {\n      apiPayload.cursor = cursor;\n    }\n\n    beforeFetch?.(api);\n\n    api\n      .requestPromise(url, {\n        method: 'GET',\n        includeAllArgs: true,\n        query: {\n          // marking apiPayload as any so as to not cause typescript errors\n          ...(apiPayload as any),\n        },\n      })\n      .then(([data, _, jqXHR]) => {\n        if (this.state.tableFetchID !== tableFetchID) {\n          // invariant: a different request was initiated after this request\n          return;\n        }\n\n        const tableData = afterFetch ? afterFetch(data, this.props) : data;\n\n        this.setState(prevState => ({\n          isLoading: false,\n          tableFetchID: undefined,\n          error: null,\n          pageLinks: jqXHR?.getResponseHeader('Link') ?? prevState.pageLinks,\n          tableData,\n        }));\n      })\n      .catch(err => {\n        const error = err?.responseJSON?.detail ?? null;\n        this.setState({\n          isLoading: false,\n          tableFetchID: undefined,\n          error,\n          tableData: null,\n        });\n        if (setError) {\n          setError(error);\n        }\n      });\n  };\n\n  render() {\n    const {isLoading, error, tableData, pageLinks} = this.state;\n\n    const childrenProps: GenericChildrenProps<T> = {\n      isLoading,\n      error,\n      tableData,\n      pageLinks,\n    };\n    const children: ReactProps<T>['children'] = this.props.children; // Explicitly setting type due to issues with generics and React's children\n    return children?.(childrenProps);\n  }\n}\n\nexport default GenericDiscoverQuery;\n","import React from 'react';\n\nimport Feature from 'app/components/acl/feature';\nimport Button from 'app/components/button';\n\ntype Props = React.PropsWithChildren<{\n  className?: string;\n}> &\n  React.ComponentProps<typeof Button>;\n\n/**\n * Provide a button that turns itself off if the current organization\n * doesn't have access to discover results.\n */\nfunction DiscoverButton({children, ...buttonProps}: Props) {\n  return (\n    <Feature features={['organizations:discover-basic']}>\n      {({hasFeature}) => (\n        <Button disabled={!hasFeature} {...buttonProps}>\n          {children}\n        </Button>\n      )}\n    </Feature>\n  );\n}\n\nexport default DiscoverButton;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport EventMessage from 'app/components/events/eventMessage';\nimport overflowEllipsis from 'app/styles/overflowEllipsis';\nimport space from 'app/styles/space';\nimport {Group} from 'app/types';\n\nimport UnhandledTag, {\n  TagAndMessageWrapper,\n} from '../organizationGroupDetails/unhandledTag';\n\ntype Props = {\n  group: Group;\n};\n\nconst SharedGroupHeader = ({group}: Props) => (\n  <Wrapper>\n    <Details>\n      <Title>{group.title}</Title>\n      <TagAndMessageWrapper>\n        {group.isUnhandled && <UnhandledTag />}\n        <EventMessage message={group.culprit} />\n      </TagAndMessageWrapper>\n    </Details>\n  </Wrapper>\n);\n\nexport default SharedGroupHeader;\n\nconst Wrapper = styled('div')`\n  padding: ${space(3)} ${space(4)} ${space(3)} ${space(4)};\n  border-bottom: ${p => `1px solid ${p.theme.border}`};\n  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.03);\n  position: relative;\n  margin: 0 0 ${space(3)};\n`;\n\nconst Details = styled('div')`\n  max-width: 960px;\n  margin: 0 auto;\n`;\n\n// TODO(style): the color #161319 is not yet in the color object of the theme\nconst Title = styled('h3')`\n  color: #161319;\n  margin: 0 0 ${space(1)};\n  overflow-wrap: break-word;\n  line-height: 1.2;\n  font-size: ${p => p.theme.fontSizeExtraLarge};\n  @media (min-width: ${props => props.theme.breakpoints[0]}) {\n    font-size: ${p => p.theme.headerFontSize};\n    line-height: 1.1;\n    ${overflowEllipsis};\n  }\n`;\n","import React from 'react';\nimport DocumentTitle from 'react-document-title';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {Client} from 'app/api';\nimport NotFound from 'app/components/errors/notFound';\nimport {BorderlessEventEntries} from 'app/components/events/eventEntries';\nimport Footer from 'app/components/footer';\nimport Link from 'app/components/links/link';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport {t} from 'app/locale';\nimport SentryTypes from 'app/sentryTypes';\nimport space from 'app/styles/space';\nimport {Group} from 'app/types';\nimport withApi from 'app/utils/withApi';\n\nimport SharedGroupHeader from './sharedGroupHeader';\n\ntype Props = RouteComponentProps<{shareId: string}, {}> & {\n  api: Client;\n};\n\ntype State = {\n  group: Group | null;\n  loading: boolean;\n  error: boolean;\n};\n\nclass SharedGroupDetails extends React.Component<Props, State> {\n  static childContextTypes = {\n    group: SentryTypes.Group,\n  };\n\n  state: State = this.getInitialState();\n\n  getInitialState() {\n    return {\n      group: null,\n      loading: true,\n      error: false,\n    };\n  }\n\n  getChildContext() {\n    return {\n      group: this.state.group,\n    };\n  }\n\n  componentWillMount() {\n    document.body.classList.add('shared-group');\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    document.body.classList.remove('shared-group');\n  }\n\n  async fetchData() {\n    const {params, api} = this.props;\n    const {shareId} = params;\n    try {\n      const group = await api.requestPromise(`/shared/issues/${shareId}/`);\n      this.setState({loading: false, group});\n    } catch {\n      this.setState({loading: false, error: true});\n    }\n  }\n\n  handleRetry = () => {\n    this.setState(this.getInitialState());\n    this.fetchData();\n  };\n\n  getTitle() {\n    const {group} = this.state;\n\n    if (group) {\n      return group.title;\n    }\n\n    return 'Sentry';\n  }\n\n  render() {\n    const {group, loading, error} = this.state;\n\n    if (loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (!group) {\n      return <NotFound />;\n    }\n\n    if (error) {\n      return <LoadingError onRetry={this.handleRetry} />;\n    }\n\n    const {location} = this.props;\n    const {permalink, latestEvent, project} = group;\n    const title = this.getTitle();\n\n    return (\n      <DocumentTitle title={title}>\n        <div className=\"app\">\n          <div className=\"pattern-bg\" />\n          <div className=\"container\">\n            <div className=\"box box-modal\">\n              <div className=\"box-header\">\n                <Link className=\"logo\" to=\"/\">\n                  <span className=\"icon-sentry-logo-full\" />\n                </Link>\n                {permalink && (\n                  <Link className=\"details\" to={permalink}>\n                    {t('Details')}\n                  </Link>\n                )}\n              </div>\n              <div className=\"content\">\n                <SharedGroupHeader group={group} />\n                <Container className=\"group-overview event-details-container\">\n                  <BorderlessEventEntries\n                    location={location}\n                    organization={project.organization}\n                    group={group}\n                    event={latestEvent}\n                    project={project}\n                    isShare\n                  />\n                </Container>\n                <Footer />\n              </div>\n            </div>\n          </div>\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nconst Container = styled('div')`\n  padding: 0 ${space(4)};\n`;\n\nexport {SharedGroupDetails};\nexport default withApi(SharedGroupDetails);\n"],"sourceRoot":""}