(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[140],{2050:function(e,t,n){"use strict";t.__esModule=!0;var r=n(2051);t.default=r.TextareaAutosize},2051:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};t.__esModule=!0;var c=n(1),s=n(2),u=n(2052),l=n(2053),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.textarea=null,t.onResize=function(e){t.props.onResize&&t.props.onResize(e)},t.updateLineHeight=function(){t.textarea&&t.setState({lineHeight:l(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t}return o(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.maxRows,r=t.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout((function(){return e.textarea&&u(e.textarea)})):this.textarea&&u(this.textarea),this.textarea&&this.textarea.addEventListener("autosize:resized",this.onResize)},t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener("autosize:resized",this.onResize),u.destroy(this.textarea))},t.prototype.render=function(){var e=this,t=this.props,n=(t.onResize,t.maxRows),r=(t.onChange,t.style),o=(t.innerRef,t.children),s=a(t,["onResize","maxRows","onChange","style","innerRef","children"]),u=this.state.lineHeight,l=n&&u?u*n:null;return c.createElement("textarea",i({},s,{onChange:this.onChange,style:l?i({},r,{maxHeight:l}):r,ref:function(t){e.textarea=t,"function"==typeof e.props.innerRef?e.props.innerRef(t):e.props.innerRef&&(e.props.innerRef.current=t)}}),o)},t.prototype.componentDidUpdate=function(){this.textarea&&u.update(this.textarea)},t.defaultProps={rows:1,async:!1},t.propTypes={rows:s.number,maxRows:s.number,onResize:s.func,innerRef:s.any,async:s.bool},t}(c.Component);t.TextareaAutosize=c.forwardRef((function(e,t){return c.createElement(p,i({},e,{innerRef:t}))}))},2052:function(e,t,n){var r,o,i;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[e,t],void 0===(i="function"==typeof(r=function(e,t){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t,n=null,r=null,a=null,c=function(){e.clientWidth!==r&&p()},s=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:s,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),p()}function u(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function l(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",r=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function p(){l();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(u("scroll"),l(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(u("hidden"),l(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==r){a=r;var o=i("autosize:resized");try{e.dispatchEvent(o)}catch(e){}}}}function c(e){var t=o.get(e);t&&t.destroy()}function s(e){var t=o.get(e);t&&t.update()}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((u=function(e){return e}).destroy=function(e){return e},u.update=function(e){return e}):((u=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return a(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],c),e},u.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=u,e.exports=t.default})?r.apply(t,o):r)||(e.exports=i)},2053:function(e,t,n){var r=n(2054);e.exports=function(e){var t=r(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var o=e.style.lineHeight;e.style.lineHeight=t+"em",t=r(e,"line-height"),n=parseFloat(t,10),o?e.style.lineHeight=o:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var i=e.nodeName,a=document.createElement(i);a.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&a.setAttribute("rows","1");var c=r(e,"font-size");a.style.fontSize=c,a.style.padding="0px",a.style.border="0px";var s=document.body;s.appendChild(a),n=a.offsetHeight,s.removeChild(a)}return n}},2054:function(e,t){e.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},2072:function(e,t,n){"use strict";var r=n(6),o=n.n(r),i=n(16),a=n.n(i),c=n(3),s=n(1),u=n.n(s),l=n(2050),p=n.n(l),f=n(102),d=n(420),g=n(0),h=u.a.forwardRef((function(e,t){var n=e.autosize,r=e.rows,i=a()(e,["autosize","rows"]);return n?Object(g.f)(p.a,o()({async:!0,ref:t,rows:r||2},i)):Object(g.f)("textarea",o()({ref:t},i))}));h.displayName="TextAreaControl";var b=Object(c.a)(h,{shouldForwardProp:function(e){return["autosize","rows","maxRows"].includes(e)||Object(f.default)(e)},target:"edis3zx0",label:"TextArea"})(d.a,";line-height:1.3em;");t.a=b},2093:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(6),o=n.n(r),i=(n(1),n(131)),a=n.n(i),c=n(2072),s=n(277),u=n(0);function l(e){return Object(u.f)(s.a,o()({},e,{field:function(e){return Object(u.f)(c.a,a()(e,["onKeyDown","children"]))}}))}l.displayName="TextareaField"},2961:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n.n(r),i=n(7),a=n.n(i),c=n(9),s=n.n(c),u=n(10),l=n.n(u),p=n(12),f=n.n(p),d=n(13),g=n.n(d),h=n(5),b=n.n(h),v=n(3),y=n(1),m=n.n(y),j=n(65),O=n(29),w=n(768),x=n(4),E=n(8),z=n(57),k=n(2222),R=n(22),C=n.n(R),P=n(30),I=n.n(P),S=n(35),T=n(410),_=n(72),L=n(206),A=n(224),N=n(691),D=n(15),H=n(49),F=n(0);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var M=function(e){f()(n,e);var t=U(n);function n(){var e;s()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pluginUpdate=function(){var t=I()(C.a.mark((function t(n){var r,o,i,a,c,s=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"POST",o=e.props,i=o.organization,a=o.projectItem,c=o.plugin,t.next=4,e.props.api.requestPromise("/projects/".concat(i.slug,"/").concat(a.projectSlug,"/plugins/").concat(c.id,"/"),{method:r,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updatePluginEnableStatus=function(){var t=I()(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,e.pluginUpdate({enabled:n});case 3:t.next=7;break;case 5:return t.next=7,e.pluginUpdate({},"DELETE");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleReset=I()(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(S.b)(Object(x.b)("Removing...")),t.next=4,e.pluginUpdate({reset:!0});case 4:Object(S.d)(Object(x.b)("Configuration was removed")),e.props.onResetConfiguration(e.projectId),e.props.trackIntegrationEvent({eventKey:"integrations.uninstall_completed",eventName:"Integrations: Uninstall Completed",project_id:e.projectId}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(S.a)(Object(x.b)("Unable to remove configuration"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleUninstallClick=function(){e.props.trackIntegrationEvent({eventKey:"integrations.uninstall_clicked",eventName:"Integrations: Uninstall Clicked",project_id:e.projectId})},e.toggleEnablePlugin=function(){var t=I()(C.a.mark((function t(n){var r,o=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(o.length>1&&void 0!==o[1])||o[1],t.prev=1,Object(S.b)(Object(x.b)("Enabling...")),t.next=5,e.updatePluginEnableStatus(r);case 5:Object(S.d)(r?Object(x.b)("Configuration was enabled."):Object(x.b)("Configuration was disabled.")),e.props.onPluginEnableStatusChange(n,r),e.props.trackIntegrationEvent({eventKey:r?"integrations.enabled":"integrations.disabled",eventName:r?"Integrations: Enabled":"Integrations: Disabled",project_id:n}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Object(S.a)(r?Object(x.b)("Unable to enable configuration."):Object(x.b)("Unable to disable configuration."));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return l()(n,[{key:"getConfirmMessage",value:function(){return Object(F.f)(m.a.Fragment,null,Object(F.f)(_.b,{type:"error",icon:Object(F.f)(D.B,{size:"md"})},Object(x.b)("Deleting this installation will disable the integration for this project and remove any configurations.")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.plugin,o=t.organization,i=t.projectItem;return Object(F.f)(B,null,Object(F.f)(T.a,{access:["org:integrations"]},(function(t){var a=t.hasAccess;return Object(F.f)(K,{className:n},Object(F.f)(X,null,Object(F.f)(A.a,{project:e.projectForBadge})),Object(F.f)("div",null,Object(F.f)(q,{borderless:!0,icon:Object(F.f)(D.ob,null),disabled:!a,to:"/settings/".concat(o.slug,"/projects/").concat(i.projectSlug,"/plugins/").concat(r.id,"/"),"data-test-id":"integration-configure-button"},Object(x.b)("Configure"))),Object(F.f)("div",null,Object(F.f)(L.a,{priority:"danger",onConfirming:e.handleUninstallClick,disabled:!a,confirmText:"Delete Installation",onConfirm:function(){return e.handleReset()},message:e.getConfirmMessage()},Object(F.f)(q,{disabled:!a,borderless:!0,icon:Object(F.f)(D.r,null),"data-test-id":"integration-remove-button"},Object(x.b)("Uninstall")))),Object(F.f)(N.a,{isActive:i.enabled,toggle:function(){return e.toggleEnablePlugin(i.projectId,!i.enabled)},isDisabled:!a}))})))}},{key:"projectId",get:function(){return this.props.projectItem.projectId}},{key:"projectForBadge",get:function(){var e=this.props.projectItem;return{slug:e.projectSlug,platform:e.projectPlatform?e.projectPlatform:void 0}}}]),n}(m.a.Component);M.displayName="InstalledPlugin";var W=Object(H.a)(M),B=Object(v.a)("div",{target:"e121qv8o0",label:"Container"})("padding:",Object(E.a)(2),";border:1px solid ",(function(e){return e.theme.border}),";border-bottom:none;background-color:",(function(e){return e.theme.background}),";&:last-child{border-bottom:1px solid ",(function(e){return e.theme.border}),";}"),q=Object(v.a)(O.a,{target:"e121qv8o1",label:"StyledButton"})("color:",(function(e){return e.theme.gray300}),";"),K=Object(v.a)("div",{target:"e121qv8o2",label:"IntegrationFlex"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),X=Object(v.a)("div",{target:"e121qv8o3",label:"IntegrationItemBox"})({name:"1bt8vm2",styles:"flex:1;box-sizing:border-box;display:flex;flex-direction:row;min-width:0;"});function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g()(this,n)}}var G=function(e){f()(n,e);var t=V(n);function n(){var e;s()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleResetConfiguration=function(t){var n=e.plugin.projectList.slice(),r=n.findIndex((function(e){return e.projectId===t}));r<0||(n.splice(r,1),e.setState({plugins:[J(J({},e.state.plugins[0]),{},{projectList:n})]}))},e.handlePluginEnableStatus=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.plugin.projectList.slice(),o=r.findIndex((function(e){return e.projectId===t}));o<0||(r[o]=J(J({},r[o]),{},{enabled:n}),e.setState({plugins:[J(J({},e.state.plugins[0]),{},{projectList:r})]}))},e.handleAddToProject=function(){var t=e.plugin,n=e.props,r=n.organization,i=n.router;e.trackIntegrationEvent({eventKey:"integrations.plugin_add_to_project_clicked",eventName:"Integrations: Plugin Add to Project Clicked"}),j.j((function(e){return Object(F.f)(w.a,o()({},e,{nextPath:"/settings/".concat(r.slug,"/projects/:projectId/plugins/").concat(t.id,"/"),needProject:!0,needOrg:!1,onFinish:function(t){e.closeModal(),i.push(t)}}))}),{})},e}return l()(n,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.integrationSlug;return[["plugins","/organizations/".concat(t,"/plugins/configs/?plugins=").concat(n)]]}},{key:"getTabDisplay",value:function(e){return"configurations"===e?"project configurations":"overview"}},{key:"renderTopButton",value:function(e,t){return t?Object(F.f)(Q,{"data-test-id":"install-button",disabled:e,onClick:this.handleAddToProject,size:"small",priority:"primary"},Object(x.b)("Add to Project")):this.renderRequestIntegrationButton()}},{key:"renderConfigurations",value:function(){var e=this,t=this.plugin,n=this.props.organization;return t.projectList.length?Object(F.f)("div",null,t.projectList.map((function(r){return Object(F.f)(W,{key:r.projectId,organization:n,plugin:t,projectItem:r,onResetConfiguration:e.handleResetConfiguration,onPluginEnableStatusChange:e.handlePluginEnableStatus,trackIntegrationEvent:e.trackIntegrationEvent})}))):this.renderEmptyConfigurations()}},{key:"integrationType",get:function(){return"plugin"}},{key:"plugin",get:function(){return this.state.plugins[0]}},{key:"description",get:function(){return this.plugin.description||""}},{key:"author",get:function(){var e;return null===(e=this.plugin.author)||void 0===e?void 0:e.name}},{key:"resourceLinks",get:function(){return this.plugin.resourceLinks||[]}},{key:"installationStatus",get:function(){return this.plugin.projectList.length>0?"Installed":"Not Installed"}},{key:"integrationName",get:function(){return"".concat(this.plugin.name).concat(this.plugin.isHidden?" (Legacy)":"")}},{key:"featureData",get:function(){return this.plugin.featureDescriptions}}]),n}(k.a),Q=Object(v.a)(O.a,{target:"en49fw10",label:"AddButton"})("margin-bottom:",Object(E.a)(1),";");t.default=Object(z.a)(G)}}]);
//# sourceMappingURL=PluginDetailedView.js.map