(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[131],{1939:function(e,t,a){"use strict";var n=a(16),r=a.n(n),c=a(9),o=a.n(c),i=a(10),s=a.n(i),u=a(12),l=a.n(u),f=a(13),m=a.n(f),d=a(5),b=a.n(d),g=a(3),p=a(1),j=a.n(p),O=a(204),h=a(8),v=a(0);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var T=function(e){l()(a,e);var t=y(a);function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.title,n=e.subtitle,c=e.action,o=e.tabs,i=e.noTitleStyles,s=r()(e,["icon","title","subtitle","action","tabs","noTitleStyles"]);return Object(v.f)("div",s,Object(v.f)(z,null,Object(v.f)(I,null,t&&Object(v.f)(w,null,t),a&&Object(v.f)(S,{tabs:o,styled:i},Object(v.f)(O.a,null,a),n&&Object(v.f)(q,null,n))),c&&Object(v.f)(k,{tabs:o},c)),o&&Object(v.f)("div",null,o))}}]),a}(j.a.Component);T.displayName="UnstyledSettingsPageHeader",T.defaultProps={noTitleStyles:!1};var z=Object(g.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),I=Object(g.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),S=Object(g.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(h.a)(4)," ").concat(Object(h.a)(2)," ").concat(Object(h.a)(2)," 0"):"".concat(Object(h.a)(4)," ").concat(Object(h.a)(2)," ").concat(Object(h.a)(4)," 0")}),";"),q=Object(g.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(h.a)(1.5)," 0 ",Object(h.a)(3),";"),w=Object(g.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(h.a)(1),";"),k=Object(g.a)("div",{target:"e1uay4fd5",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(h.a)(2)):null}),";"),P=Object(g.a)(T,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(h.a)(4),";");t.a=P},1943:function(e,t,a){"use strict";a(1);var n=a(247),r=a.n(n),c=a(0),o=function(e){var t="".concat(e.title," - ").concat(e.objSlug," - Sentry");return Object(c.f)(r.a,{title:t},e.children)};o.displayName="SentryDocumentTitle",t.a=o},1951:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(679),r=a.n(n),c=a(542);function o(e,t){var a,n,o,i,s=t.routes,u=t.params,l=t.location,f=t.stepBack,m=s.map((function(e){return e.path||""}));"string"!=typeof e?(i=s.indexOf(e)+1,o=r()(m.slice(0,i),(function(e){return"/"===e[0]}))):o=r()(m,(function(e){return"/"===e[0]}));var d=m.slice(o,i);void 0!==f&&(d=d.slice(0,f));var b=null!==(a=null==l?void 0:l.search)&&void 0!==a?a:"",g=null!==(n=null==l?void 0:l.hash)&&void 0!==n?n:"",p="".concat(d.join("")).concat("string"!=typeof e?"":e).concat(b).concat(g);return Object(c.a)(p,u)}},2047:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return b})),a.d(t,"e",(function(){return g}));var n=a(35),r=a(151),c=a(4),o=a(52),i=a(166),s=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];o.a.apply(void 0,[e[t]].concat(n))};function u(e,t,a){return r.a.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){r.a.fetchDetailsSuccess(t.teamId,e),s(a,"success",e)},error:function(e){r.a.fetchDetailsError(t.teamId,e),s(a,"error",e)}})}function l(e,t){r.a.updateSuccess(e,t)}function f(e,t,a){var n="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return r.a.update(t.teamId,t.data),e.request(n,{method:"PUT",data:t.data,success:function(e){l(t.teamId,e),s(a,"success",e)},error:function(e){r.a.updateError(t.teamId,e),s(a,"error",e)}})}function m(e,t,a){var n,c="/organizations/".concat(t.orgId,"/members/").concat(null!==(n=t.memberId)&&void 0!==n?n:"me","/teams/").concat(t.teamId,"/"),o=Object(i.a)();return r.a.update(o,t.teamId),e.request(c,{method:"POST",success:function(e){r.a.updateSuccess(t.teamId,e),s(a,"success",e)},error:function(e){r.a.updateError(o,t.teamId,e),s(a,"error",e)}})}function d(e,t,a){var n="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),c=Object(i.a)();return r.a.update(c,t.teamId),e.request(n,{method:"DELETE",success:function(e){r.a.updateSuccess(t.teamId,e),s(a,"success",e)},error:function(e){r.a.updateError(c,t.teamId,e),s(a,"error",e)}})}function b(e,t,a){return r.a.createTeam(t),e.requestPromise("/organizations/".concat(a.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return r.a.createTeamSuccess(e),Object(n.d)(Object(c.c)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:a.orgId})),e}),(function(e){throw r.a.createTeamError(t.slug,e),Object(n.a)(Object(c.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:a.orgId})),e}))}function g(e,t){return r.a.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return r.a.removeTeamSuccess(t.teamId,e),Object(n.d)(Object(c.c)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw r.a.removeTeamError(t.teamId,e),Object(n.a)(Object(c.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},2056:function(e,t,a){"use strict";var n=a(6),r=a.n(n),c=(a(1),a(38)),o=a.n(c),i=a(25),s=a.n(i),u=a(211),l=a(93),f=a(0);t.a=function(e){return o()({displayName:"withTeams(".concat(Object(l.a)(e),")"),mixins:[s.a.listenTo(u.a,"onTeamUpdate")],getInitialState:function(){return{teams:u.a.getAll()}},onTeamUpdate:function(){this.setState({teams:u.a.getAll()})},render:function(){return Object(f.f)(e,r()({},this.props,{teams:this.state.teams}))}})}},2922:function(e,t,a){"use strict";a.r(t),a.d(t,"OrganizationTeamsContainer",(function(){return ae}));var n=a(6),r=a.n(n),c=a(9),o=a.n(c),i=a(10),s=a.n(i),u=a(12),l=a.n(u),f=a(13),m=a.n(f),d=a(5),b=a.n(d),g=a(1),p=a.n(g),j=a(421),O=a(21),h=a(49),v=a(57),y=a(2056),T=a(65),z=a(29),I=a(164),S=a(1943),q=a(15),w=a(4),k=a(1951),P=a(1939),R=a(3),x=a(411),M=a(675),C=a(22),D=a.n(C),A=a(30),E=a.n(A),L=a(11),U=a(35),N=a(2047),Y=a(306),J=a(8),W=a(0);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var H=function(e){l()(a,e);var t=B(a);function a(){var e;o()(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:!1},e.handleRequestAccess=E()(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.team;try{e.joinTeam({successMessage:Object(w.c)("You have requested access to [team]",{team:"#".concat(a.slug)}),errorMessage:Object(w.c)("Unable to request access to [team]",{team:"#".concat(a.slug)})})}catch(e){}case 2:case"end":return t.stop()}}),t)}))),e.handleJoinTeam=function(){var t=e.props.team;e.joinTeam({successMessage:Object(w.c)("You have joined [team]",{team:"#".concat(t.slug)}),errorMessage:Object(w.c)("Unable to join [team]",{team:"#".concat(t.slug)})})},e.joinTeam=function(t){var a=t.successMessage,n=t.errorMessage,r=e.props,c=r.api,o=r.organization,i=r.team;return e.setState({loading:!0}),new Promise((function(t,r){return Object(N.c)(c,{orgId:o.slug,teamId:i.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(U.d)(a),t()},error:function(){e.setState({loading:!1,error:!0}),Object(U.a)(n),r(new Error("Unable to join team"))}})}))},e.handleLeaveTeam=function(){var t=e.props,a=t.api,n=t.organization,r=t.team;e.setState({loading:!0}),Object(N.d)(a,{orgId:n.slug,teamId:r.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(U.d)(Object(w.c)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){e.setState({loading:!1,error:!0}),Object(U.a)(Object(w.c)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},e}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.team,a=e.urlPrefix,n=e.openMembership,r=Object(W.f)(Y.a,{team:t,avatarSize:36,description:Object(w.d)("%s Member","%s Members",t.memberCount)}),c=t.hasAccess;return Object(W.f)(K,null,Object(W.f)(V,null,c?Object(W.f)(F,{to:"".concat(a,"teams/").concat(t.slug,"/")},r):r),Object(W.f)(Q,null,this.state.loading?Object(W.f)(z.a,{size:"small",disabled:!0},"..."):t.isMember?Object(W.f)(z.a,{size:"small",onClick:this.handleLeaveTeam},Object(w.b)("Leave Team")):t.isPending?Object(W.f)(z.a,{size:"small",disabled:!0},Object(w.b)("Request Pending")):n?Object(W.f)(z.a,{size:"small",onClick:this.handleJoinTeam},Object(w.b)("Join Team")):Object(W.f)(z.a,{size:"small",onClick:this.handleRequestAccess},Object(w.b)("Request Access"))))}}]),a}(p.a.Component);H.displayName="AllTeamsRow";var F=Object(R.a)(L.Link,{target:"eqoqdb20",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",Object(J.a)(1),";padding:",Object(J.a)(1),";background:#f2eff5;border-radius:3px;outline:none;}"),G=Object(h.a)(H),K=Object(R.a)(I.f,{target:"eqoqdb21",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),Q=Object(R.a)("div",{target:"eqoqdb22",label:"Spacer"})("padding:",Object(J.a)(2),";"),V=Object(R.a)(Q,{target:"eqoqdb23",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function X(e){var t=e.organization,a=e.urlPrefix,n=e.openMembership,r=e.teamList,c=e.access,o=r.map((function(e){return Object(W.f)(G,{urlPrefix:a,team:e,organization:t,openMembership:n,key:e.slug})}));if(!o.length){var i=c.has("project:admin");return Object(W.f)(x.a,null,Object(w.c)("No teams here. [teamCreate]",{root:Object(W.f)(M.a,{noMargin:!0}),teamCreate:i?Object(w.c)("You can always [link:create one].",{link:Object(W.f)($,{priority:"link",onClick:function(){return Object(T.e)({organization:t})}})}):null}))}return Object(W.f)(p.a.Fragment,null,o)}X.displayName="AllTeamsList";var Z=X,$=Object(R.a)(z.a,{target:"e3ug7hf0",label:"StyledButton"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";");function _(e){var t=e.allTeams,a=e.activeTeams,n=e.organization,r=e.access,c=e.features,o=e.routes,i=e.params;if(!n)return null;var s=r.has("project:admin"),u=Object(W.f)(z.a,{priority:"primary",size:"small",disabled:!s,title:s?void 0:Object(w.b)("You do not have permission to create teams"),onClick:function(){return Object(T.e)({organization:n})},icon:Object(W.f)(q.b,{size:"xs",isCircled:!0})},Object(w.b)("Create Team")),l=o.find((function(e){return"teams/"===e.path})),f=l?Object(k.a)(l,{routes:o,params:i,stepBack:-2}):"",m=new Set(a.map((function(e){return e.id}))),d=t.filter((function(e){return!m.has(e.id)})),b=Object(w.b)("Teams");return Object(W.f)("div",{"data-test-id":"team-list"},Object(W.f)(S.a,{title:b,objSlug:n.slug}),Object(W.f)(P.a,{title:b,action:u}),Object(W.f)(I.a,null,Object(W.f)(I.e,null,Object(w.b)("Your Teams")),Object(W.f)(I.c,null,Object(W.f)(Z,{urlPrefix:f,organization:n,teamList:a,access:r,openMembership:!1}))),Object(W.f)(I.a,null,Object(W.f)(I.e,null,Object(w.b)("Other Teams")),Object(W.f)(I.c,null,Object(W.f)(Z,{urlPrefix:f,organization:n,teamList:d,access:r,openMembership:!(!c.has("open-membership")&&!r.has("org:write"))}))))}_.displayName="OrganizationTeams";var ee=_;function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var ae=function(e){l()(a,e);var t=te(a);function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"componentDidMount",value:function(){this.fetchStats()}},{key:"fetchStats",value:function(){Object(j.f)(this.props.api,{orgId:this.props.params.orgId,query:{since:((new Date).getTime()/1e3-86400).toString(),stat:"generated",group:"project"}})}},{key:"render",value:function(){var e=this.props,t=e.organization,a=e.teams;if(!t)return null;var n=Object(O.t)(a,(function(e){return e.name})),c=n.filter((function(e){return e.isMember}));return Object(W.f)(ee,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,allTeams:n,activeTeams:c}))}}]),a}(p.a.Component);ae.displayName="OrganizationTeamsContainer";t.default=Object(h.a)(Object(v.a)(Object(y.a)(ae)))}}]);
//# sourceMappingURL=OrganizationTeams.js.map