{
  "$id": "http://example.com/example.json",
  "$schema": "http://json-schema.org/draft-07/schema",
  "additionalProperties": true,
  "default": {},
  "description": "Schema of the report generated by the dbt_log_parser",
  "examples": [
    {
      "analyses_found": 0,
      "macros_found": 300,
      "models_found": 469,
      "operations_found": 0,
      "seeds_found": 0,
      "snapshots_found": 0,
      "sources_found": 204,
      "tests": [
        {
          "name": "accepted_values_dim_order_state_open",
          "number": 1,
          "status": "PASS",
          "total_time": 2.11
        },
        {
          "name": "relationships_fact_contribution_goal_updates_contribution_page_id__contribution_page_id__ref_dim_contribution_page_",
          "number": 2,
          "query": {
            "file_err": true,
            "filepath": "target/compiled/core/schema_test/relationships_fact_contribution_goal_updates_34dae512835158ed459182c173a8c127.sql",
            "sql": null
          },
          "query_results": {
            "expected": 0,
            "found": 5
          },
          "status": "WARN",
          "total_time": 1.73
        },
        {
          "name": "unique_int_home_page_display_resources_you_may_like_event_user_id",
          "number": 548326,
          "query": {
            "file_err": true,
            "filepath": "target/compiled/core/schema_test/unique_int_home_page_display_resources_you_may_like_event_user_id.sql",
            "sql": null
          },
          "query_results": {
            "expected": 0,
            "found": 548326
          },
          "status": "FAIL",
          "total_time": 1.16
        }
      ],
      "tests_found": 1658,
      "tests_run": 1100,
      "tests_runtime_seconds": 97.47
    }
  ],
  "properties": {
    "analyses_found": {
      "$id": "#/properties/analyses_found",
      "default": 0,
      "description": "How many analyses were parsed by dbt in the project before running",
      "examples": [
        0
      ],
      "title": "The analyses_found schema",
      "type": "integer"
    },
    "macros_found": {
      "$id": "#/properties/macros_found",
      "default": 0,
      "description": "How many macros were parsed by dbt in the project before running",
      "examples": [
        300
      ],
      "title": "The macros_found schema",
      "type": "integer"
    },
    "models_found": {
      "$id": "#/properties/models_found",
      "default": 0,
      "description": "How many models were parsed by dbt in the project before running",
      "examples": [
        469
      ],
      "title": "The models_found schema",
      "type": "integer"
    },
    "operations_found": {
      "$id": "#/properties/operations_found",
      "default": 0,
      "description": "How many operations were parsed by dbt in the project before running",
      "examples": [
        0
      ],
      "title": "The operations_found schema",
      "type": "integer"
    },
    "seeds_found": {
      "$id": "#/properties/seeds_found",
      "default": 0,
      "description": "How many seeds were parsed by dbt in the project before running",
      "examples": [
        0
      ],
      "title": "The seeds_found schema",
      "type": "integer"
    },
    "snapshots_found": {
      "$id": "#/properties/snapshots_found",
      "default": 0,
      "description": "How many snapshots were parsed by dbt in the project before running",
      "examples": [
        0
      ],
      "title": "The snapshots_found schema",
      "type": "integer"
    },
    "sources_found": {
      "$id": "#/properties/sources_found",
      "default": 0,
      "description": "How many sources were parsed by dbt in the project before running",
      "examples": [
        204
      ],
      "title": "The sources_found schema",
      "type": "integer"
    },
    "tests": {
      "$id": "#/properties/tests",
      "additionalItems": true,
      "default": [],
      "description": "Details on each test run by dbt",
      "examples": [
        [
          {
            "name": "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub",
            "number": 1,
            "status": "PASS",
            "total_time": 2.11
          },
          {
            "name": "dbt_utils_not_constant_dim_cur_gift_card_is_donors_choose_gift_card",
            "number": 6,
            "status": "PASS",
            "total_time": 2.27
          }
        ]
      ],
      "items": {
        "$id": "#/properties/tests/items",
        "anyOf": [
          {
            "$id": "#/properties/tests/items/anyOf/0",
            "additionalProperties": true,
            "default": {},
            "description": "Details about the outcome of a specific test run by dbt",
            "examples": [
              {
                "name": "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub",
                "number": 1,
                "status": "PASS",
                "total_time": 2.11
              }
            ],
            "properties": {
              "name": {
                "$id": "#/properties/tests/items/anyOf/0/properties/name",
                "default": "",
                "description": "Test name",
                "examples": [
                  "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub"
                ],
                "title": "The name schema",
                "type": "string"
              },
              "number": {
                "$id": "#/properties/tests/items/anyOf/0/properties/number",
                "default": 0,
                "description": "Unique test number",
                "examples": [
                  1
                ],
                "title": "The number schema",
                "type": "integer"
              },
              "query": {
                "$id": "#/properties/tests/items/anyOf/1/properties/query",
                "additionalProperties": true,
                "default": {},
                "description": "An explanation about the purpose of this instance.",
                "examples": [
                  {
                    "file_err": true,
                    "filepath": "target/compiled/core/schema_test/is_gte_zero_dim_school_access_subscriptions_subscription_term_length.sql",
                    "sql": null
                  }
                ],
                "properties": {
                  "file_err": {
                    "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/file_err",
                    "default": false,
                    "description": "True if parser unable to open compiled SQL path relative to execution directory",
                    "examples": [
                      true
                    ],
                    "title": "The file_err schema",
                    "type": "boolean"
                  },
                  "filepath": {
                    "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/filepath",
                    "default": "",
                    "description": "Path to file containing compiled SQL for test",
                    "examples": [
                      "target/compiled/core/schema_test/is_gte_zero_dim_school_access_subscriptions_subscription_term_length.sql"
                    ],
                    "title": "The filepath schema",
                    "type": "string"
                  },
                  "sql": {
                    "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/sql",
                    "default": null,
                    "description": "Compiled SQL for dbt test",
                    "examples": [
                      null
                    ],
                    "title": "The sql schema",
                    "type": "null"
                  }
                },
                "required": [
                  "filepath",
                  "sql",
                  "file_err"
                ],
                "title": "The query schema",
                "type": "object"
              },
              "query_results": {
                "$id": "#/properties/tests/items/anyOf/1/properties/query_results",
                "additionalProperties": true,
                "default": {},
                "description": "An explanation about the purpose of this instance.",
                "examples": [
                  {
                    "expected": 0,
                    "found": 5
                  }
                ],
                "properties": {
                  "expected": {
                    "$id": "#/properties/tests/items/anyOf/1/properties/query_results/properties/expected",
                    "default": 0,
                    "description": "Test expected this many records to be returned.",
                    "examples": [
                      0
                    ],
                    "title": "The expected schema",
                    "type": "integer"
                  },
                  "found": {
                    "$id": "#/properties/tests/items/anyOf/1/properties/query_results/properties/found",
                    "default": 0,
                    "description": "Test returned this many records",
                    "examples": [
                      5
                    ],
                    "title": "The found schema",
                    "type": "integer"
                  }
                },
                "required": [
                  "found",
                  "expected"
                ],
                "title": "The query_results schema",
                "type": "object"
              },
              "status": {
                "$id": "#/properties/tests/items/anyOf/0/properties/status",
                "default": "",
                "description": "Test outcome",
                "enum": [
                  "PASS",
                  "WARN",
                  "FAIL"
                ],
                "title": "The status schema",
                "type": "string"
              },
              "total_time": {
                "$id": "#/properties/tests/items/anyOf/0/properties/total_time",
                "default": 0.0,
                "description": "Total time in seconds it took to run this test",
                "examples": [
                  2.11
                ],
                "title": "The total_time schema",
                "type": "number"
              }
            },
            "required": [
              "number",
              "name",
              "status",
              "total_time"
            ],
            "title": "The first anyOf schema",
            "type": "object"
          }
        ]
      },
      "title": "The tests schema",
      "type": "array"
    },
    "tests_found": {
      "$id": "#/properties/tests_found",
      "default": 0,
      "description": "How many tests were parsed by dbt in the project before running",
      "examples": [
        1658
      ],
      "title": "The tests_found schema",
      "type": "integer"
    },
    "tests_run": {
      "$id": "#/properties/tests_run",
      "default": 0,
      "description": "How many tests were actually run by dbt according to the log",
      "examples": [
        1100
      ],
      "title": "The tests_run schema",
      "type": "integer"
    },
    "tests_runtime_seconds": {
      "$id": "#/properties/tests_runtime_seconds",
      "default": 0.0,
      "description": "How long it took to run all tests according to the log",
      "examples": [
        97.47
      ],
      "title": "The tests_runtime_seconds schema",
      "type": "number"
    }
  },
  "required": [
    "models_found",
    "tests_found",
    "snapshots_found",
    "analyses_found",
    "macros_found",
    "operations_found",
    "seeds_found",
    "sources_found",
    "tests_run",
    "tests_runtime_seconds",
    "tests"
  ],
  "title": "DBT Log Parser Report Schema",
  "type": "object"
}
