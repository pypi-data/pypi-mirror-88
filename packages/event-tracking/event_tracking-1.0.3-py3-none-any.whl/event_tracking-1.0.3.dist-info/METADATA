Metadata-Version: 2.1
Name: event-tracking
Version: 1.0.3
Summary: A simple event tracking system.
Home-page: https://github.com/edx/event-tracking
Author: edX
Author-email: oscm@edx.org
License: AGPLv3 License
Platform: UNKNOWN
Classifier: Development Status :: 2 - Pre-Alpha
Classifier: Environment :: Web Environment
Classifier: Framework :: Django
Classifier: Framework :: Django :: 2.2
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.5
Classifier: Programming Language :: Python :: 3.8
Classifier: Topic :: Internet :: WWW/HTTP
Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
Requires-Dist: six
Requires-Dist: celery
Requires-Dist: pymongo (<4.0.0,>=2.7.2)
Requires-Dist: pytz
Requires-Dist: django

Part of `edX code`__.

__ http://code.edx.org/

Event Tracking library |build-status|
=====================================

The ``event-tracking`` library tracks context-aware semi-structured system events.
It captures and stores events with nested data structures in order to truly
take advantage of schemaless data storage systems.

Key features:

* Multiple backends - define custom backends that can be used to persist
  your event data.
* Nested contexts - allows data to be injected into events even without
  having to pass around all of said data to every location where the events
  are emitted.
* Django integration - provides a Django app that allows context aware events
  to easily be captured by multi-threaded web applications.
* MongoDB integration - support writing events out to a mongo collection.

Example::

    from eventtracking import tracker

    tracker = tracker.get_tracker()
    tracker.enter_context('outer', {'user_id': 10938})
    tracker.emit('navigation.request', {'url': 'http://www.edx.org/some/path/1'})

    with tracker.context({'user_id': 11111, 'session_id': '2987lkjdyoioey'}):
        tracker.emit('navigation.request', {'url': 'http://www.edx.org/some/path/2'})

    tracker.emit(
        'address.create',
        {
            'name': 'foo',
            'address': {
                'postal_code': '90210',
                'country': 'United States'
            }
        }
    )

Running the above example produces the following events::

    {
        "name": "navigation.request",
        "timestamp": ...,
        "context": {
            "user_id": 10938
        },
        "data": {
            "url": "http://www.edx.org/some/path/1"
        }
    },
    {
        "name": "navigation.request",
        "timestamp": ...,
        "context": {
            "user_id": 11111,
            "session_id": "2987lkjdyoioey"
        },
        "data": {
            "url": "http://www.edx.org/some/path/2"
        }
    },
    {
        "name": "address.create",
        "timestamp": ...,
        "context": {
            "user_id": 10938
        },
        "data": {
            "name": "foo",
            "address": {
                "postal_code": "90210",
                "country": "United States"
            }
        }
    }


Asynchronous Routing
--------------------

Considering the volume of the events being generated, we would want to avoid
processing events in the main thread that could cause delays in response
depending upon the operations and event processors.

``event-tracking`` provides a solution for this i.e. ``AsyncRoutingBackend``.
It extends ``RoutingBackend`` but performs its operations asynchronously.

It can:

* Process event through the configured processors.
* If the event is processed successfully, pass it to the configured backends.

Handling the operations asynchronously would avoid overburdening the main thread
and pass the intensive processing tasks to celery workers.

**Limitations**: Although backends for ``RoutingBackend`` can be configured
at any level of ``EVENT_TRACKING_BACKEND`` configuration tree,
``AsyncRoutingBackend`` only supports backends defined at the root level of
``EVENT_TRACKING_BACKEND`` setting.

An example configuration for ``AsyncRoutingBackend`` is provided below::

    EVENT_TRACKING_BACKENDS = {
        'caliper': {
            'ENGINE':  'eventtracking.backends.async_routing.AsyncRoutingBackend',
            'OPTIONS': {
                'backend_name': 'caliper',
                'processors': [
                    {
                        'ENGINE': 'eventtracking.processors.regex_filter.RegexFilter',
                        'OPTIONS':{
                            'filter_type': 'allowlist',
                            'regular_expressions': [
                                'edx.course.enrollment.activated',
                                'edx.course.enrollment.deactivated',
                            ]
                        }
                    }
                ],
                'backends': {
                    'caliper': {
                        'ENGINE': 'dummy.backend.engine',
                        'OPTIONS': {
                            ...
                        }
                    }
                },
            },
        },
        'tracking_logs': {
            ...
        }
        ...
    }


Roadmap
-------

In the very near future the following features are planned:

* Dynamic event documentation and event metadata - allow event emitters to
  document the event types, and persist this documentation along with the
  events so that it can be referenced during analysis to provide context
  about what the event is and when it is emitted.


Documentation
-------------

`Latest documentation <http://event-tracking.readthedocs.org/en/latest/>`_ (Hosted on Read the Docs)


License
-------

The code in this repository is licensed under version 3 of the AGPL unless
otherwise noted.

Please see ``LICENSE.txt`` for details.


How to Contribute
-----------------

Contributions are very welcome.

Please read `How To Contribute <https://github.com/edx/edx-platform/wiki/How-To-Contribute>`_ for details.

Reporting Security Issues
-------------------------

Please do not report security issues in public. Please email security@edx.org

Mailing List and IRC Channel
----------------------------

You can discuss this code on the `edx-code Google Group`__ or in the
``edx-code`` IRC channel on Freenode.

__ https://groups.google.com/forum/#!forum/edx-code

.. |build-status| image:: https://api.travis-ci.org/edx/event-tracking.png?branch=master
   :target: https://travis-ci.org/edx/event-tracking


