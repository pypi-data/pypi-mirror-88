{"version":3,"sources":["elements/emby-collapse/emby-collapse.js"],"names":["define","browser","EmbyButtonPrototype","Object","create","HTMLDivElement","prototype","onButtonClick","e","collapseContent","this","parentNode","querySelector","expanded","slideUpToHide","button","elem","style","height","offsetHeight","classList","remove","setTimeout","contains","add","slideDownToShow","attachedCallback","title","getAttribute","html","insertAdjacentHTML","addEventListener","call","document","registerElement","extends"],"mappings":"AAAA,aAAAA,OAAO,CAAC,UAAW,sBAAuB,gBAAiB,gBAAgB,SAAUC,SAGjF,IAAIC,oBAAsBC,OAAOC,OAAOC,eAAeC,WAkDvD,SAASC,cAAcC,GAEnB,IACIC,gBADSC,KACgBC,WAAWC,cAAc,oBAElDH,gBAAgBI,UAChBJ,gBAAgBI,UAAW,EA5BnC,SAASC,cAAcC,OAAQC,MAE3BA,KAAKC,MAAMC,OAASF,KAAKG,aAAe,KAExBH,KAAKG,aAErBH,KAAKI,UAAUC,OAAO,YACtBL,KAAKC,MAAMC,OAAS,IAEpBI,YAAW,WACHN,KAAKI,UAAUG,SAAS,YACxBP,KAAKI,UAAUC,OAAO,QAEtBL,KAAKI,UAAUI,IAAI,UAExB,KAEQT,OAAOH,cAAc,mBAE3BQ,UAAUC,OAAO,oCAUlBP,CALSJ,KAKaD,mBAEtBA,gBAAgBI,UAAW,EAzDnC,SAASY,gBAAgBV,OAAQC,MAE7BA,KAAKI,UAAUC,OAAO,QACtBL,KAAKI,UAAUI,IAAI,YACnBR,KAAKC,MAAMC,OAAS,OACpB,IAAIA,OAASF,KAAKG,aAAe,KACjCH,KAAKC,MAAMC,OAAS,IAGJF,KAAKG,aACrBH,KAAKC,MAAMC,OAASA,OAEpBI,YAAW,WACHN,KAAKI,UAAUG,SAAS,YACxBP,KAAKI,UAAUC,OAAO,QAEtBL,KAAKI,UAAUI,IAAI,QAEvBR,KAAKC,MAAMC,OAAS,SACrB,KAEQH,OAAOH,cAAc,mBAE3BQ,UAAUI,IAAI,oCAmCfC,CARSf,KAQeD,kBAIhCP,oBAAoBwB,iBAAmB,WAEnC,IAAIhB,KAAKU,UAAUG,SAAS,iBAA5B,CAIAb,KAAKU,UAAUI,IAAI,iBAEnB,IAAIf,gBAAkBC,KAAKE,cAAc,oBACrCH,iBACAA,gBAAgBW,UAAUI,IAAI,QAGlC,IAAIG,MAAQjB,KAAKkB,aAAa,SAE1BC,KAAO,wKAA0KF,MAAQ,KAAOA,MAAQ,0FAE5MjB,KAAKoB,mBAAmB,aAAcD,MAEtC,IAAId,OAASL,KAAKE,cAAc,4BAEhCG,OAAOgB,iBAAiB,QAASxB,eAEU,SAAvCG,KAAKkB,aAAa,kBAClBrB,cAAcyB,KAAKjB,UAI3BkB,SAASC,gBAAgB,gBAAiB,CACtC5B,UAAWJ,oBACXiC,QAAS","file":"emby-collapse.js","sourcesContent":["define(['browser', 'css!./emby-collapse', 'webcomponents', 'emby-button'], function (browser) {\n    'use strict';\n\n    var EmbyButtonPrototype = Object.create(HTMLDivElement.prototype);\n\n    function slideDownToShow(button, elem) {\n\n        elem.classList.remove('hide');\n        elem.classList.add('expanded');\n        elem.style.height = 'auto';\n        var height = elem.offsetHeight + 'px';\n        elem.style.height = '0';\n\n        // trigger reflow\n        var newHeight = elem.offsetHeight;\n        elem.style.height = height;\n\n        setTimeout(function () {\n            if (elem.classList.contains('expanded')) {\n                elem.classList.remove('hide');\n            } else {\n                elem.classList.add('hide');\n            }\n            elem.style.height = 'auto';\n        }, 300);\n\n        var icon = button.querySelector('.material-icons');\n        //icon.innerHTML = 'expand_less';\n        icon.classList.add('emby-collapse-expandIconExpanded');\n    }\n\n    function slideUpToHide(button, elem) {\n\n        elem.style.height = elem.offsetHeight + 'px';\n        // trigger reflow\n        var newHeight = elem.offsetHeight;\n\n        elem.classList.remove('expanded');\n        elem.style.height = '0';\n\n        setTimeout(function () {\n            if (elem.classList.contains('expanded')) {\n                elem.classList.remove('hide');\n            } else {\n                elem.classList.add('hide');\n            }\n        }, 300);\n\n        var icon = button.querySelector('.material-icons');\n        //icon.innerHTML = 'expand_more';\n        icon.classList.remove('emby-collapse-expandIconExpanded');\n    }\n\n    function onButtonClick(e) {\n\n        var button = this;\n        var collapseContent = button.parentNode.querySelector('.collapseContent');\n\n        if (collapseContent.expanded) {\n            collapseContent.expanded = false;\n            slideUpToHide(button, collapseContent);\n        } else {\n            collapseContent.expanded = true;\n            slideDownToShow(button, collapseContent);\n        }\n    }\n\n    EmbyButtonPrototype.attachedCallback = function () {\n\n        if (this.classList.contains('emby-collapse')) {\n            return;\n        }\n\n        this.classList.add('emby-collapse');\n\n        var collapseContent = this.querySelector('.collapseContent');\n        if (collapseContent) {\n            collapseContent.classList.add('hide');\n        }\n\n        var title = this.getAttribute('title');\n\n        var html = '<button is=\"emby-button\" type=\"button\" on-click=\"toggleExpand\" id=\"expandButton\" class=\"emby-collapsible-button iconRight\"><h3 class=\"emby-collapsible-title\" title=\"' + title + '\">' + title + '</h3><span class=\"material-icons emby-collapse-expandIcon expand_more\"></span></button>';\n\n        this.insertAdjacentHTML('afterbegin', html);\n\n        var button = this.querySelector('.emby-collapsible-button');\n\n        button.addEventListener('click', onButtonClick);\n\n        if (this.getAttribute('data-expanded') === 'true') {\n            onButtonClick.call(button);\n        }\n    };\n\n    document.registerElement('emby-collapse', {\n        prototype: EmbyButtonPrototype,\n        extends: 'div'\n    });\n});\n"]}