{"version":3,"sources":["scripts/alphanumericshortcuts.js"],"names":["define","dom","focusManager","inputDisplayElement","currentDisplayTextContainer","alpanumericShortcutTimeout","currentDisplayText","onKeyDown","e","ctrlKey","shiftKey","altKey","key","chr","alphanumeric","value","match","toString","toUpperCase","length","this","options","itemsContainer","onAlphanumericKeyPress","ensureInputDisplayElement","document","createElement","classList","add","body","appendChild","innerHTML","remove","resetAlphaNumericShortcutTimeout","clearAlphaNumericShortcutTimeout","setTimeout","onAlphanumericShortcutTimeout","clearTimeout","container","selectByShortcutValue","focusElem","querySelector","focus","AlphaNumericShortcuts","keyDownHandler","bind","addEventListener","window","passive","prototype","destroy","removeEventListener"],"mappings":"AAAA,aAAAA,OAAO,CAAC,MAAO,iBAAiB,SAAUC,IAAKC,cAG3C,IAAIC,oBAEAC,4BA2CAC,2BA5CAC,mBAAqB,GAGzB,SAASC,UAAUC,GAEf,IAAIA,EAAEC,UAGFD,EAAEE,WAGFF,EAAEG,OAAN,CAIA,IAAIC,IAAMJ,EAAEI,IACRC,IAAMD,IAad,SAASE,aAAaC,OAElB,OAAOA,MAAMC,MADM,kBAdHF,CAAaF,KAAO,KAEhCC,KAImB,KAFnBA,IAAMA,IAAII,WAAWC,eAEbC,SACJf,4BAA8BgB,KAAKC,QAAQC,eAiCvD,SAASC,uBAAuBf,EAAGK,KAC/B,GAAIP,mBAAmBa,QAAU,EAC7B,QAxBR,SAASK,4BACArB,uBACDA,oBAAsBsB,SAASC,cAAc,QACzBC,UAAUC,IAAI,yBAClCzB,oBAAoBwB,UAAUC,IAAI,QAElCH,SAASI,KAAKC,YAAY3B,uBAoB9BqB,GACAlB,oBAAsBO,IACtBV,oBAAoB4B,UAAYzB,mBAChCH,oBAAoBwB,UAAUK,OAAO,QAZzC,SAASC,mCACLC,mCACA7B,2BAA6B8B,WAAWC,8BAA+B,KAWvEH,GAxCQV,CAAuBf,EAAGK,OAqBtC,SAASqB,mCACD7B,6BACAgC,aAAahC,4BACbA,2BAA6B,MAmBrC,SAAS+B,gCACL,IAAIrB,MAAQT,mBACRgC,UAAYlC,4BAEhBE,mBAAqB,GACrBF,4BAA8B,KAC9BD,oBAAoB4B,UAAY,GAChC5B,oBAAoBwB,UAAUC,IAAI,QAClCM,mCAIJ,SAASK,sBAAsBD,UAAWvB,OAItC,IAAIyB,UACU,OAHdzB,MAAQA,MAAMG,iBAKVsB,UAAYF,UAAUG,cAAc,mBAGnCD,YACDA,UAAYF,UAAUG,cAAc,mBAAsB1B,MAAQ,OAGlEyB,WACAtC,aAAawC,MAAMF,WAlBvBD,CAAsBD,UAAWvB,OAsBrC,SAAS4B,sBAAsBtB,SAE3BD,KAAKC,QAAUA,QAEf,IAAIuB,eAAiBrC,UAAUsC,KAAKzB,MAEpCnB,IAAI6C,iBAAiBC,OAAQ,UAAWH,eAAgB,CACpDI,SAAS,IAGb5B,KAAKwB,eAAiBA,eAgB1B,OAbAD,sBAAsBM,UAAUC,QAAU,WAEtC,IAAIN,eAAiBxB,KAAKwB,eAEtBA,iBACA3C,IAAIkD,oBAAoBJ,OAAQ,UAAWH,eAAgB,CACvDI,SAAS,IAEb5B,KAAKwB,eAAiB,MAE1BxB,KAAKC,QAAU,MAGZsB","file":"alphanumericshortcuts.js","sourcesContent":["define(['dom', 'focusManager'], function (dom, focusManager) {\n    'use strict';\n\n    var inputDisplayElement;\n    var currentDisplayText = '';\n    var currentDisplayTextContainer;\n\n    function onKeyDown(e) {\n\n        if (e.ctrlKey) {\n            return;\n        }\n        if (e.shiftKey) {\n            return;\n        }\n        if (e.altKey) {\n            return;\n        }\n\n        var key = e.key;\n        var chr = key ? alphanumeric(key) : null;\n\n        if (chr) {\n\n            chr = chr.toString().toUpperCase();\n\n            if (chr.length === 1) {\n                currentDisplayTextContainer = this.options.itemsContainer;\n                onAlphanumericKeyPress(e, chr);\n            }\n        }\n    }\n\n    function alphanumeric(value) {\n        var letterNumber = /^[0-9a-zA-Z]+$/;\n        return value.match(letterNumber);\n    }\n\n    function ensureInputDisplayElement() {\n        if (!inputDisplayElement) {\n            inputDisplayElement = document.createElement('div');\n            inputDisplayElement.classList.add('alphanumeric-shortcut');\n            inputDisplayElement.classList.add('hide');\n\n            document.body.appendChild(inputDisplayElement);\n        }\n    }\n\n    var alpanumericShortcutTimeout;\n    function clearAlphaNumericShortcutTimeout() {\n        if (alpanumericShortcutTimeout) {\n            clearTimeout(alpanumericShortcutTimeout);\n            alpanumericShortcutTimeout = null;\n        }\n    }\n    function resetAlphaNumericShortcutTimeout() {\n        clearAlphaNumericShortcutTimeout();\n        alpanumericShortcutTimeout = setTimeout(onAlphanumericShortcutTimeout, 2000);\n    }\n\n    function onAlphanumericKeyPress(e, chr) {\n        if (currentDisplayText.length >= 3) {\n            return;\n        }\n        ensureInputDisplayElement();\n        currentDisplayText += chr;\n        inputDisplayElement.innerHTML = currentDisplayText;\n        inputDisplayElement.classList.remove('hide');\n        resetAlphaNumericShortcutTimeout();\n    }\n\n    function onAlphanumericShortcutTimeout() {\n        var value = currentDisplayText;\n        var container = currentDisplayTextContainer;\n\n        currentDisplayText = '';\n        currentDisplayTextContainer = null;\n        inputDisplayElement.innerHTML = '';\n        inputDisplayElement.classList.add('hide');\n        clearAlphaNumericShortcutTimeout();\n        selectByShortcutValue(container, value);\n    }\n\n    function selectByShortcutValue(container, value) {\n\n        value = value.toUpperCase();\n\n        var focusElem;\n        if (value === '#') {\n\n            focusElem = container.querySelector('*[data-prefix]');\n        }\n\n        if (!focusElem) {\n            focusElem = container.querySelector('*[data-prefix^=\\'' + value + '\\']');\n        }\n\n        if (focusElem) {\n            focusManager.focus(focusElem);\n        }\n    }\n\n    function AlphaNumericShortcuts(options) {\n\n        this.options = options;\n\n        var keyDownHandler = onKeyDown.bind(this);\n\n        dom.addEventListener(window, 'keydown', keyDownHandler, {\n            passive: true\n        });\n\n        this.keyDownHandler = keyDownHandler;\n    }\n\n    AlphaNumericShortcuts.prototype.destroy = function () {\n\n        var keyDownHandler = this.keyDownHandler;\n\n        if (keyDownHandler) {\n            dom.removeEventListener(window, 'keydown', keyDownHandler, {\n                passive: true\n            });\n            this.keyDownHandler = null;\n        }\n        this.options = null;\n    };\n\n    return AlphaNumericShortcuts;\n});\n"]}