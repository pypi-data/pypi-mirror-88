{"version":3,"sources":["scripts/deleteHelper.js"],"names":["define","_exports","_connectionManager","_confirm","_appRouter","_globalize","_interopRequireDefault","obj","__esModule","default","deleteItem","options","item","parentId","SeasonId","SeriesId","ParentId","apiClient","connectionManager","getApiClient","ServerId","title","globalize","translate","text","confirmText","primary","then","Id","navigate","appRouter","showItem","goHome","err","result","Promise","reject","alertText","resolve","require","alert","Object","defineProperty","value","_default"],"mappings":"AAAAA,OAAO,CAAC,UAAW,oBAAqB,UAAW,YAAa,cAAc,SAAUC,SAAUC,mBAAoBC,SAAUC,WAAYC,YAC1I,aAYA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAElF,SAASG,WAAWC,SAEvB,IAAMC,KAAOD,QAAQC,KACfC,SAAWD,KAAKE,UAAYF,KAAKG,UAAYH,KAAKI,SAEpDC,UAAYC,mBAAAA,QAAkBC,aAAaP,KAAKQ,UAEpD,OAAO,EAAAjB,SAAAM,SAAQ,CAEXY,MAAOC,WAAAA,QAAUC,UAAU,oBAC3BC,KAAMF,WAAAA,QAAUC,UAAU,qBAC1BE,YAAaH,WAAAA,QAAUC,UAAU,UACjCG,QAAS,WAEVC,MAAK,WAEJ,OAAOV,UAAUP,WAAWE,KAAKgB,IAAID,MAAK,WAElChB,QAAQkB,WACJhB,SACAiB,WAAAA,QAAUC,SAASlB,SAAUD,KAAKQ,UAElCU,WAAAA,QAAUE,aAGnB,SAAUC,KAET,IAAIC,OAAS,SAATA,SACA,OAAOC,QAAQC,OAAOH,MAG1B,OAzCZ,SAASI,UAAU1B,SAEf,OAAO,IAAIwB,SAAQ,SAAUG,QAASF,QAElCG,QAAQ,CAAC,UAAU,SAAUC,OACzBA,MAAM7B,SAASgB,KAAKW,QAASA,eAoCtBD,CAAUf,WAAAA,QAAUC,UAAU,sBAAsBI,KAAKO,OAAQA,cA3ClFO,OAAOC,eAAezC,SAAU,aAAc,CAC5C0C,OAAO,IAET1C,SAASS,WAAaA,WACtBT,SAASQ,aAAU,EAPrBP,mBAAAI,uBAAAJ,oBACAC,SAAAG,uBAAAH,UACAC,WAAAE,uBAAAF,YACAC,WAAAC,uBAAAD,YAkDE,IAAIuC,SAFS,CACXlC,WAAYA,YAIdT,SAASQ,QAAUmC","file":"deleteHelper.js","sourcesContent":["import connectionManager from 'connectionManager';\nimport confirm from 'confirm';\nimport appRouter from 'appRouter';\nimport globalize from 'globalize';\n\nfunction alertText(options) {\n\n    return new Promise(function (resolve, reject) {\n\n        require(['alert'], function (alert) {\n            alert(options).then(resolve, resolve);\n        });\n    });\n}\n\nexport function deleteItem(options) {\n\n    const item = options.item;\n    const parentId = item.SeasonId || item.SeriesId || item.ParentId;\n\n    let apiClient = connectionManager.getApiClient(item.ServerId);\n\n    return confirm({\n\n        title: globalize.translate('HeaderDeleteItem'),\n        text: globalize.translate('ConfirmDeleteItem'),\n        confirmText: globalize.translate('Delete'),\n        primary: 'delete'\n\n    }).then(function () {\n\n        return apiClient.deleteItem(item.Id).then(function () {\n\n            if (options.navigate) {\n                if (parentId) {\n                    appRouter.showItem(parentId, item.ServerId);\n                } else {\n                    appRouter.goHome();\n                }\n            }\n        }, function (err) {\n\n            let result = function () {\n                return Promise.reject(err);\n            };\n\n            return alertText(globalize.translate('ErrorDeletingItem')).then(result, result);\n        });\n    });\n}\n\nexport default {\n    deleteItem: deleteItem\n};\n"]}