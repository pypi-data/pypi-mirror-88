{"version":3,"sources":["scripts/playlistedit.js"],"names":["define","listView","init","page","item","elem","querySelector","classList","add","remove","enableDragReordering","fetchData","getFetchPlaylistItemsFn","itemId","query","Fields","EnableImageTypes","UserId","ApiClient","getCurrentUserId","getJSON","getUrl","concat","Id","getItemsHtml","getItemsHtmlFn","items","getListViewHtml","showIndex","showRemoveFromPlaylist","playFromHere","action","smallIcon","dragHandle","playlistId","window","PlaylistViewer","render","playlistInit","refreshItems"],"mappings":"AAAA,aAAAA,OAAO,CAAC,aAAa,SAAUC,UA6B3B,SAASC,KAAKC,KAAMC,MAChB,IAAIC,KAAOF,KAAKG,cAAc,oCAC9BD,KAAKE,UAAUC,IAAI,iBACnBH,KAAKE,UAAUE,OAAO,iBACtBJ,KAAKK,sBAAqB,GAC1BL,KAAKM,UA/BT,SAASC,wBAAwBC,QAC7B,OAAO,WACH,IAAIC,MAAQ,CACRC,OAAQ,mCACRC,iBAAkB,gCAClBC,OAAQC,UAAUC,oBAEtB,OAAOD,UAAUE,QAAQF,UAAUG,OAAV,aAAAC,OAA8BT,OAA9B,UAA8CC,SAwB1DF,CAAwBR,KAAKmB,IAC9ClB,KAAKmB,aArBT,SAASC,eAAeZ,QACpB,OAAO,SAAUa,OACb,OAAOzB,SAAS0B,gBAAgB,CAC5BD,MAAOA,MACPE,WAAW,EACXC,wBAAwB,EACxBC,cAAc,EACdC,OAAQ,kBACRC,WAAW,EACXC,YAAY,EACZC,WAAYrB,UAWAY,CAAerB,KAAKmB,IAG5CY,OAAOC,eAAiB,CACpBC,OAAQ,SAAAA,OAAUlC,KAAMC,MACfD,KAAKmC,eACNnC,KAAKmC,cAAe,EACpBpC,KAAKC,KAAMC,OAGfD,KAAKG,cAAc,oBAAoBC,UAAUC,IAAI,sCACrDL,KAAKG,cAAc,oCAAoCiC","file":"playlistedit.js","sourcesContent":["define(['listView'], function (listView) {\n    'use strict';\n\n    function getFetchPlaylistItemsFn(itemId) {\n        return function () {\n            var query = {\n                Fields: 'PrimaryImageAspectRatio,UserData',\n                EnableImageTypes: 'Primary,Backdrop,Banner,Thumb',\n                UserId: ApiClient.getCurrentUserId()\n            };\n            return ApiClient.getJSON(ApiClient.getUrl(`Playlists/${itemId}/Items`, query));\n        };\n    }\n\n    function getItemsHtmlFn(itemId) {\n        return function (items) {\n            return listView.getListViewHtml({\n                items: items,\n                showIndex: false,\n                showRemoveFromPlaylist: true,\n                playFromHere: true,\n                action: 'playallfromhere',\n                smallIcon: true,\n                dragHandle: true,\n                playlistId: itemId\n            });\n        };\n    }\n\n    function init(page, item) {\n        var elem = page.querySelector('#childrenContent .itemsContainer');\n        elem.classList.add('vertical-list');\n        elem.classList.remove('vertical-wrap');\n        elem.enableDragReordering(true);\n        elem.fetchData = getFetchPlaylistItemsFn(item.Id);\n        elem.getItemsHtml = getItemsHtmlFn(item.Id);\n    }\n\n    window.PlaylistViewer = {\n        render: function (page, item) {\n            if (!page.playlistInit) {\n                page.playlistInit = true;\n                init(page, item);\n            }\n\n            page.querySelector('#childrenContent').classList.add('verticalSection-extrabottompadding');\n            page.querySelector('#childrenContent .itemsContainer').refreshItems();\n        }\n    };\n});\n"]}