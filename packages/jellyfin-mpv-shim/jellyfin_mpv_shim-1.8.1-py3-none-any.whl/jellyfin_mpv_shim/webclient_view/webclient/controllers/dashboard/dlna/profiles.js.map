{"version":3,"sources":["controllers/dashboard/dlna/profiles.js"],"names":["define","$","globalize","loading","libraryMenu","loadProfiles","page","show","ApiClient","getJSON","getUrl","then","result","renderUserProfiles","profiles","renderProfiles","querySelector","filter","p","Type","renderSystemProfiles","hide","element","html","length","i","profile","Id","Name","translate","innerHTML","on","id","this","getAttribute","deleteProfile","require","confirm","ajax","type","url","getTabs","href","name","document","setTabs"],"mappings":"AAAA,aAAAA,OAAO,CAAC,SAAU,YAAa,UAAW,cAAe,gBAAiB,gBAAgB,SAAUC,EAAGC,UAAWC,QAASC,aAGvH,SAASC,aAAaC,MAClBH,QAAQI,OACRC,UAAUC,QAAQD,UAAUE,OAAO,sBAAsBC,MAAK,SAAUC,SAO5E,SAASC,mBAAmBP,KAAMQ,UAC9BC,eAAeT,KAAMA,KAAKU,cAAc,mBAAoBF,SAASG,QAAO,SAAUC,GAClF,MAAO,QAAUA,EAAEC,SARnBN,CAAmBP,KAAMM,QAYjC,SAASQ,qBAAqBd,KAAMQ,UAChCC,eAAeT,KAAMA,KAAKU,cAAc,mBAAoBF,SAASG,QAAO,SAAUC,GAClF,MAAO,UAAYA,EAAEC,SAbrBC,CAAqBd,KAAMM,QAC3BT,QAAQkB,UAgBhB,SAASN,eAAeT,KAAMgB,QAASR,UACnC,IAAIS,KAAO,GAEPT,SAASU,SACTD,MAAQ,2BAGZ,IAAK,IAAIE,EAAI,EAAGD,OAASV,SAASU,OAAQC,EAAID,OAAQC,IAAK,CACvD,IAAIC,QAAUZ,SAASW,GACvBF,MAAQ,yCACRA,MAAQ,4DACRA,MAAQ,sCACRA,MAAQ,uHAAyHG,QAAQC,GAAK,KAC9IJ,MAAQ,QAAUG,QAAQE,KAAO,SACjCL,MAAQ,OACRA,MAAQ,SAEJ,QAAUG,QAAQP,OAClBI,MAAQ,+FAAiGG,QAAQC,GAAK,YAAczB,UAAU2B,UAAU,gBAAkB,0DAG9KN,MAAQ,SAGRT,SAASU,SACTD,MAAQ,UAGZD,QAAQQ,UAAYP,KACpBtB,EAAE,oBAAqBqB,SAASS,GAAG,SAAS,WACxC,IAAIC,GAAKC,KAAKC,aAAa,mBAKnC,SAASC,cAAc7B,KAAM0B,IACzBI,QAAQ,CAAC,YAAY,SAAUC,SAC3BA,QAAQnC,UAAU2B,UAAU,iCAAkC3B,UAAU2B,UAAU,iCAAiClB,MAAK,WACpHR,QAAQI,OACRC,UAAU8B,KAAK,CACXC,KAAM,SACNC,IAAKhC,UAAUE,OAAO,iBAAmBsB,MAC1CrB,MAAK,WACJR,QAAQkB,OACRhB,aAAaC,eAbrB6B,CAAc7B,KAAM0B,OAmB5B,SAASS,UACL,MAAO,CAAC,CACJC,KAAM,oBACNC,KAAMzC,UAAU2B,UAAU,gBAC3B,CACCa,KAAM,oBACNC,KAAMzC,UAAU2B,UAAU,iBAIlC5B,EAAE2C,UAAUb,GAAG,WAAY,qBAAqB,WAC5C3B,YAAYyC,QAAQ,OAAQ,EAAGJ,SAC/BpC,aAAa4B","file":"profiles.js","sourcesContent":["define(['jQuery', 'globalize', 'loading', 'libraryMenu', 'listViewStyle', 'emby-button'], function ($, globalize, loading, libraryMenu) {\n    'use strict';\n\n    function loadProfiles(page) {\n        loading.show();\n        ApiClient.getJSON(ApiClient.getUrl('Dlna/ProfileInfos')).then(function (result) {\n            renderUserProfiles(page, result);\n            renderSystemProfiles(page, result);\n            loading.hide();\n        });\n    }\n\n    function renderUserProfiles(page, profiles) {\n        renderProfiles(page, page.querySelector('.customProfiles'), profiles.filter(function (p) {\n            return 'User' == p.Type;\n        }));\n    }\n\n    function renderSystemProfiles(page, profiles) {\n        renderProfiles(page, page.querySelector('.systemProfiles'), profiles.filter(function (p) {\n            return 'System' == p.Type;\n        }));\n    }\n\n    function renderProfiles(page, element, profiles) {\n        var html = '';\n\n        if (profiles.length) {\n            html += '<div class=\"paperList\">';\n        }\n\n        for (var i = 0, length = profiles.length; i < length; i++) {\n            var profile = profiles[i];\n            html += '<div class=\"listItem listItem-border\">';\n            html += '<span class=\"listItemIcon material-icons live_tv\"></span>';\n            html += '<div class=\"listItemBody two-line\">';\n            html += \"<a is='emby-linkbutton' style='padding:0;margin:0;' data-ripple='false' class='clearLink' href='dlnaprofile.html?id=\" + profile.Id + \"'>\";\n            html += '<div>' + profile.Name + '</div>';\n            html += '</a>';\n            html += '</div>';\n\n            if ('User' == profile.Type) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" class=\"btnDeleteProfile\" data-profileid=\"' + profile.Id + '\" title=\"' + globalize.translate('ButtonDelete') + '\"><span class=\"material-icons delete\"></span></button>';\n            }\n\n            html += '</div>';\n        }\n\n        if (profiles.length) {\n            html += '</div>';\n        }\n\n        element.innerHTML = html;\n        $('.btnDeleteProfile', element).on('click', function () {\n            var id = this.getAttribute('data-profileid');\n            deleteProfile(page, id);\n        });\n    }\n\n    function deleteProfile(page, id) {\n        require(['confirm'], function (confirm) {\n            confirm(globalize.translate('MessageConfirmProfileDeletion'), globalize.translate('HeaderConfirmProfileDeletion')).then(function () {\n                loading.show();\n                ApiClient.ajax({\n                    type: 'DELETE',\n                    url: ApiClient.getUrl('Dlna/Profiles/' + id)\n                }).then(function () {\n                    loading.hide();\n                    loadProfiles(page);\n                });\n            });\n        });\n    }\n\n    function getTabs() {\n        return [{\n            href: 'dlnasettings.html',\n            name: globalize.translate('TabSettings')\n        }, {\n            href: 'dlnaprofiles.html',\n            name: globalize.translate('TabProfiles')\n        }];\n    }\n\n    $(document).on('pageshow', '#dlnaProfilesPage', function () {\n        libraryMenu.setTabs('dlna', 1, getTabs);\n        loadProfiles(this);\n    });\n});\n"]}