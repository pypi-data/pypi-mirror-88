{"version":3,"sources":["controllers/dashboard/librarydisplay.js"],"names":["define","globalize","loading","libraryMenu","getTabs","href","name","translate","view","params","querySelector","addEventListener","e","show","form","this","ApiClient","getServerConfiguration","then","config","EnableFolderView","checked","EnableGroupingIntoCollections","DisplaySpecialsWithinSeasons","EnableExternalContentInSuggestions","SaveMetadataHidden","updateServerConfiguration","Dashboard","processServerConfigurationUpdateResult","getNamedConfiguration","UseFileCreationTimeForDateAdded","$","val","updateNamedConfiguration","preventDefault","hide","setTabs","loadData","metadata","selectedIndex","getSystemInfo","info","OperatingSystem","classList","remove","add"],"mappings":"AAAA,aAAAA,OAAO,CAAC,YAAa,UAAW,cAAe,gBAAiB,cAAe,gBAAgB,SAASC,UAAWC,QAASC,aAGxH,SAASC,UACL,MAAO,CAAC,CACJC,KAAM,eACNC,KAAML,UAAUM,UAAU,oBAC3B,CACCF,KAAM,sBACNC,KAAML,UAAUM,UAAU,eAC3B,CACCF,KAAM,sBACNC,KAAML,UAAUM,UAAU,gBAC3B,CACCF,KAAM,mBACNC,KAAML,UAAUM,UAAU,oBAIlC,OAAO,SAASC,KAAMC,QAclBD,KAAKE,cAAc,QAAQC,iBAAiB,UAAU,SAASC,GAC3DV,QAAQW,OACR,IAAIC,KAAOC,KAgBX,OAfAC,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CA,OAAOC,iBAAmBN,KAAKJ,cAAc,kBAAkBW,QAC/DF,OAAOG,8BAAgCR,KAAKJ,cAAc,kCAAkCW,QAC5FF,OAAOI,6BAA+BT,KAAKJ,cAAc,oCAAoCW,QAC7FF,OAAOK,mCAAqCV,KAAKJ,cAAc,oCAAoCW,QACnGF,OAAOM,mBAAqBX,KAAKJ,cAAc,0BAA0BW,QACzEL,UAAUU,0BAA0BP,QAAQD,KAAKS,UAAUC,2CAE/DZ,UAAUa,sBAAsB,YAAYX,MAAK,SAASC,QACtDA,OAAOW,gCAAkC,MAAQC,EAAE,mBAAoBjB,MAAMkB,MAC7EhB,UAAUiB,yBAAyB,WAAYd,WAGnDP,EAAEsB,iBACFhC,QAAQiC,QACD,KAGX3B,KAAKG,iBAAiB,YAAY,WAC9BR,YAAYiC,QAAQ,eAAgB,EAAGhC,SAnC3C,SAASiC,WACLrB,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CX,KAAKE,cAAc,kBAAkBW,QAAUF,OAAOC,iBACtDZ,KAAKE,cAAc,kCAAkCW,QAAUF,OAAOG,8BACtEd,KAAKE,cAAc,oCAAoCW,QAAUF,OAAOI,6BACxEf,KAAKE,cAAc,oCAAoCW,QAAUF,OAAOK,mCACxEhB,KAAKE,cAAc,0BAA0BW,QAAUF,OAAOM,sBAElET,UAAUa,sBAAsB,YAAYX,MAAK,SAASoB,UACtD9B,KAAKE,cAAc,oBAAoB6B,cAAgBD,SAASR,gCAAkC,EAAI,KA2B1GO,GACArB,UAAUwB,gBAAgBtB,MAAK,SAASuB,MAChC,YAAcA,KAAKC,gBACnBlC,KAAKE,cAAc,0BAA0BiC,UAAUC,OAAO,QAE9DpC,KAAKE,cAAc,0BAA0BiC,UAAUE,IAAI","file":"librarydisplay.js","sourcesContent":["define(['globalize', 'loading', 'libraryMenu', 'emby-checkbox', 'emby-button', 'emby-button'], function(globalize, loading, libraryMenu) {\n    'use strict';\n\n    function getTabs() {\n        return [{\n            href: 'library.html',\n            name: globalize.translate('HeaderLibraries')\n        }, {\n            href: 'librarydisplay.html',\n            name: globalize.translate('TabDisplay')\n        }, {\n            href: 'metadataimages.html',\n            name: globalize.translate('TabMetadata')\n        }, {\n            href: 'metadatanfo.html',\n            name: globalize.translate('TabNfoSettings')\n        }];\n    }\n\n    return function(view, params) {\n        function loadData() {\n            ApiClient.getServerConfiguration().then(function(config) {\n                view.querySelector('.chkFolderView').checked = config.EnableFolderView;\n                view.querySelector('.chkGroupMoviesIntoCollections').checked = config.EnableGroupingIntoCollections;\n                view.querySelector('.chkDisplaySpecialsWithinSeasons').checked = config.DisplaySpecialsWithinSeasons;\n                view.querySelector('.chkExternalContentInSuggestions').checked = config.EnableExternalContentInSuggestions;\n                view.querySelector('#chkSaveMetadataHidden').checked = config.SaveMetadataHidden;\n            });\n            ApiClient.getNamedConfiguration('metadata').then(function(metadata) {\n                view.querySelector('#selectDateAdded').selectedIndex = metadata.UseFileCreationTimeForDateAdded ? 1 : 0;\n            });\n        }\n\n        view.querySelector('form').addEventListener('submit', function(e) {\n            loading.show();\n            var form = this;\n            ApiClient.getServerConfiguration().then(function(config) {\n                config.EnableFolderView = form.querySelector('.chkFolderView').checked;\n                config.EnableGroupingIntoCollections = form.querySelector('.chkGroupMoviesIntoCollections').checked;\n                config.DisplaySpecialsWithinSeasons = form.querySelector('.chkDisplaySpecialsWithinSeasons').checked;\n                config.EnableExternalContentInSuggestions = form.querySelector('.chkExternalContentInSuggestions').checked;\n                config.SaveMetadataHidden = form.querySelector('#chkSaveMetadataHidden').checked;\n                ApiClient.updateServerConfiguration(config).then(Dashboard.processServerConfigurationUpdateResult);\n            });\n            ApiClient.getNamedConfiguration('metadata').then(function(config) {\n                config.UseFileCreationTimeForDateAdded = '1' === $('#selectDateAdded', form).val();\n                ApiClient.updateNamedConfiguration('metadata', config);\n            });\n\n            e.preventDefault();\n            loading.hide();\n            return false;\n        });\n\n        view.addEventListener('viewshow', function() {\n            libraryMenu.setTabs('librarysetup', 1, getTabs);\n            loadData();\n            ApiClient.getSystemInfo().then(function(info) {\n                if ('Windows' === info.OperatingSystem) {\n                    view.querySelector('.fldSaveMetadataHidden').classList.remove('hide');\n                } else {\n                    view.querySelector('.fldSaveMetadataHidden').classList.add('hide');\n                }\n            });\n        });\n    };\n});\n"]}