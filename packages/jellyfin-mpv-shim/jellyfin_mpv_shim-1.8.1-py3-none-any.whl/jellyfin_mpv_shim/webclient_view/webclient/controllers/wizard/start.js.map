{"version":3,"sources":["controllers/wizard/start.js"],"names":["define","$","loading","onSubmit","save","page","show","apiClient","ApiClient","getJSON","getUrl","then","config","UICulture","val","ajax","type","data","url","Dashboard","navigate","this","parents","view","params","on","addEventListener","document","querySelector","classList","add","promise1","promise2","Promise","all","responses","loadPage","languageOptions","html","map","l","Value","Name","hide","remove"],"mappings":"AAAA,aAAAA,OAAO,CAAC,SAAU,UAAW,cAAe,gBAAgB,SAAUC,EAAGC,SAyBrE,SAASC,WAEL,OAjBJ,SAASC,KAAKC,MACVH,QAAQI,OACR,IAAIC,UAAYC,UAChBD,UAAUE,QAAQF,UAAUG,OAAO,0BAA0BC,MAAK,SAAUC,QACxEA,OAAOC,UAAYZ,EAAE,8BAA+BI,MAAMS,MAC1DP,UAAUQ,KAAK,CACXC,KAAM,OACNC,KAAML,OACNM,IAAKX,UAAUG,OAAO,2BACvBC,MAAK,WACJQ,UAAUC,SAAS,yBAM3BhB,CAAKH,EAAEoB,MAAMC,QAAQ,WACd,EAGX,OAAO,SAAUC,KAAMC,QACnBvB,EAAE,mBAAoBsB,MAAME,GAAG,SAAUtB,UACzCoB,KAAKG,iBAAiB,YAAY,WAC9BC,SAASC,cAAc,eAAeC,UAAUC,IAAI,sBACpD5B,QAAQI,OACR,IAAID,KAAOgB,KACPd,UAAYC,UACZuB,SAAWxB,UAAUE,QAAQF,UAAUG,OAAO,0BAC9CsB,SAAWzB,UAAUE,QAAQF,UAAUG,OAAO,yBAClDuB,QAAQC,IAAI,CAACH,SAAUC,WAAWrB,MAAK,SAAUwB,YApCzD,SAASC,SAAS/B,KAAMO,OAAQyB,iBAC5BpC,EAAE,8BAA+BI,MAAMiC,KAAKD,gBAAgBE,KAAI,SAAUC,GACtE,MAAO,kBAAoBA,EAAEC,MAAQ,KAAOD,EAAEE,KAAO,gBACrD5B,IAAIF,OAAOC,WACfX,QAAQyC,OAiCAP,CAAS/B,KAAM8B,UAAU,GAAIA,UAAU,UAG/CZ,KAAKG,iBAAiB,YAAY,WAC9BC,SAASC,cAAc,eAAeC,UAAUe,OAAO","file":"start.js","sourcesContent":["define(['jQuery', 'loading', 'emby-button', 'emby-select'], function ($, loading) {\n    'use strict';\n\n    function loadPage(page, config, languageOptions) {\n        $('#selectLocalizationLanguage', page).html(languageOptions.map(function (l) {\n            return '<option value=\"' + l.Value + '\">' + l.Name + '</option>';\n        })).val(config.UICulture);\n        loading.hide();\n    }\n\n    function save(page) {\n        loading.show();\n        var apiClient = ApiClient;\n        apiClient.getJSON(apiClient.getUrl('Startup/Configuration')).then(function (config) {\n            config.UICulture = $('#selectLocalizationLanguage', page).val();\n            apiClient.ajax({\n                type: 'POST',\n                data: config,\n                url: apiClient.getUrl('Startup/Configuration')\n            }).then(function () {\n                Dashboard.navigate('wizarduser.html');\n            });\n        });\n    }\n\n    function onSubmit() {\n        save($(this).parents('.page'));\n        return false;\n    }\n\n    return function (view, params) {\n        $('.wizardStartForm', view).on('submit', onSubmit);\n        view.addEventListener('viewshow', function () {\n            document.querySelector('.skinHeader').classList.add('noHomeButtonHeader');\n            loading.show();\n            var page = this;\n            var apiClient = ApiClient;\n            var promise1 = apiClient.getJSON(apiClient.getUrl('Startup/Configuration'));\n            var promise2 = apiClient.getJSON(apiClient.getUrl('Localization/Options'));\n            Promise.all([promise1, promise2]).then(function (responses) {\n                loadPage(page, responses[0], responses[1]);\n            });\n        });\n        view.addEventListener('viewhide', function () {\n            document.querySelector('.skinHeader').classList.remove('noHomeButtonHeader');\n        });\n    };\n});\n"]}