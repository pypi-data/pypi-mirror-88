"use strict";define(["loading","globalize","dashboardcss","emby-input","emby-button","emby-button"],(function(loading,globalize){function getApiClient(){return ApiClient}function onUpdateUserComplete(result){console.debug("user update complete: "+result),loading.hide(),function nextWizardPage(){Dashboard.navigate("wizardlibrary.html")}()}function onSubmit(e){return this.querySelector("#txtManualPassword").value!=this.querySelector("#txtPasswordConfirm").value?require(["toast"],(function(toast){toast(globalize.translate("PasswordMatchError"))})):function submit(form){loading.show();var apiClient=getApiClient();apiClient.ajax({type:"POST",data:{Name:form.querySelector("#txtUsername").value,Password:form.querySelector("#txtManualPassword").value},url:apiClient.getUrl("Startup/User")}).then(onUpdateUserComplete)}(this),e.preventDefault(),!1}function onViewShow(){loading.show();var page=this,apiClient=getApiClient();apiClient.getJSON(apiClient.getUrl("Startup/User")).then((function(user){page.querySelector("#txtUsername").value=user.Name||"",page.querySelector("#txtManualPassword").value=user.Password||"",loading.hide()}))}return function(view,params){view.querySelector(".wizardUserForm").addEventListener("submit",onSubmit),view.addEventListener("viewshow",(function(){document.querySelector(".skinHeader").classList.add("noHomeButtonHeader")})),view.addEventListener("viewhide",(function(){document.querySelector(".skinHeader").classList.remove("noHomeButtonHeader")})),view.addEventListener("viewshow",onViewShow)}}));
//# sourceMappingURL=user.js.map
