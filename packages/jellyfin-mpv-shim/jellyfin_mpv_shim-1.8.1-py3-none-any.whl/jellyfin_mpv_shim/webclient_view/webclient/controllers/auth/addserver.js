"use strict";define(["appSettings","loading","browser","globalize","emby-button"],(function(appSettings,loading,browser,globalize){function handleConnectionResult(page,result){switch(loading.hide(),result.State){case"SignedIn":var apiClient=result.ApiClient;Dashboard.onServerChanged(apiClient.getCurrentUserId(),apiClient.accessToken(),apiClient),Dashboard.navigate("home.html");break;case"ServerSignIn":Dashboard.navigate("login.html?serverid="+result.Servers[0].Id,!1,"none");break;case"ServerSelection":Dashboard.navigate("selectserver.html",!1,"none");break;case"ServerUpdateNeeded":Dashboard.alert({message:globalize.translate("ServerUpdateNeeded",'<a href="https://github.com/jellyfin/jellyfin">https://github.com/jellyfin/jellyfin</a>')});break;case"Unavailable":Dashboard.alert({message:globalize.translate("MessageUnableToConnectToServer"),title:globalize.translate("HeaderConnectionFailure")})}}return function(view,params){view.querySelector(".addServerForm").addEventListener("submit",(function onServerSubmit(e){return function submitServer(page){loading.show();var host=page.querySelector("#txtServerHost").value;ConnectionManager.connectToAddress(host,{enableAutoLogin:appSettings.enableAutoLogin()}).then((function(result){handleConnectionResult(0,result)}),(function(){handleConnectionResult(0,{State:"Unavailable"})}))}(view),e.preventDefault(),!1})),view.querySelector(".btnCancel").addEventListener("click",(function goBack(){require(["appRouter"],(function(appRouter){appRouter.back()}))})),require(["autoFocuser"],(function(autoFocuser){autoFocuser.autoFocus(view)}))}}));
//# sourceMappingURL=addserver.js.map
