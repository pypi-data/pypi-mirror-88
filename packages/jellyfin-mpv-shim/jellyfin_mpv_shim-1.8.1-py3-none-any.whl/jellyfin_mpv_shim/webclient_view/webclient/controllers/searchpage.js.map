{"version":3,"sources":["controllers/searchpage.js"],"names":["define","focusManager","SearchFields","SearchResults","events","view","params","onSearch","e","value","self","searchResults","search","this","addEventListener","searchFields","element","querySelector","serverId","ApiClient","parentId","collectionType","on","destroy"],"mappings":"AAAA,aAAAA,OAAO,CAAC,eAAgB,eAAgB,gBAAiB,WAAW,SAAUC,aAAcC,aAAcC,cAAeC,QAGrH,OAAO,SAAUC,KAAMC,QACnB,SAASC,SAASC,EAAGC,OACjBC,KAAKC,cAAcC,OAAOH,OAG9B,IAAIC,KAAOG,KACXR,KAAKS,iBAAiB,YAAY,WACzBJ,KAAKK,eACNL,KAAKK,aAAe,IAAIb,aAAa,CACjCc,QAASX,KAAKY,cAAc,mBAEhCP,KAAKC,cAAgB,IAAIR,cAAc,CACnCa,QAASX,KAAKY,cAAc,kBAC5BC,SAAUZ,OAAOY,UAAYC,UAAUD,WACvCE,SAAUd,OAAOc,SACjBC,eAAgBf,OAAOe,iBAE3BjB,OAAOkB,GAAGZ,KAAKK,aAAc,SAAUR,cAG/CF,KAAKS,iBAAiB,eAAe,WAC7BJ,KAAKK,eACLL,KAAKK,aAAaQ,UAClBb,KAAKK,aAAe,MAGpBL,KAAKC,gBACLD,KAAKC,cAAcY,UACnBb,KAAKC,cAAgB","file":"searchpage.js","sourcesContent":["define(['focusManager', 'searchFields', 'searchResults', 'events'], function (focusManager, SearchFields, SearchResults, events) {\n    'use strict';\n\n    return function (view, params) {\n        function onSearch(e, value) {\n            self.searchResults.search(value);\n        }\n\n        var self = this;\n        view.addEventListener('viewshow', function () {\n            if (!self.searchFields) {\n                self.searchFields = new SearchFields({\n                    element: view.querySelector('.searchFields')\n                });\n                self.searchResults = new SearchResults({\n                    element: view.querySelector('.searchResults'),\n                    serverId: params.serverId || ApiClient.serverId(),\n                    parentId: params.parentId,\n                    collectionType: params.collectionType\n                });\n                events.on(self.searchFields, 'search', onSearch);\n            }\n        });\n        view.addEventListener('viewdestroy', function () {\n            if (self.searchFields) {\n                self.searchFields.destroy();\n                self.searchFields = null;\n            }\n\n            if (self.searchResults) {\n                self.searchResults.destroy();\n                self.searchResults = null;\n            }\n        });\n    };\n});\n"]}