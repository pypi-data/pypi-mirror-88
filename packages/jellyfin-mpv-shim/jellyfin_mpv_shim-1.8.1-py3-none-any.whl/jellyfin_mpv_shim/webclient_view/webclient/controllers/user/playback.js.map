{"version":3,"sources":["controllers/user/playback.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","_exports","_playbackSettings","_dom","_globalize","_loading","userSettings","_autoFocuser","_listViewStyle","_getRequireWildcardCache","WeakMap","cache","_interopRequireDefault","__esModule","default","Object","defineProperty","value","_default","view","params","onBeforeUnload","e","hasChanges","returnValue","settingsInstance","userId","ApiClient","getCurrentUserId","currentSettings","UserSettings","addEventListener","window","loadData","PlaybackSettings","serverId","element","querySelector","enableSaveButton","enableSaveConfirmation","autoFocus","autoFocuser","isEnabled","destroy","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set"],"mappings":"AAAA,SAASA,QAAQC,KAAmV,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAASH,QAAQC,KAAO,cAAcA,KAA2B,SAASD,QAAQC,KAAO,OAAOA,KAAyB,mBAAXC,QAAyBD,IAAIG,cAAgBF,QAAUD,MAAQC,OAAOG,UAAY,gBAAkBJ,MAAyBA,KAEnXK,OAAO,CAAC,UAAW,mBAAoB,MAAO,YAAa,UAAW,eAAgB,cAAe,kBAAkB,SAAUC,SAAUC,kBAAmBC,KAAMC,WAAYC,SAAUC,aAAcC,aAAcC,gBACpN,aAaA,SAASC,2BAA6B,GAAuB,mBAAZC,QAAwB,OAAO,KAAM,IAAIC,MAAQ,IAAID,QAA6F,OAAlFD,yBAA2B,SAASA,2BAA6B,OAAOE,OAAiBA,MAI1M,SAASC,uBAAuBjB,KAAO,OAAOA,KAAOA,IAAIkB,WAAalB,IAAM,CAAEmB,QAASnB,KAfvFoB,OAAOC,eAAef,SAAU,aAAc,CAC5CgB,OAAO,IAEThB,SAASa,QAKQ,SAAAI,SAAUC,KAAMC,QAC3B,SAASC,eAAeC,GAChBC,aACAD,EAAEE,YAAc,uEAIxB,IAAIC,iBACAF,WACEG,OAASN,OAAOM,QAAUC,UAAUC,mBACpCC,gBAAkBH,SAAWC,UAAUC,mBAAqBtB,aAAe,IAAIwB,aACrFX,KAAKY,iBAAiB,YAAY,WAC9BC,OAAOD,iBAAiB,eAAgBV,gBAEpCI,iBACAA,iBAAiBQ,WAEjBR,iBAAmB,IAAIS,kBAAAA,QAAiB,CACpCC,SAAUR,UAAUQ,WACpBT,OAAQA,OACRU,QAASjB,KAAKkB,cAAc,sBAC5B/B,aAAcuB,gBACdS,kBAAkB,EAClBC,wBAAwB,EACxBC,UAAWC,aAAAA,QAAYC,iBAKnCvB,KAAKY,iBAAiB,UAAU,WAC5BR,YAAa,KAGjBJ,KAAKY,iBAAiB,eAAe,WAC7BN,mBACAA,iBAAiBkB,UACjBlB,iBAAmB,UAjDnCvB,kBAAAU,uBAAAV,mBACAC,KAAAS,uBAAAT,MACAC,WAAAQ,uBAAAR,YACAC,SAAAO,uBAAAP,UACAC,aAcE,SAASsC,wBAAwBjD,KAAO,GAAIA,KAAOA,IAAIkB,WAAc,OAAOlB,IAAO,GAAY,OAARA,KAAiC,WAAjBD,QAAQC,MAAoC,mBAARA,IAAsB,MAAO,CAAEmB,QAASnB,KAAS,IAAIgB,MAAQF,2BAA4B,GAAIE,OAASA,MAAMkC,IAAIlD,KAAQ,OAAOgB,MAAMmC,IAAInD,KAAQ,IAAIoD,OAAS,GAAQC,sBAAwBjC,OAAOC,gBAAkBD,OAAOkC,yBAA0B,IAAK,IAAIC,OAAOvD,IAAO,GAAIoB,OAAOhB,UAAUoD,eAAeC,KAAKzD,IAAKuD,KAAM,CAAE,IAAIG,KAAOL,sBAAwBjC,OAAOkC,yBAAyBtD,IAAKuD,KAAO,KAAUG,OAASA,KAAKP,KAAOO,KAAKC,KAAQvC,OAAOC,eAAe+B,OAAQG,IAAKG,MAAgBN,OAAOG,KAAOvD,IAAIuD,KAAYH,OAAOjC,QAAUnB,IAASgB,OAASA,MAAM2C,IAAI3D,IAAKoD,QAAW,OAAOA,OAdluBH,CAAAtC,cACAC,aAAAK,uBAAAL,cAMI,IAAMuB,aAAexB,aAAawB","file":"playback.js","sourcesContent":["import PlaybackSettings from 'playbackSettings';\nimport dom from 'dom';\nimport globalize from 'globalize';\nimport loading from 'loading';\nimport * as userSettings from 'userSettings';\nimport autoFocuser from 'autoFocuser';\nimport 'listViewStyle';\n\n/* eslint-disable indent */\n\n    // Shortcuts\n    const UserSettings = userSettings.UserSettings;\n\n    export default function (view, params) {\n        function onBeforeUnload(e) {\n            if (hasChanges) {\n                e.returnValue = 'You currently have unsaved changes. Are you sure you wish to leave?';\n            }\n        }\n\n        let settingsInstance;\n        let hasChanges;\n        const userId = params.userId || ApiClient.getCurrentUserId();\n        const currentSettings = userId === ApiClient.getCurrentUserId() ? userSettings : new UserSettings();\n        view.addEventListener('viewshow', function () {\n            window.addEventListener('beforeunload', onBeforeUnload);\n\n            if (settingsInstance) {\n                settingsInstance.loadData();\n            } else {\n                settingsInstance = new PlaybackSettings({\n                    serverId: ApiClient.serverId(),\n                    userId: userId,\n                    element: view.querySelector('.settingsContainer'),\n                    userSettings: currentSettings,\n                    enableSaveButton: true,\n                    enableSaveConfirmation: true,\n                    autoFocus: autoFocuser.isEnabled()\n                });\n            }\n        });\n\n        view.addEventListener('change', function () {\n            hasChanges = true;\n        });\n\n        view.addEventListener('viewdestroy', function () {\n            if (settingsInstance) {\n                settingsInstance.destroy();\n                settingsInstance = null;\n            }\n        });\n    }\n\n/* eslint-enable indent */\n"]}