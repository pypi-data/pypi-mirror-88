{"version":3,"sources":["components/groupedcards.js"],"names":["define","dom","appRouter","connectionManager","onItemsContainerClick","e","groupedCard","parentWithClass","target","onGroupedCardClick","card","itemId","getAttribute","serverId","apiClient","getApiClient","userId","getCurrentUserId","playedIndicator","querySelector","playedIndicatorHtml","innerHTML","options","Limit","parseInt","Fields","ParentId","GroupItems","actionableParent","parentWithTag","classList","contains","getJSON","getUrl","then","items","length","url","Dashboard","navigate","showItem","stopPropagation","preventDefault"],"mappings":"AAAA,aAAAA,OAAO,CAAC,MAAO,YAAa,sBAAsB,SAAUC,IAAKC,UAAWC,mBAyCxE,MAAO,CACHC,sBATJ,SAASA,sBAAsBC,GAC3B,IAAIC,YAAcL,IAAIM,gBAAgBF,EAAEG,OAAQ,eAE5CF,aAjCR,SAASG,mBAAmBJ,EAAGK,MAC3B,IAAIC,OAASD,KAAKE,aAAa,WAC3BC,SAAWH,KAAKE,aAAa,iBAC7BE,UAAYX,kBAAkBY,aAAaF,UAC3CG,OAASF,UAAUG,mBACnBC,gBAAkBR,KAAKS,cAAc,oBACrCC,oBAAsBF,gBAAkBA,gBAAgBG,UAAY,KACpEC,QAAU,CACVC,MAAOC,SAASJ,qBAAuB,MACvCK,OAAQ,sCACRC,SAAUf,OACVgB,YAAY,GAEZC,iBAAmB3B,IAAI4B,cAAcxB,EAAEG,OAAQ,CAAC,IAAK,SAAU,UAEnE,IAAKoB,kBAAoBA,iBAAiBE,UAAUC,SAAS,eAWzD,OAVAjB,UAAUkB,QAAQlB,UAAUmB,OAAO,SAAWjB,OAAS,gBAAiBM,UAAUY,MAAK,SAAUC,OAC7F,GAAI,IAAMA,MAAMC,OAAhB,CAIA,IAAIC,IAAM,cAAgB1B,OAAS,aAAeE,SAClDyB,UAAUC,SAASF,UAJHnC,UAAUsC,SAASL,MAAM,OAM7C9B,EAAEoC,kBACFpC,EAAEqC,kBACK,EAQPjC,CAAmBJ,EAAGC","file":"groupedcards.js","sourcesContent":["define(['dom', 'appRouter', 'connectionManager'], function (dom, appRouter, connectionManager) {\n    'use strict';\n\n    function onGroupedCardClick(e, card) {\n        var itemId = card.getAttribute('data-id');\n        var serverId = card.getAttribute('data-serverid');\n        var apiClient = connectionManager.getApiClient(serverId);\n        var userId = apiClient.getCurrentUserId();\n        var playedIndicator = card.querySelector('.playedIndicator');\n        var playedIndicatorHtml = playedIndicator ? playedIndicator.innerHTML : null;\n        var options = {\n            Limit: parseInt(playedIndicatorHtml || '10'),\n            Fields: 'PrimaryImageAspectRatio,DateCreated',\n            ParentId: itemId,\n            GroupItems: false\n        };\n        var actionableParent = dom.parentWithTag(e.target, ['A', 'BUTTON', 'INPUT']);\n\n        if (!actionableParent || actionableParent.classList.contains('cardContent')) {\n            apiClient.getJSON(apiClient.getUrl('Users/' + userId + '/Items/Latest', options)).then(function (items) {\n                if (1 === items.length) {\n                    return void appRouter.showItem(items[0]);\n                }\n\n                var url = 'details?id=' + itemId + '&serverId=' + serverId;\n                Dashboard.navigate(url);\n            });\n            e.stopPropagation();\n            e.preventDefault();\n            return false;\n        }\n    }\n\n    function onItemsContainerClick(e) {\n        var groupedCard = dom.parentWithClass(e.target, 'groupedCard');\n\n        if (groupedCard) {\n            onGroupedCardClick(e, groupedCard);\n        }\n    }\n\n    return {\n        onItemsContainerClick: onItemsContainerClick\n    };\n});\n"]}