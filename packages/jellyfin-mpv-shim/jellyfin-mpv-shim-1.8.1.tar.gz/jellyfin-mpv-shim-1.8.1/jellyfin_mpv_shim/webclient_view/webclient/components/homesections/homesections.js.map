{"version":3,"sources":["components/homesections/homesections.js"],"names":["define","connectionManager","cardBuilder","appSettings","dom","appHost","layoutManager","imageLoader","globalize","itemShortcuts","itemHelper","appRouter","imageHelper","getDefaultSection","index","resume","elem","options","i","length","elems","querySelectorAll","promises","push","promise","Promise","all","returnPromise","loadSection","page","apiClient","user","userSettings","userViews","allSections","section","Id","querySelector","loadRecentlyAdded","classList","remove","excludeViewTypes","item","Configuration","LatestItemsExcludes","indexOf","CollectionType","frag","document","createElement","add","appendChild","renderLatestSection","loadLibraryTiles","loadlibraryButtons","html","getLibraryButtonsHtml","items","translate","icon","getLibraryIcon","getRouteUrl","Name","innerHTML","lazyChildren","loadResumeVideo","userId","itemsContainer","fetchData","getContinueWatchingFetchFn","serverId","getApiClient","getWindowSize","innerWidth","Limit","Recursive","Fields","ImageTypeLimit","EnableImageTypes","EnableTotalRecordCount","MediaTypes","getResumableItems","getCurrentUserId","getItemsHtml","getContinueWatchingItemsHtml","parentContainer","loadResumeAudio","getContinueListeningFetchFn","getContinueListeningItemsHtml","loadLatestLiveTvRecordings","activeRecordingsOnly","title","getLatestRecordingsFetchFn","getLiveTvRecordings","IsLibraryItem","IsInProgress","getLatestRecordingItemsHtml","getCardsHtml","shape","showTitle","showParentTitle","coverImage","lazy","showDetailsMenu","centerText","overlayText","showYear","lines","overlayPlayButton","allowBottomPadding","preferThumb","cardLayout","overlayMoreButton","action","centerPlayButton","loadOnNow","Policy","EnableLiveTvAccess","resolve","getLiveTvRecommendedPrograms","IsAiring","limit","then","result","Items","tv","getOnNowFetchFn","getOnNowItemsHtml","loadNextUp","getNextUpFetchFn","getNextUpEpisodes","UserId","getNextUpItemsHtml","parent","getFetchLatestItemsFn","parentId","collectionType","ParentId","getLatestItems","getLatestItemsHtmlFn","itemType","viewType","showUnplayedIndicator","showChildCountIndicator","context","Type","transition","inheritThumb","showParentTitleOrTitle","showAirTime","showChannelName","showAirDateTime","showAirEndTime","defaultShape","loadSections","getUserViews","noLibDescription","sections","getAllSectionsToShow","sectionCount","get","refresh","createNowLink","addEventListener","Dashboard","navigate","destroySections","pause"],"mappings":"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","file":"homesections.js","sourcesContent":["define(['connectionManager', 'cardBuilder', 'appSettings', 'dom', 'apphost', 'layoutManager', 'imageLoader', 'globalize', 'itemShortcuts', 'itemHelper', 'appRouter', 'scripts/imagehelper', 'paper-icon-button-light', 'emby-itemscontainer', 'emby-scroller', 'emby-button', 'css!./homesections'], function (connectionManager, cardBuilder, appSettings, dom, appHost, layoutManager, imageLoader, globalize, itemShortcuts, itemHelper, appRouter, imageHelper) {\n    'use strict';\n\n    function getDefaultSection(index) {\n        switch (index) {\n            case 0:\n                return 'smalllibrarytiles';\n            case 1:\n                return 'resume';\n            case 2:\n                return 'resumeaudio';\n            case 3:\n                return 'livetv';\n            case 4:\n                return 'nextup';\n            case 5:\n                return 'latestmedia';\n            case 6:\n                return 'none';\n            default:\n                return '';\n        }\n    }\n\n    function getAllSectionsToShow(userSettings, sectionCount) {\n        var sections = [];\n        for (var i = 0, length = sectionCount; i < length; i++) {\n            var section = userSettings.get('homesection' + i) || getDefaultSection(i);\n            if (section === 'folders') {\n                section = getDefaultSection(0);\n            }\n\n            sections.push(section);\n        }\n\n        return sections;\n    }\n\n    function loadSections(elem, apiClient, user, userSettings) {\n        return getUserViews(apiClient, user.Id).then(function (userViews) {\n            var html = '';\n\n            if (userViews.length) {\n                var sectionCount = 7;\n                for (var i = 0; i < sectionCount; i++) {\n                    html += '<div class=\"verticalSection section' + i + '\"></div>';\n                }\n\n                elem.innerHTML = html;\n                elem.classList.add('homeSectionsContainer');\n\n                var promises = [];\n                var sections = getAllSectionsToShow(userSettings, sectionCount);\n                for (var i = 0; i < sections.length; i++) {\n                    promises.push(loadSection(elem, apiClient, user, userSettings, userViews, sections, i));\n                }\n\n                return Promise.all(promises).then(function () {\n                    return resume(elem, {\n                        refresh: true,\n                        returnPromise: false\n                    });\n                });\n            } else {\n                var noLibDescription;\n                if (user['Policy'] && user['Policy']['IsAdministrator']) {\n                    noLibDescription = globalize.translate('NoCreatedLibraries', '<br><a id=\"button-createLibrary\" class=\"button-link\">', '</a>');\n                } else {\n                    noLibDescription = globalize.translate('AskAdminToCreateLibrary');\n                }\n\n                html += '<div class=\"centerMessage padded-left padded-right\">';\n                html += '<h2>' + globalize.translate('MessageNothingHere') + '</h2>';\n                html += '<p>' + noLibDescription + '</p>';\n                html += '</div>';\n                elem.innerHTML = html;\n\n                var createNowLink = elem.querySelector('#button-createLibrary');\n                if (createNowLink) {\n                    createNowLink.addEventListener('click', function () {\n                        Dashboard.navigate('library.html');\n                    });\n                }\n            }\n        });\n    }\n\n    function destroySections(elem) {\n        var elems = elem.querySelectorAll('.itemsContainer');\n        for (var i = 0; i < elems.length; i++) {\n            elems[i].fetchData = null;\n            elems[i].parentContainer = null;\n            elems[i].getItemsHtml = null;\n        }\n\n        elem.innerHTML = '';\n    }\n\n    function pause(elem) {\n        var elems = elem.querySelectorAll('.itemsContainer');\n        for (var i = 0; i < elems.length; i++) {\n            elems[i].pause();\n        }\n    }\n\n    function resume(elem, options) {\n        var elems = elem.querySelectorAll('.itemsContainer');\n        var i;\n        var length;\n        var promises = [];\n\n        for (i = 0, length = elems.length; i < length; i++) {\n            promises.push(elems[i].resume(options));\n        }\n\n        var promise = Promise.all(promises);\n        if (!options || options.returnPromise !== false) {\n            return promise;\n        }\n    }\n\n    function loadSection(page, apiClient, user, userSettings, userViews, allSections, index) {\n\n        var section = allSections[index];\n        var userId = user.Id;\n\n        var elem = page.querySelector('.section' + index);\n\n        if (section === 'latestmedia') {\n            loadRecentlyAdded(elem, apiClient, user, userViews);\n        } else if (section === 'librarytiles' || section === 'smalllibrarytiles' || section === 'smalllibrarytiles-automobile' || section === 'librarytiles-automobile') {\n            loadLibraryTiles(elem, apiClient, user, userSettings, 'smallBackdrop', userViews, allSections);\n        } else if (section === 'librarybuttons') {\n            loadlibraryButtons(elem, apiClient, user, userSettings, userViews);\n        } else if (section === 'resume') {\n            loadResumeVideo(elem, apiClient, userId);\n        } else if (section === 'resumeaudio') {\n            loadResumeAudio(elem, apiClient, userId);\n        } else if (section === 'activerecordings') {\n            loadLatestLiveTvRecordings(elem, true, apiClient, userId);\n        } else if (section === 'nextup') {\n            loadNextUp(elem, apiClient, userId);\n        } else if (section === 'onnow' || section === 'livetv') {\n            return loadOnNow(elem, apiClient, user);\n        } else {\n            elem.innerHTML = '';\n            return Promise.resolve();\n        }\n        return Promise.resolve();\n    }\n\n    function getUserViews(apiClient, userId) {\n        return apiClient.getUserViews({}, userId || apiClient.getCurrentUserId()).then(function (result) {\n            return result.Items;\n        });\n    }\n\n    function enableScrollX() {\n        return true;\n    }\n\n    function getSquareShape() {\n        return enableScrollX() ? 'overflowSquare' : 'square';\n    }\n\n    function getThumbShape() {\n        return enableScrollX() ? 'overflowBackdrop' : 'backdrop';\n    }\n\n    function getPortraitShape() {\n        return enableScrollX() ? 'overflowPortrait' : 'portrait';\n    }\n\n    function getLibraryButtonsHtml(items) {\n        var html = '';\n\n        html += '<div class=\"verticalSection verticalSection-extrabottompadding\">';\n        html += '<h2 class=\"sectionTitle sectionTitle-cards padded-left\">' + globalize.translate('HeaderMyMedia') + '</h2>';\n\n        html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\" data-multiselect=\"false\">';\n\n        // library card background images\n        for (var i = 0, length = items.length; i < length; i++) {\n            var item = items[i];\n            var icon = imageHelper.getLibraryIcon(item.CollectionType);\n            html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl(item) + '\" class=\"raised homeLibraryButton\"><span class=\"material-icons homeLibraryIcon ' + icon + '\"></span><span class=\"homeLibraryText\">' + item.Name + '</span></a>';\n        }\n\n        html += '</div>';\n        html += '</div>';\n\n        return html;\n    }\n\n    function loadlibraryButtons(elem, apiClient, user, userSettings, userViews) {\n        elem.classList.remove('verticalSection');\n        var html = getLibraryButtonsHtml(userViews);\n\n        elem.innerHTML = html;\n        imageLoader.lazyChildren(elem);\n    }\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    function getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    function getFetchLatestItemsFn(serverId, parentId, collectionType) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            var limit = 16;\n\n            if (enableScrollX()) {\n                if (collectionType === 'music') {\n                    limit = 30;\n                }\n            } else {\n                if (collectionType === 'tvshows') {\n                    limit = 5;\n                } else if (collectionType === 'music') {\n                    limit = 9;\n                } else {\n                    limit = 8;\n                }\n            }\n\n            var options = {\n                Limit: limit,\n                Fields: 'PrimaryImageAspectRatio,BasicSyncInfo,Path',\n                ImageTypeLimit: 1,\n                EnableImageTypes: 'Primary,Backdrop,Thumb',\n                ParentId: parentId\n            };\n\n            return apiClient.getLatestItems(options);\n        };\n    }\n\n    function getLatestItemsHtmlFn(itemType, viewType) {\n        return function (items) {\n            var cardLayout = false;\n            var shape;\n            if (itemType === 'Channel' || viewType === 'movies' || viewType === 'books' || viewType === 'tvshows') {\n                shape = getPortraitShape();\n            } else if (viewType === 'music' || viewType === 'homevideos') {\n                shape = getSquareShape();\n            } else {\n                shape = getThumbShape();\n            }\n\n            return cardBuilder.getCardsHtml({\n                items: items,\n                shape: shape,\n                preferThumb: viewType !== 'movies' && viewType !== 'tvshows' && itemType !== 'Channel' && viewType !== 'music' ? 'auto' : null,\n                showUnplayedIndicator: false,\n                showChildCountIndicator: true,\n                context: 'home',\n                overlayText: false,\n                centerText: !cardLayout,\n                overlayPlayButton: viewType !== 'photos',\n                allowBottomPadding: !enableScrollX() && !cardLayout,\n                cardLayout: cardLayout,\n                showTitle: viewType !== 'photos',\n                showYear: viewType === 'movies' || viewType === 'tvshows' || !viewType,\n                showParentTitle: viewType === 'music' || viewType === 'tvshows' || !viewType || (cardLayout && (viewType === 'tvshows')),\n                lines: 2\n            });\n        };\n    }\n\n    function renderLatestSection(elem, apiClient, user, parent) {\n        var html = '';\n\n        html += '<div class=\"sectionTitleContainer sectionTitleContainer-cards padded-left\">';\n        if (!layoutManager.tv) {\n            html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl(parent, {\n                section: 'latest'\n            }) + '\" class=\"more button-flat button-flat-mini sectionTitleTextButton\">';\n            html += '<h2 class=\"sectionTitle sectionTitle-cards\">';\n            html += globalize.translate('LatestFromLibrary', parent.Name);\n            html += '</h2>';\n            html += '<span class=\"material-icons chevron_right\"></span>';\n            html += '</a>';\n        } else {\n            html += '<h2 class=\"sectionTitle sectionTitle-cards\">' + globalize.translate('LatestFromLibrary', parent.Name) + '</h2>';\n        }\n        html += '</div>';\n\n        if (enableScrollX()) {\n            html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\">';\n        } else {\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer focuscontainer-x padded-left padded-right vertical-wrap\">';\n        }\n\n        if (enableScrollX()) {\n            html += '</div>';\n        }\n        html += '</div>';\n\n        elem.innerHTML = html;\n\n        var itemsContainer = elem.querySelector('.itemsContainer');\n        itemsContainer.fetchData = getFetchLatestItemsFn(apiClient.serverId(), parent.Id, parent.CollectionType);\n        itemsContainer.getItemsHtml = getLatestItemsHtmlFn(parent.Type, parent.CollectionType);\n        itemsContainer.parentContainer = elem;\n    }\n\n    function loadRecentlyAdded(elem, apiClient, user, userViews) {\n        elem.classList.remove('verticalSection');\n        var excludeViewTypes = ['playlists', 'livetv', 'boxsets', 'channels'];\n\n        for (var i = 0, length = userViews.length; i < length; i++) {\n            var item = userViews[i];\n            if (user.Configuration.LatestItemsExcludes.indexOf(item.Id) !== -1) {\n                continue;\n            }\n\n            if (excludeViewTypes.indexOf(item.CollectionType || []) !== -1) {\n                continue;\n            }\n\n            var frag = document.createElement('div');\n            frag.classList.add('verticalSection');\n            frag.classList.add('hide');\n            elem.appendChild(frag);\n\n            renderLatestSection(frag, apiClient, user, item);\n        }\n    }\n\n    function getRequirePromise(deps) {\n        return new Promise(function (resolve, reject) {\n            require(deps, resolve);\n        });\n    }\n\n    function loadLibraryTiles(elem, apiClient, user, userSettings, shape, userViews, allSections) {\n        var html = '';\n        if (userViews.length) {\n            html += '<h2 class=\"sectionTitle sectionTitle-cards padded-left\">' + globalize.translate('HeaderMyMedia') + '</h2>';\n            if (enableScrollX()) {\n                html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n                html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\">';\n            } else {\n                html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right focuscontainer-x vertical-wrap\">';\n            }\n\n            html += cardBuilder.getCardsHtml({\n                items: userViews,\n                shape: getThumbShape(),\n                showTitle: true,\n                centerText: true,\n                overlayText: false,\n                lazy: true,\n                transition: false,\n                allowBottomPadding: !enableScrollX()\n            });\n\n            if (enableScrollX()) {\n                html += '</div>';\n            }\n            html += '</div>';\n        }\n\n        elem.innerHTML = html;\n        imageLoader.lazyChildren(elem);\n    }\n\n    function getContinueWatchingFetchFn(serverId) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            var screenWidth = dom.getWindowSize().innerWidth;\n\n            var limit;\n            if (enableScrollX()) {\n                limit = 12;\n            } else {\n                limit = screenWidth >= 1920 ? 8 : (screenWidth >= 1600 ? 8 : (screenWidth >= 1200 ? 9 : 6));\n                limit = Math.min(limit, 5);\n            }\n\n            var options = {\n                Limit: limit,\n                Recursive: true,\n                Fields: 'PrimaryImageAspectRatio,BasicSyncInfo',\n                ImageTypeLimit: 1,\n                EnableImageTypes: 'Primary,Backdrop,Thumb',\n                EnableTotalRecordCount: false,\n                MediaTypes: 'Video'\n            };\n\n            return apiClient.getResumableItems(apiClient.getCurrentUserId(), options);\n        };\n    }\n\n    function getContinueWatchingItemsHtml(items) {\n        var cardLayout = false;\n        return cardBuilder.getCardsHtml({\n            items: items,\n            preferThumb: true,\n            shape: getThumbShape(),\n            overlayText: false,\n            showTitle: true,\n            showParentTitle: true,\n            lazy: true,\n            showDetailsMenu: true,\n            overlayPlayButton: true,\n            context: 'home',\n            centerText: !cardLayout,\n            allowBottomPadding: false,\n            cardLayout: cardLayout,\n            showYear: true,\n            lines: 2\n        });\n    }\n\n    function loadResumeVideo(elem, apiClient, userId) {\n        var html = '';\n\n        html += '<h2 class=\"sectionTitle sectionTitle-cards padded-left\">' + globalize.translate('HeaderContinueWatching') + '</h2>';\n        if (enableScrollX()) {\n            html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\" data-monitor=\"videoplayback,markplayed\">';\n        } else {\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\" data-monitor=\"videoplayback,markplayed\">';\n        }\n\n        if (enableScrollX()) {\n            html += '</div>';\n        }\n        html += '</div>';\n\n        elem.classList.add('hide');\n        elem.innerHTML = html;\n\n        var itemsContainer = elem.querySelector('.itemsContainer');\n        itemsContainer.fetchData = getContinueWatchingFetchFn(apiClient.serverId());\n        itemsContainer.getItemsHtml = getContinueWatchingItemsHtml;\n        itemsContainer.parentContainer = elem;\n    }\n\n    function getContinueListeningFetchFn(serverId) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            var screenWidth = dom.getWindowSize().innerWidth;\n\n            var limit;\n            if (enableScrollX()) {\n                limit = 12;\n            } else {\n                limit = screenWidth >= 1920 ? 8 : (screenWidth >= 1600 ? 8 : (screenWidth >= 1200 ? 9 : 6));\n                limit = Math.min(limit, 5);\n            }\n\n            var options = {\n                Limit: limit,\n                Recursive: true,\n                Fields: 'PrimaryImageAspectRatio,BasicSyncInfo',\n                ImageTypeLimit: 1,\n                EnableImageTypes: 'Primary,Backdrop,Thumb',\n                EnableTotalRecordCount: false,\n                MediaTypes: 'Audio'\n            };\n\n            return apiClient.getResumableItems(apiClient.getCurrentUserId(), options);\n        };\n    }\n\n    function getContinueListeningItemsHtml(items) {\n        var cardLayout = false;\n        return cardBuilder.getCardsHtml({\n            items: items,\n            preferThumb: true,\n            shape: getThumbShape(),\n            overlayText: false,\n            showTitle: true,\n            showParentTitle: true,\n            lazy: true,\n            showDetailsMenu: true,\n            overlayPlayButton: true,\n            context: 'home',\n            centerText: !cardLayout,\n            allowBottomPadding: false,\n            cardLayout: cardLayout,\n            showYear: true,\n            lines: 2\n        });\n    }\n\n    function loadResumeAudio(elem, apiClient, userId) {\n        var html = '';\n\n        html += '<h2 class=\"sectionTitle sectionTitle-cards padded-left\">' + globalize.translate('HeaderContinueWatching') + '</h2>';\n        if (enableScrollX()) {\n            html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\" data-monitor=\"audioplayback,markplayed\">';\n        } else {\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\" data-monitor=\"audioplayback,markplayed\">';\n        }\n\n        if (enableScrollX()) {\n            html += '</div>';\n        }\n        html += '</div>';\n\n        elem.classList.add('hide');\n        elem.innerHTML = html;\n\n        var itemsContainer = elem.querySelector('.itemsContainer');\n        itemsContainer.fetchData = getContinueListeningFetchFn(apiClient.serverId());\n        itemsContainer.getItemsHtml = getContinueListeningItemsHtml;\n        itemsContainer.parentContainer = elem;\n    }\n\n    function getOnNowFetchFn(serverId) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            return apiClient.getLiveTvRecommendedPrograms({\n                userId: apiClient.getCurrentUserId(),\n                IsAiring: true,\n                limit: 24,\n                ImageTypeLimit: 1,\n                EnableImageTypes: 'Primary,Thumb,Backdrop',\n                EnableTotalRecordCount: false,\n                Fields: 'ChannelInfo,PrimaryImageAspectRatio'\n            });\n        };\n    }\n\n    function getOnNowItemsHtml(items) {\n        var cardLayout = false;\n        return cardBuilder.getCardsHtml({\n            items: items,\n            preferThumb: 'auto',\n            inheritThumb: false,\n            shape: (enableScrollX() ? 'autooverflow' : 'auto'),\n            showParentTitleOrTitle: true,\n            showTitle: true,\n            centerText: true,\n            coverImage: true,\n            overlayText: false,\n            allowBottomPadding: !enableScrollX(),\n            showAirTime: true,\n            showChannelName: false,\n            showAirDateTime: false,\n            showAirEndTime: true,\n            defaultShape: getThumbShape(),\n            lines: 3,\n            overlayPlayButton: true\n        });\n    }\n\n    function loadOnNow(elem, apiClient, user) {\n        if (!user.Policy.EnableLiveTvAccess) {\n            return Promise.resolve();\n        }\n\n        var userId = user.Id;\n        return apiClient.getLiveTvRecommendedPrograms({\n            userId: apiClient.getCurrentUserId(),\n            IsAiring: true,\n            limit: 1,\n            ImageTypeLimit: 1,\n            EnableImageTypes: 'Primary,Thumb,Backdrop',\n            EnableTotalRecordCount: false,\n            Fields: 'ChannelInfo,PrimaryImageAspectRatio'\n        }).then(function (result) {\n            var html = '';\n            if (result.Items.length) {\n                elem.classList.remove('padded-left');\n                elem.classList.remove('padded-right');\n                elem.classList.remove('padded-bottom');\n                elem.classList.remove('verticalSection');\n\n                html += '<div class=\"verticalSection\">';\n                html += '<div class=\"sectionTitleContainer sectionTitleContainer-cards padded-left\">';\n                html += '<h2 class=\"sectionTitle sectionTitle-cards\">' + globalize.translate('LiveTV') + '</h2>';\n                html += '</div>';\n\n                if (enableScrollX()) {\n                    html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\" data-scrollbuttons=\"false\">';\n                    html += '<div class=\"padded-top padded-bottom scrollSlider focuscontainer-x\">';\n                } else {\n                    html += '<div class=\"padded-top padded-bottom focuscontainer-x\">';\n                }\n\n                html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('livetv', {\n                    serverId: apiClient.serverId(),\n                    section: 'programs'\n                }) + '\" class=\"raised\"><span>' + globalize.translate('Programs') + '</span></a>';\n\n                html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('livetv', {\n                    serverId: apiClient.serverId(),\n                    section: 'guide'\n                }) + '\" class=\"raised\"><span>' + globalize.translate('Guide') + '</span></a>';\n\n                html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('recordedtv', {\n                    serverId: apiClient.serverId()\n                }) + '\" class=\"raised\"><span>' + globalize.translate('Recordings') + '</span></a>';\n\n                html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('livetv', {\n                    serverId: apiClient.serverId(),\n                    section: 'dvrschedule'\n                }) + '\" class=\"raised\"><span>' + globalize.translate('Schedule') + '</span></a>';\n\n                html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('livetv', {\n                    serverId: apiClient.serverId(),\n                    section: 'seriesrecording'\n                }) + '\" class=\"raised\"><span>' + globalize.translate('Series') + '</span></a>';\n\n                html += '</div>';\n                if (enableScrollX()) {\n                    html += '</div>';\n                }\n                html += '</div>';\n                html += '</div>';\n\n                html += '<div class=\"verticalSection\">';\n                html += '<div class=\"sectionTitleContainer sectionTitleContainer-cards padded-left\">';\n\n                if (!layoutManager.tv) {\n                    html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('livetv', {\n                        serverId: apiClient.serverId(),\n                        section: 'onnow'\n                    }) + '\" class=\"more button-flat button-flat-mini sectionTitleTextButton\">';\n                    html += '<h2 class=\"sectionTitle sectionTitle-cards\">';\n                    html += globalize.translate('HeaderOnNow');\n                    html += '</h2>';\n                    html += '<span class=\"material-icons chevron_right\"></span>';\n                    html += '</a>';\n\n                } else {\n                    html += '<h2 class=\"sectionTitle sectionTitle-cards\">' + globalize.translate('HeaderOnNow') + '</h2>';\n                }\n                html += '</div>';\n\n                if (enableScrollX()) {\n                    html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n                    html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\">';\n                } else {\n                    html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\">';\n                }\n\n                if (enableScrollX()) {\n                    html += '</div>';\n                }\n\n                html += '</div>';\n                html += '</div>';\n\n                elem.innerHTML = html;\n\n                var itemsContainer = elem.querySelector('.itemsContainer');\n                itemsContainer.parentContainer = elem;\n                itemsContainer.fetchData = getOnNowFetchFn(apiClient.serverId());\n                itemsContainer.getItemsHtml = getOnNowItemsHtml;\n            }\n        });\n    }\n\n    function getNextUpFetchFn(serverId) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            return apiClient.getNextUpEpisodes({\n                Limit: enableScrollX() ? 24 : 15,\n                Fields: 'PrimaryImageAspectRatio,SeriesInfo,DateCreated,BasicSyncInfo,Path',\n                UserId: apiClient.getCurrentUserId(),\n                ImageTypeLimit: 1,\n                EnableImageTypes: 'Primary,Backdrop,Banner,Thumb',\n                EnableTotalRecordCount: false\n            });\n        };\n    }\n\n    function getNextUpItemsHtml(items) {\n        var cardLayout = false;\n        return cardBuilder.getCardsHtml({\n            items: items,\n            preferThumb: true,\n            shape: getThumbShape(),\n            overlayText: false,\n            showTitle: true,\n            showParentTitle: true,\n            lazy: true,\n            overlayPlayButton: true,\n            context: 'home',\n            centerText: !cardLayout,\n            allowBottomPadding: !enableScrollX(),\n            cardLayout: cardLayout\n        });\n    }\n\n    function loadNextUp(elem, apiClient, userId) {\n        var html = '';\n\n        html += '<div class=\"sectionTitleContainer sectionTitleContainer-cards padded-left\">';\n        if (!layoutManager.tv) {\n            html += '<a is=\"emby-linkbutton\" href=\"' + appRouter.getRouteUrl('nextup', {\n                serverId: apiClient.serverId()\n            }) + '\" class=\"button-flat button-flat-mini sectionTitleTextButton\">';\n            html += '<h2 class=\"sectionTitle sectionTitle-cards\">';\n            html += globalize.translate('HeaderNextUp');\n            html += '</h2>';\n            html += '<span class=\"material-icons chevron_right\"></span>';\n            html += '</a>';\n        } else {\n            html += '<h2 class=\"sectionTitle sectionTitle-cards\">' + globalize.translate('HeaderNextUp') + '</h2>';\n        }\n        html += '</div>';\n\n        if (enableScrollX()) {\n            html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\" data-monitor=\"videoplayback,markplayed\">';\n        } else {\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\" data-monitor=\"videoplayback,markplayed\">';\n        }\n\n        if (enableScrollX()) {\n            html += '</div>';\n        }\n        html += '</div>';\n\n        elem.classList.add('hide');\n        elem.innerHTML = html;\n\n        var itemsContainer = elem.querySelector('.itemsContainer');\n        itemsContainer.fetchData = getNextUpFetchFn(apiClient.serverId());\n        itemsContainer.getItemsHtml = getNextUpItemsHtml;\n        itemsContainer.parentContainer = elem;\n    }\n\n    function getLatestRecordingsFetchFn(serverId, activeRecordingsOnly) {\n        return function () {\n            var apiClient = connectionManager.getApiClient(serverId);\n            return apiClient.getLiveTvRecordings({\n                userId: apiClient.getCurrentUserId(),\n                Limit: enableScrollX() ? 12 : 5,\n                Fields: 'PrimaryImageAspectRatio,BasicSyncInfo',\n                EnableTotalRecordCount: false,\n                IsLibraryItem: activeRecordingsOnly ? null : false,\n                IsInProgress: activeRecordingsOnly ? true : null\n            });\n        };\n    }\n\n    function getLatestRecordingItemsHtml(activeRecordingsOnly) {\n        return function (items) {\n            var cardLayout = false;\n            return cardBuilder.getCardsHtml({\n                items: items,\n                shape: enableScrollX() ? 'autooverflow' : 'auto',\n                showTitle: true,\n                showParentTitle: true,\n                coverImage: true,\n                lazy: true,\n                showDetailsMenu: true,\n                centerText: true,\n                overlayText: false,\n                showYear: true,\n                lines: 2,\n                overlayPlayButton: !activeRecordingsOnly,\n                allowBottomPadding: !enableScrollX(),\n                preferThumb: true,\n                cardLayout: false,\n                overlayMoreButton: activeRecordingsOnly,\n                action: activeRecordingsOnly ? 'none' : null,\n                centerPlayButton: activeRecordingsOnly\n            });\n        };\n    }\n\n    function loadLatestLiveTvRecordings(elem, activeRecordingsOnly, apiClient, userId) {\n        var title = activeRecordingsOnly ?\n            globalize.translate('HeaderActiveRecordings') :\n            globalize.translate('HeaderLatestRecordings');\n\n        var html = '';\n\n        html += '<div class=\"sectionTitleContainer sectionTitleContainer-cards\">';\n        html += '<h2 class=\"sectionTitle sectionTitle-cards padded-left\">' + title + '</h2>';\n        html += '</div>';\n\n        if (enableScrollX()) {\n            html += '<div is=\"emby-scroller\" class=\"padded-top-focusscale padded-bottom-focusscale\" data-centerfocus=\"true\">';\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer scrollSlider focuscontainer-x\">';\n        } else {\n            html += '<div is=\"emby-itemscontainer\" class=\"itemsContainer padded-left padded-right vertical-wrap focuscontainer-x\">';\n        }\n\n        if (enableScrollX()) {\n            html += '</div>';\n        }\n        html += '</div>';\n\n        elem.classList.add('hide');\n        elem.innerHTML = html;\n\n        var itemsContainer = elem.querySelector('.itemsContainer');\n        itemsContainer.fetchData = getLatestRecordingsFetchFn(apiClient.serverId(), activeRecordingsOnly);\n        itemsContainer.getItemsHtml = getLatestRecordingItemsHtml(activeRecordingsOnly);\n        itemsContainer.parentContainer = elem;\n    }\n\n    return {\n        loadLibraryTiles: loadLibraryTiles,\n        getDefaultSection: getDefaultSection,\n        loadSections: loadSections,\n        destroySections: destroySections,\n        pause: pause,\n        resume: resume\n    };\n});\n"]}