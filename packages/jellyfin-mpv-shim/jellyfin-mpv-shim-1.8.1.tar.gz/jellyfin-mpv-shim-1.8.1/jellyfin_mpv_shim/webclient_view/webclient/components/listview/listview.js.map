{"version":3,"sources":["components/listview/listview.js"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","Array","isArray","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","e","_e2","f","normalCompletion","didErr","step","_e3","return","minLen","_arrayLikeToArray","prototype","toString","call","slice","constructor","name","from","test","len","arr2","define","itemHelper","mediaInfo","indicators","connectionManager","layoutManager","globalize","datetime","cardBuilder","getIndex","item","options","index","ParentIndexNumber","translate","code","sortBy","toLowerCase","indexOf","Type","SortName","Name","toUpperCase","charCodeAt","OfficialRating","CommunityRating","Math","floor","CriticRating","AlbumArtist","getImageUrl","width","itemId","apiClient","getApiClient","ServerId","maxWidth","type","ImageTags","Primary","tag","Id","AlbumId","AlbumPrimaryImageTag","SeriesId","SeriesPrimaryImageTag","ParentPrimaryImageTag","ParentPrimaryImageItemId","getScaledImageUrl","getChannelImageUrl","ChannelId","ChannelPrimaryImageTag","getTextLinesHtml","textlines","isLargeStyle","_step","html","largeTitleTagName","tv","_iterator","entries","_step$value","getRightButtonsHtml","rightButtons","button","id","title","icon","getId","getListViewHtml","items","groupTitle","action","imageSize","enableOverview","clickEntireItem","outerTagName","enableSideMediaInfo","outerHtml","enableContentWrapper","containerAlbumArtistIds","containerAlbumArtists","map","showIndex","itemGroupTitle","cssClass","border","highlight","downloadWidth","playlistItemId","PlaylistItemId","positionTicksData","UserData","PlaybackPositionTicks","collectionIdData","collectionId","playlistIdData","playlistId","mediaTypeData","MediaType","collectionTypeData","CollectionType","channelIdData","IsFolder","dragHandle","image","imgUrl","imageSource","imageClass","playOnImageClick","imagePlayButton","getDefaultBackgroundClass","getDefaultText","indicatorsHtml","getPlayedIndicatorHtml","progressHtml","getProgressBarHtml","containerClass","showIndexNumberLeft","IndexNumber","showProgramDateTime","toLocaleString","parseISO8601Date","StartDate","weekday","month","day","hour","minute","showProgramTime","getDisplayTime","showChannel","ChannelName","parentTitle","showParentTitle","SeriesName","IsSeries","EpisodeTitle","displayName","getDisplayName","includeParentInfo","includeParentInfoInTitle","showIndexNumber","parentTitleWithTitle","artist","showArtist","artistItems","ArtistItems","a","join","CurrentProgram","getPrimaryMediaInfoHtml","episodeTitle","originalAirDate","subtitles","Overview","year","container","criticRating","endsAt","recordButton","getTimerIndicator","replace","addToListButton","infoButton","enableUserDataButtons","userData","likes","Likes","canMarkPlayed","enablePlayedButton","Played","canRate","enableRatingButton","IsFavorite","moreButton"],"mappings":"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","file":"listview.js","sourcesContent":["define(['itemHelper', 'mediaInfo', 'indicators', 'connectionManager', 'layoutManager', 'globalize', 'datetime', 'cardBuilder', 'css!./listview', 'emby-ratingbutton', 'emby-playstatebutton'], function (itemHelper, mediaInfo, indicators, connectionManager, layoutManager, globalize, datetime, cardBuilder) {\n    'use strict';\n\n    function getIndex(item, options) {\n\n        if (options.index === 'disc') {\n\n            return item.ParentIndexNumber == null ? '' : globalize.translate('ValueDiscNumber', item.ParentIndexNumber);\n        }\n\n        var sortBy = (options.sortBy || '').toLowerCase();\n        var code;\n        var name;\n\n        if (sortBy.indexOf('sortname') === 0) {\n\n            if (item.Type === 'Episode') {\n                return '';\n            }\n\n            // SortName\n            name = (item.SortName || item.Name || '?')[0].toUpperCase();\n\n            code = name.charCodeAt(0);\n            if (code < 65 || code > 90) {\n                return '#';\n            }\n\n            return name.toUpperCase();\n        }\n        if (sortBy.indexOf('officialrating') === 0) {\n\n            return item.OfficialRating || globalize.translate('Unrated');\n        }\n        if (sortBy.indexOf('communityrating') === 0) {\n\n            if (item.CommunityRating == null) {\n                return globalize.translate('Unrated');\n            }\n\n            return Math.floor(item.CommunityRating);\n        }\n        if (sortBy.indexOf('criticrating') === 0) {\n\n            if (item.CriticRating == null) {\n                return globalize.translate('Unrated');\n            }\n\n            return Math.floor(item.CriticRating);\n        }\n        if (sortBy.indexOf('albumartist') === 0) {\n\n            // SortName\n            if (!item.AlbumArtist) {\n                return '';\n            }\n\n            name = item.AlbumArtist[0].toUpperCase();\n\n            code = name.charCodeAt(0);\n            if (code < 65 || code > 90) {\n                return '#';\n            }\n\n            return name.toUpperCase();\n        }\n        return '';\n    }\n\n    function getImageUrl(item, width) {\n\n        var apiClient = connectionManager.getApiClient(item.ServerId);\n        let itemId;\n\n        var options = {\n            maxWidth: width * 2,\n            type: 'Primary'\n        };\n\n        if (item.ImageTags && item.ImageTags.Primary) {\n            options.tag = item.ImageTags.Primary;\n            itemId = item.Id;\n        } else if (item.AlbumId && item.AlbumPrimaryImageTag) {\n            options.tag = item.AlbumPrimaryImageTag;\n            itemId = item.AlbumId;\n        } else if (item.SeriesId && item.SeriesPrimaryImageTag) {\n            options.tag = item.SeriesPrimaryImageTag;\n            itemId = item.SeriesId;\n        } else if (item.ParentPrimaryImageTag) {\n            options.tag = item.ParentPrimaryImageTag;\n            itemId = item.ParentPrimaryImageItemId;\n        }\n\n        if (itemId) {\n            return apiClient.getScaledImageUrl(itemId, options);\n        }\n        return null;\n    }\n\n    function getChannelImageUrl(item, width) {\n\n        var apiClient = connectionManager.getApiClient(item.ServerId);\n        var options = {\n            maxWidth: width * 2,\n            type: 'Primary'\n        };\n\n        if (item.ChannelId && item.ChannelPrimaryImageTag) {\n            options.tag = item.ChannelPrimaryImageTag;\n        }\n\n        if (item.ChannelId) {\n            return apiClient.getScaledImageUrl(item.ChannelId, options);\n        }\n    }\n\n    function getTextLinesHtml(textlines, isLargeStyle) {\n        var html = '';\n\n        var largeTitleTagName = layoutManager.tv ? 'h2' : 'div';\n\n        for (const [i, text] of textlines.entries()) {\n            if (!text) {\n                continue;\n            }\n\n            if (i === 0) {\n                if (isLargeStyle) {\n                    html += '<' + largeTitleTagName + ' class=\"listItemBodyText\">';\n                } else {\n                    html += '<div class=\"listItemBodyText\">';\n                }\n            } else {\n                html += '<div class=\"secondary listItemBodyText\">';\n            }\n            html += (textlines[i] || '&nbsp;');\n            if (i === 0 && isLargeStyle) {\n                html += '</' + largeTitleTagName + '>';\n            } else {\n                html += '</div>';\n            }\n        }\n\n        return html;\n    }\n\n    function getRightButtonsHtml(options) {\n\n        var html = '';\n\n        for (var i = 0, length = options.rightButtons.length; i < length; i++) {\n\n            var button = options.rightButtons[i];\n\n            html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"custom\" data-customaction=\"' + button.id + '\" title=\"' + button.title + '\"><span class=\"material-icons ' + button.icon + '\"></span></button>';\n        }\n\n        return html;\n    }\n\n    function getId(item) {\n        return item.Id;\n    }\n\n    function getListViewHtml(options) {\n\n        var items = options.items;\n\n        var groupTitle = '';\n        var action = options.action || 'link';\n\n        var isLargeStyle = options.imageSize === 'large';\n        var enableOverview = options.enableOverview;\n\n        var clickEntireItem = layoutManager.tv ? true : false;\n        var outerTagName = clickEntireItem ? 'button' : 'div';\n        var enableSideMediaInfo = options.enableSideMediaInfo != null ? options.enableSideMediaInfo : true;\n\n        var outerHtml = '';\n\n        var enableContentWrapper = options.enableOverview && !layoutManager.tv;\n        var containerAlbumArtistIds = (options.containerAlbumArtists || []).map(getId);\n\n        for (var i = 0, length = items.length; i < length; i++) {\n\n            var item = items[i];\n\n            var html = '';\n\n            if (options.showIndex) {\n\n                var itemGroupTitle = getIndex(item, options);\n\n                if (itemGroupTitle !== groupTitle) {\n\n                    if (html) {\n                        html += '</div>';\n                    }\n\n                    if (i === 0) {\n                        html += '<h2 class=\"listGroupHeader listGroupHeader-first\">';\n                    } else {\n                        html += '<h2 class=\"listGroupHeader\">';\n                    }\n                    html += itemGroupTitle;\n                    html += '</h2>';\n\n                    html += '<div>';\n\n                    groupTitle = itemGroupTitle;\n                }\n            }\n\n            var cssClass = 'listItem';\n\n            if (options.border || (options.highlight !== false && !layoutManager.tv)) {\n                cssClass += ' listItem-border';\n            }\n\n            if (clickEntireItem) {\n                cssClass += ' itemAction listItem-button';\n            }\n\n            if (layoutManager.tv) {\n                cssClass += ' listItem-focusscale';\n            }\n\n            var downloadWidth = 80;\n\n            if (isLargeStyle) {\n                cssClass += ' listItem-largeImage';\n                downloadWidth = 500;\n            }\n\n            var playlistItemId = item.PlaylistItemId ? (' data-playlistitemid=\"' + item.PlaylistItemId + '\"') : '';\n\n            var positionTicksData = item.UserData && item.UserData.PlaybackPositionTicks ? (' data-positionticks=\"' + item.UserData.PlaybackPositionTicks + '\"') : '';\n            var collectionIdData = options.collectionId ? (' data-collectionid=\"' + options.collectionId + '\"') : '';\n            var playlistIdData = options.playlistId ? (' data-playlistid=\"' + options.playlistId + '\"') : '';\n            var mediaTypeData = item.MediaType ? (' data-mediatype=\"' + item.MediaType + '\"') : '';\n            var collectionTypeData = item.CollectionType ? (' data-collectiontype=\"' + item.CollectionType + '\"') : '';\n            var channelIdData = item.ChannelId ? (' data-channelid=\"' + item.ChannelId + '\"') : '';\n\n            if (enableContentWrapper) {\n\n                cssClass += ' listItem-withContentWrapper';\n            }\n\n            html += '<' + outerTagName + ' class=\"' + cssClass + '\"' + playlistItemId + ' data-action=\"' + action + '\" data-isfolder=\"' + item.IsFolder + '\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-type=\"' + item.Type + '\"' + mediaTypeData + collectionTypeData + channelIdData + positionTicksData + collectionIdData + playlistIdData + '>';\n\n            if (enableContentWrapper) {\n\n                html += '<div class=\"listItem-content\">';\n            }\n\n            if (!clickEntireItem && options.dragHandle) {\n                //html += '<button is=\"paper-icon-button-light\" class=\"listViewDragHandle listItemButton\"><span class=\"material-icons drag_handle\"></span></button>';\n                // Firefox and Edge are not allowing the button to be draggable\n                html += '<span class=\"listViewDragHandle material-icons listItemIcon listItemIcon-transparent drag_handle\"></span>';\n            }\n\n            if (options.image !== false) {\n                var imgUrl = options.imageSource === 'channel' ? getChannelImageUrl(item, downloadWidth) : getImageUrl(item, downloadWidth);\n                var imageClass = isLargeStyle ? 'listItemImage listItemImage-large' : 'listItemImage';\n\n                if (isLargeStyle && layoutManager.tv) {\n                    imageClass += ' listItemImage-large-tv';\n                }\n\n                var playOnImageClick = options.imagePlayButton && !layoutManager.tv;\n\n                if (!clickEntireItem) {\n                    imageClass += ' itemAction';\n                }\n\n                var imageAction = playOnImageClick ? 'link' : action;\n\n                if (imgUrl) {\n                    html += '<div data-action=\"' + imageAction + '\" class=\"' + imageClass + ' lazy\" data-src=\"' + imgUrl + '\" item-icon>';\n                } else {\n                    html += '<div class=\"' + imageClass + ' cardImageContainer ' + cardBuilder.getDefaultBackgroundClass(item.Name) + '\">' + cardBuilder.getDefaultText(item, options);\n                }\n\n                var indicatorsHtml = '';\n                indicatorsHtml += indicators.getPlayedIndicatorHtml(item);\n\n                if (indicatorsHtml) {\n                    html += '<div class=\"indicators listItemIndicators\">' + indicatorsHtml + '</div>';\n                }\n\n                if (playOnImageClick) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemImageButton itemAction\" data-action=\"resume\"><span class=\"material-icons listItemImageButton-icon play_arrow\"></span></button>';\n                }\n\n                var progressHtml = indicators.getProgressBarHtml(item, {\n                    containerClass: 'listItemProgressBar'\n                });\n\n                if (progressHtml) {\n                    html += progressHtml;\n                }\n                html += '</div>';\n            }\n\n            if (options.showIndexNumberLeft) {\n\n                html += '<div class=\"listItem-indexnumberleft\">';\n                html += (item.IndexNumber || '&nbsp;');\n                html += '</div>';\n            }\n\n            var textlines = [];\n\n            if (options.showProgramDateTime) {\n                textlines.push(datetime.toLocaleString(datetime.parseISO8601Date(item.StartDate), {\n\n                    weekday: 'long',\n                    month: 'short',\n                    day: 'numeric',\n                    hour: 'numeric',\n                    minute: '2-digit'\n                }));\n            }\n\n            if (options.showProgramTime) {\n                textlines.push(datetime.getDisplayTime(datetime.parseISO8601Date(item.StartDate)));\n            }\n\n            if (options.showChannel) {\n                if (item.ChannelName) {\n                    textlines.push(item.ChannelName);\n                }\n            }\n\n            var parentTitle = null;\n\n            if (options.showParentTitle) {\n                if (item.Type === 'Episode') {\n                    parentTitle = item.SeriesName;\n                } else if (item.IsSeries || (item.EpisodeTitle && item.Name)) {\n                    parentTitle = item.Name;\n                }\n            }\n\n            var displayName = itemHelper.getDisplayName(item, {\n                includeParentInfo: options.includeParentInfoInTitle\n            });\n\n            if (options.showIndexNumber && item.IndexNumber != null) {\n                displayName = item.IndexNumber + '. ' + displayName;\n            }\n\n            if (options.showParentTitle && options.parentTitleWithTitle) {\n\n                if (displayName) {\n\n                    if (parentTitle) {\n                        parentTitle += ' - ';\n                    }\n                    parentTitle = (parentTitle || '') + displayName;\n                }\n\n                textlines.push(parentTitle || '');\n            } else if (options.showParentTitle) {\n                textlines.push(parentTitle || '');\n            }\n\n            if (displayName && !options.parentTitleWithTitle) {\n                textlines.push(displayName);\n            }\n\n            if (item.IsFolder) {\n                if (options.artist !== false) {\n\n                    if (item.AlbumArtist && item.Type === 'MusicAlbum') {\n                        textlines.push(item.AlbumArtist);\n                    }\n                }\n            } else {\n\n                var showArtist = options.artist === true;\n                var artistItems = item.ArtistItems;\n\n                if (!showArtist && options.artist !== false) {\n\n                    if (!artistItems || !artistItems.length) {\n                        showArtist = true;\n                    } else if (artistItems.length > 1 || containerAlbumArtistIds.indexOf(artistItems[0].Id) === -1) {\n                        showArtist = true;\n                    }\n                }\n\n                if (showArtist) {\n\n                    if (artistItems && item.Type !== 'MusicAlbum') {\n                        textlines.push(artistItems.map(function (a) {\n                            return a.Name;\n                        }).join(', '));\n                    }\n                }\n            }\n\n            if (item.Type === 'TvChannel') {\n\n                if (item.CurrentProgram) {\n                    textlines.push(itemHelper.getDisplayName(item.CurrentProgram));\n                }\n            }\n\n            cssClass = 'listItemBody';\n            if (!clickEntireItem) {\n                cssClass += ' itemAction';\n            }\n\n            if (options.image === false) {\n                cssClass += ' listItemBody-noleftpadding';\n            }\n\n            html += '<div class=\"' + cssClass + '\">';\n\n            html += getTextLinesHtml(textlines, isLargeStyle);\n\n            if (options.mediaInfo !== false) {\n                if (!enableSideMediaInfo) {\n\n                    var mediaInfoClass = 'secondary listItemMediaInfo listItemBodyText';\n\n                    html += '<div class=\"' + mediaInfoClass + '\">' + mediaInfo.getPrimaryMediaInfoHtml(item, {\n                        episodeTitle: false,\n                        originalAirDate: false,\n                        subtitles: false\n\n                    }) + '</div>';\n                }\n            }\n\n            if (enableOverview && item.Overview) {\n                html += '<div class=\"secondary listItem-overview listItemBodyText\">';\n                html += item.Overview;\n                html += '</div>';\n            }\n\n            html += '</div>';\n\n            if (options.mediaInfo !== false) {\n                if (enableSideMediaInfo) {\n                    html += '<div class=\"secondary listItemMediaInfo\">' + mediaInfo.getPrimaryMediaInfoHtml(item, {\n\n                        year: false,\n                        container: false,\n                        episodeTitle: false,\n                        criticRating: false,\n                        endsAt: false\n\n                    }) + '</div>';\n                }\n            }\n\n            if (!options.recordButton && (item.Type === 'Timer' || item.Type === 'Program')) {\n                html += indicators.getTimerIndicator(item).replace('indicatorIcon', 'indicatorIcon listItemAside');\n            }\n\n            html += '<div class=\"listViewUserDataButtons\">';\n\n            if (!clickEntireItem) {\n\n                if (options.addToListButton) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"addtoplaylist\"><span class=\"material-icons playlist_add\"></span></button>';\n                }\n\n                if (options.infoButton) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"link\"><span class=\"material-icons info_outline\"></span></button>';\n                }\n\n                if (options.rightButtons) {\n                    html += getRightButtonsHtml(options);\n                }\n\n                if (options.enableUserDataButtons !== false) {\n\n                    var userData = item.UserData || {};\n                    var likes = userData.Likes == null ? '' : userData.Likes;\n\n                    if (itemHelper.canMarkPlayed(item) && options.enablePlayedButton !== false) {\n                        html += '<button is=\"emby-playstatebutton\" type=\"button\" class=\"listItemButton paper-icon-button-light\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-itemtype=\"' + item.Type + '\" data-played=\"' + (userData.Played) + '\"><span class=\"material-icons check\"></span></button>';\n                    }\n\n                    if (itemHelper.canRate(item) && options.enableRatingButton !== false) {\n                        html += '<button is=\"emby-ratingbutton\" type=\"button\" class=\"listItemButton paper-icon-button-light\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-itemtype=\"' + item.Type + '\" data-likes=\"' + likes + '\" data-isfavorite=\"' + (userData.IsFavorite) + '\"><span class=\"material-icons favorite\"></span></button>';\n                    }\n                }\n\n                if (options.moreButton !== false) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"menu\"><span class=\"material-icons more_vert\"></span></button>';\n                }\n            }\n            html += '</div>';\n\n            if (enableContentWrapper) {\n                html += '</div>';\n\n                if (enableOverview && item.Overview) {\n                    html += '<div class=\"listItem-bottomoverview secondary\">';\n                    html += item.Overview;\n                    html += '</div>';\n                }\n            }\n\n            html += '</' + outerTagName + '>';\n\n            outerHtml += html;\n        }\n\n        return outerHtml;\n    }\n\n    return {\n        getListViewHtml: getListViewHtml\n    };\n});\n"]}