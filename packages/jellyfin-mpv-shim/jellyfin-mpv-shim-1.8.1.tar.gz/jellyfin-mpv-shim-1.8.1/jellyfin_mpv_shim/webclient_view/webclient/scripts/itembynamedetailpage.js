"use strict";define(["connectionManager","listView","cardBuilder","imageLoader","libraryBrowser","globalize","emby-itemscontainer","emby-button"],(function(connectionManager,listView,cardBuilder,imageLoader,libraryBrowser,globalize){function renderSection(page,item,element,type){switch(type){case"Program":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Program",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:10,SortBy:"StartDate"},{shape:"overflowBackdrop",showTitle:!0,centerText:!0,overlayMoreButton:!0,preferThumb:!0,overlayText:!1,showAirTime:!0,showAirDateTime:!0,showChannelName:!0});break;case"Movie":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Movie",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:10,SortBy:"SortName"},{shape:"overflowPortrait",showTitle:!0,centerText:!0,overlayMoreButton:!0,overlayText:!1,showYear:!0});break;case"MusicVideo":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"MusicVideo",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:10,SortBy:"SortName"},{shape:"overflowPortrait",showTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Trailer":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Trailer",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:10,SortBy:"SortName"},{shape:"overflowPortrait",showTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Series":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Series",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:10,SortBy:"SortName"},{shape:"overflowPortrait",showTitle:!0,centerText:!0,overlayMoreButton:!0});break;case"MusicAlbum":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"MusicAlbum",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",SortOrder:"Descending",SortBy:"ProductionYear,Sortname"},{shape:"overflowSquare",playFromHere:!0,showTitle:!0,showYear:!0,coverImage:!0,centerText:!0,overlayPlayButton:!0});break;case"MusicArtist":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"MusicArtist",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:8,SortBy:"SortName"},{shape:"overflowSquare",playFromHere:!0,showTitle:!0,showParentTitle:!0,coverImage:!0,centerText:!0,overlayPlayButton:!0});break;case"Episode":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Episode",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",Limit:6,SortBy:"SortName"},{shape:"overflowBackdrop",showTitle:!0,showParentTitle:!0,centerText:!0,overlayPlayButton:!0});break;case"Audio":loadItems(element,item,type,{MediaTypes:"",IncludeItemTypes:"Audio",PersonTypes:"",ArtistIds:"",AlbumArtistIds:"",SortBy:"AlbumArtist,Album,SortName"},{playFromHere:!0,action:"playallfromhere",smallIcon:!0,artist:!0})}}function loadItems(element,item,type,query,listOptions){(function getItemsFunction(options,item){var query=getQuery(options,item);return function(index,limit,fields){query.StartIndex=index,query.Limit=limit,fields&&(query.Fields+=","+fields);var apiClient=connectionManager.getApiClient(item.ServerId);return"MusicArtist"===query.IncludeItemTypes?(query.IncludeItemTypes=null,apiClient.getAlbumArtists(apiClient.getCurrentUserId(),query)):apiClient.getItems(apiClient.getCurrentUserId(),query)}})(query=getQuery(query,item),item)(query.StartIndex,query.Limit,query.Fields).then((function(result){var html="";if(query.Limit&&result.TotalRecordCount>query.Limit){var link=element.querySelector("a");link.classList.remove("hide"),link.setAttribute("href",function getMoreItemsHref(item,type){if("Genre"==item.Type)return"list.html?type="+type+"&genreId="+item.Id+"&serverId="+item.ServerId;if("MusicGenre"==item.Type)return"list.html?type="+type+"&musicGenreId="+item.Id+"&serverId="+item.ServerId;if("Studio"==item.Type)return"list.html?type="+type+"&studioId="+item.Id+"&serverId="+item.ServerId;if("MusicArtist"==item.Type)return"list.html?type="+type+"&artistId="+item.Id+"&serverId="+item.ServerId;if("Person"==item.Type)return"list.html?type="+type+"&personId="+item.Id+"&serverId="+item.ServerId;return"list.html?type="+type+"&parentId="+item.Id+"&serverId="+item.ServerId}(item,type))}else element.querySelector("a").classList.add("hide");listOptions.items=result.Items;var itemsContainer=element.querySelector(".itemsContainer");"Audio"==type?(html=listView.getListViewHtml(listOptions),itemsContainer.classList.remove("vertical-wrap"),itemsContainer.classList.add("vertical-list")):(html=cardBuilder.getCardsHtml(listOptions),itemsContainer.classList.add("vertical-wrap"),itemsContainer.classList.remove("vertical-list")),itemsContainer.innerHTML=html,imageLoader.lazyChildren(itemsContainer)}))}function getQuery(options,item){var query={SortOrder:"Ascending",IncludeItemTypes:"",Recursive:!0,Fields:"AudioInfo,SeriesInfo,ParentId,PrimaryImageAspectRatio,BasicSyncInfo",Limit:100,StartIndex:0,CollapseBoxSetItems:!1};return function addCurrentItemToQuery(query,item){"Person"==item.Type?query.PersonIds=item.Id:"Genre"==item.Type||"MusicGenre"==item.Type||"GameGenre"==item.Type?query.Genres=item.Name:"Studio"==item.Type?query.StudioIds=item.Id:"MusicArtist"==item.Type&&(query.AlbumArtistIds=item.Id)}(query=Object.assign(query,options||{}),item),query}window.ItemsByName={renderItems:function renderItems(page,item){var sections=[];item.ArtistCount&&sections.push({name:globalize.translate("TabArtists"),type:"MusicArtist"}),item.ProgramCount&&"Person"==item.Type&&sections.push({name:globalize.translate("HeaderUpcomingOnTV"),type:"Program"}),item.MovieCount&&sections.push({name:globalize.translate("TabMovies"),type:"Movie"}),item.SeriesCount&&sections.push({name:globalize.translate("TabShows"),type:"Series"}),item.EpisodeCount&&sections.push({name:globalize.translate("TabEpisodes"),type:"Episode"}),item.TrailerCount&&sections.push({name:globalize.translate("TabTrailers"),type:"Trailer"}),item.AlbumCount&&sections.push({name:globalize.translate("TabAlbums"),type:"MusicAlbum"}),item.MusicVideoCount&&sections.push({name:globalize.translate("TabMusicVideos"),type:"MusicVideo"});var elem=page.querySelector("#childrenContent");elem.innerHTML=sections.map((function(section){var html="",sectionClass="verticalSection";return"Audio"===section.type&&(sectionClass+=" verticalSection-extrabottompadding"),html+='<div class="'+sectionClass+'" data-type="'+section.type+'">',html+='<div class="sectionTitleContainer sectionTitleContainer-cards">',html+='<h2 class="sectionTitle sectionTitle-cards">',html+=section.name,html+="</h2>",html+='<a is="emby-linkbutton" href="#" class="clearLink hide" style="margin-left:1em;vertical-align:middle;"><button is="emby-button" type="button" class="raised more raised-mini noIcon">'+globalize.translate("ButtonMore")+"</button></a>",html+="</div>",html+='<div is="emby-itemscontainer" class="itemsContainer padded-right">',(html+="</div>")+"</div>"})).join("");for(var sectionElems=elem.querySelectorAll(".verticalSection"),i=0,length=sectionElems.length;i<length;i++)renderSection(page,item,sectionElems[i],sectionElems[i].getAttribute("data-type"))}}}));
//# sourceMappingURL=itembynamedetailpage.js.map
