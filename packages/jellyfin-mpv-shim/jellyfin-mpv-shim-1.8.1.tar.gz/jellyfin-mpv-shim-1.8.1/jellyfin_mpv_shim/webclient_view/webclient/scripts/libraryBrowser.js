"use strict";define(["userSettings","globalize"],(function(userSettings,globalize){var libraryBrowser={getSavedQueryKey:function getSavedQueryKey(modifier){return window.location.href.split("#")[0]+(modifier||"")},loadSavedQueryValues:function loadSavedQueryValues(key,query){var values=userSettings.get(key);return values?(values=JSON.parse(values),Object.assign(query,values)):query},saveQueryValues:function saveQueryValues(key,query){var values={};query.SortBy&&(values.SortBy=query.SortBy),query.SortOrder&&(values.SortOrder=query.SortOrder),userSettings.set(key,JSON.stringify(values))},saveViewSetting:function saveViewSetting(key,value){userSettings.set(key+"-_view",value)},getSavedView:function getSavedView(key){return userSettings.get(key+"-_view")},showLayoutMenu:function showLayoutMenu(button,currentLayout,views){var dispatchEvent=!0;views||(dispatchEvent=!1,views=(views=button.getAttribute("data-layouts"))?views.split(","):["List","Poster","PosterCard","Thumb","ThumbCard"]);var menuItems=views.map((function(v){return{name:globalize.translate("Option"+v),id:v,selected:currentLayout==v}}));require(["actionsheet"],(function(actionsheet){actionsheet.show({items:menuItems,positionTo:button,callback:function callback(id){button.dispatchEvent(new CustomEvent("layoutchange",{detail:{viewStyle:id},bubbles:!0,cancelable:!1})),dispatchEvent||window.$&&$(button).trigger("layoutchange",[id])}})}))},getQueryPagingHtml:function getQueryPagingHtml(options){var startIndex=options.startIndex,limit=options.limit,totalRecordCount=options.totalRecordCount,html="",recordsEnd=Math.min(startIndex+limit,totalRecordCount),showControls=limit<totalRecordCount;return html+='<div class="listPaging">',showControls&&(html+='<span style="vertical-align:middle;">',html+=globalize.translate("ListPaging",totalRecordCount?startIndex+1:0,recordsEnd,totalRecordCount),html+="</span>"),(showControls||options.viewButton||options.filterButton||options.sortButton||options.addLayoutButton)&&(html+='<div style="display:inline-block;">',showControls&&(html+='<button is="paper-icon-button-light" class="btnPreviousPage autoSize" '+(startIndex?"":"disabled")+'><span class="material-icons arrow_back"></span></button>',html+='<button is="paper-icon-button-light" class="btnNextPage autoSize" '+(startIndex+limit>=totalRecordCount?"disabled":"")+'><span class="material-icons arrow_forward"></span></button>'),options.addLayoutButton&&(html+='<button is="paper-icon-button-light" title="'+globalize.translate("ButtonSelectView")+'" class="btnChangeLayout autoSize" data-layouts="'+(options.layouts||"")+'" onclick="LibraryBrowser.showLayoutMenu(this, \''+(options.currentLayout||"")+'\');"><span class="material-icons view_comfy"></span></button>'),options.sortButton&&(html+='<button is="paper-icon-button-light" class="btnSort autoSize" title="'+globalize.translate("ButtonSort")+'"><span class="material-icons sort_by_alpha"></span></button>'),options.filterButton&&(html+='<button is="paper-icon-button-light" class="btnFilter autoSize" title="'+globalize.translate("ButtonFilter")+'"><span class="material-icons filter_list"></span></button>'),html+="</div>"),html+"</div>"},showSortMenu:function showSortMenu(options){require(["dialogHelper","emby-radio"],(function(dialogHelper){function onSortByChange(){var newValue=this.value;if(this.checked){var changed=options.query.SortBy!=newValue;options.query.SortBy=newValue.replace("_",","),options.query.StartIndex=0,options.callback&&changed&&options.callback()}}function onSortOrderChange(){var newValue=this.value;if(this.checked){var changed=options.query.SortOrder!=newValue;options.query.SortOrder=newValue,options.query.StartIndex=0,options.callback&&changed&&options.callback()}}var dlg=dialogHelper.createDialog({removeOnClose:!0,modal:!1,entryAnimationDuration:160,exitAnimationDuration:200});dlg.classList.add("ui-body-a"),dlg.classList.add("background-theme-a"),dlg.classList.add("formDialog");var i,length,isChecked,html="";for(html+='<div style="margin:0;padding:1.25em 1.5em 1.5em;">',html+='<h2 style="margin:0 0 .5em;">',html+=globalize.translate("HeaderSortBy"),html+="</h2>",html+="<div>",i=0,length=options.items.length;i<length;i++){var option=options.items[i],radioValue=option.id.replace(",","_");isChecked=(options.query.SortBy||"").replace(",","_")==radioValue?" checked":"",html+='<label class="radio-label-block"><input type="radio" is="emby-radio" name="SortBy" data-id="'+option.id+'" value="'+radioValue+'" class="menuSortBy" '+isChecked+" /><span>"+option.name+"</span></label>"}html+="</div>",html+='<h2 style="margin: 1em 0 .5em;">',html+=globalize.translate("HeaderSortOrder"),html+="</h2>",html+="<div>",html+='<label class="radio-label-block"><input type="radio" is="emby-radio" name="SortOrder" value="Ascending" class="menuSortOrder" '+(isChecked="Ascending"==options.query.SortOrder?" checked":"")+" /><span>"+globalize.translate("OptionAscending")+"</span></label>",html+='<label class="radio-label-block"><input type="radio" is="emby-radio" name="SortOrder" value="Descending" class="menuSortOrder" '+(isChecked="Descending"==options.query.SortOrder?" checked":"")+" /><span>"+globalize.translate("OptionDescending")+"</span></label>",html+="</div>",html+="</div>",dlg.innerHTML=html,dialogHelper.open(dlg);var sortBys=dlg.querySelectorAll(".menuSortBy");for(i=0,length=sortBys.length;i<length;i++)sortBys[i].addEventListener("change",onSortByChange);var sortOrders=dlg.querySelectorAll(".menuSortOrder");for(i=0,length=sortOrders.length;i<length;i++)sortOrders[i].addEventListener("change",onSortOrderChange)}))}};return window.LibraryBrowser=libraryBrowser,libraryBrowser}));
//# sourceMappingURL=libraryBrowser.js.map
