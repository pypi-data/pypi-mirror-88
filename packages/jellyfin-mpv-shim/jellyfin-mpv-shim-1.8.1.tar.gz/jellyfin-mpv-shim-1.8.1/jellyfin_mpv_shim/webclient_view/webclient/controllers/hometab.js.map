{"version":3,"sources":["controllers/hometab.js"],"names":["define","userSettings","loading","connectionManager","appHost","layoutManager","focusManager","homeSections","HomeTab","view","params","this","apiClient","currentApiClient","sectionsContainer","querySelector","addEventListener","onHomeScreenSettingsChanged","bind","sectionsRendered","paused","onResume","refresh","prototype","options","resume","Promise","resolve","show","destroyHomeSections","getCurrentUser","then","user","loadSections","autoFocus","hide","onPause","pause","destroy","destroySections"],"mappings":"AAAA,aAAAA,OAAO,CAAC,eAAgB,UAAW,oBAAqB,UAAW,gBAAiB,eAAgB,eAAgB,wBAAwB,SAAUC,aAAcC,QAASC,kBAAmBC,QAASC,cAAeC,aAAcC,cAGlO,SAASC,QAAQC,KAAMC,QACnBC,KAAKF,KAAOA,KACZE,KAAKD,OAASA,OACdC,KAAKC,UAAYT,kBAAkBU,mBACnCF,KAAKG,kBAAoBL,KAAKM,cAAc,aAC5CN,KAAKM,cAAc,aAAaC,iBAAiB,iBAAkBC,4BAA4BC,KAAKP,OAGxG,SAASM,8BACLN,KAAKQ,kBAAmB,EAEnBR,KAAKS,QACNT,KAAKU,SAAS,CACVC,SAAS,IAwDrB,OAnDAd,QAAQe,UAAUF,SAAW,SAAUG,SACnC,GAAIb,KAAKQ,iBAAkB,CACvB,IAAIL,kBAAoBH,KAAKG,kBAE7B,OAAIA,kBACOP,aAAakB,OAAOX,kBAAmBU,SAG3CE,QAAQC,UAGnBzB,QAAQ0B,OACR,IAAInB,KAAOE,KAAKF,KACZG,UAAYD,KAAKC,UAGrB,OAFAD,KAAKkB,sBACLlB,KAAKQ,kBAAmB,EACjBP,UAAUkB,iBAAiBC,MAAK,SAAUC,MAC7C,OAAOzB,aAAa0B,aAAaxB,KAAKM,cAAc,aAAcH,UAAWoB,KAAM/B,cAAc8B,MAAK,WAC9FP,QAAQU,WACR5B,aAAa4B,UAAUzB,MAG3BP,QAAQiC,cAKpB3B,QAAQe,UAAUa,QAAU,WACxB,IAAItB,kBAAoBH,KAAKG,kBAEzBA,mBACAP,aAAa8B,MAAMvB,oBAI3BN,QAAQe,UAAUe,QAAU,WACxB3B,KAAKF,KAAO,KACZE,KAAKD,OAAS,KACdC,KAAKC,UAAY,KACjBD,KAAKkB,sBACLlB,KAAKG,kBAAoB,MAG7BN,QAAQe,UAAUM,oBAAsB,WACpC,IAAIf,kBAAoBH,KAAKG,kBAEzBA,mBACAP,aAAagC,gBAAgBzB,oBAI9BN","file":"hometab.js","sourcesContent":["define(['userSettings', 'loading', 'connectionManager', 'apphost', 'layoutManager', 'focusManager', 'homeSections', 'emby-itemscontainer'], function (userSettings, loading, connectionManager, appHost, layoutManager, focusManager, homeSections) {\n    'use strict';\n\n    function HomeTab(view, params) {\n        this.view = view;\n        this.params = params;\n        this.apiClient = connectionManager.currentApiClient();\n        this.sectionsContainer = view.querySelector('.sections');\n        view.querySelector('.sections').addEventListener('settingschange', onHomeScreenSettingsChanged.bind(this));\n    }\n\n    function onHomeScreenSettingsChanged() {\n        this.sectionsRendered = false;\n\n        if (!this.paused) {\n            this.onResume({\n                refresh: true\n            });\n        }\n    }\n\n    HomeTab.prototype.onResume = function (options) {\n        if (this.sectionsRendered) {\n            var sectionsContainer = this.sectionsContainer;\n\n            if (sectionsContainer) {\n                return homeSections.resume(sectionsContainer, options);\n            }\n\n            return Promise.resolve();\n        }\n\n        loading.show();\n        var view = this.view;\n        var apiClient = this.apiClient;\n        this.destroyHomeSections();\n        this.sectionsRendered = true;\n        return apiClient.getCurrentUser().then(function (user) {\n            return homeSections.loadSections(view.querySelector('.sections'), apiClient, user, userSettings).then(function () {\n                if (options.autoFocus) {\n                    focusManager.autoFocus(view);\n                }\n\n                loading.hide();\n            });\n        });\n    };\n\n    HomeTab.prototype.onPause = function () {\n        var sectionsContainer = this.sectionsContainer;\n\n        if (sectionsContainer) {\n            homeSections.pause(sectionsContainer);\n        }\n    };\n\n    HomeTab.prototype.destroy = function () {\n        this.view = null;\n        this.params = null;\n        this.apiClient = null;\n        this.destroyHomeSections();\n        this.sectionsContainer = null;\n    };\n\n    HomeTab.prototype.destroyHomeSections = function () {\n        var sectionsContainer = this.sectionsContainer;\n\n        if (sectionsContainer) {\n            homeSections.destroySections(sectionsContainer);\n        }\n    };\n\n    return HomeTab;\n});\n"]}