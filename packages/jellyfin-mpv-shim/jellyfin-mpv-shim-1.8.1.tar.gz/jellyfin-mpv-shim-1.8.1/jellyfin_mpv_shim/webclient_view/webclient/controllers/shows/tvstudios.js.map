{"version":3,"sources":["controllers/shows/tvstudios.js"],"names":["define","loading","libraryBrowser","cardBuilder","appHost","getQuery","params","key","getSavedQueryKey","pageData","data","query","SortBy","SortOrder","IncludeItemTypes","Recursive","Fields","StartIndex","ParentId","topParentId","view","tabContent","promise","this","preRender","getPromise","context","show","ApiClient","getStudios","getCurrentUserId","renderTab","reloadItems","then","result","elem","querySelector","buildCards","Items","itemsContainer","shape","preferThumb","showTitle","scalable","centerText","overlayMoreButton","hide","require","autoFocuser","autoFocus"],"mappings":"AAAA,aAAAA,OAAO,CAAC,UAAW,iBAAkB,cAAe,YAAY,SAAUC,QAASC,eAAgBC,YAAaC,SAG5G,SAASC,SAASC,QACd,IAAIC,IAoBR,SAASC,mBACL,OAAON,eAAeM,iBAAiB,WArB7BA,GACNC,SAAWC,KAAKH,KAgBpB,OAdKE,YACDA,SAAWC,KAAKH,KAAO,CACnBI,MAAO,CACHC,OAAQ,WACRC,UAAW,YACXC,iBAAkB,SAClBC,WAAW,EACXC,OAAQ,sCACRC,WAAY,KAGXN,MAAMO,SAAWZ,OAAOa,aAG9BV,SAASE,MAkCpB,IAAID,KAAO,GACX,OAAO,SAAUU,KAAMd,OAAQe,YAC3B,IAAIC,QACOC,KAENC,UAAY,WACbF,QAjCR,SAASG,WAAWC,QAASpB,QACzB,IAAIK,MAAQN,SAASC,QAErB,OADAL,QAAQ0B,OACDC,UAAUC,WAAWD,UAAUE,mBAAoBnB,OA8B5Cc,CAAWL,EAAMd,SAHpBiB,KAMNQ,UAAY,YA9BrB,SAASC,YAAYN,QAASpB,OAAQgB,SAClCA,QAAQW,MAAK,SAAUC,QACnB,IAAIC,KAAOT,QAAQU,cAAc,UACjCjC,YAAYkC,WAAWH,OAAOI,MAAO,CACjCC,eAAgBJ,KAChBK,MAAO,WACPC,aAAa,EACbC,WAAW,EACXC,UAAU,EACVC,YAAY,EACZC,mBAAmB,EACnBnB,QAAS,YAEbzB,QAAQ6C,OAERC,QAAQ,CAAC,gBAAgB,SAAUC,aAC/BA,YAAYC,UAAUvB,eAe1BM,CAAYX,WAAYf,EAAQgB","file":"tvstudios.js","sourcesContent":["define(['loading', 'libraryBrowser', 'cardBuilder', 'apphost'], function (loading, libraryBrowser, cardBuilder, appHost) {\n    'use strict';\n\n    function getQuery(params) {\n        var key = getSavedQueryKey();\n        var pageData = data[key];\n\n        if (!pageData) {\n            pageData = data[key] = {\n                query: {\n                    SortBy: 'SortName',\n                    SortOrder: 'Ascending',\n                    IncludeItemTypes: 'Series',\n                    Recursive: true,\n                    Fields: 'DateCreated,PrimaryImageAspectRatio',\n                    StartIndex: 0\n                }\n            };\n            pageData.query.ParentId = params.topParentId;\n        }\n\n        return pageData.query;\n    }\n\n    function getSavedQueryKey() {\n        return libraryBrowser.getSavedQueryKey('studios');\n    }\n\n    function getPromise(context, params) {\n        var query = getQuery(params);\n        loading.show();\n        return ApiClient.getStudios(ApiClient.getCurrentUserId(), query);\n    }\n\n    function reloadItems(context, params, promise) {\n        promise.then(function (result) {\n            var elem = context.querySelector('#items');\n            cardBuilder.buildCards(result.Items, {\n                itemsContainer: elem,\n                shape: 'backdrop',\n                preferThumb: true,\n                showTitle: true,\n                scalable: true,\n                centerText: true,\n                overlayMoreButton: true,\n                context: 'tvshows'\n            });\n            loading.hide();\n\n            require(['autoFocuser'], function (autoFocuser) {\n                autoFocuser.autoFocus(context);\n            });\n        });\n    }\n\n    var data = {};\n    return function (view, params, tabContent) {\n        var promise;\n        var self = this;\n\n        self.preRender = function () {\n            promise = getPromise(view, params);\n        };\n\n        self.renderTab = function () {\n            reloadItems(tabContent, params, promise);\n        };\n    };\n});\n"]}