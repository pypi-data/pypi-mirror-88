{"version":3,"sources":["controllers/dashboard/devices/device.js"],"names":["define","loading","libraryMenu","dom","loadData","page","this","show","id","getParameterByName","promise1","ApiClient","getJSON","getUrl","Id","promise2","Promise","all","then","responses","load","device","deviceOptions","querySelector","value","CustomName","innerHTML","Name","hide","onSubmit","e","save","ajax","url","type","data","JSON","stringify","contentType","Dashboard","processServerConfigurationUpdateResult","parentWithClass","preventDefault","view","params","addEventListener"],"mappings":"AAAA,aAAAA,OAAO,CAAC,UAAW,cAAe,MAAO,aAAc,gBAAgB,SAAUC,QAASC,YAAaC,KAQnG,SAASC,WACL,IAAIC,KAAOC,KACXL,QAAQM,OACR,IAAIC,GAAKC,mBAAmB,MACxBC,SAAWC,UAAUC,QAAQD,UAAUE,OAAO,eAAgB,CAC9DC,GAAIN,MAEJO,SAAWJ,UAAUC,QAAQD,UAAUE,OAAO,kBAAmB,CACjEC,GAAIN,MAERQ,QAAQC,IAAI,CAACP,SAAUK,WAAWG,MAAK,SAAUC,YAfrD,SAASC,KAAKf,KAAMgB,OAAQC,eACxBjB,KAAKkB,cAAc,iBAAkBlB,MAAMmB,MAAQF,cAAcG,YAAc,GAC/EpB,KAAKkB,cAAc,gBAAiBlB,MAAMqB,UAAYL,OAAOM,MAAQ,GAcjEP,CAAKf,KAAMc,UAAU,GAAIA,UAAU,IACnClB,QAAQ2B,UAkBhB,SAASC,SAASC,GAId,OAlBJ,SAASC,KAAK1B,MACV,IAAIG,GAAKC,mBAAmB,MAC5BE,UAAUqB,KAAK,CACXC,IAAKtB,UAAUE,OAAO,kBAAmB,CACrCC,GAAIN,KAER0B,KAAM,OACNC,KAAMC,KAAKC,UAAU,CACjBZ,WAAYpB,KAAKkB,cAAc,kBAAkBC,QAErDc,YAAa,qBACdpB,KAAKqB,UAAUC,wCAKlBT,CAAK5B,IAAIsC,gBADEnC,KACoB,SAC/BwB,EAAEY,kBACK,EAGX,OAAO,SAAUC,KAAMC,QACnBD,KAAKpB,cAAc,QAAQsB,iBAAiB,SAAUhB,UACtDc,KAAKE,iBAAiB,WAAYzC","file":"device.js","sourcesContent":["define(['loading', 'libraryMenu', 'dom', 'emby-input', 'emby-button'], function (loading, libraryMenu, dom) {\n    'use strict';\n\n    function load(page, device, deviceOptions) {\n        page.querySelector('#txtCustomName', page).value = deviceOptions.CustomName || '';\n        page.querySelector('.reportedName', page).innerHTML = device.Name || '';\n    }\n\n    function loadData() {\n        var page = this;\n        loading.show();\n        var id = getParameterByName('id');\n        var promise1 = ApiClient.getJSON(ApiClient.getUrl('Devices/Info', {\n            Id: id\n        }));\n        var promise2 = ApiClient.getJSON(ApiClient.getUrl('Devices/Options', {\n            Id: id\n        }));\n        Promise.all([promise1, promise2]).then(function (responses) {\n            load(page, responses[0], responses[1]);\n            loading.hide();\n        });\n    }\n\n    function save(page) {\n        var id = getParameterByName('id');\n        ApiClient.ajax({\n            url: ApiClient.getUrl('Devices/Options', {\n                Id: id\n            }),\n            type: 'POST',\n            data: JSON.stringify({\n                CustomName: page.querySelector('#txtCustomName').value\n            }),\n            contentType: 'application/json'\n        }).then(Dashboard.processServerConfigurationUpdateResult);\n    }\n\n    function onSubmit(e) {\n        var form = this;\n        save(dom.parentWithClass(form, 'page'));\n        e.preventDefault();\n        return false;\n    }\n\n    return function (view, params) {\n        view.querySelector('form').addEventListener('submit', onSubmit);\n        view.addEventListener('viewshow', loadData);\n    };\n});\n"]}