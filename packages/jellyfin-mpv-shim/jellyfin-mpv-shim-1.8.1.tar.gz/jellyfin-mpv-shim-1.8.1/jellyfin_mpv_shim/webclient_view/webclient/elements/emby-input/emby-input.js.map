{"version":3,"sources":["elements/emby-input/emby-input.js"],"names":["define","layoutManager","browser","dom","EmbyInputPrototype","Object","create","HTMLInputElement","prototype","inputId","supportsFloatingLabel","getOwnPropertyDescriptor","defineProperty","descriptor","configurable","baseSetMethod","set","value","call","this","dispatchEvent","CustomEvent","bubbles","cancelable","onChange","label","labelElement","classList","remove","type","add","createdCallback","id","contains","parentNode","document","ownerDocument","createElement","innerHTML","getAttribute","htmlFor","insertBefore","addEventListener","attachIME","passive","orsay","activeElement","attachedCallback","text","registerElement","extends"],"mappings":"AAAA,aAAAA,OAAO,CAAC,gBAAiB,UAAW,MAAO,mBAAoB,kBAAkB,SAAUC,cAAeC,QAASC,KAG/G,IAAIC,mBAAqBC,OAAOC,OAAOC,iBAAiBC,WAEpDC,QAAU,EACVC,uBAAwB,EAE5B,GAAIL,OAAOM,0BAA4BN,OAAOO,eAAgB,CAE1D,IAAIC,WAAaR,OAAOM,yBAAyBJ,iBAAiBC,UAAW,SAG7E,GAAIK,YAAcA,WAAWC,aAAc,CACvC,IAAIC,cAAgBF,WAAWG,IAC/BH,WAAWG,IAAM,SAAUC,OACvBF,cAAcG,KAAKC,KAAMF,OAEzBE,KAAKC,cAAc,IAAIC,YAAY,WAAY,CAC3CC,SAAS,EACTC,YAAY,MAIpBlB,OAAOO,eAAeL,iBAAiBC,UAAW,QAASK,YAC3DH,uBAAwB,GAsEhC,SAASc,WAEL,IAAIC,MAAQN,KAAKO,aACbP,KAAKF,MACLQ,MAAME,UAAUC,OAAO,oBAGKlB,uBAAuC,SAAdS,KAAKU,MAAiC,SAAdV,KAAKU,MAG9EJ,MAAME,UAAUG,IAAI,oBA5EhC1B,mBAAmB2B,gBAAkB,WAMjC,GALKZ,KAAKa,KACNb,KAAKa,GAAK,YAAcvB,QACxBA,YAGAU,KAAKQ,UAAUM,SAAS,cAA5B,CAIAd,KAAKQ,UAAUG,IAAI,cAEnB,IAAII,WAAaf,KAAKe,WAClBC,SAAWhB,KAAKiB,cAChBX,MAAQU,SAASE,cAAc,SACnCZ,MAAMa,UAAYnB,KAAKoB,aAAa,UAAY,GAChDd,MAAME,UAAUG,IAAI,cACpBL,MAAME,UAAUG,IAAI,uBAEpBL,MAAMe,QAAUrB,KAAKa,GACrBE,WAAWO,aAAahB,MAAON,MAC/BA,KAAKO,aAAeD,MAEpBtB,IAAIuC,iBAAiBvB,KAAM,SAAS,WAChCK,SAASN,KAAKC,MAGVgB,SAASQ,WACTR,SAASQ,UAAUxB,MAGvBM,MAAME,UAAUG,IAAI,qBACpBL,MAAME,UAAUC,OAAO,yBACxB,CACCgB,SAAS,IAGbzC,IAAIuC,iBAAiBvB,KAAM,QAAQ,WAC/BK,SAASN,KAAKC,MACdM,MAAME,UAAUC,OAAO,qBACvBH,MAAME,UAAUG,IAAI,yBACrB,CACCc,SAAS,IAGbzC,IAAIuC,iBAAiBvB,KAAM,SAAUK,SAAU,CAC3CoB,SAAS,IAEbzC,IAAIuC,iBAAiBvB,KAAM,QAASK,SAAU,CAC1CoB,SAAS,IAEbzC,IAAIuC,iBAAiBvB,KAAM,WAAYK,SAAU,CAC7CoB,SAAS,IAGT1C,QAAQ2C,OACJ1B,OAASgB,SAASW,eAEdX,SAASQ,WACTR,SAASQ,UAAUxB,QAsBnCf,mBAAmB2C,iBAAmB,WAClC5B,KAAKO,aAAac,QAAUrB,KAAKa,GACjCR,SAASN,KAAKC,OAGlBf,mBAAmBqB,MAAQ,SAAUuB,MACjC7B,KAAKO,aAAaY,UAAYU,MAGlCb,SAASc,gBAAgB,aAAc,CACnCzC,UAAWJ,mBACX8C,QAAS","file":"emby-input.js","sourcesContent":["define(['layoutManager', 'browser', 'dom', 'css!./emby-input', 'webcomponents'], function (layoutManager, browser, dom) {\n    'use strict';\n\n    var EmbyInputPrototype = Object.create(HTMLInputElement.prototype);\n\n    var inputId = 0;\n    var supportsFloatingLabel = false;\n\n    if (Object.getOwnPropertyDescriptor && Object.defineProperty) {\n\n        var descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n\n        // descriptor returning null in webos\n        if (descriptor && descriptor.configurable) {\n            var baseSetMethod = descriptor.set;\n            descriptor.set = function (value) {\n                baseSetMethod.call(this, value);\n\n                this.dispatchEvent(new CustomEvent('valueset', {\n                    bubbles: false,\n                    cancelable: false\n                }));\n            };\n\n            Object.defineProperty(HTMLInputElement.prototype, 'value', descriptor);\n            supportsFloatingLabel = true;\n        }\n    }\n\n    EmbyInputPrototype.createdCallback = function () {\n        if (!this.id) {\n            this.id = 'embyinput' + inputId;\n            inputId++;\n        }\n\n        if (this.classList.contains('emby-input')) {\n            return;\n        }\n\n        this.classList.add('emby-input');\n\n        var parentNode = this.parentNode;\n        var document = this.ownerDocument;\n        var label = document.createElement('label');\n        label.innerHTML = this.getAttribute('label') || '';\n        label.classList.add('inputLabel');\n        label.classList.add('inputLabelUnfocused');\n\n        label.htmlFor = this.id;\n        parentNode.insertBefore(label, this);\n        this.labelElement = label;\n\n        dom.addEventListener(this, 'focus', function () {\n            onChange.call(this);\n\n            // For Samsung orsay devices\n            if (document.attachIME) {\n                document.attachIME(this);\n            }\n\n            label.classList.add('inputLabelFocused');\n            label.classList.remove('inputLabelUnfocused');\n        }, {\n            passive: true\n        });\n\n        dom.addEventListener(this, 'blur', function () {\n            onChange.call(this);\n            label.classList.remove('inputLabelFocused');\n            label.classList.add('inputLabelUnfocused');\n        }, {\n            passive: true\n        });\n\n        dom.addEventListener(this, 'change', onChange, {\n            passive: true\n        });\n        dom.addEventListener(this, 'input', onChange, {\n            passive: true\n        });\n        dom.addEventListener(this, 'valueset', onChange, {\n            passive: true\n        });\n\n        if (browser.orsay) {\n            if (this === document.activeElement) {\n                //Make sure the IME pops up if this is the first/default element on the page\n                if (document.attachIME) {\n                    document.attachIME(this);\n                }\n            }\n        }\n\n    };\n\n    function onChange() {\n\n        var label = this.labelElement;\n        if (this.value) {\n            label.classList.remove('inputLabel-float');\n        } else {\n\n            var instanceSupportsFloat = supportsFloatingLabel && this.type !== 'date' && this.type !== 'time';\n\n            if (instanceSupportsFloat) {\n                label.classList.add('inputLabel-float');\n            }\n        }\n    }\n\n    EmbyInputPrototype.attachedCallback = function () {\n        this.labelElement.htmlFor = this.id;\n        onChange.call(this);\n    };\n\n    EmbyInputPrototype.label = function (text) {\n        this.labelElement.innerHTML = text;\n    };\n\n    document.registerElement('emby-input', {\n        prototype: EmbyInputPrototype,\n        extends: 'input'\n    });\n});\n"]}