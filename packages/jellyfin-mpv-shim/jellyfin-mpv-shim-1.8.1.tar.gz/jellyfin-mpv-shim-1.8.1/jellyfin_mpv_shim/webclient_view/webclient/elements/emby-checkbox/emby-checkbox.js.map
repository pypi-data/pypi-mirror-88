{"version":3,"sources":["elements/emby-checkbox/emby-checkbox.js"],"names":["define","browser","dom","EmbyCheckboxPrototype","Object","create","HTMLInputElement","prototype","onKeyDown","e","keyCode","preventDefault","this","checked","dispatchEvent","CustomEvent","bubbles","enableRefreshHack","tizen","orsay","operaTv","web0s","forceRefresh","loading","elem","parentNode","style","webkitAnimationName","webkitAnimationDelay","webkitAnimationDuration","webkitAnimationIterationCount","setTimeout","attachedCallback","getAttribute","setAttribute","classList","add","labelElement","labelTextElement","querySelector","outlineClass","customClass","checkHtml","uncheckedHtml","insertAdjacentHTML","addEventListener","call","passive","detachedCallback","removeEventListener","document","registerElement","extends"],"mappings":"AAAA,aAAAA,OAAO,CAAC,UAAW,MAAO,sBAAuB,kBAAkB,SAAUC,QAASC,KAGlF,IAAIC,sBAAwBC,OAAOC,OAAOC,iBAAiBC,WAE3D,SAASC,UAAUC,GAGf,GAAkB,KAAdA,EAAEC,SAAgC,KAAdD,EAAEC,QAStB,OARAD,EAAEE,iBAEFC,KAAKC,SAAWD,KAAKC,QAErBD,KAAKE,cAAc,IAAIC,YAAY,SAAU,CACzCC,SAAS,MAGN,EAIf,IAAIC,qBAAoBhB,QAAQiB,OAASjB,QAAQkB,OAASlB,QAAQmB,SAAWnB,QAAQoB,OAErF,SAASC,aAAaC,SAClB,IAAIC,KAAOZ,KAAKa,WAEhBD,KAAKE,MAAMC,oBAAsB,gBACjCH,KAAKE,MAAME,sBAAoC,IAAZL,QAAmB,QAAU,GAChEC,KAAKE,MAAMG,wBAA0B,OACrCL,KAAKE,MAAMI,8BAAgC,IAE3CC,YAAW,WACPP,KAAKE,MAAMC,oBAAsB,MACrB,IAAZJ,QAAmB,IAAM,IAGjCpB,sBAAsB6B,iBAAmB,WACrC,GAA+C,SAA3CpB,KAAKqB,aAAa,qBAAtB,CAIArB,KAAKsB,aAAa,oBAAqB,QAEvCtB,KAAKuB,UAAUC,IAAI,iBAEnB,IAAIC,aAAezB,KAAKa,WACxBY,aAAaF,UAAUC,IAAI,uBAE3B,IAAIE,iBAAmBD,aAAaE,cAAc,QAE9CC,aAAe,kBAEfC,YAAc7B,KAAKqB,aAAa,qBAChCQ,cACAD,cAAgB,IAAMC,aAG1B,IAEIC,UAAY,kEAFE9B,KAAKqB,aAAa,qBAAuB,SAEsC,YAC7FU,cAAgB,oEAFA/B,KAAKqB,aAAa,uBAAyB,IAE0C,YACzGI,aAAaO,mBAAmB,YAAa,gBAAkBJ,aAAe,KAAOE,UAAYC,cAAgB,WAEjHL,iBAAiBH,UAAUC,IAAI,iBAE/BxB,KAAKiC,iBAAiB,UAAWrC,WAE7BS,oBACAK,aAAawB,KAAKlC,MAAM,GACxBV,IAAI2C,iBAAiBjC,KAAM,QAASU,aAAc,CAC9CyB,SAAS,IAEb7C,IAAI2C,iBAAiBjC,KAAM,OAAQU,aAAc,CAC7CyB,SAAS,IAEb7C,IAAI2C,iBAAiBjC,KAAM,QAASU,aAAc,CAC9CyB,SAAS,IAEb7C,IAAI2C,iBAAiBjC,KAAM,SAAUU,aAAc,CAC/CyB,SAAS,OAKrB5C,sBAAsB6C,iBAAmB,WACrCpC,KAAKqC,oBAAoB,UAAWzC,WAEpCN,IAAI+C,oBAAoBrC,KAAM,QAASU,aAAc,CACjDyB,SAAS,IAEb7C,IAAI+C,oBAAoBrC,KAAM,OAAQU,aAAc,CAChDyB,SAAS,IAEb7C,IAAI+C,oBAAoBrC,KAAM,QAASU,aAAc,CACjDyB,SAAS,IAEb7C,IAAI+C,oBAAoBrC,KAAM,SAAUU,aAAc,CAClDyB,SAAS,KAIjBG,SAASC,gBAAgB,gBAAiB,CACtC5C,UAAWJ,sBACXiD,QAAS","file":"emby-checkbox.js","sourcesContent":["define(['browser', 'dom', 'css!./emby-checkbox', 'webcomponents'], function (browser, dom) {\n    'use strict';\n\n    var EmbyCheckboxPrototype = Object.create(HTMLInputElement.prototype);\n\n    function onKeyDown(e) {\n        // Don't submit form on enter\n        // Real (non-emulator) Tizen does nothing on Space\n        if (e.keyCode === 13 || e.keyCode === 32) {\n            e.preventDefault();\n\n            this.checked = !this.checked;\n\n            this.dispatchEvent(new CustomEvent('change', {\n                bubbles: true\n            }));\n\n            return false;\n        }\n    }\n\n    var enableRefreshHack = browser.tizen || browser.orsay || browser.operaTv || browser.web0s ? true : false;\n\n    function forceRefresh(loading) {\n        var elem = this.parentNode;\n\n        elem.style.webkitAnimationName = 'repaintChrome';\n        elem.style.webkitAnimationDelay = (loading === true ? '500ms' : '');\n        elem.style.webkitAnimationDuration = '10ms';\n        elem.style.webkitAnimationIterationCount = '1';\n\n        setTimeout(function () {\n            elem.style.webkitAnimationName = '';\n        }, (loading === true ? 520 : 20));\n    }\n\n    EmbyCheckboxPrototype.attachedCallback = function () {\n        if (this.getAttribute('data-embycheckbox') === 'true') {\n            return;\n        }\n\n        this.setAttribute('data-embycheckbox', 'true');\n\n        this.classList.add('emby-checkbox');\n\n        var labelElement = this.parentNode;\n        labelElement.classList.add('emby-checkbox-label');\n\n        var labelTextElement = labelElement.querySelector('span');\n\n        var outlineClass = 'checkboxOutline';\n\n        var customClass = this.getAttribute('data-outlineclass');\n        if (customClass) {\n            outlineClass += ' ' + customClass;\n        }\n\n        var checkedIcon = this.getAttribute('data-checkedicon') || 'check';\n        var uncheckedIcon = this.getAttribute('data-uncheckedicon') || '';\n        var checkHtml = '<span class=\"material-icons checkboxIcon checkboxIcon-checked ' + checkedIcon + '\"></span>';\n        var uncheckedHtml = '<span class=\"material-icons checkboxIcon checkboxIcon-unchecked ' + uncheckedIcon + '\"></span>';\n        labelElement.insertAdjacentHTML('beforeend', '<span class=\"' + outlineClass + '\">' + checkHtml + uncheckedHtml + '</span>');\n\n        labelTextElement.classList.add('checkboxLabel');\n\n        this.addEventListener('keydown', onKeyDown);\n\n        if (enableRefreshHack) {\n            forceRefresh.call(this, true);\n            dom.addEventListener(this, 'click', forceRefresh, {\n                passive: true\n            });\n            dom.addEventListener(this, 'blur', forceRefresh, {\n                passive: true\n            });\n            dom.addEventListener(this, 'focus', forceRefresh, {\n                passive: true\n            });\n            dom.addEventListener(this, 'change', forceRefresh, {\n                passive: true\n            });\n        }\n    };\n\n    EmbyCheckboxPrototype.detachedCallback = function () {\n        this.removeEventListener('keydown', onKeyDown);\n\n        dom.removeEventListener(this, 'click', forceRefresh, {\n            passive: true\n        });\n        dom.removeEventListener(this, 'blur', forceRefresh, {\n            passive: true\n        });\n        dom.removeEventListener(this, 'focus', forceRefresh, {\n            passive: true\n        });\n        dom.removeEventListener(this, 'change', forceRefresh, {\n            passive: true\n        });\n    };\n\n    document.registerElement('emby-checkbox', {\n        prototype: EmbyCheckboxPrototype,\n        extends: 'input'\n    });\n});\n"]}