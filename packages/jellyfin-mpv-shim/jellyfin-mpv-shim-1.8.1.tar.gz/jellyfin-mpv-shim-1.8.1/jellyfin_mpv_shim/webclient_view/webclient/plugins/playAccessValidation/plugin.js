"use strict";define(["connectionManager","globalize"],(function(connectionManager,globalize){function showErrorMessage(){return function getRequirePromise(deps){return new Promise((function(resolve,reject){require(deps,resolve)}))}(["alert"]).then((function(alert){return alert(globalize.translate("MessagePlayAccessRestricted")).then((function(){return Promise.reject()}))}))}function PlayAccessValidation(){this.name="Playback validation",this.type="preplayintercept",this.id="playaccessvalidation",this.order=-2}return PlayAccessValidation.prototype.intercept=function(options){var item=options.item;if(!item)return Promise.resolve();var serverId=item.ServerId;return serverId?connectionManager.getApiClient(serverId).getCurrentUser().then((function(user){return user.Policy.EnableMediaPlayback?Promise.resolve():options.fullscreen?showErrorMessage():Promise.reject()})):Promise.resolve()},PlayAccessValidation}));
//# sourceMappingURL=plugin.js.map
